// PICKUP CODE----------------------------ITEMS!-------------------------------------------------

defstate GETITEMSETTINGS
ifn sprite[].yvel 0 { geta[].yvel YVELSAVED seta[].yvel 0 }
ifn sprite[].xvel 0 { geta[].xvel XVELSAVED seta[].xvel 0 }
ifn sprite[].zvel 0 { geta[].zvel ZVELSAVED seta[].zvel 0 }
seta[].cstat 0
ends

move ITEM_FORWARD 15 -5

gamevar drop_counter 0 1

defstate drop_tempweapon
	ife CURWEAP 0 
		{
		ifand GUNFIREMODE 512 xorvar GUNFIREMODE 512 
		ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
		ifand GUNFIREMODE 16384 
			{ 
			sizeat 42 36 xorvar GUNFIREMODE 16384
			ifmultiplayer nullop else set SCOPE 0
			}
		setp[].weapon_pos 10
		}
	getp[].ammo_amount 0 TEMP
	ife temp_weapon 1 { espawn MINISHRINKERSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 200
	ife temp_weapon 2 { espawn BARRETTRIFLESPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 300
	ife temp_weapon 3 { espawn SMGSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 75
	ife temp_weapon 4 { espawn BLOODSTAFFSPRITE setactorvar[RETURN].YVELSAVED TEMP }
	ife temp_weapon 5 { espawn LIZMANGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 75
	ife temp_weapon 6 { espawn PIGCOPGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 75
	ife temp_weapon 7 { espawn SKULLDUSTERSPRITE setactorvar[RETURN].YVELSAVED TEMP }
	ife temp_weapon 8 { espawn FLESHSQUIRTERSPRITE setactorvar[RETURN].YVELSAVED TEMP }
	ife temp_weapon 9 { espawn STYGIANGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP }
	ife temp_weapon 10 { espawn SAWNOFFSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 150
	ife temp_weapon 11 { espawn TOMMYGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 125
	ife temp_weapon 12 { espawn RIOTGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 150
	ife temp_weapon 13 { espawn CROSSBOWSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 50
	ife temp_weapon 14 { espawn MIAGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 150
	ife temp_weapon 15 { espawn LASERGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 100
	ife temp_weapon 16 { espawn TMISSILELSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 200
	ife temp_weapon 17 { spawn CHAINSAWSPRITE stopsound CHAINSAW_IDLE } // cost 50
	ife temp_weapon 18 { espawn FLAMETHROWERSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 150
	ife temp_weapon 19 spawn SWORDSPRITE // cost 50
	ife temp_weapon 20 { ife WEP0_BLOODY 1 spawn BLOODY_MOPSPRITE else spawn MOPSPRITE } // cost 1
	ife temp_weapon 21 { espawn FNFALSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 225
	ife temp_weapon 22 { espawn MP40SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 50
	ife temp_weapon 23 { espawn JPLASMASPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 100
	ife temp_weapon 24 { espawn LIZMANFGUNSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 125
	ife temp_weapon 25 { espawn M16SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 125
	ife temp_weapon 26 { espawn AK114SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 150
	ife temp_weapon 27 { espawn RIOTGUN_MINIGUN_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 400
	ife temp_weapon 28 { espawn NAILGUN_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 150
	ife temp_weapon 29 { espawn RIOTGUN_GRENADEL_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 400
	ife temp_weapon 30 { espawn DARTGUN_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 75
	ife temp_weapon 31 { espawn M60_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 250
	ife temp_weapon 32 { espawn ZMISSILELSPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 250
	ife temp_weapon 33 { espawn GOROHEADSPRITE setactorvar[RETURN].YVELSAVED TEMP ifrnd 128 sound GIB_LAND2 else sound GIB_LAND1 spawn 16368 } 
	ife temp_weapon 34 { espawn 16087 setactorvar[RETURN].YVELSAVED TEMP } // cost 400 
	ife temp_weapon 35 { espawn M960_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 100
	ife temp_weapon 36 spawn 12200
	ife temp_weapon 37 spawn 20101
	ife temp_weapon 38 { espawn 17980 setactorvar[RETURN].YVELSAVED TEMP ifrnd 128 sound GIB_LAND2 else sound GIB_LAND1 spawn 16368 } 
	ife temp_weapon 39 { espawn ZCHAINGUN_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 250
	ife temp_weapon 40 { espawn RAILGUN_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 300
	ife temp_weapon 41 { espawn AR65_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 200
	ife temp_weapon 42 { espawn HELL_NAILER_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 125
	ife temp_weapon 43 { espawn PROTO_SHRINKER_SPRITE setactorvar[RETURN].YVELSAVED TEMP } // cost 200
	set temp_weapon 0
	setp[].ammo_amount 0 0
ends


defstate ITEMSETTINGS
ifn XVELSAVED 0
	{
	ife CHARSELECT 0
		{
		ifand XVELSAVED 1 ifn CHAR 0 killit
		ifand XVELSAVED 2 ifn CHAR 1 killit
		ifand XVELSAVED 4 ifn CHAR 2 killit
		ifand XVELSAVED 8 ifn CHAR 3 killit
		ifand XVELSAVED 16 ifn CHAR 4 killit
		ifand XVELSAVED 32 ifn CHAR 5 killit
		ifand XVELSAVED 64 ifn CHAR 6 killit
		ifand XVELSAVED 128 ifn CHAR 7 killit
		ifand XVELSAVED 256 ifn CHAR 13 killit
		}
	}
ends

defstate RADIO_KEY_SOUNDS
ife CHAR 0 set playsound J_GOTKEY 
ife CHAR 1 set playsound Z_GOTKEY 
ife CHAR 2 set playsound M_GOTKEY 
ife CHAR 3 set playsound R_GOTKEY 
ife CHAR 4 set playsound S_GOTKEY 
ife CHAR 5 set playsound RN_GOTKEY 
ife CHAR 6 set playsound G_GOTKEY 
ife CHAR 7 set playsound MS_GOTKEY 
ife CHAR 13 set playsound MC_GOTKEY
	soundoncevar playsound
	ife FAKE_SHRUNK 1 setactorsoundpitch THISACTOR playsound 512 
ends


actor STEROIDS
seta[].mdflags 16
state ITEMSETTINGS

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk
      nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifpinventory GET_STEROIDS STEROID_AMOUNT
              ifcanseetarget
      {
        addinventory GET_STEROIDS STEROID_AMOUNT
		
				   setarray PICKED_UP_INVEN[2] 60
				   state PICKUP_DISPLAY
				   getactorvar[PLAYER_IDENTITY].CSTEROIDS PICKED_UP_TILE
				   set ITEM_AMOUNT 100
				   setp[].invdisptime 60
		
        ifspawnedby STEROIDS
          state getcode
        else
          state quikget
      }
enda

actor BOOTS
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk
      nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifpinventory GET_BOOTS BOOT_AMOUNT
              ifcanseetarget
      {
	  ife PERSONEL_RESEARCH[26] 2 // protector drone acid topic?
		  {
		  ife CHAR 7 addinventory GET_BOOTS 700 else
		  ife CHAR 2 addinventory GET_BOOTS 500 else
		  addinventory GET_BOOTS 300
		  }
	  else
		  {
		  ife CHAR 7 addinventory GET_BOOTS 600 else
		  ife CHAR 2 addinventory GET_BOOTS 400 else
		  addinventory GET_BOOTS BOOT_AMOUNT
		  }
		
				   setarray PICKED_UP_INVEN[7] 60
				   state PICKUP_DISPLAY
				   getactorvar[PLAYER_IDENTITY].CBOOTS PICKED_UP_TILE
				   set ITEM_AMOUNT -1
				   setp[].invdisptime 60
		
        ifspawnedby BOOTS
          state getcode
        else
          state quikget
      }
enda

useractor notenemy GHOST_GOGGLES
fall
   
ifaction 0 
	{ 
	sizeat 40 40 
	action ZERO 
	readarrayfromfile EQUIPMENT_FOUND 4011
	cstat 0 
	}
  
    ifp pshrunk
      nullop
  else
    ifp palive
      ifcount 6
        ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
			{
			  setarray HELMET_LOADOUT[CHAR] 4
			  addinventory GET_HEATS HEAT_AMOUNT
			  
					ife EQUIPMENT_FOUND[6] 0
						{
						userquote 3038
						setarray EQUIPMENT_FOUND[6] 1 
						writearraytofile EQUIPMENT_FOUND 4011
						globalsound FOUND_EQUIPMENT
						palfrom 20 60 60 60
						}
						   setarray PICKED_UP_INVEN[5] 60
						   state PICKUP_DISPLAY
						   set PICKED_UP_TILE GHOST_GOGGLES
						   set ITEM_AMOUNT 100
						   setp[].invdisptime 60
				  state quikget
			  }

enda

actor HEATSENSOR
seta[].mdflags 16
state ITEMSETTINGS

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk
      nullop
  else
    ifp palive
      ifcount 6
        ifpdistl RETRIEVEDISTANCE
          ifpinventory GET_HEATS HEAT_AMOUNT
            ifcanseetarget
      {
      addinventory GET_HEATS HEAT_AMOUNT
		
				   setarray PICKED_UP_INVEN[5] 60
				   state PICKUP_DISPLAY
				   getactorvar[PLAYER_IDENTITY].CNVG PICKED_UP_TILE
				   set ITEM_AMOUNT 100
				   setp[].invdisptime 60
		
        ifspawnedby HEATSENSOR
          state getcode
        else
          state quikget
      }
enda

useractor notenemy HEAVYARMOUR
seta[].mdflags 16
fall

state ITEMSETTINGS
sizeat 24 24

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
    ifp palive 
	 ifcount 6 
	  ifpdistl RETRIEVEDISTANCE 
	   ifl PARMOUR 200
        ifcanseetarget
		{
		set ARMOURTYPE 1
		
	    state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].C_HEAVY_ARMOUR PICKED_UP_TILE
		set ITEM_AMOUNT 200
		
        setp[].shield_amount 200 
        ifspawnedby HEAVYARMOUR state getcode
        else state quikget
		}
enda

actor SHIELD
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifl PARMOUR 100
              ifcanseetarget
      {
		ife CHEST_LOADOUT[CHAR] 4 // Spirit armour
			{
			ifl PARMOUR 50
			setp[].shield_amount 50
			ifl P_SPIRIT_ARMOUR 75 set P_SPIRIT_ARMOUR 75
			state PICKUP_DISPLAY
			getactorvar[PLAYER_IDENTITY].C_ARMOUR PICKED_UP_TILE
			set ITEM_AMOUNT 50
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 117
			set ITEM_AMOUNT 75
			}
			else
			{
          setp[].shield_amount 100
			state PICKUP_DISPLAY
			getactorvar[PLAYER_IDENTITY].C_ARMOUR PICKED_UP_TILE
			set ITEM_AMOUNT 100
			}

        ifspawnedby SHIELD
          state getcode
        else
          state quikget
      }
enda

actor AIRTANK
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifpinventory GET_SCUBA SCUBA_AMOUNT
              ifcanseetarget
      {
	  ife CHAR 0 addinventory GET_SCUBA 12800 else
        addinventory GET_SCUBA SCUBA_AMOUNT

				   setarray PICKED_UP_INVEN[6] 60
				   state PICKUP_DISPLAY
				   getactorvar[PLAYER_IDENTITY].CSCUBA PICKED_UP_TILE
				   set ITEM_AMOUNT 100
				   setp[].invdisptime 60
		
        ifspawnedby AIRTANK
          state getcode
        else
          state quikget
      }
enda

actor HOLODUKE 
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifpinventory GET_HOLODUKE HOLODUKE_AMOUNT
              ifcanseetarget
      {
	    ife CHAR 0 addinventory GET_HOLODUKE 900
		else
	    ife CHAR 4 addinventory GET_HOLODUKE 600
		else
	    ife CHAR 6 addinventory GET_HOLODUKE 300
		else
	    ife CHAR 9 addinventory GET_HOLODUKE 600
		else
        addinventory GET_HOLODUKE HOLODUKE_AMOUNT

				   setarray PICKED_UP_INVEN[3] 60
				   state PICKUP_DISPLAY
				   getactorvar[PLAYER_IDENTITY].CHOLODUKE PICKED_UP_TILE
				   
				   ife CHAR 2 set ITEM_AMOUNT -1 // Merlijn's shield
				   else ife CHAR 3 set ITEM_AMOUNT 2 // Highwire's radio
				   else ife CHAR 5 set ITEM_AMOUNT 3 // Rusty's belt
				   else ife CHAR 7 set ITEM_AMOUNT -1 // Mikko's backpack
				    else ife CHAR 13 set ITEM_AMOUNT -1 // Micky's turret
				   else set ITEM_AMOUNT 100
				   setp[].invdisptime 60
		
        ifspawnedby HOLODUKE
          state getcode
        else
          state quikget
      }

enda

actor JETPACK
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifpinventory GET_JETPACK JETPACK_AMOUNT
              ifcanseetarget
      {
	  ife PERSONEL_RESEARCH[28] 2
			{
			ife CHAR 14 addinventory GET_JETPACK 4000
			else addinventory GET_JETPACK 2400
			}
		else
			{
			ife CHAR 14 addinventory GET_JETPACK 3200
			else addinventory GET_JETPACK JETPACK_AMOUNT
			}		
			
		setarray PICKED_UP_INVEN[4] 60
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].CJETPACK PICKED_UP_TILE
		quote 88
		set ITEM_AMOUNT 100
		setp[].invdisptime 60
		
        ifspawnedby JETPACK
          state getcode
        else
          state quikget
      }
enda

actor ACCESSCARD
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {

        ifpinventory GET_ACCESS 0
          break
        addinventory GET_ACCESS 1

			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
				
        state getcode
		
      }
enda

useractor notenemy ACCESSCARD2
sizeat 28 28
  fall
  
ifaction 0
	{
	ifspritepal 0 cactor ACCESSCARD
	else ifspritepal 21 cactor ACCESSCARD
	else ifspritepal 23 cactor ACCESSCARD
	action ZERO
	}
  
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 12 { ifand ACCESSKEY2 1 break else add ACCESSKEY2 1 } else
        ifspritepal 11 { ifand ACCESSKEY2 2 break else add ACCESSKEY2 2 } else
        ifspritepal 15 { ifand ACCESSKEY2 4 break else add ACCESSKEY2 4 } else
        ifspritepal 49 { ifand ACCESSKEY2 8 break else add ACCESSKEY2 8 } else
        ifspritepal 10 { ifand ACCESSKEY2 16 break else add ACCESSKEY2 16 } else
        ifspritepal 36 { ifand ACCESSKEY2 32 break else add ACCESSKEY2 32 } else
		ifspritepal 16 { ifand ACCESSKEY2 64 break else add ACCESSKEY2 64 }
		
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
			
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
		
        state getcode
      }
enda

useractor notenemy 17031 // Floppy disk
sizeat 14 14
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 0 { ifand FLOPPY_DISK 1 break else add FLOPPY_DISK 1 } else
        ifspritepal 11 { ifand FLOPPY_DISK 2 break else add FLOPPY_DISK 2 } else
        ifspritepal 21 { ifand FLOPPY_DISK 4 break else add FLOPPY_DISK 4 } else
        ifspritepal 23 { ifand FLOPPY_DISK 8 break else add FLOPPY_DISK 8 } 
		
		palfrom 10 64 64 64
		set DISP_KEY -150
		set DISP_KEY_PAL 12
		set DISP_KEY_PIC sprite[].picnum
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
		
        state getcode
      }
enda

useractor notenemy SW_OLDKEY
sizeat 32 32
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 15 { ifand SW_KEYS 16 break else add SW_KEYS 16 } else
        ifspritepal 12 { ifand SW_KEYS 32 break else add SW_KEYS 32 } else
        ifspritepal 23 { ifand SW_KEYS 64 break else add SW_KEYS 64 addlogvar SW_KEYS } else // failsafe incase I forgot to change an old key somewhere
		ifspritepal 83 { ifand SW_KEYS 64 break else add SW_KEYS 64 } else
        ifspritepal 10 { ifand SW_KEYS 128 break else add SW_KEYS 128 } 
		
		palfrom 10 64 64 64
		set DISP_KEY -150
		set DISP_KEY_PAL sprite[].pal
		set DISP_KEY_PIC sprite[].picnum
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
		
        state getcode
      }
enda

useractor notenemy SW_TECHCARD
sizeat 28 28
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 0 { ifand SW_KEYS 1 break else add SW_KEYS 1 } else
        ifspritepal 10 { ifand SW_KEYS 2 break else add SW_KEYS 2 } else
        ifspritepal 11 { ifand SW_KEYS 4 break else add SW_KEYS 4 } else
        ifspritepal 23 { ifand SW_KEYS 8 break else add SW_KEYS 8 } 
		
		palfrom 10 64 64 64
		set DISP_KEY -150
		set DISP_KEY_PAL sprite[].pal
		set DISP_KEY_PIC sprite[].picnum
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
		
        state getcode
      }
enda

useractor notenemy BLUEPLUG
sizeat 28 28
  fall
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifand PLUGKEY 1 break else 
	  { 
		add PLUGKEY 1
		palfrom 10 64 64 64
		set DISP_KEY -150
		set DISP_KEY_PAL 0
		set DISP_KEY_PIC sprite[].picnum	
		state quikget
 		}
      }
enda

useractor notenemy REDPLUG
sizeat 28 28
  fall
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifand PLUGKEY 2 break else 
	  { 
		add PLUGKEY 2
		palfrom 10 64 64 64
		set DISP_KEY -150
		set DISP_KEY_PAL 21
		set DISP_KEY_PIC sprite[].picnum
		state quikget
 		}
      }
enda

useractor notenemy YELLOWPLUG
sizeat 28 28
  fall
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifand PLUGKEY 4 break else 
	  { 
		add PLUGKEY 4
		palfrom 10 64 64 64
		set DISP_KEY -150
		set DISP_KEY_PAL 23
		set DISP_KEY_PIC sprite[].picnum
		state quikget
 		}
      }
enda

// ===============================================================HELL GATE KEYS=========================================

defstate HELLGKEYP
ifspritepal 3 break else 
ifspritepal 8 break else
ifspritepal 27
	{
		ifactor BLOODCHALICE
			{
	        	ifand HELLGKEYS 1
				{
				spritepal 8
				seta[].shade -127
				}
				else 
		  		{ 
				spritepal 27
				seta[].shade 15
	 			}
			}
		ifactor SOULBOX
			{
	        	ifand HELLGKEYS 2 
				{
				spritepal 8
				seta[].shade -127
				}
				else 
		  		{ 
				spritepal 27
				seta[].shade 15
	 			}
			}
		ifactor SKULLCROWN
			{
	        	ifand HELLGKEYS 4
				{
				spritepal 8
				seta[].shade -127
				}
				else 
		  		{ 
				spritepal 27
				seta[].shade 15
	 			}
			}
		ifactor DARKBOOK
			{
	        	ifand HELLGKEYS 8
				{
				spritepal 8
				seta[].shade -127
				}
				else 
		  		{ 
				spritepal 27
				seta[].shade 15
	 			}
			}
		ifactor BROKENTORCH
			{
	        	ifand HELLGKEYS 16 
				{
				spritepal 8
				seta[].shade -127
				}
				else 
		  		{ 
				spritepal 27
				seta[].shade 15
	 			}
			}
	}
else
	{
	
	ifrnd 1 spawn GLINT
	
	sizeat 32 32
	  fall
	    ifp pshrunk nullop
	    else
	      ifp palive
	        ifpdistl RETRIEVEDISTANCE
	          ifcount 6
	            ifcanseetarget
	      {
		ifactor BLOODCHALICE
			{
	        	ifand HELLGKEYS 1 break else 
		  		{ 
				add HELLGKEYS 1
				palfrom 10 64 64 64
				set DISP_KEY -150
				set DISP_KEY_PAL 12
				set DISP_KEY_PIC sprite[].picnum
				state quikget
	 			}
			}
		ifactor SOULBOX
			{
	        	ifand HELLGKEYS 2 break else 
		  		{ 
				add HELLGKEYS 2
				palfrom 10 64 64 64
				set DISP_KEY -150
				set DISP_KEY_PAL 12
				set DISP_KEY_PIC sprite[].picnum
				state quikget
	 			}
			}
		ifactor SKULLCROWN
			{
	        	ifand HELLGKEYS 4 break else 
		  		{ 
				add HELLGKEYS 4
				palfrom 10 64 64 64
				set DISP_KEY -150
				set DISP_KEY_PAL 12
				set DISP_KEY_PIC sprite[].picnum
				state quikget
	 			}
			}
		ifactor DARKBOOK
			{
	        	ifand HELLGKEYS 8 break else 
		  		{ 
				add HELLGKEYS 8
				palfrom 10 64 64 64
				set DISP_KEY -150
				set DISP_KEY_PAL 12
				set DISP_KEY_PIC sprite[].picnum
				state quikget
	 			}
			}
		ifactor BROKENTORCH
			{
	        	ifand HELLGKEYS 16 break else 
		  		{ 
				add HELLGKEYS 16
				palfrom 10 64 64 64
				set DISP_KEY -150
				set DISP_KEY_PAL 12
				set DISP_KEY_PIC sprite[].picnum
				state quikget
	 			}
			}
	      }
	}
ends


spritenopal BLOODCHALICE
spritenopal SOULBOX
spritenopal SKULLCROWN
spritenopal DARKBOOK
spritenopal BROKENTORCH


useractor notenemy BLOODCHALICE state HELLGKEYP enda
useractor notenemy SOULBOX state HELLGKEYP enda
useractor notenemy SKULLCROWN state HELLGKEYP enda
useractor notenemy DARKBOOK state HELLGKEYP enda
useractor notenemy BROKENTORCH state HELLGKEYP enda


defstate OLDKEYSTATE
ifspritepal 0
{

ifaction 0
	{
	cstat 0
	sizeat 32 32
	seta[].mdflags 16
	set command 256
	action ZERO
	}

ifrnd 1 spawn GLINT

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifactor FLAMEKEY { ifand OLDKEYS 1 break else { add OLDKEYS 1 } } else
        ifactor SPIDERKEY { ifand OLDKEYS 2 break else { add OLDKEYS 2 } } else
        ifactor DAGGERKEY { ifand OLDKEYS 4 break else { add OLDKEYS 4 } } else
        ifactor MOONKEY { ifand OLDKEYS 8 break else { add OLDKEYS 8 } } else
        ifactor SKULLKEY { ifand OLDKEYS 16 break else { add OLDKEYS 16 } } else
		ifactor EYEKEY { ifand OLDKEYS 32 break else { add OLDKEYS 32 } } else
		ifactor NORMAL_KEY1 { ifand NORMAL_KEYS 1 break else { add NORMAL_KEYS 1 } } else
		ifactor NORMAL_KEY2 { ifand NORMAL_KEYS 2 break else { add NORMAL_KEYS 2 } } else
		ifactor NORMAL_KEY3 { ifand NORMAL_KEYS 4 break else { add NORMAL_KEYS 4 } } else
		ifactor NORMAL_KEY4 { ifand NORMAL_KEYS 8 break else { add NORMAL_KEYS 8 } } else
		ifactor NORMAL_KEY5 { ifand NORMAL_KEYS 16 break else { add NORMAL_KEYS 16 } }
		
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 15
			set DISP_KEY_PIC sprite[].picnum
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
		
        state getcode
      }
}
ends

useractor notenemy FLAMEKEY state OLDKEYSTATE enda
useractor notenemy SPIDERKEY state OLDKEYSTATE enda
useractor notenemy DAGGERKEY state OLDKEYSTATE enda
useractor notenemy MOONKEY state OLDKEYSTATE enda
useractor notenemy SKULLKEY state OLDKEYSTATE enda
useractor notenemy EYEKEY state OLDKEYSTATE enda

useractor notenemy NORMAL_KEY1 state OLDKEYSTATE enda
useractor notenemy NORMAL_KEY2 state OLDKEYSTATE enda
useractor notenemy NORMAL_KEY3 state OLDKEYSTATE enda
useractor notenemy NORMAL_KEY4 state OLDKEYSTATE enda
useractor notenemy NORMAL_KEY5 state OLDKEYSTATE enda

useractor notenemy RUNEKEY
sizeat 28 28
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 0 { ifand RUNEKEYS 1 break else xorvar RUNEKEYS 1 } else
        ifspritepal 21 { ifand RUNEKEYS 2 break else xorvar RUNEKEYS 2 } else
        ifspritepal 23 { ifand RUNEKEYS 4 break else xorvar RUNEKEYS 4 } else
        ifspritepal 12 { ifand RUNEKEYS 8 break else xorvar RUNEKEYS 8 } else
        ifspritepal 11 { ifand RUNEKEYS 16 break else xorvar RUNEKEYS 16 } else
        ifspritepal 49 { ifand RUNEKEYS 32 break else xorvar RUNEKEYS 32 }
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}

			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
		
        state getcode
		
      }
enda

// BLUE = Egypt Loke 1
// RED = Egypt Loke 2
// YELLOW = James Catacombs
// GREEN = James Catacombs
// PURPLE = James Catacombs
// LIGHT BLUE = Micky SS
// BROWN = Micky SS
// ORANGE = Egypt loke 3

// Grey = 

spritenopal SCARABKEY

useractor notenemy SCARABKEY
sizeat 16 16

ifaction 0
{
seta[].mdflags 16
 set command 32768
}


  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 0 { ifand SCARABKEYS 1 break else xorvar SCARABKEYS 1 } else
        ifspritepal 21 { ifand SCARABKEYS 2 break else xorvar SCARABKEYS 2 } else
        ifspritepal 23 { ifand SCARABKEYS 4 break else xorvar SCARABKEYS 4 } else
        ifspritepal 11 { ifand SCARABKEYS 8 break else xorvar SCARABKEYS 8 } else
        ifspritepal 49 { ifand SCARABKEYS 16 break else xorvar SCARABKEYS 16 } else
        ifspritepal 35 { ifand SCARABKEYS 32 break else xorvar SCARABKEYS 32 } else
        ifspritepal 15 { ifand SCARABKEYS 64 break else xorvar SCARABKEYS 64 } else
        ifspritepal 37 { ifand SCARABKEYS 128 break else xorvar SCARABKEYS 128 } else
        ifspritepal 12 { ifand SCARABKEYS 256 break else xorvar SCARABKEYS 256 }
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
				
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
			
        state getcode
		
      }
enda

spriteshadow SWIPE_CARD

useractor notenemy SWIPE_CARD
sizeat 22 22
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifvarn SWIPECARDS 64
      {
        ifspritepal 0 { ifand SWIPECARDS 1 break else xorvar SWIPECARDS 1 } else
        ifspritepal 21 { ifand SWIPECARDS 2 break else xorvar SWIPECARDS 2 } else
        ifspritepal 23 { ifand SWIPECARDS 4 break else xorvar SWIPECARDS 4 } else
        ifspritepal 12 { ifand SWIPECARDS 8 break else xorvar SWIPECARDS 8 } else
        ifspritepal 11 { ifand SWIPECARDS 16 break else xorvar SWIPECARDS 16 } else
        ifspritepal 49 { ifand SWIPECARDS 32 break else xorvar SWIPECARDS 32 } else
		ifspritepal 15 { ifand SWIPECARDS 128 break else xorvar SWIPECARDS 128 }
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}

			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
		
        state getcode
		
      }
enda

spriteshadow SWIPE_MASTER

useractor notenemy SWIPE_MASTER
sizeat 22 22
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        setvar SWIPECARDS 64
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}

			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
		
        state getcode
		
      }
enda

useractor notenemy 21232

ifaction 0
{
ife HITAGSAVED 1 cstat 32768
action FORM
}

ife HITAGSAVED 1
	{
		ifp palive
	     ifpdistl 2048
		  {
		  set player_use 0
		   ifhitspace
		      {
			  sound PUT_ON_EQUIP
			 ifaction ZERO break
			 ifn LOTAGSAVED 0
					{
					operateactivators LOTAGSAVED THISACTOR
					operaterespawns LOTAGSAVED
					operatemasterswitches LOTAGSAVED
					}
			   cstat 0
			   action ZERO
			   }
		  }
	
	}
else
	{
		ifp pshrunk nullop
		else
		  ifp palive
			ifpdistl 1024
		  {
			  ifn LOTAGSAVED 0
					{
					operateactivators LOTAGSAVED THISACTOR
					operaterespawns LOTAGSAVED
					operatemasterswitches LOTAGSAVED
					}
				set DISP_KEY -150
				set DISP_KEY_PAL sprite[].pal
				set DISP_KEY_PIC sprite[].picnum
				state getcode
		  }
	}
enda

useractor notenemy ABYSS_KEY
sizeat 32 32

ifaction 0
	{
	seta[].mdflags 16
	 set command 32768
	}

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifspritepal 0 { ifand ABYSS_KEYS 1 break else xorvar ABYSS_KEYS 1 } else
        ifspritepal 21 { ifand ABYSS_KEYS 2 break else xorvar ABYSS_KEYS 2 } else
        ifspritepal 23 { ifand ABYSS_KEYS 4 break else xorvar ABYSS_KEYS 4 } else
        ifspritepal 11 { ifand ABYSS_KEYS 8 break else xorvar ABYSS_KEYS 8 } else
        ifspritepal 49 { ifand ABYSS_KEYS 16 break else xorvar ABYSS_KEYS 16 }

			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL sprite[].pal
			set DISP_KEY_PIC sprite[].picnum
		
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
				
        state getcode
		
      }
enda

actor AMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
      {
	  
		ife CHAR 2 add MERLIJNSHIELD 5 else
		{
		getp[].ammo_amount 1 TEMP
		getp[].max_ammo_amount 1 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[1]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[1]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 1 TEMP
		}
	
		setarray PICKED_UP_GUN[1] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W1_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[1]
		
		
        ifspawnedby AMMO
          state getcode
        else
          state quikget
      }
enda

actor FREEZEAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
      {
	  
		ife CHAR 2 add MERLIJNSHIELD 20 else
		{
		getp[].ammo_amount 9 TEMP
		getp[].max_ammo_amount 9 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[9]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[9]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 9 TEMP
		}
		
		setarray PICKED_UP_GUN[9] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W9_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[9]
		
        ifspawnedby FREEZEAMMO
          state getcode
        else
          state quikget
      }
enda

actor SHOTGUNAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
      {
		ife CHAR 2 add MERLIJNSHIELD 10 else
		{
		getp[].ammo_amount 2 TEMP
		getp[].max_ammo_amount 2 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[2]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[2]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 2 TEMP
		}
		
		setarray PICKED_UP_GUN[2] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W2_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[2]
		
        ifspawnedby SHOTGUNAMMO
          state getcode
        else
          state quikget
      }
enda

actor AMMOLOTS
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifcount 6
          ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
      {
		ife CHAR 2 add MERLIJNSHIELD 5 else
		{
		getp[].ammo_amount 1 TEMP
		getp[].max_ammo_amount 1 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[1]
		ifg TEMP TEMP2 set TEMP TEMP2
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[1]
		setp[].ammo_amount 1 TEMP
		}
		setarray PICKED_UP_GUN[1] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		set PICKED_UP_TILE W1_AMMO_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[1]
		
        ifspawnedby AMMOLOTS
          state getcode
        else
          state quikget
      }
enda

useractor notenemy CRYSTALAMMO
seta[].mdflags 16

state ITEMSETTINGS
sizeat 32 32

ifaction 0 { seta[].shade -127 spriteflags 68 }
ifspritepal 0 nullop else { ifmultiplayer nullop else killit }

  fall
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	  ife CHAR 9 break
	  ife CHAR 11 break
	  ife CHAR 12 break

		getp[].ammo_amount 6 TEMP
		getp[].max_ammo_amount 6 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[6]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[6]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 6 TEMP
	   		
		setarray PICKED_UP_GUN[6] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W6_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[6]
	   
        ifspawnedby CRYSTALAMMO
          state getcode
        else
          state quikget
      }
enda

actor GROWAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	  ife CHAR 9 break
	  ife CHAR 11 break
	  ife CHAR 12 break
	  
	  ifand WEAPON_SPECIAL[6] 512 // no expander variant, give the player shrinker ammo instead
		{
		getp[].ammo_amount 6 TEMP
		getp[].max_ammo_amount 6 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[6]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[6]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 6 TEMP
		
		setarray PICKED_UP_GUN[6] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W6_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[6]		
		}
		else
		{
		getp[].ammo_amount 11 TEMP
		getp[].max_ammo_amount 11 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[11]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 11 TEMP
		
		setarray PICKED_UP_GUN[6] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W11_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[11]		
		}
		
        ifspawnedby GROWAMMO
          state getcode
        else
          state quikget
      }
enda

actor BATTERYAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	  
		ife CHAR 2 add MERLIJNSHIELD 15 else
		{
		getp[].ammo_amount 3 TEMP
		getp[].max_ammo_amount 3 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[3]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[3]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 3 TEMP
		}
		
		
		setarray PICKED_UP_GUN[3] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W3_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[3]
		
        ifspawnedby BATTERYAMMO
          state getcode
        else
          state quikget
      }
enda

actor DEVISTATORAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	 
		getp[].ammo_amount 7 TEMP4
		getp[].max_ammo_amount 7 TEMP5
		ife TEMP4 TEMP5 break
		add TEMP4 AMMO_AMOUNT[7]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[7]
		ifg TEMP4 TEMP5 set TEMP4 TEMP5
		setp[].ammo_amount 7 TEMP4
		
		setarray PICKED_UP_GUN[7] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W7_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[7]
		
        ifspawnedby DEVISTATORAMMO
          state getcode
        else
          state quikget
      }
enda

actor RPGAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else ifp palive
      ifpdistl RETRIEVEDISTANCE
        ifcount 6
          ifcanseetarget
      {
	  ife CHAR 9 break
	  
		getp[].ammo_amount 4 TEMP
		getp[].max_ammo_amount 4 TEMP2
		ife TEMP TEMP2 break
		add TEMP AMMO_AMOUNT[4]
		ife SKILL_LEVEL 1 add TEMP AMMO_AMOUNT[4]
		ifg TEMP TEMP2 set TEMP TEMP2
		setp[].ammo_amount 4 TEMP
		
		setarray PICKED_UP_GUN[4] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W4_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[4]
		
        ifspawnedby RPGAMMO
          state getcode
        else
          state quikget
      }
enda

actor HBOMBAMMO
seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifgotweaponce 0
          break

        addweapon HANDBOMB_WEAPON HANDBOMBBOX
		
		setarray PICKED_UP_GUN[5] 30
		  set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].W5_AMMO_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[5]

        ifspawnedby HBOMBAMMO
          state getweaponcode
        else
          state quikweaponget
      }
enda

// PIPEBOMB REPLACEMENT

useractor notenemy 3689
  seta[].mdflags 16
state ITEMSETTINGS
cstat 256
fall

ifaction ZERO sizeat 12 12 else
sizeat 32 32

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
  ifp pshrunk nullop
  else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			addweapon HANDBOMB_WEAPON 1
			getp[].curr_weapon TEMP 
			
			setarray PICKED_UP_GUN[5] 30
			  set WEAP_SHOW 130
			 
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON5_TILE PICKED_UP_TILE
		set ITEM_AMOUNT 1
		
			
        ifspawnedby 3689
          state getcode
        else
          state quikget
			}


ifhitweapon
{
spawn EXPLOSION2
globalsound PIPEBOMB_EXPLODE
hitradius PIPEBOMBRADIUS 80 90 100 HANDBOMB_WEAPON_STRENGTH
killit
}

enda

actor RPGSPRITE
  seta[].mdflags 16
state ITEMSETTINGS

fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	  ife CHAR 9 break
	  ife CHAR 11 break
	  ife CHAR 12 break
	  
        ifgotweaponce 0
          break

        ife CHAR 2 addweapon RPG_WEAPON 10 else 
		ife CHAR 1 
			{
			ife SPECIALIST_EQUIPMENT[75] 2 addweapon RPG_WEAPON 3
			else addweapon RPG_WEAPON RPGAMMOBOX 
			}
		else addweapon RPG_WEAPON RPGAMMOBOX 
		setarray PICKED_UP_GUN[4] 30
		  set WEAP_SHOW 130
		state PICKUP_DISPLAY
getactorvar[PLAYER_IDENTITY].WEAPON4_TILE PICKED_UP_TILE
		set ITEM_AMOUNT AMMO_AMOUNT[4]
		
        ifspawnedby RPGSPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda

actor SHOTGUNSPRITE
  seta[].mdflags 16
state ITEMSETTINGS
fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {

	 ife CHAR 13
	  ife SPECIALIST_EQUIPMENT[58] 2 // picking up the akimbo shotguns?
		{
		getp[].gotweapon 2 TEMP
		ifn TEMP 0 set PLAYER_VOICEOVER 44
		ife CURWEAP 2 { ifand GUNSAKIMBO 8 nullop else { xorvar GUNFIREMODE_2 64 setp[].weapon_pos 10 } }
			ife TEMP 1 { ifand GUNSAKIMBO 8 nullop else xorvar GUNSAKIMBO 8 }	
		}  
		
	 ife CHAR 14
		{
		getp[].gotweapon 2 TEMP
		ife CURWEAP 2 { ifand GUNSAKIMBO 8 nullop else { xorvar GUNFIREMODE_2 64 setp[].weapon_pos 10 } }
			ife TEMP 1 { ifand GUNSAKIMBO 8 nullop else xorvar GUNSAKIMBO 8 }	
		}  
	  
          ifgotweaponce 0
            break
          ife CHAR 1 addweapon SHOTGUN_WEAPON 5 else 
		  ife CHAR 6 addweapon SHOTGUN_WEAPON 6 else 
		  addweapon SHOTGUN_WEAPON SHOTGUNAMMOAMOUNT
		  
		setarray PICKED_UP_GUN[2] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON2_TILE PICKED_UP_TILE
		set ITEM_AMOUNT 10
        ifspawnedby SHOTGUNSPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda



// ***********************************************************************************************************************************
// TEMP WEAPONS===============================================================================================================


// TEMP SHRINKER PICKUP

useractor notenemy MINISHRINKERSPRITE
sizeat 24 24
state ITEMSETTINGS
fall

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[1] 1 nullop else killit
	set ZVELSAVED 0
}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife temp_weapon 0
			  {
				set temp_weapon 1
				ife WEAPONS_FOUND[1] 0 { setarray WEAPONS_FOUND[1] 1 writearraytofile WEAPONS_FOUND 4007 }
				setp[].ammo_amount 0 YVELSAVED
				
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				setarray PICKED_UP_INVEN[1] 60
				set PICKED_UP_TILE MINISHRINKERSPRITE
				set ITEM_AMOUNT YVELSAVED
				
				state quikweaponget
				
			  }
			  else
			 ifn temp_weapon 1
					{
					set player_swap 0
					set swap_tile MINISHRINKERSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
			}
enda

spriteshadow PROTO_SHRINKER_SPRITE

useractor notenemy PROTO_SHRINKER_SPRITE
sizeat 40 40
fall

ife TEMP9 0 { ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife temp_weapon 0
			  {
				set temp_weapon 43
				setp[].ammo_amount 0 YVELSAVED
				
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				setarray PICKED_UP_INVEN[1] 60
				set PICKED_UP_TILE PROTO_SHRINKER_SPRITE
				set ITEM_AMOUNT YVELSAVED
				
				state quikweaponget
				
			  }
			  else
			 ifn temp_weapon 43
					{
					set player_swap 0
					set swap_tile PROTO_SHRINKER_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
			}
enda


// TEMP BARRET PICKUP

useractor notenemy BARRETTRIFLESPRITE
sizeat 22 22
state ITEMSETTINGS
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[2] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				  {
					set temp_weapon 2
					ife WEAPONS_FOUND[2] 0 { setarray WEAPONS_FOUND[2] 1 writearraytofile WEAPONS_FOUND 4007 }
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE BARRETTRIFLESPRITE
					set ITEM_AMOUNT YVELSAVED
					state quikweaponget
				  }
				else
				ifn temp_weapon 2
						{
						set player_swap 0
						set swap_tile BARRETTRIFLESPRITE
							ifhitspace
							{
							add drop_counter 2
								ifg drop_counter 14
								{
								set player_swap 26
								state drop_tempweapon
								soundonce ENDSEQVOL2SND1
								set drop_counter 0
								}
							}
						}
			}
enda

// TEMP SMG PICKUP

useractor notenemy SMGSPRITE
sizeat 22 22
state ITEMSETTINGS
fall

ifspritepal 3 nullop else set command 256

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[3] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ifaction 0
{
geta[].mdflags TEMP
orvar TEMP 16
seta[].mdflags TEMP 

action FORM
}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction FORM
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				  {
					set temp_weapon 3
					ife WEAPONS_FOUND[3] 0 { setarray WEAPONS_FOUND[3] 1 writearraytofile WEAPONS_FOUND 4007 }
					setp[].ammo_amount 0 YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE SMGSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					state quikweaponget
				  }
			else
			ifn temp_weapon 3
				{
				set player_swap 0
				set swap_tile SMGSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP BLOODSTAFF PICKUP

useractor notenemy BLOODSTAFFSPRITE

ifaction 0
{
sizeat 24 24
fall
}

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[4] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 200 set TEMP9 1 }

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				  {
					set temp_weapon 4
					ife WEAPONS_FOUND[4] 0 { setarray WEAPONS_FOUND[4] 1 writearraytofile WEAPONS_FOUND 4007 }
					setp[].ammo_amount 0 YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE BLOODSTAFFSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					state quikweaponget
				  }
			else
			ifn temp_weapon 4
				{
				set player_swap 0
				set swap_tile BLOODSTAFFSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			else ife temp_weapon 4
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 616 set TEMP 616
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE BLOODSTAFFSPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			}
enda

// TEMP LIZMAN GUN PICKUP

useractor notenemy LIZMANGUNSPRITE
sizeat 26 26
fall
state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[5] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[5] 0 { setarray WEAPONS_FOUND[5] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 5
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE LIZMANGUNSPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
			else ife temp_weapon 5
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 200 set TEMP 200
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE LIZMANGUNSPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 5
				{
				set player_swap 0
				set swap_tile LIZMANGUNSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP zombie man GUN PICKUP

spriteshadow ZCHAINGUN_SPRITE

useractor notenemy ZCHAINGUN_SPRITE
sizeat 24 24
fall
state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[39] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[39] 0 { setarray WEAPONS_FOUND[39] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 39
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE ZCHAINGUN_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
			else ife temp_weapon 39
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 300 set TEMP 300
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE ZCHAINGUN_SPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 39
				{
				set player_swap 0
				set swap_tile ZCHAINGUN_SPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP RAILGUN PICKUP

spriteshadow RAILGUN_SPRITE

useractor notenemy RAILGUN_SPRITE
sizeat 40 40
fall
state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[40] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 15 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[40] 0 { setarray WEAPONS_FOUND[40] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 40
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE RAILGUN_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
			else ife temp_weapon 40
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 30 set TEMP 30
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE RAILGUN_SPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 40
				{
				set player_swap 0
				set swap_tile RAILGUN_SPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP AR65 PICKUP


spriteshadow AR65_SPRITE

useractor notenemy AR65_SPRITE
sizeat 26 26
fall
state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[41] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 60 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[41] 0 { setarray WEAPONS_FOUND[41] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 41
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE AR65_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
			else ife temp_weapon 41
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 300 set TEMP 300
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE AR65_SPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 41
				{
				set player_swap 0
				set swap_tile AR65_SPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP HELL NAILER PICKUP

spriteshadow HELL_NAILER_SPRITE

useractor notenemy HELL_NAILER_SPRITE
sizeat 54 54
fall
state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[42] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 200 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[42] 0 { setarray WEAPONS_FOUND[42] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 42
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE HELL_NAILER_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
			else ife temp_weapon 42
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 616 set TEMP 616
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE HELL_NAILER_SPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 42
				{
				set player_swap 0
				set swap_tile HELL_NAILER_SPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP PIG COP GUN PICKUP

useractor notenemy PIGCOPGUNSPRITE
sizeat 26 26
fall

ifspritepal 9 action ONE

state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[6] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 5 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ifaction ZERO break
			ife WEAPONS_FOUND[6] 0 { setarray WEAPONS_FOUND[6] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
		      {
				globalsound SHOTGUN_COCK2
				set temp_weapon 6
				setp[].ammo_amount 0 YVELSAVED
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE PIGCOPGUNSPRITE
				set ITEM_AMOUNT YVELSAVED
		        state quikweaponget
		      }
			else
			ifn temp_weapon 6
			{
			set player_swap 0
			set swap_tile PIGCOPGUNSPRITE
				ifhitspace
				{
				add drop_counter 2
					ifg drop_counter 14
					{
					userquote 516
					set player_swap 26
					state drop_tempweapon
					soundonce ENDSEQVOL2SND1
					set drop_counter 0
					}
				}
			}
		else
		 ife temp_weapon 6
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 24 set TEMP 24
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE PIGCOPGUNSPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			}
enda

// TEMP SKULL DUSTER PICKUP

useractor notenemy SKULLDUSTERSPRITE

ifaction 0
{
sizeat 24 24
fall
}


state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[7] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 200 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				  {
					set temp_weapon 7
					ife WEAPONS_FOUND[7] 0 { setarray WEAPONS_FOUND[7] 1 writearraytofile WEAPONS_FOUND 4007 }
					setp[].ammo_amount 0 YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE SKULLDUSTERSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					state quikweaponget
				  }
			else ife temp_weapon 7
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 616 set TEMP 616
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE SKULLDUSTERSPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 7
				{
				set player_swap 0
				set swap_tile SKULLDUSTERSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP FLESH SQUIRTER PICKUP

useractor notenemy FLESHSQUIRTERSPRITE

ifaction 0
{
sizeat 24 24
fall
}

state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[8] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 100 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				  {
					set temp_weapon 8
					ife WEAPONS_FOUND[8] 0 { setarray WEAPONS_FOUND[8] 1 writearraytofile WEAPONS_FOUND 4007 }
					setp[].ammo_amount 0 YVELSAVED
						
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE FLESHSQUIRTERSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					state quikweaponget
				  }
			else ife temp_weapon 8
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 616 set TEMP 616
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE FLESHSQUIRTERSPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
			ifn temp_weapon 8
				{
				set player_swap 0
				set swap_tile FLESHSQUIRTERSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP STYGIAN WARCANNON PICKUP

useractor notenemy STYGIANGUNSPRITE

ifaction 0
{
sizeat 26 26
fall
}

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[9] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 75 set TEMP9 1 }

state ITEMSETTINGS

ifaction ZERO ifpdistg RETRIEVEDISTANCE action 0

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				  {
					set temp_weapon 9
					ife WEAPONS_FOUND[9] 0 { setarray WEAPONS_FOUND[9] 1 writearraytofile WEAPONS_FOUND 4007 }
					setp[].ammo_amount 0 YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE STYGIANGUNSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					state quikweaponget
				  }
			else ife temp_weapon 9
				{
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 616 set TEMP 616
				setp[].ammo_amount 0 TEMP
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE STYGIANGUNSPRITE
				set ITEM_AMOUNT YVELSAVED
				state quikweaponget
				}
			else
				ifn temp_weapon 9
				{
				set player_swap 0
				set swap_tile STYGIANGUNSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP SAWNOFF PICKUP

useractor notenemy SAWNOFFSPRITE
sizeat 26 26
fall

ifspritepal 3 nullop else set command 256

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[10] 1 nullop else killit
	set ZVELSAVED 0
}

ifaction 0
{
geta[].mdflags TEMP
orvar TEMP 16
seta[].mdflags TEMP 

action FORM
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
ifp pshrunk nullop 
	else
	ifaction FORM
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[10] 0 { setarray WEAPONS_FOUND[10] 1 writearraytofile WEAPONS_FOUND 4007 }
			ife CHAR 9
			{
			  addweapon SHOTGUN_WEAPON SHOTGUNAMMOAMOUNT
			  state quikweaponget
			}
			else
			 ife temp_weapon 0
			      {
				    set TEMP_WEAPON_MAG 2
				    sound GET_GUN
					set temp_weapon 10
					setp[].ammo_amount 0 YVELSAVED
					setp[].weapon_pos 10
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE SAWNOFFSPRITE
					set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
			else
			ifn temp_weapon 10
			{
			set player_swap 0
			set swap_tile SAWNOFFSPRITE
				ifhitspace
				{
				add drop_counter 2
					ifg drop_counter 14
					{
					userquote 516
					set player_swap 26
					setp[].weapon_pos 10
					state drop_tempweapon
					soundonce ENDSEQVOL2SND1
					set drop_counter 0
					}
				}
			}
			else
			ife temp_weapon 10
		      {
			    sound GET_GUN
				getp[].ammo_amount 0 TEMP
				add TEMP YVELSAVED
				ifg TEMP 100 set TEMP 100
				setp[].ammo_amount 0 TEMP
				
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE SAWNOFFSPRITE
				set ITEM_AMOUNT YVELSAVED
				
		        state quikweaponget
		      }
			 }
enda

// TEMP TOMMYGUN PICKUP


useractor notenemy TOMMYGUNSPRITE
sizeat 26 26
fall

ifspritepal 3 nullop else set command 256

state ITEMSETTINGS

ifn ZVELSAVED 0
{
	ife WEAPONS_FOUND[11] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ifaction 0
	{
	seta[].mdflags 16 
	action FORM
	}

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction FORM
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[11] 0 { setarray WEAPONS_FOUND[11] 1 writearraytofile WEAPONS_FOUND 4007 }
			ife CHAR 9 { addweapon CHAINGUN_WEAPON 50 state quikweaponget } else
				{
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 11
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE TOMMYGUNSPRITE
						ifn YVELSAVED 0 
							{
							set ITEM_AMOUNT YVELSAVED	
							setp[].ammo_amount 0 YVELSAVED							
							}							
						else
							{
							set ITEM_AMOUNT 50	
							setp[].ammo_amount 0 50							
							}
				        state quikweaponget
				      }
						else
						ifn temp_weapon 11
						{
						set player_swap 0
						set swap_tile TOMMYGUNSPRITE
							ifhitspace
							{
							add drop_counter 2
								ifg drop_counter 14
								{
								userquote 516
								set player_swap 26
								state drop_tempweapon
								soundonce ENDSEQVOL2SND1
								set drop_counter 0
								}
							}
						}
						else
						ife temp_weapon 11
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 200 set TEMP 200
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE TOMMYGUNSPRITE
						set ITEM_AMOUNT YVELSAVED	
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
				}
			}
enda

// TEMP RIOTGUN PICKUP

useractor notenemy RIOTGUNSPRITE
sizeat 36 36
fall

ifn ZVELSAVED 0
{
	ife WEAPONS_FOUND[12] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 12 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[12] 0 { setarray WEAPONS_FOUND[12] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
				    globalsound RIOTGUN_COCK
					set temp_weapon 12
					setp[].ammo_amount 0 YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE RIOTGUNSPRITE
					set ITEM_AMOUNT YVELSAVED		
					
			        state quikweaponget
			      }
				else
					ifn temp_weapon 12
					{
					set player_swap 0
					set swap_tile RIOTGUNSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 12
			      {
				    globalsound RIOTGUN_COCK
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 52 set TEMP 52
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE RIOTGUNSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					setp[].ammo_amount 0 TEMP
			        state quikweaponget
			      }
			}
enda

// TEMP CROSSBOW PICKUP

useractor notenemy CROSSBOWSPRITE
sizeat 32 32
fall

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[13] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[13] 0 { setarray WEAPONS_FOUND[13] 1 writearraytofile WEAPONS_FOUND 4007 }
			ife CHAR 11 // If the player's Maarten, give him his shotgun instead
			{
			  addweapon SHOTGUN_WEAPON SHOTGUNAMMOAMOUNT
			  state quikweaponget
			}
			else
				{
				 ife temp_weapon 0
				      {
						set temp_weapon 13
						setp[].ammo_amount 0 YVELSAVED
						
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE CROSSBOWSPRITE
						set ITEM_AMOUNT YVELSAVED
						
				        state quikweaponget
				      }
						else
						ifn temp_weapon 13
						{
						set player_swap 0
						set swap_tile CROSSBOWSPRITE
							ifhitspace
							{
							add drop_counter 2
								ifg drop_counter 14
								{
								userquote 516
								set player_swap 26
								state drop_tempweapon
								soundonce ENDSEQVOL2SND1
								set drop_counter 0
								}
							}
						}
						else
						ife temp_weapon 13
				      {
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 50 set TEMP 50
						
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE CROSSBOWSPRITE
						set ITEM_AMOUNT YVELSAVED
						
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
				}
			}
enda

// TEMP MIA GUN PICKUP

useractor notenemy MIAGUNSPRITE
sizeat 20 20
fall

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
	ife WEAPONS_RESEARCH[3] 2 nullop else killit
	set ZVELSAVED 0
	}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
				{
				set temp_weapon 14
				ife YVELSAVED 0 setp[].ammo_amount 0 10 else
				setp[].ammo_amount 0 YVELSAVED
				
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE MIAGUNSPRITE
				set ITEM_AMOUNT YVELSAVED
				
				state quikweaponget
				}
			else
			ifn temp_weapon 14
				{
				set player_swap 0
				set swap_tile MIAGUNSPRITE
					ifhitspace
					{
					add drop_counter 2
						ifg drop_counter 14
						{
						userquote 516
						set player_swap 26
						state drop_tempweapon
						soundonce ENDSEQVOL2SND1
						set drop_counter 0
						}
					}
				}
			}
enda

// TEMP LASER GUN PICKUP

useractor notenemy LASERGUNSPRITE
sizeat 18 18
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[15] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[15] 0 { setarray WEAPONS_FOUND[15] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 15
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE LASERGUNSPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 15
					{
					set player_swap 0
					set swap_tile LASERGUNSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 15
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 50 set TEMP 50
					setp[].ammo_amount 0 TEMP
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE LASERGUNSPRITE
					set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
			}
enda

// TEMP MISSILE LAUNCHER WEAPON PICKUP

eventloadactor TMISSILELSPRITE state GETITEMSETTINGS enda

useractor notenemy TMISSILELSPRITE
sizeat 36 36
fall


ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[16] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 5 set TEMP9 1 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[16] 0 { setarray WEAPONS_FOUND[16] 1 writearraytofile WEAPONS_FOUND 4007 }
			ife CHAR 9 { addweapon DEVISTATOR_WEAPON 5 state quikweaponget }
			else
			ife CHAR 12 { addweapon DEVISTATOR_WEAPON 5 state quikweaponget }
			else
			 ife temp_weapon 0
			      {
					set temp_weapon 16
					setp[].ammo_amount 0 YVELSAVED
					
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE TMISSILELSPRITE
						set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
					else
					ifn temp_weapon 16
					{
					set player_swap 0
					set swap_tile TMISSILELSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 16
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 20 set TEMP 20
					setp[].ammo_amount 0 TEMP
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE TMISSILELSPRITE
					set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
			}
enda

// TEMP CHAINSAW WEAPON PICKUP

eventloadactor CHAINSAWSPRITE state GETITEMSETTINGS enda

useractor notenemy CHAINSAWSPRITE
sizeat 32 32
fall

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[17] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 set TEMP9 1 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[17] 0 { setarray WEAPONS_FOUND[17] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
				    soundonce CHAINSAW_UP
					ifrnd 128 quote 230 else quote 231
					set temp_weapon 17
					setp[].ammo_amount 0 200
					
											setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE CHAINSAWSPRITE
						set ITEM_AMOUNT -1
					
			        state quikweaponget
			      }
					else
					ifn temp_weapon 17
					{
					set player_swap 0
					set swap_tile CHAINSAWSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 17
			      {
				    soundonce CHAINSAW_UP
					ifrnd 128 quote 230 else quote 231
					getp[].ammo_amount 0 TEMP
					add TEMP 200
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE CHAINSAWSPRITE
					set ITEM_AMOUNT -1
			        state quikweaponget
			      }
			}
enda

eventloadactor FLAMETHROWERSPRITE state GETITEMSETTINGS enda

useractor notenemy FLAMETHROWERSPRITE
sizeat 26 26
fall

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
	ife WEAPONS_RESEARCH[5] 2 nullop else killit
	set ZVELSAVED 0
	}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[18] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[18] 0 { setarray WEAPONS_FOUND[18] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 18
					setp[].ammo_amount 0 YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE FLAMETHROWERSPRITE
					set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
					else
					ifn temp_weapon 18
					{
					set player_swap 0
					set swap_tile FLAMETHROWERSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 18
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE FLAMETHROWERSPRITE
					set ITEM_AMOUNT YVELSAVED
					
					ifg TEMP 300 set TEMP 300
					setp[].ammo_amount 0 TEMP
			        state quikweaponget
			      }
			}
enda

// TEMP SWORD WEAPON PICKUP

eventloadactor SWORDSPRITE state GETITEMSETTINGS enda

useractor notenemy SWORDSPRITE
sizeat 18 18
fall

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[19] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 set TEMP9 1 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[19] 0 { setarray WEAPONS_FOUND[19] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 19
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE SWORDSPRITE
					set ITEM_AMOUNT -1
			        state quikweaponget
			      }
					else
					ifn temp_weapon 19
					{
					set player_swap 0
					set swap_tile SWORDSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
		
			}
enda

eventloadactor 12087 state GETHITAGLOTAG enda

useractor notenemy 12087
ifspritepal 24 break
sizeat 20 20
fall


ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }


state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			set player_use 0
			 ife temp_weapon 0
			  ifhitspace
			      {
					set temp_weapon 36
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE 12200
					set ITEM_AMOUNT -1
					operateactivators LOTAGSAVED THISACTOR
					operaterespawns LOTAGSAVED
					operatemasterswitches LOTAGSAVED
					sound DRAW_SWORD2
					addphealth 100
			        state quikweaponget
			      }
					else
					ifn temp_weapon 36
					{
					set player_swap 0
					set swap_tile 12200
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
					operateactivators LOTAGSAVED THISACTOR
					operaterespawns LOTAGSAVED
					operatemasterswitches LOTAGSAVED
						}
					}
		
			}
enda

// SHADOW SWORD WEAPON PICKUP

eventloadactor 12200 state GETITEMSETTINGS enda

useractor notenemy 12200
sizeat 18 18
fall

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }



state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
			      {
					set temp_weapon 36
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE 12200
					set ITEM_AMOUNT -1
			        state quikweaponget
			      }
					else
					ifn temp_weapon 36
					{
					set player_swap 0
					set swap_tile 12200
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
		
			}
enda

eventloadactor 20101 state GETHITAGLOTAG enda

useractor notenemy 20101 // Beam Sabre
ifspritepal 24 break
sizeat 25 25
fall


ifaction ZERO { ifrnd 4 spawn GLINT ifpdistg RETRIEVEDISTANCE action 0 }


state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			set player_use 0
			 ife temp_weapon 0
			      {
					set temp_weapon 37
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE 20101
					set ITEM_AMOUNT -1
					operateactivators LOTAGSAVED THISACTOR
					operaterespawns LOTAGSAVED
					operatemasterswitches LOTAGSAVED
					sound DRAW_SWORD2
			        state quikweaponget
			      }
					else
					ifn temp_weapon 37
					{
					set player_swap 0
					set swap_tile 20101
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
					operateactivators LOTAGSAVED THISACTOR
					operaterespawns LOTAGSAVED
					operatemasterswitches LOTAGSAVED
						}
					}
		
			}
enda

// TEMP MOP WEAPON PICKUP

eventloadactor MOPSPRITE state GETITEMSETTINGS enda

useractor notenemy MOPSPRITE
sizeat 32 32
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[20] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[20] 0 { setarray WEAPONS_FOUND[20] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 20
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE MOPSPRITE
					set ITEM_AMOUNT -1
			        state quikweaponget
			      }
					else
					ifn temp_weapon 20
					{
					set player_swap 0
					set swap_tile MOPSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
			}
enda

eventloadactor BLOODY_MOPSPRITE state GETITEMSETTINGS enda

useractor notenemy BLOODY_MOPSPRITE
sizeat 32 32
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[20] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[20] 0 { setarray WEAPONS_FOUND[20] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 20
					set WEP0_BLOODY 1
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE BLOODY_MOPSPRITE
					set ITEM_AMOUNT -1
			        state quikweaponget
			      }
					else
					ifn temp_weapon 20
					{
					set player_swap 0
					set swap_tile BLOODY_MOPSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
			}
enda

// TEMP FN FAL PICKUP

eventloadactor FNFALSPRITE state GETITEMSETTINGS enda

useractor notenemy FNFALSPRITE
sizeat 20 20
fall

state ITEMSETTINGS

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[21] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }


ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[21] 0 { setarray WEAPONS_FOUND[21] 1 writearraytofile WEAPONS_FOUND 4007 }
			ife CHAR 9 { addweapon FREEZE_WEAPON 50 state quikweaponget }
			else
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 21
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE FNFALSPRITE
						set ITEM_AMOUNT YVELSAVED						
				        state quikweaponget
				      }
						else
						ifn temp_weapon 21
						{
						set player_swap 0
						set swap_tile FNFALSPRITE
							ifhitspace
							{
							add drop_counter 2
								ifg drop_counter 14
								{
								userquote 516
								set player_swap 26
								state drop_tempweapon
								soundonce ENDSEQVOL2SND1
								set drop_counter 0
								}
							}
						}
						else
						ife temp_weapon 21
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 150 set TEMP 150
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE FNFALSPRITE
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
			}
enda

// TEMP MP40 PICKUP

eventloadactor MP40SPRITE state GETITEMSETTINGS enda

useractor notenemy MP40SPRITE
sizeat 20 20
fall

state ITEMSETTINGS

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[22] 1 nullop else killit
	set ZVELSAVED 0
}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[22] 0 { setarray WEAPONS_FOUND[22] 1 writearraytofile WEAPONS_FOUND 4007 }
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 22
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE MP40SPRITE
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
					else
					ifn temp_weapon 22
					{
					set player_swap 0
					set swap_tile MP40SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
						else
						ife temp_weapon 22
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 300 set TEMP 300
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE MP40SPRITE
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
			}
enda

// TEMP AK104 PICKUP

eventloadactor AK114SPRITE state GETITEMSETTINGS enda

useractor notenemy AK114SPRITE
sizeat 20 20
fall

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[26] 1 nullop else killit
	set ZVELSAVED 0
}

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[26] 0 { setarray WEAPONS_FOUND[26] 1 writearraytofile WEAPONS_FOUND 4007 }
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 26
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set TEMP_WEAPON_MAG YVELSAVED
						ifg TEMP_WEAPON_MAG 30 set TEMP_WEAPON_MAG 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE AK114SPRITE
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
					else
					ifn temp_weapon 26
					{
					set player_swap 0
					set swap_tile AK114SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
						else
						ife temp_weapon 26
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 300 set TEMP 300
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE AK114SPRITE
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
			}
enda

// IW PLASMA RIFLE

eventloadactor JPLASMASPRITE state GETITEMSETTINGS enda

useractor notenemy JPLASMASPRITE
sizeat 24 24
fall

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
 	ife WEAPONS_RESEARCH[1] 2 nullop else killit
	set ZVELSAVED 0 
	}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife YVELSAVED 0 set YVELSAVED 50

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
			      {
					set temp_weapon 23
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE JPLASMASPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 23
					{
					set player_swap 0
					set swap_tile JPLASMASPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 23
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 300 set TEMP 300
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE JPLASMASPRITE
					set ITEM_AMOUNT YVELSAVED					
			        state quikweaponget
			      }
			}
enda

// TEMP LIZMAN FIRELASER GUN PICKUP

eventloadactor LIZMANFGUNSPRITE state GETITEMSETTINGS enda

useractor notenemy LIZMANFGUNSPRITE
sizeat 26 26
fall

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
	ife WEAPONS_RESEARCH[2] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife YVELSAVED 0 set YVELSAVED 50

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
			      {
					set temp_weapon 24
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE LIZMANFGUNSPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 24
					{
					set player_swap 0
					set swap_tile LIZMANFGUNSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
			else ife temp_weapon 24
				{
				getp[].ammo_amount 0 TEMP
				ife TEMP 200 break
				add TEMP YVELSAVED
				ifg TEMP 200 set TEMP 200
				setarray PICKED_UP_GUN[0] 30
				set WEAP_SHOW 130
				state PICKUP_DISPLAY
				set PICKED_UP_TILE LIZMANFGUNSPRITE
				set ITEM_AMOUNT YVELSAVED
				setp[].ammo_amount 0 TEMP
				state quikweaponget
				}
			}
enda

// TEMP M16 PICKUP

eventloadactor M16SPRITE state GETITEMSETTINGS enda

useractor notenemy M16SPRITE
sizeat 28 28
fall

state ITEMSETTINGS

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[25] 1 nullop else killit
	set ZVELSAVED 0
}

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[25] 0 { setarray WEAPONS_FOUND[25] 1 writearraytofile WEAPONS_FOUND 4007 }
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 25
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE M16SPRITE
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
					else
					ifn temp_weapon 25
					{
					set player_swap 0
					set swap_tile M16SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
						else
						ife temp_weapon 25
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 250 set TEMP 250
						setp[].ammo_amount 0 TEMP
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE M16SPRITE
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
			}
enda

// RIOTGUN MINIGUN SPRITE

eventloadactor RIOTGUN_MINIGUN_SPRITE state GETITEMSETTINGS enda

useractor notenemy RIOTGUN_MINIGUN_SPRITE
sizeat 40 40
fall

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
	ife WEAPONS_RESEARCH[6] 2 nullop else killit
	set ZVELSAVED 0
	}
	
ife YVELSAVED 0 set YVELSAVED 200

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 27
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE RIOTGUN_MINIGUN_SPRITE
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
					  else
						ife temp_weapon 34
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 800 set TEMP 800
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE 16087
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
					else
					ifn temp_weapon 27
					{
					set player_swap 0
					set swap_tile RIOTGUN_MINIGUN_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
						else
						ife temp_weapon 27
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 800 set TEMP 800
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE RIOTGUN_MINIGUN_SPRITE
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
			}
enda

eventloadactor 16087 state GETITEMSETTINGS enda

useractor notenemy 16087
sizeat 40 40
fall

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
	ife WEAPONS_RESEARCH[8] 2 nullop else killit
	set ZVELSAVED 0
	}
	
ife YVELSAVED 0 set YVELSAVED 200

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 34
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE 16087
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
					else
						ife temp_weapon 27
				      {
					    sound GET_GUN
						set temp_weapon 34
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 800 set TEMP 800
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE 16087
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
					else
					ifn temp_weapon 34
					{
					set player_swap 0
					set swap_tile 16087
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
						else
						ife temp_weapon 34
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 800 set TEMP 800
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE 16087
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
			}
enda

// Nailgun

eventloadactor NAILGUN_SPRITE state GETITEMSETTINGS enda

useractor notenemy NAILGUN_SPRITE
sizeat 24 24
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[28] 1 nullop else killit
	set ZVELSAVED 0
}


ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[28] 0 { setarray WEAPONS_FOUND[28] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 28
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE NAILGUN_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 28
					{
					set player_swap 0
					set swap_tile NAILGUN_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 28
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 300 set TEMP 300
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE NAILGUN_SPRITE
					set ITEM_AMOUNT YVELSAVED					
			        state quikweaponget
			      }
			}
enda

// RIOTGUN GRENADE LAUNCHER SPRITE

eventloadactor RIOTGUN_GRENADEL_SPRITE state GETITEMSETTINGS enda

useractor notenemy RIOTGUN_GRENADEL_SPRITE
sizeat 40 40
fall

state ITEMSETTINGS

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile WEAPONS_RESEARCH 4000
	ife WEAPONS_RESEARCH[7] 2 nullop else killit
	set ZVELSAVED 0
	}
	
ife YVELSAVED 0 set YVELSAVED 24

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
				 ife temp_weapon 0
				      {
					    sound GET_GUN
						set temp_weapon 29
						setp[].ammo_amount 0 YVELSAVED
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE RIOTGUN_GRENADEL_SPRITE
						set ITEM_AMOUNT YVELSAVED
				        state quikweaponget
				      }
					else
					ifn temp_weapon 29
					{
					set player_swap 0
					set swap_tile RIOTGUN_GRENADEL_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
						else
						ife temp_weapon 29
				      {
					    sound GET_GUN
						getp[].ammo_amount 0 TEMP
						add TEMP YVELSAVED
						ifg TEMP 64 set TEMP 64
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE RIOTGUN_GRENADEL_SPRITE
						set ITEM_AMOUNT YVELSAVED
						setp[].ammo_amount 0 TEMP
				        state quikweaponget
				      }
			}
enda

// Dartgun

eventloadactor DARTGUN_SPRITE state GETITEMSETTINGS enda

useractor notenemy DARTGUN_SPRITE
sizeat 40 40
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[30] 1 nullop else killit
	set ZVELSAVED 0
}


ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 50 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[30] 0 { setarray WEAPONS_FOUND[30] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 30
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE DARTGUN_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 30
					{
					set player_swap 0
					set swap_tile DARTGUN_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 30
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 300 set TEMP 300
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE DARTGUN_SPRITE
					set ITEM_AMOUNT YVELSAVED					
			        state quikweaponget
			      }
			}
enda

// M60

spriteshadow M60_SPRITE

eventloadactor M60_SPRITE state GETITEMSETTINGS enda

useractor notenemy M60_SPRITE
sizeat 20 20
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[31] 1 nullop else killit
	set ZVELSAVED 0
}


ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 100 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[31] 0 { setarray WEAPONS_FOUND[31] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 31
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set TEMP_WEAPON_MAG 100
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE M60_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 31
					{
					set player_swap 0
					set swap_tile M60_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 31
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 300 set TEMP 300
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE M60_SPRITE
					set ITEM_AMOUNT YVELSAVED					
			        state quikweaponget
			      }
			}
enda

// TEMP ZILLA MISSILE LAUNCHER WEAPON PICKUP

spriteshadow ZMISSILELSPRITE

eventloadactor ZMISSILELSPRITE state GETITEMSETTINGS enda

useractor notenemy ZMISSILELSPRITE
sizeat 40 40
fall


ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[32] 1 nullop else killit
	set ZVELSAVED 0
}

ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 10 set TEMP9 1 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[32] 0 { setarray WEAPONS_FOUND[32] 1 writearraytofile WEAPONS_FOUND 4007 }

			 ife temp_weapon 0
			      {
					set temp_weapon 32
					setp[].ammo_amount 0 YVELSAVED
					
						setarray PICKED_UP_GUN[0] 30
						set WEAP_SHOW 130
						state PICKUP_DISPLAY
						set PICKED_UP_TILE ZMISSILELSPRITE
						set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
					else
					ifn temp_weapon 32
					{
					set player_swap 0
					set swap_tile ZMISSILELSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 32
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 50 set TEMP 50
					setp[].ammo_amount 0 TEMP
					
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE ZMISSILELSPRITE
					set ITEM_AMOUNT YVELSAVED
					
			        state quikweaponget
			      }
			}
enda

spriteshadow M960_SPRITE

eventloadactor M960_SPRITE state GETITEMSETTINGS enda

useractor notenemy M960_SPRITE
sizeat 24 24
fall

ife ZVELSAVED 1
{
	ife WEAPONS_FOUND[33] 1 nullop else killit
	set ZVELSAVED 0
}


ife TEMP9 0 { readarrayfromfile WEAPONS_FOUND 4007 ife YVELSAVED 0 set YVELSAVED 100 set TEMP9 1 }

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			ife WEAPONS_FOUND[33] 0 { setarray WEAPONS_FOUND[33] 1 writearraytofile WEAPONS_FOUND 4007 }
			 ife temp_weapon 0
			      {
					set temp_weapon 35
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 50
					ifl YVELSAVED 50 set TEMP_WEAPON_MAG YVELSAVED else
					set TEMP_WEAPON_MAG 50
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE M960_SPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 35
					{
					set player_swap 0
					set swap_tile M960_SPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							soundonce ENDSEQVOL2SND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 35
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 400 set TEMP 400
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE M960_SPRITE
					set ITEM_AMOUNT YVELSAVED					
			        state quikweaponget
			      }
			}
enda

// GUARDIAN HEAD

spriteshadow GOROHEADSPRITE

eventloadactor GOROHEADSPRITE state GETITEMSETTINGS enda

useractor notenemy GOROHEADSPRITE
sizeat 32 32
fall

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife YVELSAVED 0 set YVELSAVED 50

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
			      {
					set temp_weapon 33
					setp[].ammo_amount 0 YVELSAVED
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE GOROHEADSPRITE
					set ITEM_AMOUNT YVELSAVED
			        state quikweaponget
			      }
					else
					ifn temp_weapon 33
					{
					set player_swap 0
					set swap_tile GOROHEADSPRITE
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							ifrnd 128 sound GIB_LAND2 else sound GIB_LAND1
							set drop_counter 0
							}
						}
					}
					else
					ife temp_weapon 33
			      {
					getp[].ammo_amount 0 TEMP
					add TEMP YVELSAVED
					ifg TEMP 300 set TEMP 300
					setp[].ammo_amount 0 TEMP
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE GOROHEADSPRITE
					set ITEM_AMOUNT YVELSAVED					
			        state quikweaponget
			      }
			}
enda


spriteshadow 17980

eventloadactor 17980 state GETITEMSETTINGS enda

// ripper heart

useractor notenemy 17980
sizeat 32 32
fall

ifaction ZERO { ifpdistg RETRIEVEDISTANCE action 0 }

ife YVELSAVED 0 set YVELSAVED 1

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
	 ifaction 0
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			 ife temp_weapon 0
			      {
					set temp_weapon 38
					setp[].ammo_amount 0 1
					setarray PICKED_UP_GUN[0] 30
					set WEAP_SHOW 130
					state PICKUP_DISPLAY
					set PICKED_UP_TILE 17980
					set ITEM_AMOUNT 1
			        state quikweaponget
			      }
					else
					ifn temp_weapon 33
					{
					set player_swap 0
					set swap_tile 17980
						ifhitspace
						{
						add drop_counter 2
							ifg drop_counter 14
							{
							userquote 516
							set player_swap 26
							state drop_tempweapon
							ifrnd 128 sound GIB_LAND2 else sound GIB_LAND1
							set drop_counter 0
							}
						}
					}
			}
enda

// SPECIAL AMMO PICKUP

eventloadactor SILVERAMMO_DRUM state GETITEMSETTINGS cstat 0 enda

useractor notenemy SILVERAMMO_DRUM
sizeat 32 32
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[3] 2 nullop else killit
	set ZVELSAVED 0
	}

ifspritepal 3 nullop else set command 256

ifaction 0
{
geta[].mdflags TEMP
orvar TEMP 16
seta[].mdflags TEMP 

action ZERO
}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl silver_ammo 100
				{
				ife EQUIPMENT_RESEARCH[3] 0 { setarray EQUIPMENT_RESEARCH[3] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
				add silver_ammo 50
				ifg silver_ammo 150 set silver_ammo 150
			
				state PICKUP_DISPLAY
				set PICKED_UP_TILE SILVERAMMO_DRUM
				set ITEM_AMOUNT 50
			
			ifspawnedby SILVERAMMO_DRUM
			  state getcode
			else
			  state quikget
				}
enda

eventloadactor FORTYMM_NADES state GETITEMSETTINGS cstat 0 enda

useractor notenemy FORTYMM_NADES
sizeat 23 23
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[13] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl fortymm_grenades 40
			{
			ife EQUIPMENT_RESEARCH[13] 0 { setarray EQUIPMENT_RESEARCH[13] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add fortymm_grenades 2
			clamp fortymm_grenades 0 40
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FORTYMM_NADES
			set ITEM_AMOUNT 2
			
	        ifspawnedby FORTYMM_NADES
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor FORTYMM_CASELESS state GETITEMSETTINGS cstat 0 enda

useractor notenemy FORTYMM_CASELESS
sizeat 23 23
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[14] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl fortymm_caseless 20
			{
			ife EQUIPMENT_RESEARCH[14] 0 { setarray EQUIPMENT_RESEARCH[14] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add fortymm_caseless 2
			ifg fortymm_caseless 20 set fortymm_caseless 20
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FORTYMM_CASELESS
			set ITEM_AMOUNT 2
			
	        ifspawnedby FORTYMM_CASELESS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor FORTYMM_SLUGS state GETITEMSETTINGS cstat 0 enda

useractor notenemy FORTYMM_SLUGS
sizeat 23 23
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[17] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl fortymm_slug 20
			{
			ife EQUIPMENT_RESEARCH[17] 0 { setarray EQUIPMENT_RESEARCH[17] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add fortymm_slug 2
			ifg fortymm_slug 20 set fortymm_slug 20
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FORTYMM_SLUGS
			set ITEM_AMOUNT 2
			
	        ifspawnedby FORTYMM_SLUGS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor FORTYMM_ELECTRO state GETITEMSETTINGS cstat 0 enda

useractor notenemy FORTYMM_ELECTRO
sizeat 23 23
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[21] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl fortymm_electro 20
			{
			ife EQUIPMENT_RESEARCH[21] 0 { setarray EQUIPMENT_RESEARCH[21] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add fortymm_electro 2
			ifg fortymm_electro 20 set fortymm_electro 20
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FORTYMM_ELECTRO
			set ITEM_AMOUNT 2
			
	        ifspawnedby FORTYMM_ELECTRO
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor FORTYMM_CRYO state GETITEMSETTINGS cstat 0 enda

useractor notenemy FORTYMM_CRYO
sizeat 23 23
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[22] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl fortymm_electro 20
			{
			ife EQUIPMENT_RESEARCH[22] 0 { setarray EQUIPMENT_RESEARCH[22] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add fortymm_cryo 2
			ifg fortymm_cryo 20 set fortymm_cryo 20
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FORTYMM_CRYO
			set ITEM_AMOUNT 2
			
	        ifspawnedby FORTYMM_CRYO
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor FORTYMM_SHELLS state GETITEMSETTINGS cstat 0 enda

useractor notenemy FORTYMM_SHELLS
sizeat 40 40
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[15] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl fortymm_shells 16
			{
			ife EQUIPMENT_RESEARCH[15] 0 { setarray EQUIPMENT_RESEARCH[15] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add fortymm_shells 8
			ifg fortymm_shells 16 set fortymm_shells 16
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FORTYMM_SHELLS
			set ITEM_AMOUNT 7
			
	        ifspawnedby FORTYMM_SHELLS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor EXPL_SHELLS state GETITEMSETTINGS cstat 0 enda

useractor notenemy EXPL_SHELLS
sizeat 32 32
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[1] 2 nullop else killit
	set ZVELSAVED 0
	}


state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl explosive_shells 20
			{
			ife EQUIPMENT_RESEARCH[1] 0 { setarray EQUIPMENT_RESEARCH[1] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add explosive_shells 10
			ifg explosive_shells 40 set explosive_shells 40
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE EXPL_SHELLS
			set ITEM_AMOUNT 10
			
	        ifspawnedby EXPL_SHELLS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor FLECHETE_SHELLS state GETITEMSETTINGS cstat 0 enda

useractor notenemy FLECHETE_SHELLS
sizeat 32 32
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[2] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl flechete_shells 40
			{
			ife EQUIPMENT_RESEARCH[2] 0 { setarray EQUIPMENT_RESEARCH[2] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add flechete_shells 10
			ifg flechete_shells 40 set flechete_shells 40
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE FLECHETE_SHELLS
			set ITEM_AMOUNT 10
			
	        ifspawnedby FLECHETE_SHELLS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor TESLA_AMMO_SPRITE state GETITEMSETTINGS cstat 0 enda

useractor notenemy TESLA_AMMO_SPRITE
sizeat 24 24
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[4] 2 nullop else killit
	set ZVELSAVED 0
	}
	
ifspritepal 3 nullop else set command 256

ifaction 0
{
geta[].mdflags TEMP
orvar TEMP 16
seta[].mdflags TEMP 

action ZERO
}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl tesla_ammo 100
			{
			ife EQUIPMENT_RESEARCH[4] 0 { setarray EQUIPMENT_RESEARCH[4] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add tesla_ammo 50
			ifg tesla_ammo 200 set tesla_ammo 200
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE TESLA_AMMO_SPRITE
			set ITEM_AMOUNT 50			
			
	        ifspawnedby TESLA_AMMO_SPRITE
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor SILVER_CROSSBOW_BOLTS state GETITEMSETTINGS cstat 0 enda

useractor notenemy SILVER_CROSSBOW_BOLTS
sizeat 32 32
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[6] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl silver_bolts 50
			{
		ife EQUIPMENT_RESEARCH[6] 0 { setarray EQUIPMENT_RESEARCH[6] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
		add silver_bolts 10
		ifg silver_bolts 50 set silver_bolts 50
		
		state PICKUP_DISPLAY
		set PICKED_UP_TILE SILVER_CROSSBOW_BOLTS
		set ITEM_AMOUNT 10
		
        ifspawnedby SILVER_CROSSBOW_BOLTS
          state getcode
        else
          state quikget
			}
enda

eventloadactor MICRO_TORPEDO_PACK state GETITEMSETTINGS cstat 0 enda

useractor notenemy MICRO_TORPEDO_PACK
sizeat 40 40
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[8] 2 nullop else killit
	set ZVELSAVED 0
	}


state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl micro_torpedo 25
			{
			ife EQUIPMENT_RESEARCH[8] 0 { setarray EQUIPMENT_RESEARCH[8] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add micro_torpedo 5
			ifg micro_torpedo 25 set micro_torpedo 25
		
			state PICKUP_DISPLAY
			set PICKED_UP_TILE MICRO_TORPEDO_PACK
			set ITEM_AMOUNT 5
		
        ifspawnedby MICRO_TORPEDO_PACK
          state getcode
        else
          state quikget
			}
enda

eventloadactor MAGNUM_SHELLS state GETITEMSETTINGS cstat 0 enda

useractor notenemy MAGNUM_SHELLS
sizeat 32 32
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[9] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl magnum_shells 40
			{
			ife EQUIPMENT_RESEARCH[9] 0 { setarray EQUIPMENT_RESEARCH[9] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add magnum_shells 10
			ifg magnum_shells 40 set magnum_shells 40
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE MAGNUM_SHELLS
			set ITEM_AMOUNT 10
			
	        ifspawnedby MAGNUM_SHELLS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor DRAGONS_SHELLS state GETITEMSETTINGS cstat 0 enda

useractor notenemy DRAGONS_SHELLS
sizeat 32 32
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[20] 2 nullop else killit
	set ZVELSAVED 0
	}

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl dragon_shells 20
			{
			ife EQUIPMENT_RESEARCH[20] 0 { setarray EQUIPMENT_RESEARCH[20] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add dragon_shells 10
			ifg dragon_shells 20 set dragon_shells 20
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE DRAGONS_SHELLS
			set ITEM_AMOUNT 10
			
	        ifspawnedby DRAGONS_SHELLS
	          state getcode
	        else
	          state quikget
			}
enda

eventloadactor HEAT_SEEK_CARD_PICKUP state GETITEMSETTINGS cstat 0 enda

useractor notenemy HEAT_SEEK_CARD_PICKUP
sizeat 40 40
fall

ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[10] 2 nullop else killit
	set ZVELSAVED 0
	}


state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl heat_seek_card 5
			{
			ife EQUIPMENT_RESEARCH[10] 0 { setarray EQUIPMENT_RESEARCH[10] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			ife PERSONEL_RESEARCH[15] 2 // has advanced heat seeking card project?
				{
				add heat_seek_card 10
				ifg heat_seek_card 10 set heat_seek_card 10
				}
			else
				{
				add heat_seek_card 5
				ifg heat_seek_card 5 set heat_seek_card 5
				}
		
			state PICKUP_DISPLAY
			set PICKED_UP_TILE HEAT_SEEK_CARD_PICKUP
			set ITEM_AMOUNT 5
		
        ifspawnedby HEAT_SEEK_CARD_PICKUP
          state getcode
        else
          state quikget
			}
enda

eventloadactor ATOMIC_BOMB_PICKUP state GETITEMSETTINGS cstat 0 enda

useractor notenemy ATOMIC_BOMB_PICKUP
sizeat 40 40
fall

// ife TEMP9 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 set TEMP9 1 }

ife ZVELSAVED 2 // check to see if the player's researched this
	{
    readarrayfromfile EQUIPMENT_RESEARCH 4001
	ife EQUIPMENT_RESEARCH[11] 2 nullop else killit
	set ZVELSAVED 0
	}


state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl atomic_bomb 1
			{
			ife EQUIPMENT_RESEARCH[11] 0 { setarray EQUIPMENT_RESEARCH[11] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add atomic_bomb 1
			ifg atomic_bomb 1 set atomic_bomb 1
		
			state PICKUP_DISPLAY
			set PICKED_UP_TILE ATOMIC_BOMB_PICKUP
			set ITEM_AMOUNT 1
		
        ifspawnedby ATOMIC_BOMB_PICKUP
          state getcode
        else
          state quikget
			}
enda

eventloadactor DUP_MISSILES_PICKUP state GETITEMSETTINGS cstat 0 enda

useractor notenemy DUP_MISSILES_PICKUP
sizeat 40 40
fall

ifaction 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 action ZERO }

state ITEMSETTINGS
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl DUP_missile_ammo 10
			{
			ife EQUIPMENT_RESEARCH[12] 0 { setarray EQUIPMENT_RESEARCH[12] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
			add DUP_missile_ammo 10
			ifg DUP_missile_ammo 10 set heat_seek_card 10
		
			state PICKUP_DISPLAY
			set PICKED_UP_TILE DUP_MISSILES_PICKUP
			set ITEM_AMOUNT 10
		
        ifspawnedby DUP_MISSILES_PICKUP
          state getcode
        else
          state quikget
			}
enda

// Multiplayer backpack

useractor notenemy 176
sizeat 28 28
fall

   ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
				{
				addphealth 20
				// Add player's pistol ammo
				getp[].ammo_amount 1 TEMP
				add TEMP TEMP3
				getp[].max_ammo_amount 1 TEMP2
				ifg TEMP TEMP2 set TEMP TEMP2
				setp[].ammo_amount 1 TEMP
				// Add player's shotgun ammo
				getp[].ammo_amount 2 TEMP
				add TEMP TEMP4
				getp[].max_ammo_amount 2 TEMP2
				ifg TEMP TEMP2 set TEMP TEMP2
				setp[].ammo_amount 2 TEMP
				// Add player's chaingun ammo
				getp[].ammo_amount 3 TEMP
				add TEMP TEMP5
				getp[].max_ammo_amount 3 TEMP2
				ifg TEMP TEMP2 set TEMP TEMP2
				setp[].ammo_amount 3 TEMP
				// Add player's RPG ammo
				getp[].ammo_amount 4 TEMP
				add TEMP TEMP6
				getp[].max_ammo_amount 4 TEMP2
				ifg TEMP TEMP2 set TEMP TEMP2
				setp[].ammo_amount 4 TEMP
				// Add player's grenade ammo
				getp[].ammo_amount 5 TEMP
				add TEMP TEMP7
				getp[].max_ammo_amount 5 TEMP2
				ifg TEMP TEMP2 set TEMP TEMP2
				setp[].ammo_amount 5 TEMP
				
				  ife CHAR 0 globalsound JGETITEM
				  else ife CHAR 2 globalsound MGETITEM
				  else ife CHAR 3 globalsound RGETITEM
				  else ife CHAR 4 globalsound SGETITEM
				  else ife CHAR 5 globalsound RNGETITEM
				  else ife CHAR 6 globalsound GGETITEM
				  else ife CHAR 7 globalsound MSGETITEM
				  else ife CHAR 9 globalsound SGETITEM
				  else ife CHAR 13 globalsound RGETITEM
				  else globalsound DUKE_GET
				  palfrom 16 0 32
				  killit
				
				}
			  
			  
enda

eventloadactor 3690 cactor 3310 enda
eventloadactor 3691 cactor 3313 enda

defstate potion_heal
set TEMP5 PMAXHEALTH
ifactor HPOTION divvar TEMP5 10
ifactor HFLASK divvar TEMP5 4
ifactor HCUP divvar TEMP5 5
getp[].i TEMP2
geta[TEMP2].extra TEMP3
add TEMP3 TEMP5
ifg TEMP3 PMAXHEALTH set TEMP3 PMAXHEALTH
seta[TEMP2].extra TEMP3
ends

spriteshadow 18424
spriteshadow 18682

defstate HEAL_DISP_AMOUNT
			ifactor SIXPAK set ITEM_AMOUNT 30
			ifactor COLA set ITEM_AMOUNT 10
			ifactor 20158 set ITEM_AMOUNT 10
			ifactor 20159 set ITEM_AMOUNT 30
			ifactor TWENTYKIT set ITEM_AMOUNT 20
			ifactor HYPOSPRAY set ITEM_AMOUNT 20
			ifactor HPOTION set ITEM_AMOUNT -1
			ifactor HFLASK set ITEM_AMOUNT -1
			ifactor HPOWDER set ITEM_AMOUNT 15
			ifactor HCUP set ITEM_AMOUNT -1
			ifactor BRIMSTONE set ITEM_AMOUNT 25
			ifactor 18424 set ITEM_AMOUNT 10
			ifactor 18682 set ITEM_AMOUNT 15
			ifactor TWENTYFIVEKIT set ITEM_AMOUNT 25
ends

defstate CUSTOMHEALOBJECT
ifg CURSED 0 break
state ITEMSETTINGS
ifactor 18682 ifaction 0 { sizeat 40 40 action ZERO cstat 0 }
else ifactor HCUP ifaction 0 { sizeat 40 40 action ZERO cstat 0 }
else ifactor TWENTYFIVEKIT ifaction 0 { sizeat 40 40 action ZERO cstat 0 }
else ifaction 0 { sizeat 32 32 action ZERO cstat 0 }

ifaction ZERO
ifactor BRIMSTONE
	{
	sizeat 22 22
	 geta[].mdflags TEMP
	 orvar TEMP 16
	 seta[].mdflags TEMP
	 set command 32768

	geta[].shade TEMP
	ife TEMP 0 set TEMP2 1 else ife TEMP 20 set TEMP2 0
	ife TEMP2 1
		{
		add TEMP 1 seta[].shade TEMP
		}
	ife TEMP2 0
		{
		sub TEMP 1 seta[].shade TEMP
		}
	}

  ifactor BRIMSTONE nullop else fall
  
  
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
		   ifcanseetarget
		   {		
            ifl PHEALTH PMAXHEALTH
			{
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			
			state HEAL_DISP_AMOUNT
			
					ifactor SIXPAK addphealth 30
					ifactor COLA addphealth 10
					ifactor TWENTYKIT addphealth 20
					ifactor HYPOSPRAY addphealth 20
					ifactor HPOTION state potion_heal
					ifactor HFLASK state potion_heal
					ifactor HCUP state potion_heal
				  ifactor HPOWDER addphealth 15
				  ifactor BRIMSTONE addphealth 25
				  ifactor 18424 addphealth 10
				  ifactor 18682 addphealth 15
				  ifactor 20158 addphealth 10
				  ifactor 20159 addphealth 30
				  ifactor TWENTYFIVEKIT addphealth 25
				ifg PHEALTH PMAXHEALTH
				{
				getp[].i TEMP
					seta[TEMP].extra PMAXHEALTH
				}
				palfrom 20 0 60 0
			     state getcode
			}
			else
			ife PERSONEL_RESEARCH[12] 2 // add to firstaid if health is full and proper research is done
			{
			getp[].firstaid_amount TEMP
			ife TEMP PMAXHEALTH break
			state PICKUP_DISPLAY
			
			state HEAL_DISP_AMOUNT
			
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			setp[].invdisptime 60
			ifactor SIXPAK add TEMP 30
			ifactor COLA add TEMP 10
			ifactor TWENTYKIT add TEMP 20
			ifactor HYPOSPRAY add TEMP 20
			ifactor HPOTION add TEMP 15
			ifactor HFLASK add TEMP 30
			ifactor HCUP add TEMP 20
			ifactor HPOWDER add TEMP 15
			ifactor BRIMSTONE add TEMP 25
			ifactor 18424 add TEMP 10
			ifactor 18682 add TEMP 15
			ifactor 20158 add TEMP 10
			ifactor 20159 add TEMP 30
			ifactor TWENTYFIVEKIT add TEMP 25
			ifg TEMP PMAXHEALTH set TEMP PMAXHEALTH
			setp[].firstaid_amount TEMP
			userquote 3050
			     state getcode
			}
			else break
      }
ends

eventloadactor HYPOSPRAY state GETITEMSETTINGS enda
useractor notenemy HYPOSPRAY state CUSTOMHEALOBJECT enda

eventloadactor HPOTION state GETITEMSETTINGS enda
useractor notenemy HPOTION state CUSTOMHEALOBJECT enda

eventloadactor HFLASK state GETITEMSETTINGS enda
useractor notenemy HFLASK state CUSTOMHEALOBJECT enda

spritenoshade HCUP

eventloadactor HCUP state GETITEMSETTINGS enda
useractor notenemy HCUP seta[].shade 0 state CUSTOMHEALOBJECT enda

eventloadactor TWENTYKIT state GETITEMSETTINGS enda
useractor notenemy TWENTYKIT state CUSTOMHEALOBJECT enda

eventloadactor HPOWDER state GETITEMSETTINGS enda
useractor notenemy HPOWDER state CUSTOMHEALOBJECT enda

eventloadactor BRIMSTONE state GETITEMSETTINGS enda
useractor notenemy BRIMSTONE state CUSTOMHEALOBJECT enda

eventloadactor 18424 state GETITEMSETTINGS enda
useractor notenemy 18424 state CUSTOMHEALOBJECT enda

eventloadactor 18682 state GETITEMSETTINGS enda
useractor notenemy 18682 state CUSTOMHEALOBJECT enda

eventloadactor 20158 state GETITEMSETTINGS enda
useractor notenemy 20158 state CUSTOMHEALOBJECT enda

eventloadactor 20159 state GETITEMSETTINGS enda
useractor notenemy 20159 state CUSTOMHEALOBJECT enda

eventloadactor TWENTYFIVEKIT state GETITEMSETTINGS enda
useractor notenemy TWENTYFIVEKIT state CUSTOMHEALOBJECT enda

eventloadactor SIXPAK state GETITEMSETTINGS enda

actor SIXPAK state CUSTOMHEALOBJECT enda

eventloadactor COLA state GETITEMSETTINGS enda

actor COLA state CUSTOMHEALOBJECT enda

eventloadactor 3688 state GETITEMSETTINGS enda
eventloadactor FIRESUIT state GETITEMSETTINGS enda
eventloadactor GASMASK state GETITEMSETTINGS enda
eventloadactor FLIPPER state GETITEMSETTINGS enda
eventloadactor O2CANISTER state GETITEMSETTINGS enda
eventloadactor HEAT_SINK_PACK state GETITEMSETTINGS enda

useractor notenemy 3688 // air filter
state ITEMSETTINGS
ifaction 0 { sizeat 24 24 action ZERO cstat 0 }

  fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	ife AIR_FILTER 1 break
	else
		{
		set AIR_FILTER 1
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
		
        ifspawnedby 3688
          state getcode
        else
          state quikget
		}
      }
enda

useractor notenemy HEAT_SINK_PACK // heat sinks
state ITEMSETTINGS

ifaction 0 { readarrayfromfile EQUIPMENT_RESEARCH 4001 sizeat 24 24 action ZERO cstat 0 }

  fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	ife HEAT_SINKS 10 break
	else
		{
		add HEAT_SINKS 3
		ifg HEAT_SINKS 10 set HEAT_SINKS 10
		ife EQUIPMENT_RESEARCH[19] 0 { setarray EQUIPMENT_RESEARCH[19] 3 ifand NEW_RESEARCH 2 nullop else xorvar NEW_RESEARCH 2 set array_save 1 }
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT 3	 
		
        ifspawnedby HEAT_SINK_PACK
          state getcode
        else
          state quikget
		}
      }
enda

useractor notenemy 17916 // Rope
state ITEMSETTINGS
ifaction 0 { sizeat 24 24 action ZERO cstat 0 }

  fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	ife ROPE 1 break
	else
		{
		set ROPE 1
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
		
        ifspawnedby 17916
          state getcode
        else
          state quikget
		}
      }
enda


action SUIT_IDLE 0 1 5 0 0
action SUIT_WORN 0 1 5 0 0

useractor notenemy FIRESUIT
state ITEMSETTINGS

ifaction 0 
	{ 
	sizeat 24 24
	ifspritepal 3 { action SUIT_WORN cstat 32768 } 
	else ifspritepal 5 { action SUIT_WORN cstat 32768 }
	else { action SUIT_IDLE cstat 257 } 
	}

  fall
  
  ifspritepal 5
	{
	   ifp palive
        ifpdistl 2048
		ife FIRE_SUIT 1
              ifcanseetarget
			   ifn CHAR 12
					{
					soundonce EQUIPMENT_OFF
					set FIRE_SUIT 0
					palfrom 64 0 0 0
					cstat 257
					set just_changed 1
					killit
					}
	}
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifn CHAR 12
				  {
				  set player_use 0
				  ifhitspace
				  ifcount 13
					{
					ifaction SUIT_WORN
					 ife FIRE_SUIT 1
						{
						soundonce EQUIPMENT_OFF
						set FIRE_SUIT 0
						palfrom 64 0 0 0
						cstat 257
						action SUIT_IDLE
						set just_changed 1
						}
					else
					ifaction SUIT_IDLE
					 ife FIRE_SUIT 0
						{
						soundonce PUT_ON_EQUIP
						set FIRE_SUIT 1
						userquote 209
						palfrom 64 0 0 0
						cstat 32768
						action SUIT_WORN
						set just_changed 1
						}
					resetcount
					}
				  }
enda

defstate SPACESUIT_BEEPS
		ife LIFE_SUPPORT 7200
			{
			sound LIFE_SUPPORT_BEEP
			setactorsoundpitch THISACTOR LIFE_SUPPORT_BEEP -256
			}
			ife LIFE_SUPPORT 3200 sound LIFE_SUPPORT_BEEP
			ife LIFE_SUPPORT 1800 sound LIFE_SUPPORT_BEEP
			ife LIFE_SUPPORT 1440 { set PLAYER_VOICEOVER 35 sound LIFE_SUPPORT_BEEP }
			ife LIFE_SUPPORT 720 sound LIFE_SUPPORT_BEEP
			ife LIFE_SUPPORT 360
			{
			sound LIFE_SUPPORT_BEEP
			setactorsoundpitch THISACTOR LIFE_SUPPORT_BEEP 128
			}
			ife LIFE_SUPPORT 180 			
			{
			sound LIFE_SUPPORT_BEEP
			setactorsoundpitch THISACTOR LIFE_SUPPORT_BEEP 256
			}
			ife LIFE_SUPPORT 90 
			{
			sound LIFE_SUPPORT_BEEP
			setactorsoundpitch THISACTOR LIFE_SUPPORT_BEEP 512
			}
			ife LIFE_SUPPORT 60 
			{
			sound LIFE_SUPPORT_BEEP
			setactorsoundpitch THISACTOR LIFE_SUPPORT_BEEP 512
			}
			ife LIFE_SUPPORT 30
			{
			sound LIFE_SUPPORT_BEEP
			setactorsoundpitch THISACTOR LIFE_SUPPORT_BEEP 512
			}
ends

useractor notenemy SPACESUIT_REFILL

ifaction 0 
	{ 
	sizeat 42 42
	action ZERO
	}

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
		ife PERSONEL_RESEARCH[27] 2 // o2 cap increase
			{
			ifg LIFE_SUPPORT 21599 break
			else
				{
				add LIFE_SUPPORT 5400
				ifl LIFE_SUPPORT 1800 ifrnd 32 set PLAYER_VOICEOVER 36
				soundonce LIFE_SUPPORT_BEEP
				state PICKUP_DISPLAY
				geta[].picnum PICKED_UP_TILE
				setarray PICKED_UP_INVEN[1] -1
				set ITEM_AMOUNT -1	 
				ifspawnedby SPACESUIT_REFILL
				  state getcode
				else
				  state quikget
				}
			}
		else
			{
			ifg LIFE_SUPPORT 14399 break
			else
				{
				add LIFE_SUPPORT 5400
				ifl LIFE_SUPPORT 1800 ifrnd 32 set PLAYER_VOICEOVER 36
				soundonce LIFE_SUPPORT_BEEP
				state PICKUP_DISPLAY
				geta[].picnum PICKED_UP_TILE
				setarray PICKED_UP_INVEN[1] -1
				set ITEM_AMOUNT -1	 
				ifspawnedby SPACESUIT_REFILL
				  state getcode
				else
				  state quikget
				}
			}
      }
	
enda

useractor notenemy SPACESUIT
state ITEMSETTINGS

ifaction 0 
	{ 
	sizeat 22 22
	set ALLY_MAG 14400
	ifspritepal 3 { action SUIT_WORN cstat 32768 } 
	else ifspritepal 5 { action SUIT_WORN cstat 32768 }
	else ifspritepal 9 { action ACAR }
	else { action SUIT_IDLE cstat 257 } 
	}

  fall
  
  ifspritepal 5
	{
	   ifp palive
        ifpdistl 2048
		ife SPACE_SUIT 1
              ifcanseetarget
			   ifn CHAR 12
			    ifn CHAR 13
				 ifn CHAR 14
					{
					soundonce EQUIPMENT_OFF
					stopsound LIFE_SUPPORT_ACT
					set SPACE_SUIT 0
					set ALLY_MAG LIFE_SUPPORT 
					palfrom 64 0 0 0
					cstat 257
					set just_changed 1
					killit
					}
	}
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
		 ifp pfacing
          ifcount 6
              ifcanseetarget
			   ifn CHAR 12
			    ifn CHAR 13
				 ifn CHAR 14
				  {
				  set player_use 0
				  ifhitspace
				  ifcount 13
					{
					ifaction SUIT_WORN
					 ife SPACE_SUIT 1
						{
						soundonce EQUIPMENT_OFF
						stopsound LIFE_SUPPORT_ACT
						set ALLY_MAG LIFE_SUPPORT 
						set SPACE_SUIT 0
						palfrom 64 0 0 0
						cstat 257
						action SUIT_IDLE
						set just_changed 1
						}
					else
					ifaction SUIT_IDLE
					 ife SPACE_SUIT 0
						{
						soundonce PUT_ON_EQUIP
						set LIFE_SUPPORT ALLY_MAG
						set SPACE_SUIT 1
						userquote 209
						palfrom 64 0 0 0
						cstat 32768
						action SUIT_WORN
						set just_changed 1
						}
					resetcount
					}
				  }
enda

useractor notenemy GASMASK
state ITEMSETTINGS
ifaction 0 { sizeat 40 40 action ZERO cstat 0 }

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	ifg GAS_MASK 0 break
	else
		{
		set GAS_MASK 1
		state PICKUP_DISPLAY
		geta[].picnum PICKED_UP_TILE
		setarray PICKED_UP_INVEN[1] 60
		set ITEM_AMOUNT -1	 
        ifspawnedby GASMASK
          state getcode
        else
          state quikget
		}
      }
enda

useractor notenemy FLIPPER
state ITEMSETTINGS
ifaction 0 
	{ 
	sizeat 40 40 
	action ZERO 
	readarrayfromfile EQUIPMENT_FOUND 4011
	cstat 0 
	}

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	  
			ife EQUIPMENT_FOUND[5] 0
				{
				userquote 3038
				setarray EQUIPMENT_FOUND[5] 1 
				writearraytofile EQUIPMENT_FOUND 4011
				globalsound FOUND_EQUIPMENT
				palfrom 20 60 60 60
				}
	  
	ifg GOT_FLIPPER 0 break
	else
		{
		set GOT_FLIPPER 1
		state PICKUP_DISPLAY
		geta[].picnum PICKED_UP_TILE
		setarray PICKED_UP_INVEN[1] 60
		set ITEM_AMOUNT -1	 
        ifspawnedby FLIPPER
          state getcode
        else
          state quikget
		}
      }
enda

useractor notenemy 16625
state ITEMSETTINGS
ifaction 0 { sizeat 40 40 action ZERO cstat 0 }

  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	ifg JUMP_BOOTS 0 break
	else
		{
		set JUMP_BOOTS 1
		state PICKUP_DISPLAY
		geta[].picnum PICKED_UP_TILE
		setarray PICKED_UP_INVEN[1] 60
		set ITEM_AMOUNT -1	 
        ifspawnedby 16625
          state getcode
        else
          state quikget
		}
      }
enda

useractor notenemy O2CANISTER
state ITEMSETTINGS
ifaction 0 { sizeat 32 32 action ZERO cstat 0 }

  fall
  
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
		getp[].scuba_amount TEMP
		ifl TEMP 1 break
		else
			{
			add TEMP 1280
			ife CHAR 0 { ifg TEMP 12800 set TEMP 12800 } else
				{ ifg TEMP 6400 set TEMP 6400 }
				setp[].scuba_amount TEMP     
					state PICKUP_DISPLAY
					geta[].picnum PICKED_UP_TILE
					setarray PICKED_UP_INVEN[1] 60
					set ITEM_AMOUNT -1	 
				   
					ifspawnedby O2CANISTER
					  state getcode
					else
					  state quikget
			}
      }
enda

spriteshadow 16835
spriteshadow 16836
spriteshadow 16837
spriteshadow 16838

useractor notenemy 16835 // Egyptian jumping sandals
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}
	


  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_ARTIFACTS 1
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 16836 // Egyptian mask
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_ARTIFACTS 2
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 16837 // Egyptian strength bracelets
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_ARTIFACTS 4
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 16838 // Egptian slowfall feather
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_ARTIFACTS 8
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

spriteshadow 23711
spriteshadow 23719
spriteshadow 23723
spriteshadow 23703

useractor notenemy 23711
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_KEYS 1
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 23719
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_KEYS 2
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 23723
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_KEYS 4
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 23703
ifaction 0 
	{ 
	sizeat 24 24 
	action ZERO 
	cstat 0 set 
	command 32768 	 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum
			xorvar EGYPT_KEYS 8
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 22377 // 1st half of temple key
ifaction 0 
	{ 
	sizeat 16 16
	action ZERO 
	cstat 0
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 0
			set DISP_KEY_PIC sprite[].picnum
			ifand TEMPLE_KEY 2 { set TEMPLE_KEY 4 }
			else xorvar TEMPLE_KEY 1
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

useractor notenemy 22378 // 2nd half of temple key
ifaction 0 
	{ 
	sizeat 16 16
	action ZERO 
	cstat 0
	}

  fall
  
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {   
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 0
			set DISP_KEY_PIC sprite[].picnum
			ifand TEMPLE_KEY 1 { set TEMPLE_KEY 4 }
			else xorvar TEMPLE_KEY 2
			globalsound QUEST_ITEM
			palfrom 30 63 63 63
			killit
      }
enda

eventloadactor C4_EXPLOSIVE state GETITEMSETTINGS enda

useractor notenemy C4_EXPLOSIVE
state ITEMSETTINGS
ifaction 0 { sizeat 16 16 action ZERO }

cstat 0

  fall

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifl GOT_EXPLOSIVE 5
      {
	     add GOT_EXPLOSIVE 1
	   		  
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
			
          state quikget
		  
      }
enda

eventloadactor ASTRIKE_MARKER state GETITEMSETTINGS enda

useractor notenemy ASTRIKE_MARKER
state ITEMSETTINGS
ifaction 0 { sizeat 64 64 action ZERO }

cstat 0

  fall

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifl AIRSTRIKE_MARKER 4
      {
	     add AIRSTRIKE_MARKER 1
	   		  
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
			
          state quikget
		  
      }
enda

eventloadactor FIREWALL_CHIP state GETITEMSETTINGS enda

useractor notenemy FIREWALL_CHIP
state ITEMSETTINGS
ifaction 0 { sizeat 16 16 action ZERO }

cstat 0

  fall

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ife GOT_FIREWALL 0
				{
				set GOT_FIREWALL 1  
				state PICKUP_DISPLAY
				geta[].picnum PICKED_UP_TILE
				setarray PICKED_UP_INVEN[1] 60
				set ITEM_AMOUNT -1	 				
				state quikget 
				}
enda

eventloadactor GENERICKEY state GETITEMSETTINGS enda

useractor notenemy GENERICKEY
state ITEMSETTINGS
ifaction 0 { sizeat 24 24 action ZERO }

cstat 0

  fall
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifl GENERIC_KEYS 5
      {
	     add GENERIC_KEYS 1
		  
		ifmultiplayer
			ife COOP 1
				{
				state RADIO_KEY_SOUNDS
				qgetsysstr 356 STR_PLAYERNAME
				qstrcat 356 663
				userquote 356
				}
		  
			palfrom 10 64 64 64
			set DISP_KEY -150
			set DISP_KEY_PAL 12
			set DISP_KEY_PIC sprite[].picnum 
		 
         state quikget

      }
enda

eventloadactor COG_PICKUP state GETITEMSETTINGS enda

useractor notenemy COG_PICKUP
state ITEMSETTINGS

ifspritepal 3 nullop else set command 256

ifaction 0
{
sizeat 46 46
geta[].mdflags TEMP
orvar TEMP 16
seta[].mdflags TEMP 
cstat 0
action ZERO
}

  fall
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifl COGS 3
      {
	     add COGS 1
	   
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
	   
          state quikget
      }
enda

eventloadactor TOOLBOX_PICKUP state GETITEMSETTINGS enda

useractor notenemy TOOLBOX_PICKUP
  fall
state ITEMSETTINGS
ifaction 0 { sizeat 32 32 action ZERO cstat 0 }


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ife TOOLBOX 0
      {
	   set TOOLBOX 1
	   
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
	   
          state quikget
      }
enda


eventloadactor AMULET state GETITEMSETTINGS enda

actor AMULET
state ITEMSETTINGS

ifaction 0
	{
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP
	set command 65792
	fall
	}

set TEMP PMAXHEALTH
mulvar TEMP 2

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifl PHEALTH TEMP
              ifcanseetarget
      {
	  addphealth 20
	  ife VOLUME 0 ife LEVEL 7 
		{ getp[].max_player_health TEMP add TEMP 5 setp[].max_player_health TEMP } 
		else
			{
			ife SKILL_LEVEL 1 { getp[].max_player_health TEMP add TEMP 4 setp[].max_player_health TEMP }
			ife SKILL_LEVEL 2 { getp[].max_player_health TEMP add TEMP 3 setp[].max_player_health TEMP }
			ife SKILL_LEVEL 3 { getp[].max_player_health TEMP add TEMP 2 setp[].max_player_health TEMP }
			ife SKILL_LEVEL 4 { getp[].max_player_health TEMP add TEMP 1 setp[].max_player_health TEMP }
			}
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
		
        ifspawnedby AMULET
          state getcode
        else
          state quikget
      }
enda


eventloadactor COOKIE state GETITEMSETTINGS enda

useractor notenemy COOKIE
state ITEMSETTINGS
fall
sizeat 32 32

set TEMP PMAXHEALTH
mulvar TEMP 2

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifl PHEALTH TEMP
              ifcanseetarget
      {
	  getp[].max_player_health TEMP
	  set TEMP2 TEMP
	  add TEMP2 30
	  setp[].max_player_health TEMP2
	  addphealth 30
	  setp[].max_player_health TEMP
	  
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT 30
			ife CHAR 14 
			 ife TIMEZONE 6
				 {
				set FORTUNE_TIMER 300
				set FORTUNE_QUOTE 6540
				}
			 else
				 {
				set FORTUNE_TIMER 300
				set FORTUNE_QUOTE 6500
				randvar TEMP4 30
				add FORTUNE_QUOTE TEMP4
				}
		
        ifspawnedby COOKIE
          state getcode
        else
          state quikget
      }
enda

eventloadactor 3710 state GETHITAGLOTAG enda

useractor notenemy 3710 // Supply drop spawner
cstat 32768

ifpdistl 2048
	{
		readgamevar AIRDROP_LEVELS
		ifvarvarand AIRDROP_LEVELS LOTAGSAVED
			{ 
			globalsound AMCSHIP_FLYBY 
			quote 3091
			operaterespawns HITAGSAVED
			xorvarvar AIRDROP_LEVELS LOTAGSAVED 
			savegamevar AIRDROP_LEVELS
			readgamevar SUPPLY_LEVEL
			sub SUPPLY_LEVEL 30
			addlogvar SUPPLY_LEVEL
			savegamevar SUPPLY_LEVEL
			killit 
			}
	}

enda

useractor notenemy 3709 // Supply drop sprite
cstat 32768

ifcount 8
{
findnearactor3d AMCSHIP 2048 TEMP9 ifn TEMP9 -1 { spawn 3062 spawn 3707 killit  }
resetcount
}

enda

spriteshadow 3707

move FLOAT_DOWN 0 90

useractor notenemy 3707 // Supply drop
sizeat 20 20

ifaction 0
	{
	move FLOAT_DOWN getv
	action ZERO
	}
	
ifaction ZERO
	{
	iffloordistl 16
		{
		sound WOODBREAK
		sound WOODBREAK shoot WOODSCRAP shoot WOODSCRAP shoot WOODSCRAP shoot WOODSCRAP shoot WOODSCRAP shoot WOODSCRAP
		spawn 3063 // beacon
		spawn 3636 // suppl box
		killit
		}
	}

enda

spritenoshade 3063

useractor notenemy 3063 // supply beacon
fall
ifaction 0
	{
	sizeat 20 20
	spritepal 103
	action ZERO
	}
	
ifaction ZERO
	{
	fall
	ifcount 60 
		{
		sound BEACON_BEEP
		spawn 3060
		resetcount
		}
	ifpdistl 1536
		{
		spritepal 0
		sound BEACON_BEEP
		setactorsoundpitch THISACTOR BEACON_BEEP 512
		action FORM
		}
	}
	
ifaction FORM
	{
	ifpdistg 8192
		{
		ifcansee nullop
		else killit
		}
	}
	
enda

spritenopal 3060
spritenoshade 3060

useractor notenemy 3060 // map beacon light
ifaction 0
	{
	cstat 130
	geta[].z TEMP
	sub TEMP 1024
	seta[].z TEMP
	sizeat 16 16
	ifspawnedby 3063 spritepal 1
	seta[].shade -64
	seta[].blend 255
	action ONE
	}
	
ifaction ONE
	{
	geta[].xrepeat TEMP
	add TEMP 2
	seta[].xrepeat TEMP
	seta[].yrepeat TEMP
	
	geta[].shade TEMP2
	add TEMP2 2
	seta[].shade TEMP2
	ifg TEMP2 30 killit
	}
	
enda

spriteshadow 3636

eventloadactor 3636 state GETHITAGLOTAG state GETITEMSETTINGS enda

useractor notenemy 3636
fall
spriteflags 69
sizeat 32 32

state ITEMSETTINGS

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl 2048
          ifcount 6
              ifcanseetarget
      {
	soundonce EQUIPMENT_OFF
		spawn SHIELD
		spawn SIXPAK
		spawn COLA
		spawn SHOTGUNAMMO
		spawn SHOTGUNAMMO
		spawn AMMO
		spawn AMMO
		spawn AMMO
		spawn BATTERYAMMO
		spawn BATTERYAMMO
		spawn RPGAMMO
		spawn CRYSTALAMMO
		spawn DEVISTATORAMMO
		spawn FREEZEAMMO
		spawn GROWAMMO
		spawn TRIPBOMBSPRITE
		spawn TRIPBOMBSPRITE
		spawn TRIPBOMBSPRITE		
          killit
      }

enda

spritenoshade MEGASPHERE
spritenopal MEGASPHERE
spriteshadow MEGASPHERE

useractor notenemy MEGASPHERE
sizeat 32 32

state ITEMSETTINGS

ifaction 0
{
seta[].blend 255
seta[].shade -127
seta[].cstat 2
 seta[].mdflags 16
 set command 32768
}

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
		   ifl PHEALTH 255
		    ifl PARMOUR 255
              ifcanseetarget
      {
	  getp[].max_player_health TEMP
	  ifl TEMP 200 setp[].max_player_health 200
	  set PLAYER_VOICEOVER 51
	  addphealth 200
	  setp[].max_player_health TEMP
	  setp[].shield_amount 200
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
		
        ifspawnedby MEGASPHERE
          state getcode
        else
          state quikget
      }
enda

useractor notenemy SWORD_RAMPAGE 
spriteflags 69
sizeat 24 24

state ITEMSETTINGS

	ifaction 0
	{
	 seta[].mdflags 16
	 set command 32768
	}

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	    palfrom 40 40 40 40
		
	    set SWORD_RAMP 780
        quote 249
		set PLAYER_VOICEOVER 51
		addphealth 50
		state drop_tempweapon
		ife temp_weapon 0
				{
				set temp_weapon 19
				setp[].ammo_amount 0 1
				setp[].curr_weapon 0
				}
				else spawn SWORDSPRITE
		
        ifspawnedby SWORD_RAMPAGE
          state getcode
        else
          state quikget
      }
enda

useractor notenemy INVINCIBILITY
ifaction 0
	{
	spriteflags 69
	sizeat 40 40
	seta[].mdflags 16 
	set command 256
	action ZERO
	}

state ITEMSETTINGS

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	    palfrom 40 40 40 40
		set PLAYER_VOICEOVER 51
		addphealth 50
	    set INVINC 780
        quote 1606
		
        ifspawnedby INVINCIBILITY
          state getcode
        else
          state quikget
      }
enda

useractor notenemy SPIRIT_ARMOUR
fall
ifaction 0
	{
	sizeat 44 44
	seta[].mdflags 16 
	set command 256
	action ZERO
	}

state ITEMSETTINGS

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifl P_SPIRIT_ARMOUR 100
				  {
				   set P_SPIRIT_ARMOUR 100
					quote 195
					
						state PICKUP_DISPLAY
						geta[].picnum PICKED_UP_TILE
						setarray PICKED_UP_INVEN[1] 60
						set ITEM_AMOUNT -1	 
					
					ifspawnedby SPIRIT_ARMOUR
					  state getcode
					else
					  state quikget
				  }
enda

useractor notenemy FIRE_ARMOUR

ifaction 0
	{
	sizeat 44 44
	seta[].mdflags 16 
	set command 256
	action ZERO
	}

state ITEMSETTINGS
fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			   ifl P_FIRE_ARMOUR 100
				  {
				   set P_FIRE_ARMOUR 100
				   setactorvar[PLAYER_IDENTITY].FIRE_DAMAGE 0
				   quote 244
					
						state PICKUP_DISPLAY
						geta[].picnum PICKED_UP_TILE
						setarray PICKED_UP_INVEN[1] 60
						set ITEM_AMOUNT -1	 
					
					ifspawnedby FIRE_ARMOUR
					  state getcode
					else
					  state quikget
				  }
enda

useractor notenemy SUPER_ARMOUR
ifaction 0
	{
	sizeat 44 44
	seta[].mdflags 16 
	set command 256
	action ZERO
	}

state ITEMSETTINGS
fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
      {
	   set P_FIRE_ARMOUR 200
	   set P_SPIRIT_ARMOUR 200
	   setp[].shield_amount 200
        quote 245
		
			state PICKUP_DISPLAY
			geta[].picnum PICKED_UP_TILE
			setarray PICKED_UP_INVEN[1] 60
			set ITEM_AMOUNT -1	 
		
        ifspawnedby SUPER_ARMOUR
          state getcode
        else
          state quikget
      }
enda

actor FIRSTAID
  seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
              ifcanseetarget
			  {
			  getp[].firstaid_amount TEMP
			  ifl TEMP PMAXHEALTH
			      {
				   add TEMP 100
				   setp[].firstaid_amount TEMP
				   ifg TEMP 100
				   ifg TEMP PMAXHEALTH setp[].firstaid_amount PMAXHEALTH

				   setarray PICKED_UP_INVEN[1] 60
				   state PICKUP_DISPLAY
				   getactorvar[PLAYER_IDENTITY].CMEDIKIT PICKED_UP_TILE
				   set ITEM_AMOUNT 100
				   setp[].invdisptime 60
				   
			        ifspawnedby FIRSTAID
			          state getcode
			        else
			          state quikget
			      }
			}
enda

actor FIRSTGUNSPRITE
  seta[].mdflags 16
state ITEMSETTINGS
  fall
  
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifgotweaponce 0
          break

	 ife CHAR 0 
		{
		ife CURWEAP 1 { ifand GUNSAKIMBO 4 nullop else { xorvar GUNFIREMODE 64 setp[].weapon_pos 10 } }
			ife player[].gotweapon 1 1 { ifand GUNSAKIMBO 4 nullop else xorvar GUNSAKIMBO 4 }	
		}
		

	 ife CHAR 5
		{
		ife SPECIALIST_EQUIPMENT[29] 2 nullop else
			{
		ife CURWEAP 1 { ifand GUNSAKIMBO 4 nullop else { set PLAYER_VOICEOVER 44 xorvar GUNFIREMODE 64 setp[].weapon_pos 10 } }
			ife player[].gotweapon 1 1 { ifand GUNSAKIMBO 4 nullop else xorvar GUNSAKIMBO 4 }	
			}
		}
		
	 ife CHAR 14 
		{
		ife CURWEAP 1 { ifand GUNSAKIMBO 4 nullop else { xorvar GUNFIREMODE 64 setp[].weapon_pos 10 } }
		ife player[].gotweapon 1 1 { ifand GUNSAKIMBO 4 nullop else xorvar GUNSAKIMBO 4 }	
		}
		
        addweapon PISTOL_WEAPON 0
		
		ifn CHAR 2
		{
		getp[].ammo_amount 1 TEMP
		ife TEMP player[].max_ammo_amount 1 break
		set TEMP3 AMMO_AMOUNT[1]
		mulvar TEMP3 2
		add TEMP TEMP3
		ifg TEMP player[].max_ammo_amount 1 set TEMP player[].max_ammo_amount 1
		setp[].ammo_amount 1 TEMP
		}
		
		setarray PICKED_UP_GUN[1] 30
		set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON1_TILE PICKED_UP_TILE
		ife CHAR 2 
			{
			addweapon PISTOL_WEAPON 1
			set ITEM_AMOUNT -1
			}
			else
		set ITEM_AMOUNT TEMP3
		
        ifspawnedby FIRSTGUNSPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda

actor TRIPBOMBSPRITE
  seta[].mdflags 16
state ITEMSETTINGS
  fall

  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifgotweaponce 0
          break

        addweapon TRIPBOMB_WEAPON 1
		
		setarray PICKED_UP_GUN[8] 30
		  set WEAP_SHOW 130
		
			ifspawnedby TRIPBOMBSPRITE
			    state getcode
			   else
			    state quikget
      }
enda

actor CHAINGUNSPRITE
  seta[].mdflags 16
  
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {

        ifgotweaponce 0
          break
	
	  ife CHAR 0
		{
		ife SPECIALIST_EQUIPMENT[55] 2 { set ITEM_AMOUNT 40 addweapon CHAINGUN_WEAPON 40 }
		else
		ife SPECIALIST_EQUIPMENT[15] 2 { set ITEM_AMOUNT 64 addweapon CHAINGUN_WEAPON 64 }
		else
		ife SPECIALIST_EQUIPMENT[8] 2 { set ITEM_AMOUNT 50 addweapon CHAINGUN_WEAPON 50 }
		else
			{
			ifand GUNSAKIMBO 2 nullop else
				{
				ife player[].gotweapon 3 1 
					{ 
					set PLAYER_VOICEOVER 44 
					globalsound GET_GUN 
					xorvar GUNSAKIMBO 2 
					xorvar GUNFIREMODE 1024 
					ife CURWEAP 3 setp[].weapon_pos 10
					}
				}
			set ITEM_AMOUNT 50 
			addweapon CHAINGUN_WEAPON 50
			}
		}
		else
	  ife CHAR 1
		{
		ife SPECIALIST_EQUIPMENT[70] 2 nullop // using Super galil?
		else
			{
			ifand GUNSAKIMBO 16 nullop else
				{
				ife player[].gotweapon 3 1 
					{ 
					set PLAYER_VOICEOVER 44 
					xorvar GUNSAKIMBO 16 
					xorvar GUNFIREMODE 1024 
					ife CURWEAP 3 setp[].weapon_pos 20 
					}
				}
			}
		set ITEM_AMOUNT 50 
		addweapon CHAINGUN_WEAPON 50
		}
		else
		   ife CHAR 3
			{
			ife SPECIALIST_EQUIPMENT[7] 2 { set ITEM_AMOUNT 50 addweapon CHAINGUN_WEAPON 50 }
			else ife SPECIALIST_EQUIPMENT[14] 2 { set ITEM_AMOUNT 40 addweapon CHAINGUN_WEAPON 40 }
			else { set ITEM_AMOUNT 50 addweapon CHAINGUN_WEAPON 50 }
			}
			else
		   ife CHAR 4
			{
			ife SPECIALIST_EQUIPMENT[6] 2 { set ITEM_AMOUNT 40 addweapon CHAINGUN_WEAPON 40 }
			else ife SPECIALIST_EQUIPMENT[16] 2 { set ITEM_AMOUNT 70 addweapon CHAINGUN_WEAPON 70 }
			else ife SPECIALIST_EQUIPMENT[34] 2 { set ITEM_AMOUNT 30 addweapon CHAINGUN_WEAPON 30 }
			else ife SPECIALIST_EQUIPMENT[71] 2 { set ITEM_AMOUNT 30 addweapon CHAINGUN_WEAPON 30 }
			else ife SPECIALIST_EQUIPMENT[74] 2 { set ITEM_AMOUNT 30 addweapon CHAINGUN_WEAPON 30 }
			else
				{
				ifand GUNSAKIMBO 2 nullop else
					{
					ife player[].gotweapon 3 1 
						{ 
						set PLAYER_VOICEOVER 44 
						xorvar GUNSAKIMBO 2 
						xorvar GUNFIREMODE 1024 
						ife CURWEAP 3 setp[].weapon_pos 20
						}
					}
				set ITEM_AMOUNT 50 
				addweapon CHAINGUN_WEAPON 50
				}
			}
			else
			ife CHAR 7
			{
			ife SPECIALIST_EQUIPMENT[21] 2 { set ITEM_AMOUNT 60 addweapon CHAINGUN_WEAPON 60 }
			else ife SPECIALIST_EQUIPMENT[47] 2 { set ITEM_AMOUNT 30 addweapon CHAINGUN_WEAPON 30 }
			else { set ITEM_AMOUNT 50 addweapon CHAINGUN_WEAPON 50 }
			}
			else
			{
			addweapon CHAINGUN_WEAPON 50
			set ITEM_AMOUNT 50 
			}
			
		ifand WEAPON_SPECIAL[3] 2 add fortymm_grenades 2
		ifand WEAPON_SPECIAL[3] 8 add fortymm_caseless 2
			
		  setarray PICKED_UP_GUN[3] 30
		  set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON3_TILE PICKED_UP_TILE
			
        ifspawnedby CHAINGUNSPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda

actor SHRINKERSPRITE
  seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	  ife CHAR 9 break
        ifgotweaponce 0
          break
        
       ife CHAR 0 { set ITEM_AMOUNT 20 addweapon SHRINKER_WEAPON 20 }
	   else ife CHAR 13 { set ITEM_AMOUNT 70 addweapon SHRINKER_WEAPON 70 }
	    else ife CHAR 14 { set ITEM_AMOUNT 5 addweapon SHRINKER_WEAPON 5 }
	   else { set ITEM_AMOUNT 10 addweapon SHRINKER_WEAPON 10 }
	   
		setarray PICKED_UP_GUN[6] 30
		  set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON6_TILE PICKED_UP_TILE
	   
        ifspawnedby SHRINKERSPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda

actor FREEZESPRITE
  seta[].mdflags 16
state ITEMSETTINGS


  ifmove RESPAWN_ACTOR_FLAG
    state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
        ifgotweaponce 0
          break


	  ife CHAR 0 { addweapon FREEZE_WEAPON 90 set ITEM_AMOUNT 90 } else
	  ife CHAR 1 { addweapon FREEZE_WEAPON 1 set ITEM_AMOUNT -1 } else
	  ife CHAR 3 { addweapon FREEZE_WEAPON 100 set ITEM_AMOUNT 100 } else
	  ife CHAR 4 { addweapon FREEZE_WEAPON 5 set ITEM_AMOUNT 5 } else 
      ife CHAR 5 { addweapon FREEZE_WEAPON 60 set ITEM_AMOUNT 60 } else 
	  ife CHAR 7 { addweapon FREEZE_WEAPON 40 set ITEM_AMOUNT 40 } else
	  ife CHAR 12 { addweapon FREEZE_WEAPON 100 set ITEM_AMOUNT 100 } else
	  ife CHAR 13 { addweapon FREEZE_WEAPON 100 set ITEM_AMOUNT 100 } else
	  ife CHAR 14 { addweapon FREEZE_WEAPON 100 set ITEM_AMOUNT 100 } else
	  { addweapon FREEZE_WEAPON FREEZEAMMOAMOUNT set ITEM_AMOUNT FREEZEAMMOAMOUNT }
		
		setarray PICKED_UP_GUN[9] 30
		  set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON9_TILE PICKED_UP_TILE
		
		ifand WEAPON_SPECIAL[9] 2 add fortymm_grenades 2
		ifand WEAPON_SPECIAL[9] 8 add fortymm_caseless 2
		
        ifspawnedby FREEZESPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda

actor DEVISTATORSPRITE
  seta[].mdflags 16
state ITEMSETTINGS
  fall
  ifmove RESPAWN_ACTOR_FLAG state respawnit
  else
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
      {
	  ife CHAR 9 break
	  ife CHAR 11 break
        ifgotweaponce 0
          break
        ife CHAR 0 { addweapon DEVISTATOR_WEAPON 100 set ITEM_AMOUNT 100 } else
		ife CHAR 1 { addweapon DEVISTATOR_WEAPON DEVISTATORAMMOAMOUNT set ITEM_AMOUNT DEVISTATORAMMOAMOUNT } else
	  ife CHAR 2 
		{ 
		ife SPECIALIST_EQUIPMENT[50] 2 // tibetan Warcannon?
			{
			addweapon DEVISTATOR_WEAPON 3 set ITEM_AMOUNT 3
			}
		else
			{
			addweapon DEVISTATOR_WEAPON 10 set ITEM_AMOUNT 10
			}
		} 
		else
	  ife CHAR 3 { addweapon DEVISTATOR_WEAPON 5 set ITEM_AMOUNT 5 } else
	  ife CHAR 4 
		{ 
			ife SPECIALIST_EQUIPMENT[80] 2 { addweapon DEVISTATOR_WEAPON 10 set ITEM_AMOUNT 10 } else
			{ addweapon DEVISTATOR_WEAPON 70 set ITEM_AMOUNT 70 }
		}  
		else
      ife CHAR 5 { addweapon DEVISTATOR_WEAPON 70 set ITEM_AMOUNT 70 }  else
	  ife CHAR 6 
		{ 
		ife SPECIALIST_EQUIPMENT[79] 2 // auto shotgun?
			{
			addweapon DEVISTATOR_WEAPON 20 
			set ITEM_AMOUNT 20 
			}
		else
			{
			addweapon DEVISTATOR_WEAPON 70 
			set ITEM_AMOUNT 70 
			}
		}  
		else
	 ife CHAR 7 { addweapon DEVISTATOR_WEAPON 2 set ITEM_AMOUNT 2 }  else
	 ife CHAR 10 { addweapon DEVISTATOR_WEAPON 5 set ITEM_AMOUNT 5 }  else
	 ife CHAR 12 { addweapon DEVISTATOR_WEAPON 5 set ITEM_AMOUNT 5 }  else
	 ife CHAR 13 
		{ 
		ife SPECIALIST_EQUIPMENT[54] 2 // meson cannon?
			{
			addweapon DEVISTATOR_WEAPON 3 set ITEM_AMOUNT 3
			}
		else
			{
			addweapon DEVISTATOR_WEAPON 10 set ITEM_AMOUNT 10
			}
		} 
		else
	 ife CHAR 14 { addweapon DEVISTATOR_WEAPON 10 set ITEM_AMOUNT 10 } 
	 
		setarray PICKED_UP_GUN[7] 30
		  set WEAP_SHOW 130
		state PICKUP_DISPLAY
		getactorvar[PLAYER_IDENTITY].WEAPON7_TILE PICKED_UP_TILE
		
		ifand WEAPON_SPECIAL[7] 2 add fortymm_grenades 2
		ifand WEAPON_SPECIAL[7] 8 add fortymm_caseless 2
	  
        ifspawnedby DEVISTATORSPRITE
          state getweaponcode
        else
          state quikweaponget
      }
enda



// Treasure!

defstate TREASURE
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
				{
				ifactor 7859 { ifrnd 32 set PLAYER_VOICEOVER 38 globalsound CASHREG } else
				ifactor 7862 { ifrnd 32 set PLAYER_VOICEOVER 38 globalsound CASHREG } else
				ifactor 7863 { ifrnd 32 set PLAYER_VOICEOVER 38 globalsound CASHREG } else
				globalsound FOUND_TREASURE
				palfrom 20 60 60 60
				add TREASURE_FOUND 2
				ifactor 7859 userquote 1022 else 
				ifactor 7862 userquote 1022 else
				ifactor 7863 userquote 1022 else
				userquote 1021
				killit
				}
ends

useractor notenemy 7856 sizeat 32 32 state TREASURE enda
useractor notenemy 7857 sizeat 32 32 state TREASURE enda
useractor notenemy 7858 sizeat 32 32 state TREASURE enda
useractor notenemy 7860 sizeat 32 32 state TREASURE enda
useractor notenemy 7861 sizeat 32 32 state TREASURE enda

useractor notenemy 7859 sizeat 25 25 state TREASURE enda // Dollar
useractor notenemy 7862 sizeat 25 25 state TREASURE enda // Sterling
useractor notenemy 7863 sizeat 25 25 state TREASURE enda // Yuan

spriteshadow 10234

useractor notenemy 10234 // Shotgun ammo belt
sizeat 18 18
fall

ifaction 0 
	{ 
	readarrayfromfile EQUIPMENT_FOUND 4011
	ife EQUIPMENT_FOUND[1] 1 { spawn SHOTGUNAMMO killit }
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3038
			setarray EQUIPMENT_FOUND[1] 1 
			writearraytofile EQUIPMENT_FOUND 4011
			globalsound FOUND_EQUIPMENT
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 10234
			set ITEM_AMOUNT -1
			
			palfrom 20 60 60 60
			killit
			}
enda

spriteshadow 12233

useractor notenemy 12233 // Combat Shovel
sizeat 24 24
fall

ifaction 0 
	{ 
	readarrayfromfile EQUIPMENT_FOUND 4011
	ife EQUIPMENT_FOUND[2] 1 killit
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3038
			setarray EQUIPMENT_FOUND[2] 1 
			writearraytofile EQUIPMENT_FOUND 4011
			globalsound FOUND_EQUIPMENT
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 12233
			set ITEM_AMOUNT -1
			
			palfrom 20 60 60 60
			killit
			}
enda

spriteshadow 22758

useractor notenemy 22758 // Ballistic mask
sizeat 24 24
fall

ifaction 0 
	{ 
	readarrayfromfile EQUIPMENT_FOUND 4011
	ife EQUIPMENT_FOUND[3] 1 killit
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3038
			setarray EQUIPMENT_FOUND[3] 1 
			writearraytofile EQUIPMENT_FOUND 4011
			globalsound FOUND_EQUIPMENT
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22758
			set ITEM_AMOUNT -1
			
			palfrom 20 60 60 60
			killit
			}
enda


spriteshadow RIOT_SHIELD

useractor notenemy RIOT_SHIELD // Riot shield

fall

ifaction 0 
	{ 
	sizeat 24 20
	cstat 16
	readarrayfromfile EQUIPMENT_FOUND 4011
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl RIOTSHIELD 150
			{
			ife EQUIPMENT_FOUND[4] 0
				{
				userquote 3038
				setarray EQUIPMENT_FOUND[4] 1 
				writearraytofile EQUIPMENT_FOUND 4011
				globalsound FOUND_EQUIPMENT
				palfrom 20 60 60 60
				}
			
			state PICKUP_DISPLAY
			sound PUT_ON_EQUIP
			set PICKED_UP_TILE RIOT_SHIELD
			set ITEM_AMOUNT 150
			set RIOTSHIELD 150
			set SHIELDUP 1
			killit
			}
enda

spriteshadow AMC_RIOT_SHIELD

useractor notenemy AMC_RIOT_SHIELD // AMC Riot shield

fall

ifaction 0 
	{ 
	sizeat 24 20
	cstat 16
	readarrayfromfile EQUIPMENT_FOUND 4011
	ife EQUIPMENT_FOUND[4] 0 killit
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl RIOTSHIELD 150
			{
			state PICKUP_DISPLAY
			sound PUT_ON_EQUIP
			set PICKED_UP_TILE AMC_RIOT_SHIELD
			set ITEM_AMOUNT 150
			set RIOTSHIELD 150
			set SHIELD_TYPE 0
			set SHIELDUP 1
			killit
			}
enda

spriteshadow 23920

useractor notenemy 23920 // Wooden shield

fall

ifaction 0 
	{ 
	sizeat 32 32
	cstat 16
	readarrayfromfile EQUIPMENT_FOUND 4011
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl RIOTSHIELD 150
			{
			ife EQUIPMENT_FOUND[7] 0
				{
				userquote 3038
				setarray EQUIPMENT_FOUND[7] 1 
				writearraytofile EQUIPMENT_FOUND 4011
				globalsound FOUND_EQUIPMENT
				palfrom 20 60 60 60
				}
			
			state PICKUP_DISPLAY
			sound PUT_ON_EQUIP
			set PICKED_UP_TILE 23920
			set ITEM_AMOUNT 125
			set RIOTSHIELD 125
			set SHIELD_TYPE 1
			set SHIELDUP 1
			killit
			}
enda

spriteshadow 23921

useractor notenemy 23921 // Big wooden shield

fall

ifaction 0 
	{ 
	sizeat 40 40
	cstat 16
	readarrayfromfile EQUIPMENT_FOUND 4011
	action ZERO
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			 ifl RIOTSHIELD 150
			{
			ife EQUIPMENT_FOUND[8] 0
				{
				userquote 3038
				setarray EQUIPMENT_FOUND[8] 1 
				writearraytofile EQUIPMENT_FOUND 4011
				globalsound FOUND_EQUIPMENT
				palfrom 20 60 60 60
				}
			
			state PICKUP_DISPLAY
			sound PUT_ON_EQUIP
			set PICKED_UP_TILE 23921
			set ITEM_AMOUNT 200
			set RIOTSHIELD 200
			set SHIELD_TYPE 2
			set SHIELDUP 1
			killit
			}
enda

spriteshadow 10235

useractor notenemy 10235 // Golden Lighter
sizeat 10 10
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[1] 1 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[1] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 10235
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 10233

useractor notenemy 10233 // boots of lightstep
sizeat 20 20
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[2] 1 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[2] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 10233
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 10232

useractor notenemy 10232 // enchanted nails
sizeat 32 32
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[3] 1 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[3] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 10232
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 13542

useractor notenemy 13542 // tree book
sizeat 32 32
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[4] 1 { spawn COOKIE killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[4] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13542
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 19199

useractor notenemy 19199 // Spirit Shawl
sizeat 32 32
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[5] 1 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[5] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 19199
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 19198

useractor notenemy 19198 // Mako ring
sizeat 22 22
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[6] 1 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[6] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 19198
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 22762

useractor notenemy 22762 // Life Ring
sizeat 10 10
fall

ifrnd 1 spawn GLINT

ifaction 0 
	{ 
	readarrayfromfile ARTIFACTS_FOUND 4013 
	ife ARTIFACTS_FOUND[7] 1 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3037
			setarray ARTIFACTS_FOUND[7] 1 
			writearraytofile ARTIFACTS_FOUND 4013
			globalsound FOUND_ARTIFACT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22762
			set ITEM_AMOUNT -1
			
			killit
			}
enda

spriteshadow 6383

useractor notenemy 6383 // Ice spell for Sang
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[17] 0 { spawn AMULET killit }
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	set command 256
	action ZERO
	}



    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3204
			setarray SPECIALIST_EQUIPMENT[17] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 6383
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 22603

useractor notenemy 22603 // Manacle
sizeat 32 32
fall

ifaction 0 
	{ 
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP
	set command 32768
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[80] 0 { spawn DEVISTATORSPRITE killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3204
			setarray SPECIALIST_EQUIPMENT[80] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22603
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 13354

useractor notenemy 13354 // MS Corp silenced SMG for Mikko
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[21] 0 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3207
			setarray SPECIALIST_EQUIPMENT[21] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13354
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 13376

useractor notenemy 13376 // Remington 1858 for Rusty (Jekyl's pistol)
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[24] 0 killit
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3205
			setarray SPECIALIST_EQUIPMENT[24] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13376
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 13385

useractor notenemy 13385 // Browning Auto-5 for James
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[25] 0 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[25] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13385
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 13403

useractor notenemy 13403 // Long axe for Merlijn
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[26] 0 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3202
			setarray SPECIALIST_EQUIPMENT[26] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13403
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 13423

useractor notenemy 13423 // Micro-uzi for Rusty
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[29] 0 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3205
			setarray SPECIALIST_EQUIPMENT[29] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13423
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

spriteshadow 13424

useractor notenemy 13424 // MS Corp assault Shotgun for Mikko
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[30] 0 { spawn AMULET killit }
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3207
			setarray SPECIALIST_EQUIPMENT[30] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 13424
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 6386 // Fire spell for Sang
sizeat 32 32
fall

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[31] 0 { spawn AMULET killit }
	geta[].mdflags TEMP
	orvar TEMP 16
	seta[].mdflags TEMP 
	set command 256
	action ZERO
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
          ifcount 6
            ifcanseetarget
			{
			userquote 3204
			setarray SPECIALIST_EQUIPMENT[31] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 6386
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 15913 // MDF Battle Rifle for Mikko
sizeto 24 24

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[47] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3207
			setarray SPECIALIST_EQUIPMENT[47] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 15913
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda



useractor notenemy 19878 // Tec-pistol for Micky
sizeto 40 40

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[73] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3208
			setarray SPECIALIST_EQUIPMENT[73] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 19878
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22528 // Particle beam for Micky
sizeto 25 25

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[76] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3208
			setarray SPECIALIST_EQUIPMENT[76] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22528
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 17982 // Longslide pistol for Micky
sizeto 20 20

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[60] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3208
			setarray SPECIALIST_EQUIPMENT[60] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 17982
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 15898 // M4-15 for James
sizeto 28 28

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[84] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[84] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 15898
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22617 // GP-63 for Geoffrey
sizeto 28 28

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[81] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3206
			setarray SPECIALIST_EQUIPMENT[81] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22617
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22595 // Auto-shotty for Geoffrey
sizeto 42 42

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[79] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}
    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3206
			setarray SPECIALIST_EQUIPMENT[79] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22595
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22538 // Ranger for James
sizeto 28 28

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[77] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[77] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22538
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22571 // G36 for James
sizeto 28 28

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[78] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[78] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22571
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22692 // MSC-12 for Mikko
sizeto 40 40

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[85] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3207
			setarray SPECIALIST_EQUIPMENT[85] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22692
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 16573 // Meson cannon for Micky
sizeto 32 32

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[54] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3208
			setarray SPECIALIST_EQUIPMENT[54] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 16573
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 16107 // UMP45 for James
sizeto 32 32

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[55] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}

    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[55] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 16107
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 18086 // Nemesis Staff for Sang
sizeto 22 22

ifaction 0 
	{ 
	
		geta[].mdflags TEMP
		 orvar TEMP 16
		 seta[].mdflags TEMP
		 set command 32768
	
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[57] 0 { spawn FREEZESPRITE killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3204
			setarray SPECIALIST_EQUIPMENT[57] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 18077
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda


useractor notenemy 18011 // AWMSniper for Mikko
sizeto 40 40

ifaction 0 
	{ 
	seta[].mdflags 16
	set command 32768
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[59] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3207
			setarray SPECIALIST_EQUIPMENT[59] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 18011
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 22645 // MP5K for Zaxtor
sizeto 32 32

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[82] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3201
			setarray SPECIALIST_EQUIPMENT[82] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 22645
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 9163 // DZ Firestorm for Zaxtor
sizeto 32 32

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[52] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3201
			setarray SPECIALIST_EQUIPMENT[52] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 9163
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 15918 // Autocrossbow for James
sizeto 24 24

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[49] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[49] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 15918
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 16079 // KSG-12 for James
sizeto 40 40

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[53] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3200
			setarray SPECIALIST_EQUIPMENT[53] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 16079
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 15991 // Tibet Seige cannon for Merlijn
sizeto 24 24

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[50] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3202
			setarray SPECIALIST_EQUIPMENT[50] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 15991
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 16015 // Super Galil for Zaxtor
sizeto 32 32

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[70] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3201
			setarray SPECIALIST_EQUIPMENT[70] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 16015
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda


useractor notenemy 19917 // Cycloid plasma gun for Zaxtor
sizeto 20 20

ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[75] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}


    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcansee
			{
			userquote 3201
			setarray SPECIALIST_EQUIPMENT[75] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 19917
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 16069 // Guandao for Merlijn
sizeto 32 32
fall
ifaction 0 
	{ 
	readarrayfromfile SPECIALIST_EQUIPMENT 4016
	ifg SPECIALIST_EQUIPMENT[51] 0 { spawn AMULET killit }
	set INTERNALCOUNT 0
	action ZERO
	}
	
ifaction ZERO
	{
	ifl INTERNALCOUNT 48 add INTERNALCOUNT 1
	ife INTERNALCOUNT 48
		{
		move STOP spin
		}
	else move ITEM_FORWARD getv geth
	}



    ifp pshrunk nullop
    else
      ifp palive
        ifpdistl RETRIEVEDISTANCE
            ifcanseetarget
			{
			userquote 3202
			setarray SPECIALIST_EQUIPMENT[51] 1 
			writearraytofile SPECIALIST_EQUIPMENT 4016
			globalsound FOUND_EQUIPMENT
			add TREASURE_FOUND 1
			palfrom 20 60 60 60
			
			state PICKUP_DISPLAY
			set PICKED_UP_TILE 16069
			set ITEM_AMOUNT -1
			
			killit
			}
			
enda

useractor notenemy 16011 // WEAPON CASE

ifaction 0
{
ifpdistl 1536
 ifp pfacing
  ifp palive
	{
	set player_use 0
	 ifhitspace
	  ifcount 13
		{
		geta[].x TEMP
		geta[].y TEMP2
		action ZERO
		set INTERNALCOUNT 0
		}
	}
}

ifaction ZERO
{
add INTERNALCOUNT 1
move FORWARD geth
lockplayer 30
setp[].weapon_pos 10
 ifg INTERNALCOUNT 35
	{
	lockplayer 0
	seta[].x TEMP
	seta[].y TEMP2
	move STOP
	soundonce OPEN_AMMO_B
	action ONE
	ifn CHEATED 0 spawn SMALLSMOKE
	else espawnvar HITAGSAVED
	set INTERNALCOUNT 0
	}
}

enda

// BOTTLE CAPS

useractor notenemy 21238 // Pepsi Bottle Cap

ifaction 0
{
readgamevar FAITHFUL_LICENSE
ifspritepal 3
	{
	ifand FAITHFUL_LICENSE 2 action FORM else killit
	}
else
	{
	ifand FAITHFUL_LICENSE 16 killit
	action ZERO
	}
}

ifaction ZERO
{
		 ifpdistl RETRIEVEDISTANCE
		  ifp pfacing
		   ifp palive
			{
			set player_use 0
			 ifhitspace
				{
				state PICKUP_DISPLAY
				sound FOUND_TREASURE
				geta[].picnum PICKED_UP_TILE
				setarray PICKED_UP_INVEN[1] 60
				set ITEM_AMOUNT -1	 
				xorvar FAITHFUL_LICENSE 16
				savegamevar FAITHFUL_LICENSE
				killit
				}
			}
}

enda

useractor notenemy 21239 // Cola Bottle Cap

ifaction 0
{
readgamevar FAITHFUL_LICENSE
ifspritepal 3
	{
	ifand FAITHFUL_LICENSE 4 action FORM else killit
	}
else
	{
	ifand FAITHFUL_LICENSE 32 killit
	action ZERO
	}
}


ifaction ZERO
{
		 ifpdistl RETRIEVEDISTANCE
		  ifp pfacing
		   ifp palive
			{
			set player_use 0
			 ifhitspace
				{
				state PICKUP_DISPLAY
				sound FOUND_TREASURE
				geta[].picnum PICKED_UP_TILE
				setarray PICKED_UP_INVEN[1] 60
				set ITEM_AMOUNT -1	 
				xorvar FAITHFUL_LICENSE 32
				savegamevar FAITHFUL_LICENSE
				killit
				}
			}
}

enda

useractor notenemy 21240 // Capitol Bottle cap

ifaction 0
{
readgamevar FAITHFUL_LICENSE
ifspritepal 3
	{
	ifand FAITHFUL_LICENSE 8 action FORM else killit
	}
else
	{
	ifand FAITHFUL_LICENSE 64 killit
	action ZERO
	}
}
ifaction ZERO
{
		 ifpdistl RETRIEVEDISTANCE
		  ifp pfacing
		   ifp palive
			{
			set player_use 0
			 ifhitspace
				{
				state PICKUP_DISPLAY
				sound FOUND_TREASURE
				geta[].picnum PICKED_UP_TILE
				setarray PICKED_UP_INVEN[1] 60
				set ITEM_AMOUNT -1	 
				xorvar FAITHFUL_LICENSE 64
				savegamevar FAITHFUL_LICENSE
				killit
				}
			}
}

enda

// PICKUP CODE----------------------------ITEMS!-------------------------------------------------

gamearray DECORATIONS 128

defstate decoration_item
ifaction 0
{
readarrayfromfile DECORATIONS 4047
action ZERO
}

ifaction ZERO
	{
	ifspritepal 3
		{
		ife DECORATIONS[TEMP] 0 killit
		else action FORM
		}
	else
		{
		ife DECORATIONS[TEMP] 1 killit
		else
		 ifpdistl RETRIEVEDISTANCE
		  ifp pfacing
		   ifp palive
			{
			set player_use 0
			 ifhitspace
				{
				state PICKUP_DISPLAY
				quote 1220
				sound FOUND_TREASURE
					ifactor 20100 set PICKED_UP_TILE 3587 else
					ifactor 20120 set PICKED_UP_TILE 3587 else
					ifactor 20128 set PICKED_UP_TILE 3587 else
					ifactor 20148 set PICKED_UP_TILE 3587 else
					ifactor 20170 set PICKED_UP_TILE 3587 else
					ifactor 20171 set PICKED_UP_TILE 3587 else
					ifactor 20172 set PICKED_UP_TILE 3587 else
					ifactor 20328 
						{
						operaterespawns 159
						add TREASURE_FOUND 50
						set PICKED_UP_TILE 3587 
						}
						else
					geta[].picnum PICKED_UP_TILE
					setarray PICKED_UP_INVEN[1] 60
					set ITEM_AMOUNT -1	 
				setarray DECORATIONS[TEMP] 1
				writearraytofile DECORATIONS 4047
				killit
				}
			}
		}
	}
ends

useractor notenemy 20132 

ifaction 0
{
seta[].blend 255
readarrayfromfile DECORATIONS 4047
ife DECORATIONS[8] 0 killit
action ZERO
}

enda

useractor notenemy 20134 

ifaction 0
{
seta[].blend 255
readarrayfromfile DECORATIONS 4047
ife DECORATIONS[14] 0 killit
action ZERO
}

ifaction ZERO
	{
	ifpdistl 1024
	 ifp pfacing
	  ifp palive
		{
		set player_use 0
		 ifhitspace
		  ifcount 13
			{
			sound LIGHT_SWITCH
			ifspritepal 0 spritepal 21
			else ifspritepal 21 spritepal 11
			else ifspritepal 11 spritepal 23
			else ifspritepal 23 spritepal 49
			else ifspritepal 49 spritepal 0
			resetcount
			}
		}
	}

enda

useractor notenemy 20095 set TEMP 1 state decoration_item enda
useractor notenemy 20096 set TEMP 2 state decoration_item enda
useractor notenemy 20097 set TEMP 3 state decoration_item enda
useractor notenemy 20098 set TEMP 4 state decoration_item enda
useractor notenemy 20099 set TEMP 5 state decoration_item enda
useractor notenemy 20100 set TEMP 6 state decoration_item enda
useractor notenemy 20120 set TEMP 7 state decoration_item enda
useractor notenemy 20121 set TEMP 8 state decoration_item enda
useractor notenemy 20122 set TEMP 9 state decoration_item enda
useractor notenemy 20128 set TEMP 10 state decoration_item enda
useractor notenemy 20129 set TEMP 11 state decoration_item enda
useractor notenemy 20130 set TEMP 12 state decoration_item enda
useractor notenemy 20131 set TEMP 13 state decoration_item enda
useractor notenemy 20133 set TEMP 14 state decoration_item enda
useractor notenemy 20138 set TEMP 15 state decoration_item enda
useractor notenemy 20141 set TEMP 16 state decoration_item enda
useractor notenemy 20142 set TEMP 17 state decoration_item enda
useractor notenemy 20143 set TEMP 18 state decoration_item enda
useractor notenemy 20148 set TEMP 19 state decoration_item enda
useractor notenemy 20161 set TEMP 20 state decoration_item enda
useractor notenemy 20170 set TEMP 21 state decoration_item enda
useractor notenemy 20171 set TEMP 22 state decoration_item enda
useractor notenemy 20172 set TEMP 23 state decoration_item enda
useractor notenemy 20328 set TEMP 24 state decoration_item enda
useractor notenemy 20173 set TEMP 25 state decoration_item enda
useractor notenemy 20176 set TEMP 26 state decoration_item enda
useractor notenemy 20177 set TEMP 27 state decoration_item enda
useractor notenemy 20178 set TEMP 28 state decoration_item enda
useractor notenemy 20179 set TEMP 29 state decoration_item enda
useractor notenemy 20180 set TEMP 30 state decoration_item enda

useractor notenemy 22502 set TEMP 31 state decoration_item enda
useractor notenemy 22503 set TEMP 32 state decoration_item enda
useractor notenemy 22504 set TEMP 33 state decoration_item enda
useractor notenemy 22505 set TEMP 34 state decoration_item enda
useractor notenemy 22506 set TEMP 35 state decoration_item enda
useractor notenemy 22507 set TEMP 36 state decoration_item enda
useractor notenemy 22508 set TEMP 37 state decoration_item enda
useractor notenemy 22509 set TEMP 38 state decoration_item enda
useractor notenemy 22512 set TEMP 39 state decoration_item enda
useractor notenemy 22513 set TEMP 40 state decoration_item enda
useractor notenemy 22514 set TEMP 41 state decoration_item enda
useractor notenemy 22515 set TEMP 42 state decoration_item enda
useractor notenemy 22516 set TEMP 43 state decoration_item enda
useractor notenemy 22517 set TEMP 44 state decoration_item enda
useractor notenemy 22518 set TEMP 45 state decoration_item enda

useractor notenemy 17632 set TEMP 46 state decoration_item enda
useractor notenemy 17633 set TEMP 47 state decoration_item enda
useractor notenemy 17634 set TEMP 48 state decoration_item enda
useractor notenemy 17635 set TEMP 49 state decoration_item enda

