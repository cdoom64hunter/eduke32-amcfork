// AMC CON file for Zaxtor


// def

define SPECIAL_DOOR_EFF 19204
define POISONOUS_FRUIT 19218
define POISONOUS_FRUITDEAD 19219
define MUSHROOM 19220
define MUSHROOMDEAD 19221
define DOOROPENNEREFF 19227
define E_FORCEFIELD_BDOOR 19229
define MYXTER 19270
define MYXTERTALK 19276
define REGENTIMEREFF11 19277
define SHIELDFIELDBARRIER 19278
define ENERGYFIELD2_ON1 19279
define ENERGYFIELD2_OFF 19280
define ENERGYFIELD2_ON2 19290
define ENERGYFIELD2_ON3 19291
define SHIELDTOLERANCE_METER 19292
define DOORSENSOREFF 19295
define DOORSENSOR_TRIGGERER 19296
define PSEUDOSWITCHX_OFF 19297
define PSEUDOSWITCHX_ON 19298
define HURTEFFECTOR_ 19316
define XHX_ENERGYBEAM 19317
define XHX_ENERGYBEAMOFF 19320
define JB_CORELITEEFF 19323
define JB_REACTOR_CORE 19334
define LITECHANGEREFFECTOR 19335
define JB_CORE_ARC 19336
define JB_INNER_CORE 19340
define JB_INNER_LITES 19341
define SPECIALSWITCHXOFF 19342
define SPECIALSWITCHXON 19343
define OPENSSDOORS 19345
define ANONY_WOLVERINES 19349
define ANONY_WOLVERINES_SPK 19354
define TEMPOTILES_1 19363
define TEMPOTILES_1OFF 19367
define TEMPOTILES_2OFF 19368
define SUPER_TCHPLATE 19371
define CHANGINGCOLORVENT 19388
define DAMAGABLECEIL_TILE 19389
define PYRAMIDDOORSPIRITS 19395
define PYRAMIDDOORGEM 19397
define INSTANTDEATHSPIKES 19400
define HIDDENTRAPTILE 19401
define ff_delayer 19402
define PRESSABLESYMBOLS 19407
define SWK_1_02 19431
define TRAPSCANNER101 19434
define NONGHOSTTILE01 19435
define NONGHOSTTILE02 19436
define NONGHOSTTILE03 19437
define NONGHOSTTILE04 19438
define ANCIENTSYMBOLS 19441
define RADICAL_PARTICLE1 19442
define SPREADORVX1 19445
define SPREADORVX2 19446
define SPREADORVX3 19447
define SPREADORVX4 19448
define SPREADORVX5 19449
define SPREADORVX6 19450
define SPREADORVX7 19451
define SPREADORVX8 19452
define SPREADORVX9 19453

define BREAKABLESCEILING 21268
define CHOPBLADES01 21273
define CHOPBLADES02 21274
define CHOPBLADES03 21275
define CHOPBLADES04 21276
define CHOPBLADES05 21277
define MYSTERIOUSSTONE1 21278
define DISOLVINGSOULS1 21279
define DISOLVINGSOULS2 21280
define DISOLVINGSOULS3 21281
define DISOLVINGSOULS4 21282
define SSSPINE 21284
define SKELSNAKE_BLK_N_E 21285
define SSNAKE_WEAP_EFF 21287
define SSRIBS 21291
define SSNAKEEYES_N_E 21341
define SSNAKE_L_EYE_1_X_X 21343
define SSNAKE_R_EYE_1_X_X 21344
define SSNAKE_L_EYE_X_1_X 21345
define SSNAKE_R_EYE_X_1_X 21346
define SSNAKE_L_EYE_X_X_1 21347
define SSNAKE_R_EYE_X_X_1 21348
define SSNAKE_L_HORNS 21349
define SSNAKE_R_HORNS 21350
define SSNAKE_MOUTH_CLOSED 21351
define SSNAKE_OPENMOUTH_01 21352
define SSNAKE_OPENMOUTH_02 21353
define SSNAKE_OPENMOUTH_03 21354
define SSNAKE_OPENMOUTH_04 21355
define SSNAKE_OPENMOUTH_05 21356

define SSNAKE_L_EYE_1_X_XD 21358
define SSNAKE_R_EYE_1_X_XD 21359
define SSNAKE_L_EYE_X_1_XD 21360
define SSNAKE_R_EYE_X_1_XD 21361
define SSNAKE_L_EYE_X_X_1D 21362
define SSNAKE_R_EYE_X_X_1D 21363

define FSTYGIAN_ROCK 21366
define FIREBALLTRAILER 21370
define MOBSPAWNBLK 21371
define FIREEXP1 21378
define EPORTAL_AND_ETC1 21401
spritenopal EPORTAL_AND_ETC1
define MAGICALTILEEFFECTS 21408


// define sounds

// user con stuff

// health stuff
define B10PROT_SHIELD_STR 32700
define B10PROT_AUTOREGEN  32000
define BARRIER_PWR_LV      4161
define BARRIERPWRLV02      4000
define BARRIERPWRLV03      3840
define BARRIERPWRLV04      3680
define BARRIERPWRLV05      3520
define BARRIERPWRLV06      3360
define BARRIERPWRLV07      3200
define BARRIERPWRLV08      3040
define BARRIERPWRLV09      2880
define BARRIERPWRLV10      2720
define BARRIERPWRLV11      2560
define BARRIERPWRLV12      2400
define BARRIERPWRLV13      2240
define BARRIERPWRLV14      2080
define BARRIERPWRLV15      1920
define BARRIERPWRLV16      1760
define BARRIERPWRLV17      1600
define BARRIERPWRLV18      1440
define BARRIERPWRLV19      1280
define BARRIERPWRLV20      1120
define BARRIERPWRLV21       960
define BARRIERPWRLV22       800
define BARRIERPWRLV23       640
define BARRIERPWRLV24       480
define BARRIERPWRLV25       320
define BARRIERPWRLV26       160
define SKELETALSNKHPEYE    2000
define SKELETONSNKHEADSTR  6500


// quotes
definequote 8100  The switch has no power.
definequote 8101  The force field has failed.
definequote 8102  Access denied!!!
definequote 8103  Door G5 is unlocked.
definequote 8104  Rerouting power to the switch No.1!
definequote 8105  Door .5 been unlocked!!
definequote 8106  The violent explosion has severely damaged
definequote 8107  the second sealed door in the white sector.
definequote 8108  found the sacred gem to enter the pyramid.


// definesounds


// myospal , layers etc.

onevent EVENT_DISPLAYREST
 ife INSIDEQUICKFALL 2 rotatesprite 159 99 67000 0 19411 12 17 1057 0 0 xdim ydim
endevent

// events

useractor notenemy SPECIAL_DOOR_EFF // works like pressing space except CAN operate multi activators

 cstator 32768

 geta[].sectnum temp266
  getp[].cursectnum temp267
    ife temp266 temp267
                        {
                         ifpdistl 966
                                     {
									 set player_use 0
                                      ifhitspace
                                                {
                                                 ifcansee
                                                         {
                                                          ifcount 35
                                                                    {
                                                                     ifspritepal 0
                                                                                  {
                                                                                   operateactivators 5 0
                                                                                   resetcount
                                                                                  }
                                                                     ifspritepal 2
                                                                                  {
                                                                                   operateactivators 10 0
                                                                                   resetcount
                                                                                  }
                                                                    }
                                                         }
                                                }
                                     }
                        }
 ifspritepal 4 soundonce C_MACHINESS

enda

state mushroomdeadz
 debris SCRAP3 4
cactor MUSHROOMDEAD

ends

state checksmushroomhitstate
  ifdead state mushroomdeadz

ends

useractor notenemy MUSHROOM

  ifhitweapon
             {
              sound SQUISHED
              state checksmushroomhitstate
             }
enda

state poisonfdeadz
 debris SCRAP3 3
cactor POISONOUS_FRUITDEAD

ends

state checkspoisonfhitstate
  ifdead state poisonfdeadz

ends

useractor notenemy POISONOUS_FRUIT // fruit is soo poisonous that just touching it hurts you.

  ifhitweapon
             {
              sound SQUISHED
              state checkspoisonfhitstate
             }
  ifpdistl 866
              {
               ifhitspace
                         {
                          ifcount 33 { globalsound Z_LONGTERM_PAIN addphealth -7 resetcount }
                         }
              }
enda

useractor notenemy DOOROPENNEREFF

 palfrom 23 17 61 31
 ifcount 19 { set DOOROP_X_1 1 killit }

enda

useractor notenemy E_FORCEFIELD_BDOOR

 ifspritepal 0 { cstator 32768 ifspawnedby RESPAWN { spritepal 17 } ifcount 41 { palfrom 22 62 62 62 quote 8106 spritepal 2 } }
 ifspritepal 2 { ifcount 162 { palfrom 11 32 32 31 quake 5 quote 8107 killit } }
 ifspritepal 4
              {
               cstator 32768
               ife DOOROP_X_1 9 { palfrom 11 63 31 11 quake 33 set DOOROP_X_1 10 }
               ife DOOROP_X_1 11
                                   {
                                    ifcansee { palfrom 62 61 32 11 }
                                    quake 66
                                    globalsound EXPLOSION_HUGE
                                    operatemasterswitches 2
                                    sets[TEMP].visibility 0
                                    sets[].floorshade -41
                                    sets[].ceilingshade -41
                                    sets[].floorpal 2
                                    sets[].ceilingpal 2
                                    spawn E_FORCEFIELD_BDOOR
                                    killit
                                   }
              }
 ifspritepal 6
              {
               cstator 32768
               ife DOOROP_X_1 10
                                   {
                                    geta[].sectnum temp266
                                     getp[].cursectnum temp267
                                       ife temp266 temp267
                                                                {
                                                                 set DOOROP_X_1 11 killit
                                                                 killit
                                                                }
                                   }
              }
 ifspritepal 7
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifpdistl 888
                                                        {
                                                         set DOOROP_X_1 9
                                                         killit
                                                        }
                                           }
              }
 ifspritepal 8
              {
               cstator 32768
               ife DOOROP_X_1 11
                                   {
                                    geta[].sectnum temp266
                                     getp[].cursectnum temp267
                                       ife temp266 temp267
                                                                {
                                                                 set DOOROP_X_1 12 killit
                                                                 killit
                                                                }
                                   }
              }
 ifspritepal 9
              {
               cstator 32768
               ife DOOROP_X_1 12 { set DOOROP_X_1 13 }
               ife DOOROP_X_1 13
                                   {
                                    ifcansee { palfrom 55 62 31 21 }
                                    quake 51
                                    globalsound EXPLOSION_HUGE
                                    operatemasterswitches 3
                                    sets[TEMP].visibility 0
                                    sets[].floorshade -41
                                    sets[].ceilingshade -41
                                    sets[].floorpal 2
                                    sets[].ceilingpal 2
                                    killit
                                   }
              }
 ifspritepal 10 { cstator 32768 ife DOOROP_X_1 13 { resetcount spritepal 11 } }
 ifspritepal 11
               {
                ifcount 162
                           {
                            ifcansee { palfrom 58 62 31 21 }
                            quake 32
                            globalsound EXPLOSION_HUGE
                            operatemasterswitches 4
                            sets[TEMP].visibility 0
                            sets[].floorshade -41
                            sets[].ceilingshade -41
                            sets[].floorpal 2
                            sets[].ceilingpal 2
                            killit
                           }
               }
 ifspritepal 12 { ife DOOROP_X_1 1 { sound FFIELD_OFF killit } } // used for the Jungle base's door forcefield
 ifspritepal 13
               {
                cstator 32768
                geta[].sectnum temp266
                 getp[].cursectnum temp267
                   ife temp266 temp267
                                            {
                                             ife DOOROP_X_1 13 { set DOOROP_X_1 14 }
                                             ife DOOROP_X_1 14
                                                                 {
                                                                  quake 21
                                                                  palfrom 9 63 63 32
                                                                  killit
                                                                 }
                                            }
               }
 ifspritepal 14
               {
                cstator 32768
                ife DOOROP_X_1 14
                                    {
                                     geta[].sectnum temp266
                                      getp[].cursectnum temp267
                                        ife temp266 temp267
                                                                 {
                                                                  quake 41
                                                                  operatemasterswitches 7
                                                                  palfrom 45 63 63 32
                                                                  set DOOROP_X_1 15
                                                                 }
                                    }
                ife DOOROP_X_1 15 killit
               }
 ifspritepal 15
               {
                cstator 32768
                ife DOOROP_X_1 15
                                    {
                                     geta[].sectnum temp266
                                      getp[].cursectnum temp267
                                        ife temp266 temp267
                                                                 {
                                                                  quake 30
                                                                  operatemasterswitches 8
                                                                  palfrom 35 33 62 31
                                                                  set DOOROP_X_1 16
                                                                 }
                                    }
                ife DOOROP_X_1 16 killit
               }
 ifspritepal 16
               {
                cstator 32768
                ife FFIELDTOLERANCE_LV 9
                                           {
                                            ifpdistl 1912 
												{ 
												globalsound EXPLOSION_HUGE 
												operatemasterswitches 17 
												palfrom 53 64 62 51 
												quake 47 
												killit 
												}
                                           }
               }
 ifspritepal 17 { ifcount 62 { globalsound Z_GODDAMNIT killit } }


enda

action MYXTERSTAND 0 0 5 0 0

useractor notenemy MYXTER 0
action MYXTERSTAND
  fall
  ifp pfacing
    ifpdistl 1280
                 {
				 set player_use 0
                  ifhitspace
                            {
                             ifcount 32
                                       {
                                        stopsound DUKE_SEARCH
                                        stopsound DUKE_SEARCH2
                                        move 0
                                        cactor MYXTERTALK
                                       }
                            }
                 }

enda

action MYXTERTALKSTAND 0 0 1 0 0

useractor notenemy MYXTERTALK 0

 action MYXTERTALKSTAND

  ifspritepal 0 { sound GUIDING_FOREST_FOSSA }

  resetcount
  cactor MYXTER
enda

 state shieldseverelydamaged
 operateactivators 9 0
 set FFIELDTOLERANCE_LV 26
 globalsound BIGBANG 
 shoot SPARK shoot SPARK shoot SPARK shoot SPARK
 globalsound SHORT_CIRCUIT
 palfrom 37 6 26 46
 quote 8101
 quake 14
 killit

ends

state checkshieldhitstate
  ifdead state shieldseverelydamaged

ends

useractor notenemy SHIELDFIELDBARRIER BARRIER_PWR_LV

ifspritepal 0
             {
              ifstrength BARRIERPWRLV02
                                       {
                                        ife FFIELDRESISTANCE 100
                                                                   {
                                                                    addstrength 20
                                                                    ifstrength BARRIERPWRLV02 { set FFIELDTOLERANCE_LV 0 }
                                                                    ifstrength BARRIERPWRLV03 { set FFIELDTOLERANCE_LV 1 }
                                                                    ifstrength BARRIERPWRLV04 { set FFIELDTOLERANCE_LV 2 }
                                                                    ifstrength BARRIERPWRLV05 { set FFIELDTOLERANCE_LV 3 }
                                                                    ifstrength BARRIERPWRLV06 { set FFIELDTOLERANCE_LV 4 }
                                                                    ifstrength BARRIERPWRLV07 { set FFIELDTOLERANCE_LV 5 }
                                                                    ifstrength BARRIERPWRLV08 { set FFIELDTOLERANCE_LV 6 }
                                                                    ifstrength BARRIERPWRLV09 { set FFIELDTOLERANCE_LV 7 }
                                                                    ifstrength BARRIERPWRLV10 { set FFIELDTOLERANCE_LV 8 }
                                                                    ifstrength BARRIERPWRLV11 { set FFIELDTOLERANCE_LV 9 }
                                                                    ifstrength BARRIERPWRLV12 { set FFIELDTOLERANCE_LV 10 }
                                                                    ifstrength BARRIERPWRLV13 { set FFIELDTOLERANCE_LV 11 }
                                                                    ifstrength BARRIERPWRLV14 { set FFIELDTOLERANCE_LV 12 }
                                                                    ifstrength BARRIERPWRLV15 { set FFIELDTOLERANCE_LV 13 }
                                                                    ifstrength BARRIERPWRLV16 { set FFIELDTOLERANCE_LV 14 }
                                                                    ifstrength BARRIERPWRLV17 { set FFIELDTOLERANCE_LV 15 }
                                                                    ifstrength BARRIERPWRLV18 { set FFIELDTOLERANCE_LV 16 }
                                                                    ifstrength BARRIERPWRLV19 { set FFIELDTOLERANCE_LV 17 }
                                                                    ifstrength BARRIERPWRLV20 { set FFIELDTOLERANCE_LV 18 }
                                                                    ifstrength BARRIERPWRLV21 { set FFIELDTOLERANCE_LV 19 }
                                                                    ifstrength BARRIERPWRLV22 { set FFIELDTOLERANCE_LV 20 }
                                                                    ifstrength BARRIERPWRLV23 { set FFIELDTOLERANCE_LV 21 }
                                                                    ifstrength BARRIERPWRLV24 { set FFIELDTOLERANCE_LV 22 }
                                                                    ifstrength BARRIERPWRLV25 { set FFIELDTOLERANCE_LV 23 }
                                                                    ifstrength BARRIERPWRLV26 { set FFIELDTOLERANCE_LV 24 }
                                                                    set FFIELDRESISTANCE 0
                                                                   }
                                       }
              ifhitweapon
                         {
                          sound ENERGY_FLD_DISCHARGE
                          ifstrength BARRIERPWRLV02 { ife FFIELDTOLERANCE_LV 0 { set FFIELDTOLERANCE_LV 1 } }
                          ifstrength BARRIERPWRLV03 { ife FFIELDTOLERANCE_LV 1 { set FFIELDTOLERANCE_LV 2 } }
                          ifstrength BARRIERPWRLV04 { ife FFIELDTOLERANCE_LV 2 { set FFIELDTOLERANCE_LV 3 } }
                          ifstrength BARRIERPWRLV05 { ife FFIELDTOLERANCE_LV 3 { set FFIELDTOLERANCE_LV 4 } }
                          ifstrength BARRIERPWRLV06 { ife FFIELDTOLERANCE_LV 4 { set FFIELDTOLERANCE_LV 5 } }
                          ifstrength BARRIERPWRLV07 { ife FFIELDTOLERANCE_LV 5 { set FFIELDTOLERANCE_LV 6 } }
                          ifstrength BARRIERPWRLV08 { ife FFIELDTOLERANCE_LV 6 { set FFIELDTOLERANCE_LV 7 } }
                          ifstrength BARRIERPWRLV09 { ife FFIELDTOLERANCE_LV 7 { set FFIELDTOLERANCE_LV 8 } }
                          ifstrength BARRIERPWRLV10 { ife FFIELDTOLERANCE_LV 8 { set FFIELDTOLERANCE_LV 9 } }
                          ifstrength BARRIERPWRLV11 { ife FFIELDTOLERANCE_LV 9 { set FFIELDTOLERANCE_LV 10 } }
                          ifstrength BARRIERPWRLV12 { ife FFIELDTOLERANCE_LV 10 { set FFIELDTOLERANCE_LV 11 } }
                          ifstrength BARRIERPWRLV13 { ife FFIELDTOLERANCE_LV 11 { set FFIELDTOLERANCE_LV 12 } }
                          ifstrength BARRIERPWRLV14 { ife FFIELDTOLERANCE_LV 12 { set FFIELDTOLERANCE_LV 13 } }
                          ifstrength BARRIERPWRLV15 { ife FFIELDTOLERANCE_LV 13 { set FFIELDTOLERANCE_LV 14 } }
                          ifstrength BARRIERPWRLV16 { ife FFIELDTOLERANCE_LV 14 { set FFIELDTOLERANCE_LV 15 } }
                          ifstrength BARRIERPWRLV17 { ife FFIELDTOLERANCE_LV 15 { set FFIELDTOLERANCE_LV 16 } }
                          ifstrength BARRIERPWRLV18 { ife FFIELDTOLERANCE_LV 16 { set FFIELDTOLERANCE_LV 17 } }
                          ifstrength BARRIERPWRLV19 { ife FFIELDTOLERANCE_LV 17 { set FFIELDTOLERANCE_LV 18 } }
                          ifstrength BARRIERPWRLV20 { ife FFIELDTOLERANCE_LV 18 { set FFIELDTOLERANCE_LV 19 } }
                          ifstrength BARRIERPWRLV21 { ife FFIELDTOLERANCE_LV 19 { set FFIELDTOLERANCE_LV 20 } }
                          ifstrength BARRIERPWRLV22 { ife FFIELDTOLERANCE_LV 20 { set FFIELDTOLERANCE_LV 21 } }
                          ifstrength BARRIERPWRLV23 { ife FFIELDTOLERANCE_LV 21 { set FFIELDTOLERANCE_LV 22 } }
                          ifstrength BARRIERPWRLV24 { ife FFIELDTOLERANCE_LV 22 { set FFIELDTOLERANCE_LV 23 } }
                          ifstrength BARRIERPWRLV25 { ife FFIELDTOLERANCE_LV 23 { set FFIELDTOLERANCE_LV 24 } }
                          ifstrength BARRIERPWRLV26 { ife FFIELDTOLERANCE_LV 24 { set FFIELDTOLERANCE_LV 25 } }
                          state checkshieldhitstate
                         }
             }
 ifspritepal 2 { cstator 257 spawn REGENTIMEREFF11 spritepal 0 }

enda

useractor notenemy REGENTIMEREFF11

 ife FFIELDTOLERANCE_LV 26 killit
 ifcount 19 { set FFIELDRESISTANCE 100 resetcount }

enda

useractor notenemy ENERGYFIELD2_OFF B10PROT_SHIELD_STR

 seta[].shade -1
 cstator 256
 ifspritepal 0 { ife FFIELDTOLERANCE_LV 26 killit }
 ifstrength B10PROT_AUTOREGEN { addstrength 699 }
 ifpdistl 500 { ifp palive { resetcount cactor ENERGYFIELD2_ON3 } }
 ifhitweapon
            {
             sound ENERGY_FLD_DISCHARGE
             resetcount
             cactor ENERGYFIELD2_ON3
            }

enda

useractor notenemy ENERGYFIELD2_ON1 B10PROT_SHIELD_STR

 seta[].shade -20
 cstat 0
 cstator 786
 ifspritepal 0 { ife FFIELDTOLERANCE_LV 26 killit }
 ifstrength B10PROT_AUTOREGEN { addstrength 699 }
 ifcount 27 { cactor ENERGYFIELD2_OFF }
 ifpdistl 500 { resetcount cactor ENERGYFIELD2_ON3 }
 ifhitweapon
            {
             sound ENERGY_FLD_DISCHARGE
             resetcount
             cactor ENERGYFIELD2_ON3
            }

enda

useractor notenemy ENERGYFIELD2_ON2 B10PROT_SHIELD_STR

 seta[].shade -60
 cstat 0
 cstator 274
 ifspritepal 0 { ife FFIELDTOLERANCE_LV 26 killit }
 ifstrength B10PROT_AUTOREGEN { addstrength 699 }
 ifcount 18 { cactor ENERGYFIELD2_ON1 }
 ifpdistl 500 { resetcount cactor ENERGYFIELD2_ON3 }
 ifhitweapon
            {
             sound ENERGY_FLD_DISCHARGE
             resetcount
             cactor ENERGYFIELD2_ON3
            }

enda

useractor notenemy ENERGYFIELD2_ON3 B10PROT_SHIELD_STR

 seta[].shade -100
 cstat 0
 cstator 272
 ifspritepal 0 { ife FFIELDTOLERANCE_LV 26 killit }
 ifstrength B10PROT_AUTOREGEN { addstrength 699 }
 ifcount 9 { cactor ENERGYFIELD2_ON2 }
 ifpdistl 500 { sound ENERGY_FLD_DISCHARGE resetcount cactor ENERGYFIELD2_ON3 }
 ifhitweapon
            {
             sound ENERGY_FLD_DISCHARGE
             resetcount
             cactor ENERGYFIELD2_ON3
            }

enda

useractor notenemy SHIELDTOLERANCE_METER

ifspritepal 0
             {
              ife FFIELDTOLERANCE_LV 0 sizeat 19 4
              ife FFIELDTOLERANCE_LV 1 sizeat 19 8
              ife FFIELDTOLERANCE_LV 2 sizeat 19 12
              ife FFIELDTOLERANCE_LV 3 sizeat 19 16
              ife FFIELDTOLERANCE_LV 4 sizeat 19 20
              ife FFIELDTOLERANCE_LV 5 sizeat 19 24
              ife FFIELDTOLERANCE_LV 6 sizeat 19 28
              ife FFIELDTOLERANCE_LV 7 sizeat 19 32
              ife FFIELDTOLERANCE_LV 8 sizeat 19 36
              ife FFIELDTOLERANCE_LV 9 sizeat 19 40
              ife FFIELDTOLERANCE_LV 10 sizeat 19 44
              ife FFIELDTOLERANCE_LV 11 sizeat 19 48
              ife FFIELDTOLERANCE_LV 12 sizeat 19 52
              ife FFIELDTOLERANCE_LV 13 sizeat 19 56
              ife FFIELDTOLERANCE_LV 14 sizeat 19 60
              ife FFIELDTOLERANCE_LV 15 sizeat 19 64
              ife FFIELDTOLERANCE_LV 16 sizeat 19 68
              ife FFIELDTOLERANCE_LV 17 sizeat 19 72
              ife FFIELDTOLERANCE_LV 18 sizeat 19 76
              ife FFIELDTOLERANCE_LV 19 sizeat 19 80
              ife FFIELDTOLERANCE_LV 20 sizeat 19 84
              ife FFIELDTOLERANCE_LV 21 sizeat 19 88
              ife FFIELDTOLERANCE_LV 22 sizeat 19 92
              ife FFIELDTOLERANCE_LV 23 sizeat 19 96
              ife FFIELDTOLERANCE_LV 24 sizeat 19 100
              ife FFIELDTOLERANCE_LV 25 sizeat 19 104
              ife FFIELDTOLERANCE_LV 26 killit
             }

enda

useractor notenemy DOORSENSOR_TRIGGERER
// dio
 cstator 32768
 ifspritepal 0 { ifcount 1 { hitradius 124 1 1 1 1 resetcount } }
 ifspritepal 2 { ifcount 1 { hitradius 246 1 1 1 1 resetcount } }
// hitspace to open SOME doors
 ifspritepal 4
              {
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifcount 43
                                                      {
                                                       ifcansee { ifpdistl 999 { set player_use 0 ifhitspace { ifp pfacing { operateactivators 17104 0 resetcount } } } }
                                                      }
                                           }
              }
 ifspritepal 5
              {
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifcount 43
                                                      {
                                                       ifcansee { ifpdistl 899 { set player_use 0 ifhitspace { ifp pfacing { operateactivators 17107 0 resetcount } } } }
                                                      }
                                           }
              }

enda

useractor notenemy DOORSENSOREFF B10PROT_SHIELD_STR

 cstator 33024
 ifstrength B10PROT_AUTOREGEN { addstrength 699 }
 ifcount 112
            {
             ifspritepal 2 { operateactivators 22 0 }
             ifspritepal 3 { operateactivators 25 0 }
             ifspritepal 4 { operateactivators 28 0 }
             ifspritepal 5 { operateactivators 31 0 }
             ifspritepal 6 { operateactivators 2211 0 }
             ifspritepal 7 { operateactivators 17104 0 }
             ifspritepal 8 { operateactivators 17107 0 }
             resetcount
            }
 ifhitweapon
            {
             resetcount
            }

enda

useractor notenemy PSEUDOSWITCHX_OFF

 ifcansee
         {
		 set player_use 0
          ifhitspace
                    {
                     ifpdistl 862
                                 {
                                  ifspritepal 0
                                               {
                                                stopsound DUKE_SEARCH
                                                stopsound DUKE_SEARCH2
                                                ifcount 27
                                                          {
                                                           sound SWITCH_ON
                                                           operateactivators 28 0
                                                           resetcount
                                                           cactor PSEUDOSWITCHX_ON
                                                          }
                                               }
                                  ifspritepal 13 { quote 8100 resetcount }
                                 }
                    }
         }
 ifspritepal 13 { ife POWERINGSOMETHINGX 2 { spritepal 0 } }

enda

useractor notenemy PSEUDOSWITCHX_ON

 ifcansee
         {
		 set player_use 0
          ifhitspace
                    {
                     ifpdistl 862
                                 {
                                  ifspritepal 0
                                               {
                                                stopsound DUKE_SEARCH
                                                stopsound DUKE_SEARCH2
                                                ifcount 27
                                                          {
                                                           sound SWITCH_ON
                                                           operateactivators 28 0
                                                           resetcount
                                                           cactor PSEUDOSWITCHX_OFF
                                                          }
                                               }
                                 }
                    }
         }
enda

useractor notenemy HURTEFFECTOR_

 cstator 32768
 ifspawnedby RESPAWN { spritepal 4 }
 ifspritepal 0 // its timer core
              {
               ife EX_BEAM 0 { operateactivators 101 0 resetcount set EX_BEAM 1 }
               ife EX_BEAM 1
                               {
                                ifcount 60
                                          {
                                           operateactivators 101 0
                                           operateactivators 102 0
                                           resetcount
                                           set EX_BEAM 2
                                          }
                               }
               ife EX_BEAM 2
                               {
                                ifcount 60
                                          {
                                           operateactivators 102 0
                                           operateactivators 103 0
                                           resetcount
                                           set EX_BEAM 3
                                          }
                               }
               ife EX_BEAM 3
                               {
                                ifcount 60
                                          {
                                           operateactivators 103 0
                                           operateactivators 104 0
                                           resetcount
                                           set EX_BEAM 4
                                          }
                               }
               ife EX_BEAM 4
                               {
                                ifcount 60
                                          {
                                           operateactivators 104 0
                                           operateactivators 105 0
                                           resetcount
                                           set EX_BEAM 5
                                          }
                               }
               ife EX_BEAM 5
                               {
                                ifcount 60
                                          {
                                           operateactivators 105 0
                                           operateactivators 101 0
                                           resetcount
                                           set EX_BEAM 1
                                          }
                                }
              }
 ifspritepal 2 // its timer core faster
              {
               ife EX_BEAMF 0 { operateactivators 106 0 resetcount set EX_BEAMF 1 }
               ife EX_BEAMF 1
                                {
                                 ifcount 40
                                          {
                                           operateactivators 106 0
                                           operateactivators 107 0
                                           resetcount
                                           set EX_BEAMF 2
                                          }
                                }
               ife EX_BEAMF 2
                                {
                                 ifcount 40
                                           {
                                            operateactivators 107 0
                                            operateactivators 108 0
                                            resetcount
                                            set EX_BEAMF 3
                                           }
                                }
               ife EX_BEAMF 3
                                {
                                 ifcount 40
                                           {
                                            operateactivators 108 0
                                            operateactivators 109 0
                                            resetcount
                                            set EX_BEAMF 4
                                           }
                                }
               ife EX_BEAMF 4
                                {
                                 ifcount 40
                                           {
                                            operateactivators 109 0
                                            operateactivators 106 0
                                            resetcount
                                            set EX_BEAMF 1
                                           }
                                }
              }
 ifspritepal 3 // its timer core faster 2 at the time
              {
               ife EX_BEAMOPF 0
                                  {
                                   operateactivators 110 0
                                   operateactivators 111 0
                                   operateactivators 112 0
                                   operateactivators 113 0
                                   operateactivators 114 0
                                   operateactivators 115 0
                                   operateactivators 116 0
                                   operateactivators 117 0
                                   operateactivators 118 0
                                   set EX_BEAMOPF01 1
                                   set EX_BEAMOPF02 1
                                   set EX_BEAMOPF03 1
                                   set EX_BEAMOPF04 1
                                   set EX_BEAMOPF05 1
                                   set EX_BEAMOPF06 1
                                   set EX_BEAMOPF07 1
                                   set EX_BEAMOPF08 1
                                   set EX_BEAMOPF09 1
                                   set EX_BEAMOPF10 1
                                   set EX_BEAMOPF 1
                                  }
               ife EX_BEAMOPF 1
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              set EX_BEAMOPF02 1
                                              set EX_BEAMOPF03 1
                                              set EX_BEAMOPF04 1
                                              set EX_BEAMOPF05 1
                                              set EX_BEAMOPF06 1
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              operateactivators 119 0
                                              resetcount
                                              set EX_BEAMOPF 2
                                             }
                                  }
               ife EX_BEAMOPF 2
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 0
                                              operateactivators 110 0
                                              set EX_BEAMOPF02 1
                                              set EX_BEAMOPF03 1
                                              set EX_BEAMOPF04 1
                                              set EX_BEAMOPF05 1
                                              set EX_BEAMOPF06 1
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 3
                                             }
                                  }
               ife EX_BEAMOPF 3
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 0
                                              set EX_BEAMOPF02 0
                                              operateactivators 111 0
                                              set EX_BEAMOPF03 1
                                              set EX_BEAMOPF04 1
                                              set EX_BEAMOPF05 1
                                              set EX_BEAMOPF06 1
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 4
                                             }
                                  }
               ife EX_BEAMOPF 4
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              operateactivators 110 0
                                              set EX_BEAMOPF02 0
                                              set EX_BEAMOPF03 0
                                              operateactivators 112 0
                                              set EX_BEAMOPF04 1
                                              set EX_BEAMOPF05 1
                                              set EX_BEAMOPF06 1
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 5
                                             }
                                  }
               ife EX_BEAMOPF 5
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              set EX_BEAMOPF02 1
                                              operateactivators 111 0
                                              set EX_BEAMOPF03 0
                                              set EX_BEAMOPF04 0
                                              operateactivators 113 0
                                              set EX_BEAMOPF05 1
                                              set EX_BEAMOPF06 1
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 6
                                             }
                                  }
               ife EX_BEAMOPF 6
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              set EX_BEAMOPF02 1
                                              set EX_BEAMOPF03 1
                                              operateactivators 112 0
                                              set EX_BEAMOPF04 0
                                              set EX_BEAMOPF05 0
                                              operateactivators 114 0
                                              set EX_BEAMOPF06 1
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 7
                                             }
                                  }
               ife EX_BEAMOPF 7
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              set EX_BEAMOPF02 1
                                              set EX_BEAMOPF03 1
                                              set EX_BEAMOPF04 1
                                              operateactivators 113 0
                                              set EX_BEAMOPF05 0
                                              set EX_BEAMOPF06 0
                                              operateactivators 115 0
                                              set EX_BEAMOPF07 1
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 8
                                             }
                                  }
               ife EX_BEAMOPF 8
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              set EX_BEAMOPF02 1
                                              set EX_BEAMOPF03 1
                                              set EX_BEAMOPF04 1
                                              set EX_BEAMOPF05 1
                                              operateactivators 114 0
                                              set EX_BEAMOPF06 0
                                              set EX_BEAMOPF07 0
                                              operateactivators 116 0
                                              set EX_BEAMOPF08 1
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 9
                                             }
                                  }
               ife EX_BEAMOPF 9
                                  {
                                   ifcount 20
                                             {
                                              set EX_BEAMOPF01 1
                                              set EX_BEAMOPF02 1
                                              set EX_BEAMOPF03 1
                                              set EX_BEAMOPF04 1
                                              set EX_BEAMOPF05 1
                                              set EX_BEAMOPF06 1
                                              operateactivators 115 0
                                              set EX_BEAMOPF07 0
                                              set EX_BEAMOPF08 0
                                              operateactivators 117 0
                                              set EX_BEAMOPF09 1
                                              set EX_BEAMOPF10 1
                                              resetcount
                                              set EX_BEAMOPF 10
                                             }
                                  }
               ife EX_BEAMOPF 10
                                   {
                                    ifcount 20
                                              {
                                               set EX_BEAMOPF01 1
                                               set EX_BEAMOPF02 1
                                               set EX_BEAMOPF03 1
                                               set EX_BEAMOPF04 1
                                               set EX_BEAMOPF05 1
                                               set EX_BEAMOPF06 1
                                               set EX_BEAMOPF07 1
                                               operateactivators 116 0
                                               set EX_BEAMOPF08 0
                                               set EX_BEAMOPF09 0
                                               operateactivators 118 0
                                               set EX_BEAMOPF10 1
                                               resetcount
                                               set EX_BEAMOPF 11
                                              }
                                   }
               ife EX_BEAMOPF 11
                                   {
                                    ifcount 20
                                              {
                                               set EX_BEAMOPF01 1
                                               set EX_BEAMOPF02 1
                                               set EX_BEAMOPF03 1
                                               set EX_BEAMOPF04 1
                                               set EX_BEAMOPF05 1
                                               set EX_BEAMOPF06 1
                                               set EX_BEAMOPF07 1
                                               set EX_BEAMOPF08 1
                                               operateactivators 117 0
                                               set EX_BEAMOPF09 0
                                               set EX_BEAMOPF10 0
                                               operateactivators 119 0
                                               resetcount
                                               set EX_BEAMOPF 12
                                              }
                                   }
               ife EX_BEAMOPF 12
                                   {
                                    ifcount 20
                                              {
                                               set EX_BEAMOPF01 1
                                               set EX_BEAMOPF02 1
                                               set EX_BEAMOPF03 1
                                               set EX_BEAMOPF04 1
                                               set EX_BEAMOPF05 1
                                               set EX_BEAMOPF06 1
                                               set EX_BEAMOPF07 1
                                               set EX_BEAMOPF08 1
                                               set EX_BEAMOPF09 1
                                               operateactivators 118 0
                                               set EX_BEAMOPF10 0
                                               resetcount
                                               set EX_BEAMOPF 1
                                              }
                                   }
               }
 ifspritepal 4 { ife ACCUNLOCKED 2 { operateactivators 60 0 killit } ifcount 27 { ifcansee { ifpdistl 879 { set player_use 0 ifhitspace { globalsound LOCKED_HITECH1 lockplayer 15 quote 8102 resetcount } } } } } 
 // access blocking effector
 geta[].sectnum temp266
  getp[].cursectnum temp267
    ife temp266 temp267
                             {
                              ifspritepal 10
                                            {
                                             ife EX_BEAM 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 11
                                            {
                                             ife EX_BEAM 2 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 12
                                            {
                                             ife EX_BEAM 3 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 13
                                            {
                                             ife EX_BEAM 4 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 14
                                            {
                                             ife EX_BEAM 5 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 15
                                            {
                                             ife EX_BEAMF 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 16
                                            {
                                             ife EX_BEAMF 2 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 17
                                            {
                                             ife EX_BEAMF 3 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 18
                                            {
                                             ife EX_BEAM 0 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                             ife EX_BEAMF 4 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 19
                                            {
                                             ife EX_BEAMOPF01 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 20
                                            {
                                             ife EX_BEAMOPF02 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 21
                                            {
                                             ife EX_BEAMOPF03 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 22
                                            {
                                             ife EX_BEAMOPF04 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 23
                                            {
                                             ife EX_BEAMOPF05 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 24
                                            {
                                             ife EX_BEAMOPF06 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 25
                                            {
                                             ife EX_BEAMOPF07 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 26
                                            {
                                             ife EX_BEAMOPF08 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 27
                                            {
                                             ife EX_BEAMOPF09 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                              ifspritepal 28
                                            {
                                             ife EX_BEAMOPF10 1 { addphealth -3 ifcount 8 { ifp palive { palfrom 45 10 10 62 globalsound ELECTROCUTE lockplayer 7 resetcount } } }
                                            }
                             }
 ifspritepal 29 { ife ACCUNLOCKED 1 { operatemasterswitches 1815 killit } ifcount 27 { ifcansee { ifpdistl 879 { set player_use 0 ifhitspace { globalsound LOCKED_HITECH1 lockplayer 15 quote 8102 resetcount } } } } } 
 // access blocking effector 2

enda

useractor notenemy XHX_ENERGYBEAMOFF

 ifspritepal 0 { ife EX_BEAM 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 2 { ife EX_BEAM 2 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 3 { ife EX_BEAM 3 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 5 { ife EX_BEAM 4 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 6 { ife EX_BEAM 5 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 7 { ife EX_BEAMF 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 8 { ife EX_BEAMF 2 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 9 { ife EX_BEAMF 3 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 10 { ife EX_BEAMF 4 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 11 { ife EX_BEAMOPF01 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 12 { ife EX_BEAMOPF02 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 13 { ife EX_BEAMOPF03 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 14 { ife EX_BEAMOPF04 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 15 { ife EX_BEAMOPF05 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 16 { ife EX_BEAMOPF06 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 18 { ife EX_BEAMOPF07 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 19 { ife EX_BEAMOPF08 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 20 { ife EX_BEAMOPF09 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }
 ifspritepal 21 { ife EX_BEAMOPF10 1 { ifcansee { globalsound WENERGYBEAMFIRES } cactor XHX_ENERGYBEAM } }

enda

useractor notenemy XHX_ENERGYBEAM

 ifspritepal 0 { ife EX_BEAM 2 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 2 { ife EX_BEAM 3 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 3 { ife EX_BEAM 4 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 5 { ife EX_BEAM 5 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 6 { ife EX_BEAM 1 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 7 { ife EX_BEAMF 2 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 8 { ife EX_BEAMF 3 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 9 { ife EX_BEAMF 4 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 10 { ife EX_BEAMF 1 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 11 { ife EX_BEAMOPF01 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 12 { ife EX_BEAMOPF02 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 13 { ife EX_BEAMOPF03 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 14 { ife EX_BEAMOPF04 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 15 { ife EX_BEAMOPF05 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 16 { ife EX_BEAMOPF06 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 18 { ife EX_BEAMOPF07 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 19 { ife EX_BEAMOPF08 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 20 { ife EX_BEAMOPF09 0 { cactor XHX_ENERGYBEAMOFF } }
 ifspritepal 21 { ife EX_BEAMOPF10 0 { cactor XHX_ENERGYBEAMOFF } }

enda

useractor notenemy JB_REACTOR_CORE

ifspritepal 0
             {
              ife JBGENEDEAD 0
                                 {
                                  resetcount
                                  ifpdistl 1601 { ifp palive { palfrom 22 33 22 55 wackplayer globalsound ELECTROCUTE addphealth -1 } }
                                 }
              ife JBGENEDEAD 1 { ifcount 28 { operaterespawns 1965 operatemasterswitches 1965 operateactivators 1965 0 spritepal 16 } }
             }

enda

useractor notenemy LITECHANGEREFFECTOR

cstator 32768

 ifspritepal 10 { ife JBGENEDEAD 1 { sets[].ceilingpal 10 killit } }

enda

useractor notenemy JB_CORE_ARC

 ifspritepal 0 { ife JBGENEDEAD 1 { resetcount spritepal 1 } }
 ifspritepal 1 { ifcount 5 spritepal 3 }
 ifspritepal 2 { ifcount 33 spritepal 10 }
 ifspritepal 3 { ifcount 9 spritepal 6 }
 ifspritepal 4 { ifcount 26 spritepal 2 }
 ifspritepal 5 { ifcount 5 spritepal 16 }
 ifspritepal 6 { ifcount 12 spritepal 8 }
 ifspritepal 8 { ifcount 17 spritepal 5 }
 ifspritepal 9 { ifcount 24 spritepal 4 }
 ifspritepal 10 { ifcount 39 { sound THUD killit } }
 ifspritepal 16 { ifcount 20 { cstator 514 spritepal 9 } }

enda

useractor notenemy JB_INNER_CORE
seta[].blend 255
 ifspawnedby RESPAWN
                    {
                     cstator 32768
                     ifcount 46
                               {
                                set ACCUNLOCKED 0
                                set JBGENEDEAD 1
                                globalsound CLAXON_ALARM 
								spawn 3806
                                quake 7
                                killit
                               }
                    }
 ifspritepal 0 { ife JBGENEDEAD 1 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 38 { globalsound BIGBANG killit } }
 ifspritepal 3 { ife JBGENEDEAD 1 { resetcount spritepal 24 } }
 ifspritepal 24 { ifcount 42 { globalsound SHORT_CIRCUIT palfrom 44 13 1 63 quake 7 killit } }

enda

useractor notenemy JB_CORELITEEFF

 ifspritepal 3 { ife JBGENEDEAD 1 killit }

enda

useractor notenemy JB_INNER_LITES

 ifspritepal 21 { ife JBGENEDEAD 1 { spritepal 10 } }

enda

useractor notenemy SPECIALSWITCHXOFF

 ifspritepal 4 { cstator 32769 }
 ifspritepal 6 { ifcount 36 { quote 8104 set POWERINGSOMETHINGX 2 killit } }
                                  ifspritepal 4
                                               {
                                                ifp pfacing ifpdistl 1024 { resetcount lockplayer 64 operatemasterswitches 31862 spritepal 6 }
                                               }
                             
 
enda


useractor notenemy SPECIALSWITCHXON

ifg ALLY_MAG 0
 ifl ALLY_MAG 6
	{
	ife GIVINGANITEMPAPER 1 { add INTERNALCOUNT_2 1 ifg INTERNALCOUNT_2 30 { sound RED_COMPBEEP set INTERNALCOUNT_2 0 } }
	}

ife ALLY_MAG 0 
{
add INTERNALCOUNT 1
spritepal 13
ifpdistl 1536
 ifp pfacing
  ifp palive
   {
   set player_use 0
    ifhitspace
	 ifg INTERNALCOUNT 20
		{
		set INTERNALCOUNT_2 0
		set INTERNALCOUNT 0
		globalsound SW_TECHK_UNLOCK
		set ALLY_MAG 1
		}
   }
}
else
ife ALLY_MAG 1 
{
add INTERNALCOUNT 1
spritepal 0
action ZERO
ifpdistl 1536
 ifp pfacing
  ifp palive
	   {
	   set player_use 0
		ifhitspace
		 ifg INTERNALCOUNT 20
			 {
			 ifg INTERNALCOUNT 115
			  ifl INTERNALCOUNT 145
					{
					globalsound SWITCH_ON
					set ALLY_MAG 2
					}
				else
					{
					globalsound SWITCH_ON
					globalsound LOCKED_HITECH1
					set ALLY_MAG 0
					}
				set INTERNALCOUNT 0
			 }
	   }
}
else
ife ALLY_MAG 2 
{
add INTERNALCOUNT 1
spritepal 0
action MINUSONE
ifpdistl 1536
 ifp pfacing
  ifp palive
	   {
	   set player_use 0
		ifhitspace
		 ifg INTERNALCOUNT 20
			 {
			 ifg INTERNALCOUNT 55
			  ifl INTERNALCOUNT 85
					{
					globalsound SWITCH_ON
					set ALLY_MAG 3
					}
				else
					{
					globalsound SWITCH_ON
					globalsound LOCKED_HITECH1
					set ALLY_MAG 0
					}
				set INTERNALCOUNT 0
			 }
	   }
}
else
ife ALLY_MAG 3 
{
add INTERNALCOUNT 1
spritepal 0
action ZERO
ifpdistl 1536
 ifp pfacing
  ifp palive
	   {
	   set player_use 0
		ifhitspace
		 ifg INTERNALCOUNT 20
			 {
			 ifg INTERNALCOUNT 55
			  ifl INTERNALCOUNT 85
					{
					globalsound SWITCH_ON
					set INTERNALCOUNT 0
					set ALLY_MAG 4
					}
				else
					{
					globalsound SWITCH_ON
					globalsound LOCKED_HITECH1
					set ALLY_MAG 0
					}
				set INTERNALCOUNT 0
			 }
	   }
}
else
ife ALLY_MAG 4 
{
add INTERNALCOUNT 1
spritepal 0
action MINUSONE
ifpdistl 1536
 ifp pfacing
  ifp palive
	   {
	   set player_use 0
		ifhitspace
		 ifg INTERNALCOUNT 20
			 {
			 ifg INTERNALCOUNT 145
			  ifl INTERNALCOUNT 175
					{
					globalsound SWITCH_ON
					set ALLY_MAG 5
					}
				else
					{
					globalsound SWITCH_ON
					globalsound LOCKED_HITECH1
					set ALLY_MAG 0
					}
				set INTERNALCOUNT 0
			 }
	   }
}
else
ife ALLY_MAG 5 
{
add INTERNALCOUNT 1
spritepal 0
action ZERO
ifpdistl 1536
 ifp pfacing
  ifp palive
	   {
	   set player_use 0
		ifhitspace
		 ifg INTERNALCOUNT 20
			 {
			 ifg INTERNALCOUNT 85
			  ifl INTERNALCOUNT 115
					{
					globalsound SWITCH_ON
					globalsound MONITOR_ACTIVE
                    quote 8103
                    set ACCUNLOCKED 1
					set ALLY_MAG 6
					}
				else
					{
					globalsound SWITCH_ON
					globalsound LOCKED_HITECH1
					set ALLY_MAG 0
					}
			 }
	   }
}
else
ife ALLY_MAG 6
{
spritepal 14
action MINUSONE
}

                                                    
            

enda

action WOLVERINEPOSITION 0 1 5 1 1

useractor notenemy ANONY_WOLVERINES 0

ifaction 0 action WOLVERINEPOSITION

ifpdistl 1260
   ifhitspace
    {
	qputs 330 Remember; the pattern for hitting the switch is (4,2,2,5,3) seconds.
	set MISSIONLINE1 330
	qputs 331 If you get it wrong the switch will ring an alarm.
	set MISSIONLINE2 331
	set MISSIONLINE3 0
	set MISSIONLINE4 0
	set MISSIONLINE5 0
	set MISSIONLINE6 0
    stopsound DUKE_SEARCH
    stopsound DUKE_SEARCH2
    resetcount
    ifspritepal 13 cactor ANONY_WOLVERINES_SPK
    move 0
    }

enda

useractor notenemy ANONY_WOLVERINES_SPK

 ifcount 32
           {
            ife GIVINGANITEMPAPER 0
                                      {
                                       // >>(PUT THE CODE HERE)<<  (the convo cut scene stuff etc)
                                       set GIVINGANITEMPAPER 1
                                       cactor ANONY_WOLVERINES
                                      }
            ife GIVINGANITEMPAPER 1
                                      {
                                       sound ANYWOLVSPEECH2
                                       cactor ANONY_WOLVERINES
                                      }
           }

enda

useractor notenemy TEMPOTILES_1

 ifspawnedby TEMPOTILES_2OFF spritepal 3
 ifspritepal 0 { sizeat 64 64 cstat 0 cstator 33 ifcount 30 spritepal 5 }
 ifspritepal 3 { sizeat 64 16 cstat 0 cstator 17 ifcount 30 spritepal 9 }
 ifspritepal 5 { cstator 2 ifcount 50 spritepal 24 }
 ifspritepal 9 { cstator 2 ifcount 50 spritepal 25 }
 ifspritepal 24 { cstator 514 ifcount 65 killit }
 ifspritepal 25 { cstator 514 ifcount 65 killit }

enda

useractor notenemy TEMPOTILES_1OFF

cstator 32768

 ifspritepal 0 { ifcount 100 { resetcount spritepal 2 } }
 ifspritepal 2 { spawn TEMPOTILES_1 spritepal 3 }
 ifspritepal 3 { ifcount 200 { resetcount spritepal 0 } }

 ifspritepal 4 { ifcount 130 { resetcount spritepal 5 } }
 ifspritepal 5 { spawn TEMPOTILES_1 spritepal 6 }
 ifspritepal 6 { ifcount 170 { resetcount spritepal 4 } }

 ifspritepal 7 { ifcount 160 { resetcount spritepal 8 } }
 ifspritepal 8 { spawn TEMPOTILES_1 spritepal 9 }
 ifspritepal 9 { ifcount 140 { resetcount spritepal 7 } }

 ifspritepal 10 { ifcount 190 { resetcount spritepal 11 } }
 ifspritepal 11 { spawn TEMPOTILES_1 spritepal 12 }
 ifspritepal 12 { ifcount 110 { resetcount spritepal 10 } }

enda

useractor notenemy TEMPOTILES_2OFF

cstator 32768

 ifspritepal 0 { ifcount 100 { resetcount spritepal 2 } }
 ifspritepal 2 { spawn TEMPOTILES_1 spritepal 3 }
 ifspritepal 3 { ifcount 200 { resetcount spritepal 0 } }

 ifspritepal 4 { ifcount 130 { resetcount spritepal 5 } }
 ifspritepal 5 { spawn TEMPOTILES_1 spritepal 6 }
 ifspritepal 6 { ifcount 170 { resetcount spritepal 4 } }

 ifspritepal 7 { ifcount 160 { resetcount spritepal 8 } }
 ifspritepal 8 { spawn TEMPOTILES_1 spritepal 9 }
 ifspritepal 9 { ifcount 140 { resetcount spritepal 7 } }

 ifspritepal 10 { ifcount 190 { resetcount spritepal 11 } }
 ifspritepal 11 { spawn TEMPOTILES_1 spritepal 12 }
 ifspritepal 12 { ifcount 110 { resetcount spritepal 10 } }

enda

useractor notenemy OPENSSDOORS

 ifcount 15 { set ACCUNLOCKED 2 quote 8105 killit }

enda

useractor notenemy SUPER_TCHPLATE

cstator 32768

 geta[].sectnum temp266
  getp[].cursectnum temp267
    ife temp266 temp267
                             {
                              ifspritepal 0 { operaterespawns 60 operateactivators 60 0 operatemasterswitches 60 killit }
                             }

enda

useractor notenemy CHANGINGCOLORVENT

 ifspritepal 0 { ife DOOROP_X_1 13 { spritepal 2 seta[].shade -42 } }

enda

useractor notenemy DAMAGABLECEIL_TILE

 ifspritepal 0 { ife DOOROP_X_1 16 { debris SCRAP1 4 debris SCRAP2 2 debris SCRAP3 1 debris SCRAP5 2 killit } }

enda

 move PYRSPIRITZ01 200

useractor notenemy PYRAMIDDOORSPIRITS

// untaken pal slots are pal 0, 9, 24 and 25

// ghost doors activated
 ifspritepal 1 { move PYRSPIRITZ01 geth ife EX_BEAMF 11 { palfrom 23 31 61 21 globalsound INTO_MENU killit } }
 ifspritepal 2 { move PYRSPIRITZ01 geth ife EX_BEAMOPF 11 { palfrom 23 51 41 21 globalsound INTO_MENU killit } }
 ifspritepal 6 { move PYRSPIRITZ01 geth ife EX_BEAMOPF01 11 { palfrom 23 21 11 61 globalsound INTO_MENU killit } }
 ifspritepal 7 { move PYRSPIRITZ01 geth ife EX_BEAMOPF02 11 { palfrom 23 41 21 41 globalsound INTO_MENU killit } }
 ifspritepal 8 { move PYRSPIRITZ01 geth ife EX_BEAMOPF03 11 { palfrom 23 11 51 51 globalsound INTO_MENU killit } }
 ifspritepal 17 { move PYRSPIRITZ01 geth ife EX_BEAMOPF04 11 { palfrom 23 11 61 31 globalsound INTO_MENU killit } }
 ifspritepal 20 { move PYRSPIRITZ01 geth ife EX_BEAMOPF05 11 { palfrom 23 61 31 61 globalsound INTO_MENU killit } }
 ifspritepal 26 { move PYRSPIRITZ01 geth ife EX_BEAMOPF06 11 { palfrom 23 41 51 11 globalsound INTO_MENU killit } }
 ifspritepal 27 { move PYRSPIRITZ01 geth ife EX_BEAMOPF07 11 { palfrom 23 21 41 11 globalsound INTO_MENU killit } }
 ifspritepal 28 { move PYRSPIRITZ01 geth ife EX_BEAMOPF08 11 { palfrom 23 61 61 61 globalsound INTO_MENU killit } }
 ifspritepal 29 { move PYRSPIRITZ01 geth ife EX_BEAMOPF09 11 { palfrom 23 41 41 41 globalsound INTO_MENU killit } }
 ifspritepal 30 { move PYRSPIRITZ01 geth ife EX_BEAMOPF10 11 { palfrom 23 21 11 21 globalsound INTO_MENU killit } }

// ghost doors paused
 ifspritepal 10 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 100 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 1 } } }
 ifspritepal 11 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 110 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 2 } } }
 ifspritepal 12 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 120 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 6 } } }
 ifspritepal 13 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 130 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 7 } } }
 ifspritepal 14 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 140 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 8 } } }
 ifspritepal 15 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 160 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 17 } } }
 ifspritepal 16 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 180 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 20 } } }
 ifspritepal 18 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 200 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 26 } } }
 ifspritepal 19 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 220 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 27 } } }
 ifspritepal 21 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 250 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 28 } } }
 ifspritepal 22 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 280 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 29 } } }
 ifspritepal 23 { ife FFIELDTOLERANCE_LV 0 { cstator 32768 resetcount } ife FFIELDTOLERANCE_LV 10 { ifcount 315 { sound DOORSPIRITSND cstat 0 cstator 530 spritepal 30 } } }
// timer
 ifspritepal 3
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifpdistl 770
                                                        {
														set player_use 0
                                                         ifhitspace
                                                                   {
                                                                    ifangdiffl 32
                                                                                 {
                                                                                  ife FFIELDTOLERANCE_LV 9 { lockplayer 412 resetcount spritepal 4 }
                                                                                 }
                                                                   }
                                                        }
                                           }
              }
 ifspritepal 4
              {
               ifcount 37 { globalsound SPIRITDOORBLASTS quake 123 palfrom 33 11 33 11 resetcount spritepal 5 }
              }
 ifspritepal 5
              {
               ife EX_BEAMF 0 { globalsound SPIRITDOORBLASTS set FFIELDTOLERANCE_LV 10 palfrom 11 44 25 61 set EX_BEAMF 11 }
               ife EX_BEAMOPF 0 { ife EX_BEAMF 11 { ifcount 160 { resetcount set EX_BEAMOPF 11 } } }
               ife EX_BEAMOPF01 0 { ife EX_BEAMOPF 11 { ifcount 60 { resetcount set EX_BEAMOPF01 11 } } }
               ife EX_BEAMOPF02 0 { ife EX_BEAMOPF01 11 { ifcount 10 { operateactivators 9 0 resetcount set EX_BEAMOPF02 11 } } }
               ife EX_BEAMOPF03 0 { ife EX_BEAMOPF02 11 { ifcount 10 { resetcount set EX_BEAMOPF03 11 } } }
               ife EX_BEAMOPF04 0 { ife EX_BEAMOPF03 11 { ifcount 10 { resetcount set EX_BEAMOPF04 11 } } }
               ife EX_BEAMOPF05 0 { ife EX_BEAMOPF04 11 { ifcount 10 { resetcount set EX_BEAMOPF05 11 } } }
               ife EX_BEAMOPF06 0 { ife EX_BEAMOPF05 11 { ifcount 10 { resetcount set EX_BEAMOPF06 11 } } }
               ife EX_BEAMOPF07 0 { ife EX_BEAMOPF06 11 { ifcount 10 { resetcount set EX_BEAMOPF07 11 } } }
               ife EX_BEAMOPF08 0 { ife EX_BEAMOPF07 11 { ifcount 10 { resetcount set EX_BEAMOPF08 11 } } }
               ife EX_BEAMOPF09 0 { ife EX_BEAMOPF08 11 { ifcount 10 { resetcount set EX_BEAMOPF09 11 } } }
               ife EX_BEAMOPF10 0 { ife EX_BEAMOPF09 11 { ifcount 10 { resetcount set EX_BEAMOPF10 11 } } }
               ife EX_BEAMOPF10 11 { ifcount 10 { set FFIELDTOLERANCE_LV 0 quake 7 killit } }
              }

enda

useractor notenemy PYRAMIDDOORGEM

sizeat 2 2

ifspritepal 8
             {
              ifcansee
                      {
                       ifpdistl 768
                           {
							palfrom 10 64 64 64
							set DISP_KEY -90
							set DISP_KEY_PAL 8
							set DISP_KEY_PIC sprite[].picnum
							globalsound QUEST_ITEM
                            set FFIELDTOLERANCE_LV 9
                            killit
                            }
                      }
             }

enda

useractor notenemy INSTANTDEATHSPIKES

 cstator 32768
 ifspritepal 0
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            addphealth -241
                                            addphealth -251
                                           }
              }

enda

useractor notenemy HIDDENTRAPTILE // trap tile only visible with nightsight

ifspritepal 0
             {
              ifspawnedby ff_delayer { spritepal 17 }
              ifspawnedby PRESSABLESYMBOLS { spritepal 18 }
			  ife command 0
				  {
				   geta[].mdflags TEMP
				   orvar TEMP 16
				   seta[].mdflags TEMP 
				  set command 131072
				  }
              getp[].heat_on temp cstat 546
               ife temp 1
               {
               geta[].cstat temp266
               ifand temp266 32768
                { 
                sub temp266 32768
                seta[].cstat temp266
                }
               }
              else
               {
               geta[].cstat temp266
               ifand temp266 32768 nullop else
                {
                add temp266 32768
                seta[].cstat temp266
                }
              }
             }
ifspritepal 4
             {
              getp[].heat_on temp cstat 546
               ife temp 1
               {
               geta[].cstat temp266
               ifand temp266 32768
                { 
                sub temp266 32768
                seta[].cstat temp266
                }
               }
              else
               {
               geta[].cstat temp266
               ifand temp266 32768 nullop else
                {
                add temp266 32768
                seta[].cstat temp266
                }
               }
             }
// death timer
ifspritepal 17
              {
               cstator 32768
               ife PYRAMIDCODAGE 10 killit
               ife EX_BEAMOPF10 101 { resetcount set EX_BEAMOPF10 0 }
               ifcount 601 { globalsound BIGBANG sound THUD palfrom 53 63 63 63 addphealth -100 addphealth -100 addphealth -100 addphealth -100 addphealth -100 addphealth -100 addphealth -100 addphealth -100 quake 36 killit }
              }
ifspritepal 18
              {
               cstator 32768
               ifcount 96 { operaterespawns 68 quake 29 globalsound BELLSND operatemasterswitches 55 operaterespawns 44 killit }
              }
// sandfall effects

ifspritepal 27
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267 { set INSIDEQUICKFALL 0 }
              }
ifspritepal 28
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifcount 3 { lockplayer 4 resetcount }
                                           }
              }
ifspritepal 29
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            setp[].rotscrnang 65
                                            soundonce VIOLENTSANDFALL
                                            set INSIDEQUICKFALL 2
                                           }
              }

// sand flooding triggerer.

ifspritepal 30
              {
               cstator 32768
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ife PYRAMIDCODAGE 0 { ifcount 34 { operatemasterswitches 76 set EX_BEAMOPF01 0 set EX_BEAMOPF02 0 set EX_BEAMOPF03 0 set EX_BEAMOPF04 0 set EX_BEAMOPF05 0 set EX_BEAMOPF06 0 set EX_BEAMOPF07 0 set EX_BEAMOPF08 0 set EX_BEAMOPF09 0 set EX_BEAMOPF10 0 killit } }
                                            ife PYRAMIDCODAGE 10 
												{ 
												lockplayer 32 
												operatemasterswitches 78 
												ife gp_subt 0
													{
													qputs 7500 ^8Zaxtor: ^0Oh shit, I smell a deja vu.
													set gp_subt 82
													}
												globalsound ZAXDEJAVU 
												resetcount 
												set PYRAMIDCODAGE 0 
												}
                                           }
              }

enda

useractor notenemy PRESSABLESYMBOLS

ife PYRAMIDCODAGE 10 { operatemasterswitches 67 spawn HIDDENTRAPTILE killit } // ultimate win
ife JBGENEDEAD 666 killit // ultimate failure
ifspritepal 0
 {
cstator 256
			  ife command 0
				  {
				   geta[].mdflags TEMP
				   orvar TEMP 16
				   seta[].mdflags TEMP 
				  set command 131072
				  }
getp[].heat_on temp 
cstat 18
 ife temp 1
 {
 geta[].cstat temp266
 ifand temp266 32768
  { 
  sub temp266 32768
  seta[].cstat temp266
  }
 }
 else
 {
 geta[].cstat temp266
 ifand temp266 32768 nullop else
  {
  add temp266 32768
  seta[].cstat temp266
  }
 }
}

ifspritepal 2
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 spawn ff_delayer
                                                 set PYRAMIDCODAGE 1
                                                 globalsound GONG_HIT
                                                 killit
                                                }
                         }
             }
ifspritepal 3
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 spawn ff_delayer
                                                 globalsound BELLSND
                                                 operaterespawns 56
                                                 killit
                                                }
                          ife PYRAMIDCODAGE 1
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 2
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 3
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 4
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 5
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 6
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 7
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 8
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 9
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                         }
             }
ifspritepal 5
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 1
                                                {
                                                 spawn ff_delayer
                                                 globalsound BELLSND
                                                 operaterespawns 58
                                                 killit
                                                }
                          ife PYRAMIDCODAGE 2
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 3
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 4
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 5
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 6
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 7
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 8
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 9
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                         }
             }
ifspritepal 6
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 1
                                                {
                                                 spawn ff_delayer
                                                 set PYRAMIDCODAGE 2
                                                 globalsound GONG_HIT
                                                 killit
                                                }
                         }
             }
ifspritepal 7
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 1
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 2
                                                {
                                                 spawn ff_delayer
                                                 set PYRAMIDCODAGE 3
                                                 globalsound GONG_HIT
                                                 killit
                                                }
                         }
             }
ifspritepal 8
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 1
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 2
                                                {
                                                 spawn ff_delayer
                                                 globalsound BELLSND
                                                 operaterespawns 59
                                                 killit
                                                }
                          ife PYRAMIDCODAGE 3
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 4
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 5
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 6
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 7
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 8
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 9
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                         }
             }
ifspritepal 9
             {
              ifhitweapon
                         {
                          ife PYRAMIDCODAGE 0
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 1
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 2
                                                {
                                                 spawn ff_delayer
                                                 globalsound BELLSND
                                                 operaterespawns 60
                                                 killit
                                                }
                          ife PYRAMIDCODAGE 3
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 4
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 5
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 6
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 7
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 8
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                          ife PYRAMIDCODAGE 9
                                                {
                                                 quake 66
                                                 operatemasterswitches 57
                                                 palfrom 45 63 2 1
                                                 globalsound BIGHORN
                                                 spawn ff_delayer
                                                 set JBGENEDEAD 666
                                                }
                         }
             }
ifspritepal 10
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 4
                                                  globalsound GONG_HIT
                                                  killit
                                                 }
                          }
              }
ifspritepal 11
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  spawn ff_delayer
                                                  globalsound BELLSND
                                                  operaterespawns 62
                                                  killit
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                          }
              }
ifspritepal 12
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 5
                                                  globalsound GONG_HIT
                                                  killit
                                                 }
                          }
              }
ifspritepal 13
              {
               ifhitweapon
                          {
                           quake 66
                           operatemasterswitches 57
                           palfrom 45 63 2 1
                           globalsound BIGHORN
                           spawn ff_delayer
                           set JBGENEDEAD 666
                          }
              }
ifspritepal 14
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 6
                                                  globalsound GONG_HIT
                                                  killit
                                                 }
                          }
              }
ifspritepal 15
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  spawn ff_delayer
                                                  globalsound BELLSND
                                                  operaterespawns 63
                                                  killit
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                          }
              }
ifspritepal 16
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 7
                                                  globalsound GONG_HIT
                                                  killit
                                                 }
                          }
              }
ifspritepal 17
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  spawn ff_delayer
                                                  globalsound BELLSND
                                                  operaterespawns 64
                                                  killit
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                          }
              }
ifspritepal 18
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 8
                                                  globalsound GONG_HIT
                                                  killit
                                                 }
                          }
              }
ifspritepal 19
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  spawn ff_delayer
                                                  globalsound BELLSND
                                                  operaterespawns 65
                                                  killit
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                          }
              }
ifspritepal 20
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 9
                                                  globalsound GONG_HIT
                                                  killit
                                                 }
                          }
              }
ifspritepal 21
              {
               ifhitweapon
                          {
                           quake 66
                           operatemasterswitches 57
                           palfrom 45 63 2 1
                           globalsound BIGHORN
                           spawn ff_delayer
                           set JBGENEDEAD 666
                          }
              }
ifspritepal 22
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  spawn ff_delayer
                                                  globalsound BELLSND
                                                  operaterespawns 65
                                                  killit
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                          }
              }
ifspritepal 23
              {
               ifhitweapon
                          {
                           quake 66
                           operatemasterswitches 57
                           palfrom 45 63 2 1
                           globalsound BIGHORN
                           spawn ff_delayer
                           set JBGENEDEAD 666
                          }
              }
ifspritepal 24
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  spawn ff_delayer
                                                  set PYRAMIDCODAGE 10
                                                  globalsound GONG_HIT
                                                 }
                          }
              }
ifspritepal 25
              {
               ifhitweapon
                          {
                           ife PYRAMIDCODAGE 0
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 1
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 2
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 3
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 4
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 5
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 6
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 7
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 8
                                                 {
                                                  quake 66
                                                  operatemasterswitches 57
                                                  palfrom 45 63 2 1
                                                  globalsound BIGHORN
                                                  spawn ff_delayer
                                                  set JBGENEDEAD 666
                                                 }
                           ife PYRAMIDCODAGE 9
                                                 {
                                                  spawn ff_delayer
                                                  globalsound BELLSND
                                                  operaterespawns 66
                                                  killit
                                                 }
                          }
              }

// rest for beetle switch codes

ifspritepal 26
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES01 100 sound SWJPYRON palfrom 31 6 63 6 resetcount cactor SWK_1_02 }
                                      }
                           }
              }
ifspritepal 27
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES02 100 sound SWJPYRON palfrom 31 6 63 6 resetcount cactor SWK_1_02 }
                                      }
                           }
              }
ifspritepal 28
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES03 100 sound SWJPYRON palfrom 31 6 63 6 resetcount cactor SWK_1_02 }
                                      }
                           }
              }
ifspritepal 29
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES04 100 sound SWJPYRON palfrom 31 6 63 6 resetcount cactor SWK_1_02 }
                                      }
                           }
              }

enda

useractor notenemy SWK_1_02

// more beetle switch codes

ifspritepal 2
             {
              cstator 32768
              ife BEETLECODES05 18 killit
              ifpdistl 528
                          {
						  set player_use 0
                           ifhitspace
                                     {
                                      ifcount 63 { lockplayer 44 set BEETLECODES01 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 10 }
                                     }
                          }
             }
ifspritepal 3
             {
              cstator 32768
              ife BEETLECODES05 18 killit
              ifpdistl 528
                          {
						  set player_use 0
                           ifhitspace
                                     {
                                      ifcount 63 { lockplayer 44 set BEETLECODES02 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 11 }
                                     }
                          }
             }
ifspritepal 4
             {
              cstator 32768
              ife BEETLECODES05 18 killit
              ifpdistl 528
                          {
						  set player_use 0
                           ifhitspace
                                     {
                                      ifcount 63 { lockplayer 44 set BEETLECODES03 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 12 }
                                     }
                          }
             }
ifspritepal 5
             {
              cstator 32768
              ife BEETLECODES05 18 killit
              ifpdistl 528
                          {
						  set player_use 0
                           ifhitspace
                                     {
                                      ifcount 63 { lockplayer 44 set BEETLECODES04 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 13 }
                                     }
                          }
             }
ifspritepal 6
             {
              cstator 32768
              ife BEETLECODES05 18 killit
              ifpdistl 528
                          {
						  set player_use 0
                           ifhitspace
                                     {
                                      ifcount 63 { lockplayer 44 set BEETLECODES06 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 14 }
                                     }
                          }
             }
ifspritepal 7
             {
              cstator 32768
              ife BEETLECODES05 18 killit
              ifpdistl 528
                          {
						  set player_use 0
                           ifhitspace
                                     {
                                      ifcount 63 { lockplayer 44 set BEETLECODES07 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 15 }
                                     }
                          }
             }

// sound blocker

ifspritepal 8 { cstator 32768 } // to block the MARS_ELEV_1 that keeps looping for unknown reasons.

// var resetter
ifspritepal 9
             {
              cstator 32768
              geta[].sectnum temp266
               getp[].cursectnum temp267
                 ife temp266 temp267
                                          {
                                           set BEETLECODES01 0
                                           set BEETLECODES02 0
                                           set BEETLECODES03 0
                                           set BEETLECODES04 0
                                           set BEETLECODES05 0
                                           set BEETLECODES06 0
                                           set BEETLECODES07 0
                                           set BEETLECODES08 0
                                           killit
                                          }
             }

// switch codes pressed 2

ifspritepal 10
              {
               cstator 32768
               ife BEETLECODES05 18 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES01 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 2 }
                                      }
                           }
              }
ifspritepal 11
              {
               cstator 32768
               ife BEETLECODES05 18 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES02 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 3 }
                                      }
                           }
              }
ifspritepal 12
              {
               cstator 32768
               ife BEETLECODES05 18 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES03 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 4 }
                                      }
                           }
              }
ifspritepal 13
              {
               cstator 32768
               ife BEETLECODES05 18 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES04 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 5 }
                                      }
                           }
              }
ifspritepal 14
              {
               cstator 32768
               ife BEETLECODES05 18 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES06 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 6 }
                                      }
                           }
              }
ifspritepal 15
              {
               cstator 32768
               ife BEETLECODES05 18 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES07 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 7 }
                                      }
                           }
              }

// more beetle switch codes B

ifspritepal 16
              {
               cstator 32768
               ife BEETLECODES05 17 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES01 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 19 }
                                      }
                           }
              }
ifspritepal 17
              {
               cstator 32768
               ife BEETLECODES05 17 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES02 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 20 }
                                      }
                           }
              }
ifspritepal 18
              {
               cstator 32768
               ife BEETLECODES05 17 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES08 100 sound SWJPYRON palfrom 31 6 63 6 resetcount spritepal 21 }
                                      }
                           }
              }
// switch codes pressed 3

ifspritepal 19
              {
               cstator 32768
               ife BEETLECODES05 17 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES01 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 16 }
                                      }
                           }
              }
ifspritepal 20
              {
               cstator 32768
               ife BEETLECODES05 17 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES02 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 17 }
                                      }
                           }
              }
ifspritepal 21
              {
               cstator 32768
               ife BEETLECODES05 17 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES08 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount spritepal 18 }
                                      }
                           }
              }

// switch codes pressed

ifspritepal 26
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES01 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount cactor PRESSABLESYMBOLS }
                                      }
                           }
              }
ifspritepal 27
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES02 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount cactor PRESSABLESYMBOLS }
                                      }
                           }
              }
ifspritepal 28
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES03 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount cactor PRESSABLESYMBOLS }
                                      }
                           }
              }
ifspritepal 29
              {
               cstator 32768
               ife BEETLECODES05 19 killit
               ifpdistl 528
                           {
						   set player_use 0
                            ifhitspace
                                      {
                                       ifcount 63 { lockplayer 44 set BEETLECODES04 0 sound SWJPYROFF palfrom 31 63 6 6 resetcount cactor PRESSABLESYMBOLS }
                                      }
                           }
              }

enda

useractor notenemy ff_delayer

 ife PYRAMIDCODAGE 10 killit
 set EX_BEAMOPF10 101
 ifcount 1 { ife SWITC_H_CODES 0 { spawn HIDDENTRAPTILE set SWITC_H_CODES 6 } killit }

enda

move HCIDOWN01 0 128
move HCIUP01 0 -120
move HCIDOWN02 0 128
move HCIUP02 0 -120
move HCIDOWN03 0 128
move HCIUP03 0 -120
move HCIDOWN04 0 128
move HCIUP04 0 -120

useractor notenemy TRAPSCANNER101


			  ife command 0
				  {
				   geta[].mdflags TEMP
				   orvar TEMP 16
				   seta[].mdflags TEMP 
				  set command 131072
				  }

ifspritepal 4
             {
              cstator 32768
              ife EX_BEAM 33 killit
              ifcount 30 { set G_MOVINGPRT 10 resetcount spritepal 5 }
             }
ifspritepal 5
             {
              ife EX_BEAM 33 killit
              ifcount 30 { set G_MOVINGPRT 11 resetcount spritepal 4 }
             }
ifspritepal 6
             {
              cstator 32768
              ifcount 30 { set G_MOVINGPRT2 10 resetcount spritepal 7 }
             }
ifspritepal 7
             {
              ifcount 30 { set G_MOVINGPRT2 11 resetcount spritepal 6 }
             }
ifspritepal 10
              {
               getp[].heat_on temp cstat 0
                ife temp 1
                {
                geta[].cstat temp266
                ifand temp266 32768
                 { 
                 sub temp266 32768
                 seta[].cstat temp266
                 }
                }
               else
                {
                geta[].cstat temp266
                ifand temp266 32768 nullop else
                 {
                 add temp266 32768
                 seta[].cstat temp266
                 }
                }
               ife EX_BEAM 33 killit
               ife G_MOVINGPRT 10 { move HCIDOWN01 getv }
               ife G_MOVINGPRT 11 { move HCIUP01 getv }
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifpdistl 822
                                                        {
                                                         palfrom 48 1 63 10
                                                         globalsound DOORSPIRITSND
                                                         operatemasterswitches 95
                                                         set EX_BEAM 33
                                                        }
                                           }
              }
ifspritepal 11
              {
               getp[].heat_on temp cstat 0
                ife temp 1
                {
                geta[].cstat temp266
                ifand temp266 32768
                 { 
                 sub temp266 32768
                 seta[].cstat temp266
                 }
                }
               else
                {
                geta[].cstat temp266
                ifand temp266 32768 nullop else
                 {
                 add temp266 32768
                 seta[].cstat temp266
                 }
                }
               ife EX_BEAM 33 killit
               ife G_MOVINGPRT 10 { move HCIUP02 getv }
               ife G_MOVINGPRT 11 { move HCIDOWN02 getv }
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifpdistl 822
                                                        {
                                                         palfrom 48 1 63 10
                                                         globalsound DOORSPIRITSND
                                                         operatemasterswitches 95
                                                         set EX_BEAM 33
                                                        }
                                           }
              }
ifspritepal 13
              {
               seta[].shade 8
               getp[].heat_on temp cstat 0
                ife temp 1
                {
                geta[].cstat temp266
                ifand temp266 32768
                 { 
                 sub temp266 32768
                 seta[].cstat temp266
                 }
                }
               else
                {
                geta[].cstat temp266
                ifand temp266 32768 nullop else
                 {
                 add temp266 32768
                 seta[].cstat temp266
                 }
                }
               ife G_MOVINGPRT2 10 { move HCIDOWN03 getv }
               ife G_MOVINGPRT2 11 { move HCIUP03 getv }
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifpdistl 822
                                                        {
                                                         palfrom 48 1 63 10
                                                         globalsound BIGBANG
                                                         quake 13
                                                         spawn EXPLOSION2
                                                         addphealth -45
                                                         killit
                                                        }
                                           }
              }
ifspritepal 24
              {
               seta[].shade 18
               getp[].heat_on temp cstat 0
                ife temp 1
                {
                geta[].cstat temp266
                ifand temp266 32768
                 { 
                 sub temp266 32768
                 seta[].cstat temp266
                 }
                }
               else
                {
                geta[].cstat temp266
                ifand temp266 32768 nullop else
                 {
                 add temp266 32768
                 seta[].cstat temp266
                 }
                }
               ife G_MOVINGPRT2 11 { move HCIDOWN04 getv }
               ife G_MOVINGPRT2 10 { move HCIUP04 getv }
               geta[].sectnum temp266
                getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            ifpdistl 822
                                                        {
                                                         palfrom 48 1 63 10
                                                         globalsound BIGBANG
                                                         quake 13
                                                         spawn EXPLOSION2
                                                         addphealth -45
                                                         killit
                                                        }
                                           }
              }

enda

useractor notenemy NONGHOSTTILE01

 ifspritepal 0 { seta[].shade 13 }
// elevator timers
 ifspritepal 2 { ifcount 80 { operateactivators 101 0 resetcount spritepal 3 } }
 ifspritepal 3 { ifcount 80 { operateactivators 101 0 operateactivators 102 0 resetcount spritepal 5 } }
 ifspritepal 4 { cstator 32768 operateactivators 102 0 spritepal 2 }
 ifspritepal 5 { ifcount 80 { operateactivators 101 0 operateactivators 102 0 resetcount spritepal 3 } }
// SOME chopping blades sensors (pal 24 off pal 25 on)
 ifspritepal 24
               {
                cstator 32768
                geta[].sectnum temp266
                 getp[].cursectnum temp267
                   ife temp266 temp267
                                            {
                                             set EX_BEAMOPF10 566
                                            }
               }
 ifspritepal 25
               {
                cstator 32768
                geta[].sectnum temp266
                 getp[].cursectnum temp267
                   ife temp266 temp267
                                            {
                                             set EX_BEAMOPF10 567
                                            }
               }

enda

useractor notenemy NONGHOSTTILE02

 ifspritepal 0 { seta[].shade 13 }

enda

useractor notenemy NONGHOSTTILE03

 ifspritepal 0 { seta[].shade 13 }

enda

useractor notenemy NONGHOSTTILE04

 ifspritepal 0 { seta[].shade 13 }

enda

useractor notenemy ANCIENTSYMBOLS

// visible

ifspritepal 6
             {
              ife EX_BEAMOPF 223 { palfrom 19 29 39 48 quake 67 operatemasterswitches 47 operatemasterswitches 116 killit }
			  
			  ife command 0
				  {
				   geta[].mdflags TEMP
				   orvar TEMP 16
				   seta[].mdflags TEMP 
				  set command 131072
				  }
			  
              seta[].shade -62
              getp[].heat_on temp cstat 16
               ife temp 1
               {
               geta[].cstat temp266
               ifand temp266 32768
                { 
                sub temp266 32768
                seta[].cstat temp266
                }
               }
              else
               {
               geta[].cstat temp266
               ifand temp266 32768 nullop else
                {
                add temp266 32768
                seta[].cstat temp266
                }
               }
             }

// codes

ifspritepal 0 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF01 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 1 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 122 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 2 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF02 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 3 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 121 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 4 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 120 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 5 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF03 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 7 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF04 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 8 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF05 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 9 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF06 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 10 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 123 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 11 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 124 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 12 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF07 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 13 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 125 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 14 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 126 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 15 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 127 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 16 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF08 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 17 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF09 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 18 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 128 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 19 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 129 globalsound BELLSND palfrom 34 62 1 2 killit } }
ifspritepal 20 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } set EX_BEAMOPF10 222 globalsound GONG_HIT palfrom 34 1 62 2 killit } }
ifspritepal 21 { cstator 256 ife EX_BEAMOPF 222 killit ifhitweapon { ifwasweapon RADIUSEXPLOSION { operaterespawns 131 } operaterespawns 130 globalsound BELLSND palfrom 34 62 1 2 killit } }

// code timer

ifspritepal 22
              {
               cstator 32768
               ife EX_BEAMOPF01 222 { ife EX_BEAMOPF02 222 { ife EX_BEAMOPF03 222 { ife EX_BEAMOPF04 222 { ife EX_BEAMOPF05 222 { ife EX_BEAMOPF06 222 { ife EX_BEAMOPF07 222 { ife EX_BEAMOPF08 222 { ife EX_BEAMOPF09 222 { ife EX_BEAMOPF10 222 { set EX_BEAMOPF 222 resetcount spritepal 23 } } } } } } } } } }
              }
ifspritepal 23 { ifcount 47 { set EX_BEAMOPF 223 killit } }

// sound / ambiences eff.

 ifspritepal 24 { cstator 32768 soundonce MAGMASOUND }

// floor platform movement eff.

 ifspritepal 25 { cstator 32768 ifcount 96 { operateactivators 146 0 resetcount } }
 ifspritepal 26 { cstator 32768 ifcount 128 { operateactivators 152 0 resetcount } }

// painful area effector

 ifspritepal 27
               {
                cstator 32768
                geta[].sectnum temp266
                 getp[].cursectnum temp267
                   ife temp266 temp267
                                            {
                                             ifcount 62
                                                       {
                                                        palfrom 59 63 63 63
                                                        quake 31
                                                        addphealth -100
                                                        globalsound DOORSPIRITSND
                                                        resetcount
                                                       }
                                            }
               }
// door slam shut eff

 ifspritepal 28
               {
                cstator 32768
                geta[].sectnum temp266
                 getp[].cursectnum temp267
                   ife temp266 temp267
                                            {
                                             lockplayer 77
                                             operatemasterswitches 182
                                             resetcount
                                             spritepal 29
                                            }
               }
 ifspritepal 29 { ifcount 66 { globalsound ZFUCK killit } }

// associating with BREAKABLESCEILING (tile 20500)

 ifspritepal 30 { ifhitweapon { set EX_BEAM 768 killit } }

enda

useractor notenemy RADICAL_PARTICLE1

ifaction 0
	{
	cstator 2
	seta[].blend 255
	action ZERO
	}

ifspritepal 0
             {
              ifspawnedby RADICAL_PARTICLE1 { cstator 32768 spritepal 8 }
              sizeat 34 34
              seta[].shade -63
              ifpdistl 999 { ifp palive { palfrom 27 11 62 35 wackplayer globalsound ELECTROCUTE addphealth -1 } }
              ifcount 91 { spritepal 3 }
             }
 ifspritepal 3
              {
               palfrom 56 63 62 61
               quake 47
               hitradius 3100 60 75 92 116
               sound EXPLOSION_HUGE
               ifcansee { ifpdistl 1600 { addphealth -43 } }
               spawn SPREADORVX1
               spawn SPREADORVX1
               spawn SPREADORVX1
               spawn SPREADORVX1
               spawn SPREADORVX1
               spawn SPREADORVX2
               spawn SPREADORVX2
               spawn SPREADORVX2
               spawn SPREADORVX2
               spawn SPREADORVX2
               spawn SPREADORVX2
               spawn SPREADORVX3
               spawn SPREADORVX3
               spawn SPREADORVX3
               spawn SPREADORVX3
               spawn SPREADORVX3
               spawn SPREADORVX4
               spawn SPREADORVX4
               spawn SPREADORVX4
               spawn SPREADORVX4
               spawn SPREADORVX4
               spawn SPREADORVX5
               spawn SPREADORVX5
               spawn SPREADORVX5
               spawn SPREADORVX5
               spawn SPREADORVX5
               spawn SPREADORVX6
               spawn SPREADORVX6
               spawn SPREADORVX6
               spawn SPREADORVX6
               spawn SPREADORVX7
               spawn SPREADORVX7
               spawn SPREADORVX7
               spawn SPREADORVX7
               spawn SPREADORVX8
               spawn SPREADORVX8
               spawn SPREADORVX8
               spawn SPREADORVX8
               spawn SPREADORVX9
               spawn SPREADORVX9
               spawn SPREADORVX9
               spawn BIG_SMOKE
               spawn BIG_SMOKE
               spawn BIG_SMOKE
               spawn BIG_SMOKE
               spawn BIG_SMOKE
               spawn BIG_SMOKE
               spawn BIG_SMOKE2
               spawn BIG_SMOKE2
               spawn BIG_SMOKE2
               spawn BIG_SMOKE2
               spawn EXPLOSION2
               killit 
              }
ifspritepal 8
             {
              cstator 256
              ifpdistl 4500 { ifcount 3 { lockplayer 4 resetcount } }
              ifhitweapon { hitradius 1000 15 16 17 19 killit }
             } 
ifspritepal 9 { seta[].blend 255 cstator 32768 ifcansee { ifpdistl 2000 { spawn RADICAL_PARTICLE1 resetcount sound USE_TIMEPORTAL spritepal 10 } } }
ifspritepal 10
              {
               cstat 258
               sizeat 34 34
               seta[].shade -63
               ifpdistl 999 { ifp palive { palfrom 27 11 62 35 wackplayer globalsound ELECTROCUTE addphealth -1 } }
               ifcount 162 { spritepal 3 }
               ifhitweapon { spritepal 3 }
              }

enda

move SPRDVX1MOVE 212

useractor notenemy SPREADORVX1

ifmove 0
   move SPRDVX1MOVE geth randomangle

ifcount 10 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX2MOVE 211

useractor notenemy SPREADORVX2

ifmove 0
   move SPRDVX2MOVE geth randomangle

ifcount 20 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX3MOVE 211

useractor notenemy SPREADORVX3

ifmove 0
   move SPRDVX3MOVE geth randomangle

ifcount 30 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX4MOVE 211

useractor notenemy SPREADORVX4

ifmove 0
   move SPRDVX4MOVE geth randomangle

ifcount 40 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX5MOVE 211

useractor notenemy SPREADORVX5

ifmove 0
   move SPRDVX5MOVE geth randomangle

ifcount 50 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX6MOVE 211

useractor notenemy SPREADORVX6

ifmove 0
   move SPRDVX6MOVE geth randomangle

ifcount 60 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX7MOVE 211

useractor notenemy SPREADORVX7

ifmove 0
   move SPRDVX7MOVE geth randomangle

ifcount 70 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX8MOVE 211

useractor notenemy SPREADORVX8

ifmove 0
   move SPRDVX8MOVE geth randomangle

ifcount 80 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

move SPRDVX9MOVE 210

useractor notenemy SPREADORVX9

ifmove 0
   move SPRDVX9MOVE geth randomangle

ifcount 90 ifrnd 96
  {
    sound PIPEBOMB_EXPLODE
    espawn EXPLOSION2
    hitradius 1535 25 42 54 66
    spawn BIG_SMOKE2
    spawn BURNING2
    killit
  }
enda

useractor notenemy BREAKABLESCEILING

ifspritepal 0
             {
              seta[].shade 17
              ife EX_BEAM 768 killit
             }

enda

useractor notenemy CHOPBLADES01

sizeto 64 65
cstat 0 cstator 16
ifspritepal 0
             {
              ifcount 11
                        {
                         ifpdistl 1945
                                      {
                                       ifcansee
                                               {
                                                resetcount
                                                cactor CHOPBLADES02
                                               }
                                      }
                        }
             }
ifspritepal 3 { spritepal 0 }
ifspritepal 5
             {
              ifcount 19
                        {
                         ifpdistl 6445
                                      {
                                       ifcansee
                                               {
                                                resetcount
                                                cactor CHOPBLADES02
                                               }
                                      }
                        }
             }
ifspritepal 9 { spritepal 5 }
ifspritepal 10
             {
              ifcount 19
                        {
                         ifpdistl 6445
                                      {
                                       ife EX_BEAMOPF10 567
                                                              {
                                                               resetcount
                                                               cactor CHOPBLADES02
                                                              }
                                      }
                        }
             }
ifspritepal 11 { spritepal 10 }


enda

useractor notenemy CHOPBLADES02

sizeto 64 65
 ifspritepal 0 { ifcount 1 { resetcount cactor CHOPBLADES03 } }
 ifspritepal 3 { ifcount 2 { sound BLADESFLOORED1 resetcount cactor CHOPBLADES01 } }
 ifspritepal 5 { ifcount 1 { resetcount cactor CHOPBLADES03 } }
 ifspritepal 9 { ifcount 2 { sound BLADESFLOORED1 resetcount cactor CHOPBLADES01 } }
 ifspritepal 10 { ifcount 1 { resetcount cactor CHOPBLADES03 } }
 ifspritepal 11 { ifcount 2 { sound BLADESFLOORED1 resetcount cactor CHOPBLADES01 } }

enda

useractor notenemy CHOPBLADES03

sizeto 64 65
 geta[].sectnum temp266
  getp[].cursectnum temp267
    ife temp266 temp267
                             {
                              addphealth -99
                              addphealth -199
                             }
 ifspritepal 0 { ifcount 1 { cstator 257 resetcount cactor CHOPBLADES04 } }
 ifspritepal 3 { ifcount 2 { cstat 0 cstator 16 resetcount cactor CHOPBLADES02 } }
 ifspritepal 5 { ifcount 1 { cstator 257 resetcount cactor CHOPBLADES04 } }
 ifspritepal 9 { ifcount 2 { cstat 0 cstator 16 resetcount cactor CHOPBLADES02 } }
 ifspritepal 10 { ifcount 1 { cstator 257 resetcount cactor CHOPBLADES04 } }
 ifspritepal 11 { ifcount 2 { cstat 0 cstator 16 resetcount cactor CHOPBLADES02 } }

enda

useractor notenemy CHOPBLADES04

sizeto 64 65
 geta[].sectnum temp266
  getp[].cursectnum temp267
    ife temp266 temp267
                             {
                              addphealth -99
                              addphealth -199
                             }
 ifspritepal 0 { ifcount 1 { sound BLADESCLAP1 resetcount cactor CHOPBLADES05 } }
 ifspritepal 3 { ifcount 2 { resetcount cactor CHOPBLADES03 } }
 ifspritepal 5 { ifcount 1 { sound BLADESCLAP1 resetcount cactor CHOPBLADES05 } }
 ifspritepal 9 { ifcount 2 { resetcount cactor CHOPBLADES03 } }
 ifspritepal 10 { ifcount 1 { sound BLADESCLAP1 resetcount cactor CHOPBLADES05 } }
 ifspritepal 11 { ifcount 2 { resetcount cactor CHOPBLADES03 } }

enda

useractor notenemy CHOPBLADES05

sizeto 64 65
 geta[].sectnum temp266
  getp[].cursectnum temp267
    ife temp266 temp267
                             {
                              addphealth -99
                              addphealth -199
                             }
 ifspritepal 0 { ifcount 14 { resetcount spritepal 3 } }
 ifspritepal 3 { ifcount 2 { resetcount cactor CHOPBLADES04 } }
 ifspritepal 5 { ifcount 14 { resetcount spritepal 9 } }
 ifspritepal 9 { ifcount 2 { resetcount cactor CHOPBLADES04 } }
 ifspritepal 10 { ifcount 14 { resetcount spritepal 11 } }
 ifspritepal 11 { ifcount 2 { resetcount cactor CHOPBLADES04 } }

enda

useractor notenemy MYSTERIOUSSTONE1

 ifspritepal 10 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 20 killit } }
 ifspritepal 11 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 30 killit } }
 ifspritepal 12 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 40 killit } }
 ifspritepal 13 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 50 killit } }
 ifspritepal 14 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 60 killit } }
 ifspritepal 15 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 70 killit } }
 ifspritepal 16 { ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 80 killit } }
 ifspritepal 17 { cstator 32768 ife EX_BEAMOPF01 0 { resetcount } ife EX_BEAMOPF01 666 { ifcount 20 { soundonce DOORSPIRITSND { ifcount 81 { globalsound SKELETAL_DEMSNAKE killit } } } } }
// resetter
 ifspritepal 18
               {
                cstator 32768
                geta[].sectnum temp266
                 getp[].cursectnum temp267
                  ife temp266 temp267
                                           {
                                            set EX_BEAMOPF01 0
                                            set EX_BEAMOPF02 0
                                            set EX_BEAMOPF03 0
                                            quake 31
                                            killit
                                           }
               }
 ifspritepal 19
               {
                cstator 32768
                ifcansee
                        {
                         ifpdistl 862
                                     {
                                      ifangdiffl 32
                                                   {
												   set player_use 0
                                                    ifhitspace
                                                              {
                                                               operatemasterswitches 215
                                                               globalsound BIG_BELL
                                                               lockplayer 66
                                                               palfrom 41 15 17 19
                                                               resetcount
                                                               spritepal 20
                                                              }
                                                   }
                                     }
                        }
               }
 ifspritepal 20 { ifcount 59 { operatemasterswitches 333 operateactivators 800 0 set EX_BEAMOPF03 309 killit } }

enda

move DISLS1A 62 -40
move DISLS1B 82 -45
move DISLS1C 102 -50
move DISLS1D 122 -55
move DISLS1E 142 -60
move DISLS1F 162 -65
move DISLS1G 182 -70

useractor notenemy DISOLVINGSOULS1

// still souls

ifspritepal 9
             {
              cstator 32768
              ife EX_BEAMOPF02 0 { resetcount }
              ife EX_BEAMOPF02 309 { ifcount 20 ifrnd 126 { sound SOULSCREAMS1 spritepal 0 } }
             }
ifspritepal 10
              {
               cstator 32768
               ife EX_BEAMOPF02 0 { resetcount }
               ife EX_BEAMOPF02 309 { ifcount 37 ifrnd 116 { sound SOULSCREAMS1 spritepal 1 } }
              }
ifspritepal 11
              {
               cstator 32768
               ife EX_BEAMOPF02 0 { resetcount }
               ife EX_BEAMOPF02 309 { ifcount 53 ifrnd 106 { sound SOULSCREAMS1 spritepal 2 } }
              }
ifspritepal 12
              {
               cstator 32768
               ife EX_BEAMOPF02 0 { resetcount }
               ife EX_BEAMOPF02 309 { ifcount 66 ifrnd 98 { sound SOULSCREAMS1 spritepal 6 } }
              }
ifspritepal 13
              {
               cstator 32768
               ife EX_BEAMOPF02 0 { resetcount }
               ife EX_BEAMOPF02 309 { ifcount 77 ifrnd 91 { sound SOULSCREAMS1 spritepal 7 } }
              }
ifspritepal 14
              {
               cstator 32768
               ife EX_BEAMOPF02 0 { resetcount }
               ife EX_BEAMOPF02 309 { ifcount 81 ifrnd 86 { sound SOULSCREAMS1 spritepal 8 } }
              }
ifspritepal 15
              {
               cstator 32768
               ife EX_BEAMOPF02 0 { resetcount }
               ife EX_BEAMOPF02 309 { ifcount 45 ifrnd 82 { sound SOULSCREAMS1 spritepal 18 } }
              }

// escaping souls
ifspritepal 0
             {
              cstat 0
              seta[].shade -1
              move DISLS1A getv
              ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
             }
ifspritepal 1
             {
              cstat 0
              seta[].shade -1
              move DISLS1B getv
              ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
             }
ifspritepal 2
             {
              cstat 0
              seta[].shade -1
              move DISLS1C getv
              ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
             }
ifspritepal 6
             {
              cstat 0
              seta[].shade -1
              move DISLS1C getv
              ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
             }
ifspritepal 7
             {
              cstat 0
              seta[].shade -1
              move DISLS1D getv
              ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
             }
ifspritepal 8
             {
              cstat 0
              seta[].shade -1
              move DISLS1E getv
              ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
             }
ifspritepal 18
              {
               cstat 0
               seta[].shade -1
               move DISLS1F getv
               ife EX_BEAMOPF02 310 { cactor DISOLVINGSOULS2 }
              }

// soul effectors

 ifspritepal 20
               {
                cstator 32768
                ife EX_BEAMOPF03 0 { resetcount }
                ife EX_BEAMOPF03 309 { ifcount 66 { palfrom 35 52 12 27 quake 126 set EX_BEAMOPF02 309 spritepal 21 } }
               }
 ifspritepal 21
               {
                ife EX_BEAMOPF02 309 { ifcount 198 { operatemasterswitches 210 resetcount set EX_BEAMOPF02 310 } }
                ife EX_BEAMOPF02 310 { ifcount 26 { resetcount set EX_BEAMOPF02 311 } }
                ife EX_BEAMOPF02 311 { ifcount 26 { resetcount set EX_BEAMOPF02 312 } }
                ife EX_BEAMOPF02 312 { ifcount 26 { resetcount set EX_BEAMOPF02 313 } }
                ife EX_BEAMOPF02 313 { ifcount 262 { globalsound EARTHQUAKE set EX_BEAMOPF01 666 killit } }
               }

enda

move DISLS2A 70 -30
move DISLS2B 90 -35
move DISLS2C 110 -40
move DISLS2D 130 -45
move DISLS2E 150 -50
move DISLS2F 170 -55
move DISLS2G 190 -60

useractor notenemy DISOLVINGSOULS2

ifspritepal 0
             {
			 seta[].blend 255
              cstator 2
              seta[].shade 5
              move DISLS2A getv
              ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
             }
ifspritepal 1
             {
			 seta[].blend 255
              cstator 2
              seta[].shade 5
              move DISLS2B getv
              ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
             }
ifspritepal 2
             {
			 seta[].blend 255
              cstator 2
              seta[].shade 5
              move DISLS2C getv
              ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
             }
ifspritepal 6
             {
			 seta[].blend 255
              cstator 2
              seta[].shade 5
              move DISLS2C getv
              ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
             }
ifspritepal 7
             {
			 seta[].blend 255
              cstator 2
              seta[].shade 5
              move DISLS2D getv
              ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
             }
ifspritepal 8
             {
			 seta[].blend 255
              cstator 2
              seta[].shade 5
              move DISLS2E getv
              ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
             }
ifspritepal 18
              {
			  seta[].blend 255
               cstator 2
               seta[].shade 5
               move DISLS2F getv
               ife EX_BEAMOPF02 311 { cactor DISOLVINGSOULS3 }
              }

enda

move DISLS3A 80 -20
move DISLS3B 100 -25
move DISLS3C 120 -30
move DISLS3D 140 -35
move DISLS3E 160 -40
move DISLS3F 180 -45
move DISLS3G 200 -50

useractor notenemy DISOLVINGSOULS3

ifspritepal 0
             {
              seta[].shade 9
              move DISLS3A getv
              ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
             }
ifspritepal 1
             {
              seta[].shade 9
              move DISLS3B getv
              ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
             }
ifspritepal 2
             {
              seta[].shade 9
              move DISLS3C getv
              ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
             }
ifspritepal 6
             {
              seta[].shade 9
              move DISLS3C getv
              ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
             }
ifspritepal 7
             {
              seta[].shade 9
              move DISLS3D getv
              ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
             }
ifspritepal 8
             {
              seta[].shade 9
              move DISLS3E getv
              ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
             }
ifspritepal 18
              {
               seta[].shade 9
               move DISLS3F getv
               ife EX_BEAMOPF02 312 { cactor DISOLVINGSOULS4 }
              }

enda

move DISLS4A 100 -10
move DISLS4B 120 -15
move DISLS4C 140 -20
move DISLS4D 160 -25
move DISLS4E 180 -30
move DISLS4F 200 -35
move DISLS4G 220 -40

useractor notenemy DISOLVINGSOULS4

ifspritepal 0
             {
              cstator 514
              seta[].shade 13
              move DISLS4A getv
              ife EX_BEAMOPF02 313 { sound THUD killit }
             }
ifspritepal 1
             {
              cstator 514
              seta[].shade 13
              move DISLS4B getv
              ife EX_BEAMOPF02 313 { sound THUD killit }
             }
ifspritepal 2
             {
              cstator 514
              seta[].shade 13
              move DISLS4C getv
              ife EX_BEAMOPF02 313 { sound THUD killit }
             }
ifspritepal 6
             {
              cstator 514
              seta[].shade 13
              move DISLS4C getv
              ife EX_BEAMOPF02 313 { sound THUD killit }
             }
ifspritepal 7
             {
              cstator 514
              seta[].shade 13
              move DISLS4D getv
              ife EX_BEAMOPF02 313 { sound THUD killit }
             }
ifspritepal 8
             {
              cstator 514
              seta[].shade 13
              move DISLS4E getv
              ife EX_BEAMOPF02 313 { sound THUD killit }
             }
ifspritepal 18
              {
               cstator 514
               seta[].shade 13
               move DISLS4F getv
               ife EX_BEAMOPF02 313 { sound THUD killit }
              }

enda

 state snkeyedead

 ifspritepal 7
              {
               set EX_BEAMOPF09 947
               stopsound DEMSNKPAIN
               quake 201
               globalsound SDS_DIES
               guts JIBS6 29
               spawn SKELSNAKE_BLK_N_E
              }
 ifspritepal 10 { set EX_BEAMOPF01 696 }
 ifspritepal 11 { set EX_BEAMOPF02 696 }
 ifspritepal 12 { set EX_BEAMOPF03 696 }
 ifspritepal 13 { set EX_BEAMOPF04 696 }
 ifspritepal 14 { set EX_BEAMOPF05 696 }
 ifspritepal 15 { set EX_BEAMOPF06 696 }

 guts JIBS6 16
 shoot BLOODSPLAT1
 shoot BLOODSPLAT1
 shoot BLOODSPLAT2
 shoot BLOODSPLAT2
 shoot BLOODSPLAT3
 shoot BLOODSPLAT4
 globalsound BLOOD_EXPLOSION
 globalsound BLOOD_SPURT
 killit

ends

state checksdemseyehitstate
  ifdead state snkeyedead

ends

useractor notenemy SSNAKEEYES_N_E SKELETALSNKHPEYE

// boss activator effector
ifspritepal 4
             {
              cstator 32768
              geta[].sectnum temp266
               getp[].cursectnum temp267
                ife temp266 temp267
                                         {
                                          set EX_BEAM 0
                                          set EX_BEAMOPF 0
                                          resetcount
                                          spritepal 5
                                         }
             }
ifspritepal 5 { ifcount 6 { globalsound SKELETAL_DEMSNAKE resetcount spritepal 16 } }
// Boss's forehead (last part)
 ifspritepal 6
              {
               cstator 32768
               ife EX_BEAMOPF01 696 { ife EX_BEAMOPF02 696 { ife EX_BEAMOPF03 696 { ife EX_BEAMOPF04 696 { ife EX_BEAMOPF05 696 { ife EX_BEAMOPF06 696 { addstrength SKELETONSNKHEADSTR set CURBOSS THISACTOR set BOSS_TYPE 2 spritepal 7 } } } } } }
              }
 ifspritepal 7 { cstator 272 }

// boss's eyes


 ifspritepal 10 { cstator 32768 cstator 272 }
 ifspritepal 11 { cstator 32768 cstator 272 }
 ifspritepal 12 { cstator 32768 cstator 272 }
 ifspritepal 13 { cstator 32768 cstator 272 }
 ifspritepal 14 { cstator 32768 cstator 272 }
 ifspritepal 15 { cstator 32768 cstator 272 }

ifhitweapon
           {
            quake 7
            soundonce DEMSNKPAIN
            state checksdemseyehitstate
           }

// boss controller
 ifspritepal 16 { ife EX_BEAMOPF09 947 killit ifcount 228 { set EX_BEAMOPF 695 resetcount spritepal 17 } }
 ifspritepal 17 { ife EX_BEAMOPF09 947 killit ifcount 390 { set EX_BEAMOPF 0 resetcount spritepal 18 } }
 ifspritepal 18 { ife EX_BEAMOPF09 947 killit ifcount 300 { set EX_BEAMOPF 696 resetcount spritepal 19 } }
 ifspritepal 19 { ife EX_BEAMOPF09 947 killit ifcount 100 { set EX_BEAMOPF 696 resetcount spritepal 20 } }
 ifspritepal 20 { ife EX_BEAMOPF09 947 killit ifcount 198 { set EX_BEAMOPF 695 resetcount spritepal 21 } }
 ifspritepal 21 { ife EX_BEAMOPF09 947 killit ifcount 390 { set EX_BEAMOPF 0 resetcount spritepal 22 } }
 ifspritepal 22 { ife EX_BEAMOPF09 947 killit ifcount 90 { set EX_BEAMOPF 697 resetcount spritepal 23 } }
 ifspritepal 23 { ife EX_BEAMOPF09 947 killit ifcount 98 { set EX_BEAMOPF 698 resetcount spritepal 24 } }
 ifspritepal 24 { ife EX_BEAMOPF09 947 killit ifcount 111 { set EX_BEAMOPF 695 resetcount spritepal 25 } }
 ifspritepal 25 { ife EX_BEAMOPF09 947 killit ifcount 390 { set EX_BEAMOPF 0 resetcount spritepal 26 } }
 ifspritepal 26 { ife EX_BEAMOPF09 947 killit ifcount 100 { set EX_BEAMOPF 696 resetcount spritepal 27 } }
 ifspritepal 27 { ife EX_BEAMOPF09 947 killit ifcount 100 { set EX_BEAMOPF 697 resetcount spritepal 28 } }
 ifspritepal 28 { ife EX_BEAMOPF09 947 killit ifcount 100 { set EX_BEAMOPF 698 resetcount spritepal 29 } }
 ifspritepal 29 { ife EX_BEAMOPF09 947 killit ifcount 200 { set EX_BEAMOPF 699 resetcount spritepal 30 } }
 ifspritepal 30 { ife EX_BEAMOPF09 947 killit ife BARRIERPWRLV 98 { set EX_BEAM 0 resetcount spritepal 16 } }

enda

useractor notenemy SSNAKE_L_EYE_1_X_X

 ife EX_BEAMOPF01 696 { cactor SSNAKE_L_EYE_1_X_XD }

enda

useractor notenemy SSNAKE_L_EYE_X_1_X

 ife EX_BEAMOPF02 696 { cactor SSNAKE_L_EYE_X_1_XD }

enda

useractor notenemy SSNAKE_L_EYE_X_X_1

 ife EX_BEAMOPF03 696 { cactor SSNAKE_L_EYE_X_X_1D }

enda

useractor notenemy SSNAKE_R_EYE_1_X_X

 ife EX_BEAMOPF04 696 { cactor SSNAKE_R_EYE_1_X_XD }

enda

useractor notenemy SSNAKE_R_EYE_X_1_X

 ife EX_BEAMOPF05 696 { cactor SSNAKE_R_EYE_X_1_XD }

enda

useractor notenemy SSNAKE_R_EYE_X_X_1

 ife EX_BEAMOPF06 696 { cactor SSNAKE_R_EYE_X_X_1D }

enda

useractor notenemy SSNAKE_MOUTH_CLOSED

ifspritepal 0
             {
              ife EX_BEAMOPF09 945 { resetcount spritepal 2 }
              ife EX_BEAMOPF 0 { resetcount }
              ife EX_BEAMOPF 695 { cactor SSNAKE_OPENMOUTH_01 }
              ife EX_BEAMOPF 696 { cactor SSNAKE_OPENMOUTH_01 }
              ife EX_BEAMOPF 697 { cactor SSNAKE_OPENMOUTH_01 }
              ife EX_BEAMOPF 698 { cactor SSNAKE_OPENMOUTH_01 }
              ife EX_BEAMOPF 699 { cactor SSNAKE_OPENMOUTH_01 }
             }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_OPENMOUTH_01

ifspritepal 0
             {
              ife EX_BEAMOPF09 945 { resetcount spritepal 2 }
              ife EX_BEAMOPF 0 { ifcount 16 { cactor SSNAKE_MOUTH_CLOSED } }
              ife EX_BEAMOPF 695 { ifcount 4 { globalsound SKELETAL_DEMATTCK cactor SSNAKE_OPENMOUTH_02 } }
              ife EX_BEAMOPF 696 { ifcount 4 { globalsound SKELETAL_DEMATTCK cactor SSNAKE_OPENMOUTH_02 } }
              ife EX_BEAMOPF 697 { ifcount 4 { globalsound SKELETAL_DEMATTCK cactor SSNAKE_OPENMOUTH_02 } }
              ife EX_BEAMOPF 698 { ifcount 4 { globalsound SKELETAL_DEMATTCK cactor SSNAKE_OPENMOUTH_02 } }
              ife EX_BEAMOPF 699 { ifcount 4 { globalsound SKELETAL_DEMATTCK cactor SSNAKE_OPENMOUTH_02 } }
             }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_OPENMOUTH_02

ifspritepal 0
             {
              ife EX_BEAMOPF09 945 { resetcount spritepal 2 }
              ife EX_BEAMOPF 0 { ifcount 12 { cactor SSNAKE_OPENMOUTH_01 } }
              ife EX_BEAMOPF 695 { ifcount 8 { cactor SSNAKE_OPENMOUTH_03 } }
              ife EX_BEAMOPF 696 { ifcount 8 { cactor SSNAKE_OPENMOUTH_03 } }
              ife EX_BEAMOPF 697 { ifcount 8 { cactor SSNAKE_OPENMOUTH_03 } }
              ife EX_BEAMOPF 698 { ifcount 8 { cactor SSNAKE_OPENMOUTH_03 } }
              ife EX_BEAMOPF 699 { ifcount 8 { cactor SSNAKE_OPENMOUTH_03 } }
             }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_OPENMOUTH_03

ifspritepal 0
             {
              ife EX_BEAMOPF09 945 { resetcount spritepal 2 }
              ife EX_BEAMOPF 0 { ifcount 8 { cactor SSNAKE_OPENMOUTH_02 } }
              ife EX_BEAMOPF 694 { set EX_BEAMOPF 0 }
              ife EX_BEAMOPF 695 { ifcount 12 { cactor SSNAKE_OPENMOUTH_04 } }
              ife EX_BEAMOPF 696 { ifcount 12 { set EX_BEAM 667 resetcount cactor SSNAKE_OPENMOUTH_04 } }
              ife EX_BEAMOPF 697 { ifcount 12 { set EX_BEAM 668 resetcount cactor SSNAKE_OPENMOUTH_04 } }
              ife EX_BEAMOPF 698 { ifcount 12 { set EX_BEAM 669 resetcount cactor SSNAKE_OPENMOUTH_04 } }
              ife EX_BEAMOPF 699 { ifcount 12 { cactor SSNAKE_OPENMOUTH_04 } }
             }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_OPENMOUTH_04

ifspritepal 0
             {
              ife EX_BEAMOPF09 945 { resetcount spritepal 2 }
              ife EX_BEAMOPF 0 { ifcount 4 { cactor SSNAKE_OPENMOUTH_03 } }
              ife EX_BEAMOPF 695 { ifcount 16 { set EX_BEAM 666 cactor SSNAKE_OPENMOUTH_05 } }
              ife EX_BEAMOPF 694 { set EX_BEAM 0 cactor SSNAKE_OPENMOUTH_03 }
              ife EX_BEAMOPF 696 { ifcount 15 { set EX_BEAM 0 resetcount set EX_BEAMOPF 694 } }
              ife EX_BEAMOPF 697 { ifcount 15 { set EX_BEAM 0 resetcount set EX_BEAMOPF 694 } }
              ife EX_BEAMOPF 698 { ifcount 15 { set EX_BEAM 0 resetcount set EX_BEAMOPF 694 } }
              ife EX_BEAMOPF 699 { ifcount 16 { set EX_BEAM 999 set BARRIERPWRLV 100 cactor SSNAKE_OPENMOUTH_05 } }
             }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_OPENMOUTH_05

ifspritepal 0
             {
              ife EX_BEAMOPF09 945 { resetcount spritepal 2 }
              ife EX_BEAMOPF 0 { set EX_BEAM 0 cactor SSNAKE_OPENMOUTH_04 }
              ife EX_BEAMOPF 695 { resetcount }
              ife EX_BEAMOPF 699 { resetcount }
             }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_WEAP_EFF

 cstator 32768
 ife EX_BEAMOPF09 947 killit 

 ifspritepal 0
              {
               ife EX_BEAM 0 { resetcount }
               ife EX_BEAM 666 { ifcount 46 { spritepal 3 } }
              }
 ifspritepal 3
              {
               ife EX_BEAM 0 { spritepal 0 }
               ifcount 96 { globalsound STYGIAN_FIRE shoot FSTYGIAN_ROCK resetcount }
              }
// multifire laser
 ifspritepal 2
              {
               ife EX_BEAM 0 { resetcount }
               ife EX_BEAM 667 { ifcount 9 { shoot FIRELASER resetcount } }
              }
 ifspritepal 7
              {
               ife EX_BEAM 0 { resetcount }
               ife EX_BEAM 668 { ifcount 9 { shoot FIRELASER resetcount } }
              }
 ifspritepal 8
              {
               ife EX_BEAM 0 { resetcount }
               ife EX_BEAM 669 { ifcount 9 { shoot FIRELASER resetcount } }
              }
// spawn blocks
 ifspritepal 4 { ife EX_BEAMF 586 { globalsound SPELL8FIRE shoot MOBSPAWNBLK set EX_BEAMF 0 } }
 ifspritepal 5
              {
               ife EX_BEAMOPF01 696 spritepal 6
               ife EX_BEAMOPF02 696 spritepal 6
               ife EX_BEAMOPF03 696 spritepal 6
               ife EX_BEAMOPF04 696 spritepal 6
               ife EX_BEAMOPF05 696 spritepal 6
               ife EX_BEAMOPF06 696 spritepal 6
              }
 ifspritepal 6 { ifcount 610 { set EX_BEAMF 586 resetcount } }

// deadly firespit
 ifspritepal 9
              {
               ife BARRIERPWRLV 100 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 101 }
               ife BARRIERPWRLV 101 { ifcount 41 { set BARRIERPWRLV 102 } }
              }
 ifspritepal 10
               {
                ife BARRIERPWRLV 102 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 103 }
                ife BARRIERPWRLV 103 { ifcount 41 { set BARRIERPWRLV 104 } }
               }
 ifspritepal 11
               {
                ife BARRIERPWRLV 104 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 105 }
                ife BARRIERPWRLV 105 { ifcount 41 { set BARRIERPWRLV 106 } }
               }
 ifspritepal 12
               {
                ife BARRIERPWRLV 106 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 107 }
                ife BARRIERPWRLV 107 { ifcount 41 { set BARRIERPWRLV 108 } }
               }
 ifspritepal 13
               {
                ife BARRIERPWRLV 108 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 109 }
                ife BARRIERPWRLV 109 { ifcount 41 { set BARRIERPWRLV 110 } }
               }
 ifspritepal 14
               {
                ife BARRIERPWRLV 110 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 111 }
                ife BARRIERPWRLV 111 { ifcount 41 { set BARRIERPWRLV 112 } }
               }
 ifspritepal 15
               {
                ife BARRIERPWRLV 112 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 113 }
                ife BARRIERPWRLV 113 { ifcount 41 { set BARRIERPWRLV 114 } }
               }
 ifspritepal 16
               {
                ife BARRIERPWRLV 114 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 115 }
                ife BARRIERPWRLV 115 { ifcount 41 { set BARRIERPWRLV 116 } }
               }
 ifspritepal 17
               {
                ife BARRIERPWRLV 116 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 117 }
                ife BARRIERPWRLV 117 { ifcount 41 { set BARRIERPWRLV 118 } }
               }
 ifspritepal 18
               {
                ife BARRIERPWRLV 118 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 119 }
                ife BARRIERPWRLV 119 { ifcount 41 { set BARRIERPWRLV 120 } }
               }
 ifspritepal 19
               {
                ife BARRIERPWRLV 120 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 121 }
                ife BARRIERPWRLV 121 { ifcount 41 { set BARRIERPWRLV 122 } }
               }
 ifspritepal 20
               {
                ife BARRIERPWRLV 122 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 123 }
                ife BARRIERPWRLV 123 { ifcount 41 { set BARRIERPWRLV 124 } }
               }
 ifspritepal 21
               {
                ife BARRIERPWRLV 124 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 125 }
                ife BARRIERPWRLV 125 { ifcount 41 { set BARRIERPWRLV 126 } }
               }
 ifspritepal 22
               {
                ife BARRIERPWRLV 126 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 127 }
                ife BARRIERPWRLV 127 { ifcount 41 { set BARRIERPWRLV 128 } }
               }
 ifspritepal 23
               {
                ife BARRIERPWRLV 128 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 129 }
                ife BARRIERPWRLV 129 { ifcount 41 { set BARRIERPWRLV 130 } }
               }
 ifspritepal 24
               {
                ife BARRIERPWRLV 130 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 131 }
                ife BARRIERPWRLV 131 { ifcount 41 { set BARRIERPWRLV 132 } }
               }
 ifspritepal 25
               {
                ife BARRIERPWRLV 99 { set EX_BEAMOPF 0 set BARRIERPWRLV 98 }
                ife BARRIERPWRLV 132 { globalsound DEADLYFIRES shoot FIREBALLTRAILER resetcount set BARRIERPWRLV 133 }
                ife BARRIERPWRLV 133 { ifcount 62 { set BARRIERPWRLV 99 } }
               }

enda

move FFSSDEAD 62

useractor notenemy SKELSNAKE_BLK_N_E

 ifspritepal 0
              {
               ifspawnedby RESPAWN { spritepal 24 }
               ifspawnedby SSNAKEEYES_N_E { spritepal 28 }
               ifspawnedby MOBSPAWNBLK { spritepal 30 }
               ife EX_BEAMOPF09 946 { resetcount spritepal 29 }
               ife EX_BEAMOPF09 947
                                      {
                                       move FFSSDEAD
                                      }

              }
// exit tile spawner

 ifspritepal 6 { spawn 21398 killit } // NEOSPAWNINGTILES
 ifspritepal 24 { ifcount 5 spritepal 6 }

// boss demise
 ifspritepal 25 { ifcount 62 { set EX_BEAMOPF09 943 operatemasterswitches 1666 operaterespawns 1666 operateactivators 1666 THISACTOR killit } }
 ifspritepal 26 { ifcount 41 { quake 223 set EX_BEAMOPF09 944 resetcount spritepal 25 } }
 ifspritepal 27 { globalsound EXPLOSION_BIG palfrom 54 63 63 63 set EX_BEAMOPF09 945 resetcount spritepal 26 }
 ifspritepal 28 { ifcount 48 { set EX_BEAMOPF09 946 palfrom 21 63 63 63 spritepal 27 } }

 ifspritepal 29 { ifcount 33 ifrnd 96 { spawn FIREEXP1 palfrom 23 61 62 63 spawn SPREADORVX1 killit } }
// lost spawner
 ifspritepal 30 { palfrom 21 14 6 63 spawn EXPLOSION2 sound BIGBANG spawn LOST killit }

enda

action FEXP_FRAMES 0 17 1 1  4
useractor notenemy FIREEXP1 1 

ifaction 0
	{
	 sizeat 254 231
	 ifspawnedby FIREBALLTRAILER ifand THISACTOR 1 killit
	 cstat 130
	 seta[].blend 255
	 seta[].shade -127
	 action FEXP_FRAMES
	}
ifaction FEXP_FRAMES
	{
	hitradius 2124 44 54 64 78
	 ifactioncount 17 killit
	}

enda

 move SSSPN1 0 -6

useractor notenemy SSSPINE

 ifspritepal 0 { ife EX_BEAMOPF09 944 { spritepal 3 } }
 ifspritepal 2
              {
               fall
               ifcount 63 ifrnd 91 { iffloordistl 2 { globalsound EXPLOSION_LARGE palfrom 23 63 62 63 spawn SPREADORVX6 spawn SPREADORVX8 spawn SPREADORVX9 spawn FIREEXP1 killit } }
              }
 ifspritepal 3
              {
               ife EX_BEAMOPF09 944 { resetcount spritepal 2 }
               move SSSPN1
              }

enda

 move SSRB1 0 -6

useractor notenemy SSRIBS

 ifspritepal 0 { ife EX_BEAMOPF09 944 { spritepal 3 } }
 ifspritepal 2
              {
               fall
               ifcount 63 ifrnd 91 { iffloordistl 2 { globalsound EXPLOSION_LARGE palfrom 23 63 62 63 spawn FIREEXP1 spawn SPREADORVX2 spawn SPREADORVX7 spawn SPREADORVX9 killit } }
              }
 ifspritepal 3
              {
               ife EX_BEAMOPF09 944 { resetcount spritepal 2 }
               move SSRB1
              }

enda

useractor notenemy SSNAKE_L_EYE_1_X_XD

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_R_EYE_1_X_XD

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_L_EYE_X_1_XD

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_R_EYE_X_1_XD

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_L_EYE_X_X_1D

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_R_EYE_X_X_1D

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 killit }

enda

useractor notenemy SSNAKE_L_HORNS

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 { globalsound DISTANT_EXPLOSION killit } }

enda

useractor notenemy SSNAKE_R_HORNS

 ifspritepal 0 { ife EX_BEAMOPF09 945 { resetcount spritepal 2 } }
 ifspritepal 2 { ifcount 31 { operatemasterswitches 1777 operateactivators 1777 THISACTOR killit } }

enda

eventloadactor 21398 geta[].cstat TEMP4 geta[].ang TEMP8 state GETHITAGLOTAG enda

useractor notenemy 21398

ifspawnedby SKELSNAKE_BLK_N_E spritepal 6
ifaction 0
{
ifspritepal 3 break
sizeat 1 1
cstat 32768
spawn 10353
ifn HITAGSAVED 0 action BREAK
else action ZERO
}

ifaction BREAK
{
sleeptime 0
checkactivatormotion HITAGSAVED
ife RETURN 1 action ZERO
}
else
ifaction ZERO
{
ifpdistl 3272
	{	
	seta[].cstat TEMP4
	action FORM
	}
}
else
ifaction FORM
{
cstator 34
geta[].ang TEMP3
add TEMP3 256
seta[].ang TEMP3
geta[].xrepeat TEMP2
add TEMP2 2
seta[].xrepeat TEMP2
seta[].yrepeat TEMP2
ifg TEMP2 24
	{
        cstator 35
	sizeat 36 36
	seta[].ang TEMP8
	sound ROCK_IMPACT
	action FORMED
	}
}
else
ifaction FORMED
{
move 0
ifpdistg 3071
	{
	action UNFORM
	}
}
else
ifaction UNFORM
{
geta[].ang TEMP3
sub TEMP3 256
seta[].ang TEMP3
sizeto 1 1
ife sprite[].xrepeat 1
	{
	seta[].ang TEMP8
	cstat 32768
	spawn GUNSMOKE
	action ZERO
	}
}

enda

useractor notenemy EPORTAL_AND_ETC1

ifspritepal 4
             {
              ife EX_BEAMOPF09 0 { cstator 32768 }
              ife EX_BEAMOPF09 943 { cstator 33 }
             }
// Last scene activator

ifspritepal 5
             {
              cstator 32768
              ife EX_BEAMOPF09 943 { ifcansee { palfrom 32 63 63 63 set ACCUNLOCKED 666 operateactivators 806 0 set EX_BEAMOPF08 518 resetcount spritepal 18 } }
             }
ifspritepal 18 { ifcount 111 { set EX_BEAMOPF08 519 killit } }

// portal to exit boss
ifspritepal 6
             {
              ife EX_BEAMOPF09 0 { cstator 32768 }
              ife EX_BEAMOPF09 943 { cstat 0 cstator 18 }
             }

// portal to enter boss
ifspritepal 7 { seta[].shade -62 ifcount 423 { cstat 0 cstator 530 ife EX_BEAMOPF09 943 { ifpdistl 6666 { resetcount spritepal 17 } } } }
ifspritepal 8 { cstator 32768 ife EX_BEAMOPF01 666 { resetcount spritepal 7 } }
ifspritepal 17 { seta[].shade 20 ifcount 211 killit }

// Skeletal demon snake's lair fades to black.

ifspritepal 10
              {
               seta[].shade 62
               ife ACCUNLOCKED 0 { cstator 32768 }
               ife ACCUNLOCKED 666 { cstat 0 cstator 16 }
              }
ifspritepal 11
              {
               seta[].shade 62
               ife ACCUNLOCKED 0 { cstator 32768 }
               ife ACCUNLOCKED 666 { cstat 0 cstator 32 }
              }
// crushing ceiling movement effectors

 ifspritepal 12 { cstator 32768 ifcount 32 { operateactivators 10501 0 resetcount spritepal 13 } }
 ifspritepal 13 { ifcount 91 { operateactivators 10501 0 resetcount spritepal 12 } }

 ifspritepal 14 { cstator 32768 ifcount 28 { operateactivators 10502 0 resetcount spritepal 15 } }
 ifspritepal 15 { ifcount 91 { operateactivators 10502 0 resetcount spritepal 14 } }

 ifspritepal 16 { cstator 32768 ifcount 16 { operateactivators 10503 0 resetcount spritepal 19 } }
 ifspritepal 19 { ifcount 91 { operateactivators 10503 0 resetcount spritepal 16 } }

 ifspritepal 20 { cstator 32768 ifcount 48 { operateactivators 10504 0 resetcount spritepal 21 } }
 ifspritepal 21 { ifcount 91 { operateactivators 10504 0 resetcount spritepal 20 } }

 ifspritepal 22 { cstator 32768 ifcount 35 { operateactivators 10505 0 resetcount spritepal 23 } }
 ifspritepal 23 { ifcount 91 { operateactivators 10505 0 resetcount spritepal 22 } }

 ifspritepal 24 { cstator 32768 ifcount 112 { operateactivators 10506 0 resetcount spritepal 25 } }
 ifspritepal 25 { ifcount 91 { operateactivators 10506 0 resetcount spritepal 24 } }

 ifspritepal 26 { cstator 32768 ifcount 111 { operateactivators 10507 0 resetcount spritepal 27 } }
 ifspritepal 27 { ifcount 91 { operateactivators 10507 0 resetcount spritepal 26 } }

 ifspritepal 28 { cstator 32768 ifcount 82 { operateactivators 10508 0 resetcount spritepal 29 } }
 ifspritepal 29 { ifcount 91 { operateactivators 10508 0 resetcount spritepal 28 } }


enda

useractor notenemy MAGICALTILEEFFECTS

 ifspritepal 0
              {
               seta[].shade 13
               ife EX_BEAMOPF08 0 { cstator 32768 }
               ife EX_BEAMOPF08 518 { cstat 0 cstator 33 resetcount }
               ife EX_BEAMOPF08 519 { ifcount 20 { globalsound FLOORFADING1 killit } }
              }
 ifspritepal 3
              {
               seta[].shade 13
               ife EX_BEAMOPF08 0 { cstator 32768 }
               ife EX_BEAMOPF08 518 { cstat 0 cstator 545 resetcount }
               ife EX_BEAMOPF08 519 { ifcount 56 killit }
              }
 ifspritepal 9
              {
               seta[].shade 13
               ife EX_BEAMOPF08 0 { cstator 32768 }
               ife EX_BEAMOPF08 518 { cstat 0 cstator 545 resetcount }
               ife EX_BEAMOPF08 519 { ifcount 50 killit }
              }
 ifspritepal 10
               {
                seta[].shade 13
                ife EX_BEAMOPF08 0 { cstator 32768 }
                ife EX_BEAMOPF08 518 { cstat 0 cstator 545 resetcount }
                ife EX_BEAMOPF08 519 { ifcount 44 killit }
               }
 ifspritepal 11
               {
                seta[].shade 13
                ife EX_BEAMOPF08 0 { cstator 32768 }
                ife EX_BEAMOPF08 518 { cstat 0 cstator 545 resetcount }
                ife EX_BEAMOPF08 519 { ifcount 38 killit }
               }
 ifspritepal 12
               {
                seta[].shade 13
                ife EX_BEAMOPF08 0 { cstator 32768 }
                ife EX_BEAMOPF08 518 { cstat 0 cstator 545 resetcount }
                ife EX_BEAMOPF08 519 { ifcount 32 killit }
               }
 ifspritepal 15
               {
                seta[].shade 13
                ife EX_BEAMOPF08 0 { cstator 32768 }
                ife EX_BEAMOPF08 518 { cstat 0 cstator 35 resetcount }
                ife EX_BEAMOPF08 519 { ifcount 26 { cstator 514 ifcount 60 killit } }
               }

// rest for beetle password
// beetle password No.1
ifspritepal 23
              {
               cstator 32768
               ife BEETLECODES01 0
                                     {
                                      ife BEETLECODES02 100
                                                              {
                                                               ife BEETLECODES03 100
                                                                                       {
                                                                                        ife BEETLECODES04 0 { ife BEETLECODES05 0 { globalsound GONG_HIT resetcount set BEETLECODES05 19 } }
                                                                                       }
                                                              }
                                     }
               ife BEETLECODES05 19 { ifcount 34 { set BEETLECODES01 0 set BEETLECODES02 0 set BEETLECODES03 0 set BEETLECODES04 0 operatemasterswitches 79 quake 37 killit } }
              }
// beetle password No.2
ifspritepal 24
              {
               cstator 32768
               ife BEETLECODES01 100
                                       {
                                        ife BEETLECODES02 100
                                                                {
                                                                 ife BEETLECODES03 0
                                                                                       {
                                                                                        ife BEETLECODES04 0
                                                                                                              {
                                                                                                               ife BEETLECODES06 100
                                                                                                                                       {
                                                                                                                                        ife BEETLECODES07 100 { ife BEETLECODES05 19 { globalsound GONG_HIT resetcount set BEETLECODES05 18 } }
                                                                                                                                       }
                                                                                                              }
                                                                                       }
                                                                }
                                       }
               ife BEETLECODES05 18 { ifcount 34 { set BEETLECODES01 0 set BEETLECODES02 0 set BEETLECODES03 0 set BEETLECODES04 0 set BEETLECODES06 0 set BEETLECODES07 0 operatemasterswitches 86 quake 37 killit } }
              }
// beetle password No.3

ifspritepal 25
              {
               cstator 32768
               ife BEETLECODES01 100
                                       {
                                        ife BEETLECODES02 0
                                                              {
                                                               ife BEETLECODES08 100 { ife BEETLECODES05 18 { globalsound GONG_HIT resetcount set BEETLECODES05 17 } }
                                                              }
                                       }
               ife BEETLECODES05 17 { ifcount 34 { set BEETLECODES01 0 set BEETLECODES02 0 set BEETLECODES08 0 operatemasterswitches 90 quake 37 killit } }
              }

enda


// superhot magma,

// tile 20481 (put its effect here)


// VAR resetters upon death, quit to main menu, move to next level by cheat code and or finishing level.

onevent EVENT_RESETPLAYER

  set temp266 0
  set temp267 0
  set DOOROP_X_1 0
  set FFIELDTOLERANCE_LV 0
  set FFIELDRESISTANCE 0
  set BARRIERPWRLV 0
  set POWERINGSOMETHINGX 0
  set EX_BEAM 0
  set EX_BEAMF 0
  set EX_BEAMOPF 0
  set EX_BEAMOPF01 0
  set EX_BEAMOPF02 0
  set EX_BEAMOPF03 0
  set EX_BEAMOPF04 0
  set EX_BEAMOPF05 0
  set EX_BEAMOPF06 0
  set EX_BEAMOPF07 0
  set EX_BEAMOPF08 0
  set EX_BEAMOPF09 0
  set EX_BEAMOPF10 0
  set JBGENEDEAD 0
  set ACCUNLOCKED 0
  set SWITC_H_CODES 0
  set GIVINGANITEMPAPER 0
  set PYRAMIDCODAGE 0
  set INSIDEQUICKFALL 0
  set G_MOVINGPRT 0
  set G_MOVINGPRT2 0
  set BEETLECODES01 0
  set BEETLECODES02 0
  set BEETLECODES03 0
  set BEETLECODES04 0
  set BEETLECODES05 0
  set BEETLECODES06 0
  set BEETLECODES07 0
  set BEETLECODES08 0

endevent

// projectiles

defineprojectile FSTYGIAN_ROCK PROJ_WORKSLIKE 32770
defineprojectile FSTYGIAN_ROCK PROJ_VEL 910
defineprojectile FSTYGIAN_ROCK PROJ_SPAWNS SKULLEXPLOSION
defineprojectile FSTYGIAN_ROCK PROJ_EXTRA 250
defineprojectile FSTYGIAN_ROCK PROJ_EXTRA_RAND 100
defineprojectile FSTYGIAN_ROCK PROJ_HITRADIUS 1796
defineprojectile FSTYGIAN_ROCK PROJ_XREPEAT 42
defineprojectile FSTYGIAN_ROCK PROJ_YREPEAT 42
defineprojectile FSTYGIAN_ROCK PROJ_CLIPDIST 20
defineprojectile FSTYGIAN_ROCK PROJ_DROP -4
defineprojectile FSTYGIAN_ROCK PROJ_ISOUND BARREL_EXPLODE
defineprojectile FSTYGIAN_ROCK PROJ_TRAIL SHADEFEXPLOSION
defineprojectile FSTYGIAN_ROCK PROJ_USERDATA 80

defineprojectile FIREBALLTRAILER PROJ_WORKSLIKE 4098
defineprojectile FIREBALLTRAILER PROJ_TNUM 1
defineprojectile FIREBALLTRAILER PROJ_TRAIL FIREEXP1
defineprojectile FIREBALLTRAILER PROJ_DROP -83
defineprojectile FIREBALLTRAILER PROJ_VEL_MULT 3
defineprojectile FIREBALLTRAILER PROJ_VEL 666
defineprojectile FIREBALLTRAILER PROJ_SPAWNS EXPLOSION2

defineprojectile MOBSPAWNBLK PROJ_WORKSLIKE 2
defineprojectile MOBSPAWNBLK PROJ_VEL 911
defineprojectile MOBSPAWNBLK PROJ_XREPEAT 14
defineprojectile MOBSPAWNBLK PROJ_YREPEAT 14
defineprojectile MOBSPAWNBLK PROJ_SPAWNS SKELSNAKE_BLK_N_E


spritenoshade 19279
spritenoshade 19280
spritenoshade 19290
spritenoshade 19291
spritenoshade 19401
spritenoshade 19434
spritenoshade 19435
spritenoshade 19436
spritenoshade 19437
spritenoshade 19438
spritenoshade 19441
spritenoshade 19442
spritenoshade 19443
spritenoshade 19444
spritenoshade 20500
spritenoshade 20511
spritenoshade 20512
spritenoshade 20513
spritenoshade 20514
spritenoshade 20610
spritenoshade 20633
spritenoshade 20634
spritenoshade 20635
spritenoshade 20636
spritenoshade 20637
spritenoshade 20638
spritenoshade 20640


