

// GUN SOUND =====================================================================================================================


useractor notenemy 2520
cstat 32768
seta[].ang player[].ang
soundvar TEMP
killit
enda

defstate shield_stuff
		getp[].ang TEMP7
		add TEMP7 1024
		getincangle TEMP4 sprite[].htang TEMP7
		ifand TEMP4 2147483648
			{
			xorvar TEMP4 4294967295 
			add TEMP4 1
			}
		ifg RIOTSHIELD 0
		ifg SHIELDUP 0
		{
		ifl TEMP4 225 // is angle between them less than 200?
			{
				ifand PROJ_UDATA 131072 divvar TEMP 4 // melee damage is much weaker against shields
				ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 6 // soft bullets damage are sixthed
				ife TEMP2 GREENLASERSHOT divvar TEMP 6 // soft damage are sixthed
				ife TEMP2 SHOTGUN divvar TEMP 4 // shotgun pellets don't penetrate armour as much
				ife TEMP2 F45_CALIBRE divvar TEMP 3 // .45 don't penetrate armour as much
				ife TEMP2 NINEMM_CALIBRE divvar TEMP 2 // 9mm bullets don't penetrate armour as much
				ife TEMP2 ARMOUR_PIERCING_SHOT mulvar TEMP 2 // AP bullets wreck armour
				ife TEMP2 MPLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
				ife TEMP2 MDF_PLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
				ife TEMP2 5372 divvar TEMP 2  // plasma doesn't work as well against body armour
				ifg TEMP 50 wackplayer
				ife SHIELD_TYPE 1 sound HITWOOD
				else ife SHIELD_TYPE 2 sound HITWOOD
				else
					{
					ifrnd 96 sound RIOTSHIELD_HIT1
					else ifrnd 96 sound RIOTSHIELD_HIT2
					else sound RIOTSHIELD_HIT3
					}
				sub RIOTSHIELD TEMP 
				div TEMP 2 
				ifg TEMP 10 set TEMP 10
				set SHIELD_SHAKE TEMP
				set TEMP 0
	            	seta[].htextra -1 
					set TEMP 0
	            	ifl RIOTSHIELD 1 
					{
					wackplayer
					ife SHIELD_TYPE 1 globalsound WOODBREAK else
					ife SHIELD_TYPE 2 globalsound WOODBREAK else
	              	globalsound RIOTSHIELD_BREAK
					lotsofglass 16
					set RIOTSHIELD 0 
					set SHIELDUP 0
					palfrom 20 20 0 0
					}
			}
		}
		else
		ife CHAR 2
		{
		ife MSHIELDTYPE 0
		ifl TEMP4 150 // is angle between them less than 125?
			{
			ifg MSHIELDUP 0
	       	ifg MERLIJNSHIELD 0 
				{ 
				ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 6 // soft bullets damage are sixthed
				ife TEMP2 GREENLASERSHOT divvar TEMP 6 // soft damage are sixthed
				ife TEMP2 SHOTGUN divvar TEMP 4 // shotgun pellets don't penetrate armour as much
				ife TEMP2 F45_CALIBRE divvar TEMP 3 // .45 don't penetrate armour as much
				ife TEMP2 NINEMM_CALIBRE divvar TEMP 2 // 9mm bullets don't penetrate armour as much
				ife TEMP2 ARMOUR_PIERCING_SHOT mulvar TEMP 2 // AP bullets wreck armour
				ife TEMP2 MPLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
				ife TEMP2 MDF_PLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
				ife TEMP2 5372 divvar TEMP 2  // plasma doesn't work as well against body armour
				ifrnd 32 wackplayer
				ifrnd 128 sound SHIELDHIT2 else sound SHIELDHIT
				sub MERLIJNSHIELD TEMP 
				div TEMP 2 
				ifg TEMP 10 set TEMP 10
				set SHIELD_SHAKE TEMP
				set TEMP 0
	            	seta[].htextra -1 
	            	ifl MERLIJNSHIELD 1 
						{ 
						wackplayer
						globalsound SHIELD_DESTROY 
						palfrom 20 20 0 0 
						set MERLIJNSHIELD 0 
						}
				}
			}
		 else
		ife MSHIELDTYPE 1
		ifl TEMP4 225 // is angle between them less than 200?
			{
			ifg MSHIELDUP 0
	       	ifg MERLIJNSHIELD 0 
				{ 
				ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 6 // soft bullets damage are sixthed
				ife TEMP2 GREENLASERSHOT divvar TEMP 6 // soft damage are sixthed
				ife TEMP2 SHOTGUN divvar TEMP 4 // shotgun pellets don't penetrate armour as much
				ife TEMP2 F45_CALIBRE divvar TEMP 3 // .45 don't penetrate armour as much
				ife TEMP2 NINEMM_CALIBRE divvar TEMP 2 // 9mm bullets don't penetrate armour as much
				ife TEMP2 ARMOUR_PIERCING_SHOT mulvar TEMP 2 // AP bullets wreck armour
				ife TEMP2 MPLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
				ife TEMP2 MDF_PLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
				ife TEMP2 5372 divvar TEMP 2  // plasma doesn't work as well against body armour
				ifg TEMP 50 wackplayer
				ifrnd 128 sound SHIELDHIT2 else sound SHIELDHIT
				sub MERLIJNSHIELD TEMP 
				div TEMP 2 
				ifg TEMP 10 set TEMP 10
				set SHIELD_SHAKE TEMP
				set TEMP 0
	            	seta[].htextra -1 
	            	ifl MERLIJNSHIELD 1 
						{ 
						wackplayer
						globalsound SHIELD_DESTROY 
						set MERLIJNSHIELD 0 
						palfrom 20 20 0 0 
						}
				}
			}
		}
ends

defstate cursed_hitstuff

ife ARTIFACTS_LOADOUT[CHAR] 3 // Minerva's amulet?
	{
	ifrnd 16 // has a rare chance of nullifying the damage
		{
		seta[].htextra -1 
		palfrom 20 0 0 40
		soundonce SPARM_PROTECT
		}
	}
	else
ife CHAR 14 
 ifn player[].holoduke_on -1 // Snowfall's psi-shield?
	{
	seta[].htextra -1 
	palfrom 20 0 0 40
	soundonce SPARM_PROTECT
	}
	else
ifg P_SPIRIT_ARMOUR 0
	{
		sub P_SPIRIT_ARMOUR TEMP 
		seta[].htextra -1 
		palfrom 20 0 0 40
		soundonce SPARM_PROTECT
		ifl P_SPIRIT_ARMOUR 0 set P_SPIRIT_ARMOUR 0
	}
else
	{
	sound P_CURSED
	palfrom 20 40 0 40
	ifrnd 48 set PLAYER_VOICEOVER 49
	ife MYSTICAL_RESEARCH[4] 2 // Siren Ward?
		{
		ifl SKILL_LEVEL 2 set CURSED 60
		else ife SKILL_LEVEL 2 set CURSED 105
		else ife SKILL_LEVEL 3 set CURSED 126
		else ife SKILL_LEVEL 4 set CURSED 168
		else ife SKILL_LEVEL 5 set CURSED 210
		}
	else
		{
		ifl SKILL_LEVEL 2 set CURSED 90
		else ife SKILL_LEVEL 2 set CURSED 150
		else ife SKILL_LEVEL 3 set CURSED 180
		else ife SKILL_LEVEL 4 set CURSED 240
		else ife SKILL_LEVEL 5 set CURSED 300
		}
	ife CHAR 4 ifg PARMOUR 0 div CURSED 2
	}
ends

defstate spirit_armour_hitstuff
ife ARTIFACTS_LOADOUT[CHAR] 3 // Minerva's amulet?
{
ifrnd 6 // has a very rare chance of nullifying the damage
	{
	seta[].htextra -1 
	palfrom 20 0 0 40
	soundonce SPARM_PROTECT
	}
}
ifg P_SPIRIT_ARMOUR 0
{
	sub P_SPIRIT_ARMOUR TEMP 
	seta[].htextra -1 
	palfrom 20 0 0 40
	soundonce SPARM_PROTECT
	ifl P_SPIRIT_ARMOUR 0 set P_SPIRIT_ARMOUR 0
}
ife CHAR 4 ifg PARMOUR 0 div TEMP 2
ends

defstate fire_armour_hitstuff
ife player_in_vehicle 0
 {
geta[].htextra TEMP8
ifg P_FIRE_ARMOUR 0
	{
		divvar TEMP8 3
		sub P_FIRE_ARMOUR TEMP8 
		ife PERSONEL_RESEARCH[8] 2 // player has thermal weaving? reduce damage by 20%
			{
			set TEMP7 TEMP8
			mulvar TEMP7 10
			divvar TEMP7 12
			set TEMP8 TEMP7
			}
		ife CHAR 14 // Snowfall has 20% extra fire resistence
			{
			set TEMP7 TEMP8
			mulvar TEMP7 10
			divvar TEMP7 12
			set TEMP8 TEMP7
			}
		set FIRE_DAMAGE TEMP8
		ife CHAR 1 ifg PARMOUR 0 div FIRE_DAMAGE 2 // Zaxtor's armour reduces fire damage by a half
		seta[].htextra -1 
		palfrom 20 20 0 0
		sound FIRE_ARM_PROT
		ifl P_FIRE_ARMOUR 0 set P_FIRE_ARMOUR 0
	}
else
	{
    ifvarvare sprite[].htowner THISACTOR             
		{
		ife sprite[].htpicnum 7163 { seta[].htextra -1 set FIRE_DAMAGE 0 }      
		}
	else
	{
	ife PERSONEL_RESEARCH[8] 2 // player has thermal weaving? reduce damage by 20%
		{
		set TEMP7 sprite[].htextra
		mulvar TEMP7 10
		divvar TEMP7 12
		set TEMP8 TEMP7
		}
	ife CHAR 14 // Snowfall has 20% extra fire resistence
		{
		set TEMP7 TEMP8
		mulvar TEMP7 10
		divvar TEMP7 12
		set TEMP8 TEMP7
		}
	
	set FIRE_DAMAGE TEMP8
	ife CHAR 1 ifg PARMOUR 0 div FIRE_DAMAGE 2 // Zaxtor's armour reduces fire damage by a half
	}
	seta[].htextra -1 
	palfrom 40 40 0 0
	}
}
ends

defstate ARMOUR_STUFF
switch CHAR
case 0 // James' armour
case 7 // Mikko's armour
	geta[].htextra TEMP
	ifg TEMP 0 // if the actor is set to take some damage from a weapon...
		{
		geta[].htpicnum TEMP2
		ifand tiledata[TEMP2].gameflags 8 getprojectile[TEMP2].userdata PROJ_UDATA else set PROJ_UDATA 0
		ifand PROJ_UDATA 2 state fire_armour_hitstuff
		else ifand PROJ_UDATA 16384 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 262144 state cursed_hitstuff
		else ifand PROJ_UDATA 524288 set BLINDED 120
		else ife TEMP2 COOLEXPLOSION1 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 8 { wackplayer palfrom 40 40 0 0 }
			else
			{
			state shield_stuff
			ifand PROJ_UDATA 16 sound LASER_IMPACT
		   ifg player[].shield_amount 0 
				{ 
					getp[].shield_amount TEMP4
					ife CHAR 0
					ifand CHAR_APP 1 // more armoured up James?
						{
						mul TEMP 10
						div TEMP 13 // does an initial 25% flat reduction
						}
					else
						{
						mul TEMP 10
						div TEMP 12 // does an initial 20% flat reduction
						}
					ife PERSONEL_RESEARCH[4] 2 // player has the improved armour?
						{
						ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 3
						ife TEMP2 GREENLASERSHOT divvar TEMP 3
						ife TEMP2 SHOTGUN divvar TEMP 3
						ife TEMP2 F45_CALIBRE divvar TEMP 3
						ife TEMP2 NINEMM_CALIBRE divvar TEMP 3
						}
					else
						{
						ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 2
						ife TEMP2 GREENLASERSHOT divvar TEMP 2
						ife TEMP2 SHOTGUN divvar TEMP 2
						ife TEMP2 F45_CALIBRE divvar TEMP 2
						}				
					set ARM_BLEEDOFF TEMP
					div ARM_BLEEDOFF 3 
					sub TEMP ARM_BLEEDOFF // 1/3 damage goes to player
					sub TEMP4 TEMP // 2/3 damage goes to shield
					ifl TEMP4 0 setp[].shield_amount 0 else
					setp[].shield_amount TEMP4 
					ifg ARM_BLEEDOFF 0 
						{
						seta[].htextra ARM_BLEEDOFF 
						set ARM_BLEEDOFF 0
						}
						else
					seta[].htextra -1 
					
				   state HIT_IND_ARM
					ifl TEMP4 100 set ARMOURTYPE 0
					ifl TEMP4 0 
					 ifn PERSONEL_RESEARCH[16] 2 // player doesn't have the ablative plating research?
						{ 
						geta[].extra TEMP3 
						add TEMP3 TEMP4
						seta[].extra TEMP3 
						setp[].shield_amount 0 
						palfrom 20 20 0 0 
						}
				}
			}
		}
	break
case 1 // Zaxtor's armour
case 16 // Skyhv
	geta[].htextra TEMP
	ifg TEMP 0 // if the actor is set to take some damage from a weapon...
		{
		geta[].htpicnum TEMP2
		ifand tiledata[TEMP2].gameflags 8 getprojectile[TEMP2].userdata PROJ_UDATA else set PROJ_UDATA 0
		ifand PROJ_UDATA 2 state fire_armour_hitstuff
		else ifand PROJ_UDATA 16384 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 262144 state cursed_hitstuff
		else ifand PROJ_UDATA 524288 set BLINDED 120
		else ife TEMP2 COOLEXPLOSION1 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 8 { wackplayer palfrom 40 40 0 0 }
			else
			{
			state shield_stuff
			ifand PROJ_UDATA 16 sound LASER_IMPACT
		   ifg player[].shield_amount 0 
				{ 
					getp[].shield_amount TEMP4
					mul TEMP 2
					div TEMP 3 // Zaxtor's armour does a flat 33% damage reduction against ALL damage
					set ARM_BLEEDOFF TEMP
					sub TEMP4 TEMP 
					ifl TEMP4 0 setp[].shield_amount 0 else
					setp[].shield_amount TEMP4 
					ifg ARM_BLEEDOFF 0 
						{
						seta[].htextra ARM_BLEEDOFF 
						set ARM_BLEEDOFF 0
						}
						else
					seta[].htextra -1 
					
				   state HIT_IND_ARM
					ifl TEMP4 100 set ARMOURTYPE 0
					ifl TEMP4 0 
					 ifn PERSONEL_RESEARCH[16] 2 // player doesn't have the ablative plating research?
						{ 
						geta[].extra TEMP3 
						add TEMP3 TEMP4
						seta[].extra TEMP3 
						setp[].shield_amount 0 
						palfrom 20 20 0 0 
						}
				}
			}
		}
	break
case 2 // Merlijn
case 11 // Maarten
geta[].htextra TEMP
ifg TEMP 0 // if the player is set to take some damage from a weapon...
	{
		geta[].htpicnum TEMP2
		ifand tiledata[TEMP2].gameflags 8 getprojectile[TEMP2].userdata PROJ_UDATA else set PROJ_UDATA 0
		ifand PROJ_UDATA 2 state fire_armour_hitstuff
		else ifand PROJ_UDATA 16384 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 262144 state cursed_hitstuff
		else ifand PROJ_UDATA 524288 palfrom 40 0 0 0
		else ife TEMP2 COOLEXPLOSION1 state spirit_armour_hitstuff
		else
			{
			state shield_stuff
			  ifg player[].shield_amount 0 
							{ 
							getp[].shield_amount TEMP4
							ifand PROJ_UDATA 131072 divvar TEMP 6 else // Merlijn's armour is extra effective against melee attacks
							divvar TEMP 2 
							set ARM_BLEEDOFF TEMP
							sub TEMP4 TEMP 
							ifl TEMP4 0 setp[].shield_amount 0 else
							setp[].shield_amount TEMP4 
							ifg ARM_BLEEDOFF 0 
								{
								seta[].htextra ARM_BLEEDOFF 
								set ARM_BLEEDOFF 0
								}
								else
							seta[].htextra -1 
							
						   state HIT_IND_ARM
							
							ifl TEMP4 100 set ARMOURTYPE 0
							ifl TEMP4 0 
							 ifn PERSONEL_RESEARCH[16] 2 // player doesn't have the ablative plating research?
								{ 
								geta[].extra TEMP3 
								add TEMP3 TEMP4
								seta[].extra TEMP3 
								setp[].shield_amount 0 
								palfrom 20 20 0 0 
								}
						}
			}
	}
break
case 4 // Sang
geta[].htextra TEMP
ifg TEMP 0 // if the player is set to take some damage from a weapon...
	{
		geta[].htpicnum TEMP2
		ifand tiledata[TEMP2].gameflags 8 getprojectile[TEMP2].userdata PROJ_UDATA else set PROJ_UDATA 0
		ifand PROJ_UDATA 2 state fire_armour_hitstuff
		else ifand PROJ_UDATA 16384 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 262144 state cursed_hitstuff
		else ifand PROJ_UDATA 524288 palfrom 40 0 0 0
		else ife TEMP2 COOLEXPLOSION1 state spirit_armour_hitstuff
		else
			{
			state shield_stuff
			  ifg player[].shield_amount 0 
							{ 
							getp[].shield_amount TEMP4
							ifand CHAR_APP 2 // armoured sang?
								{
								mul TEMP 10
								div TEMP 13 // does an initial 25% flat reduction
								}
							ifand PROJ_UDATA 16384 divvar TEMP 3 else // Sang's armour is extra effective against spirit attacks
							ifand PROJ_UDATA 262144 divvar TEMP 3 else // Sang's armour is extra effective against cursed attacks
							divvar TEMP 2 
							set ARM_BLEEDOFF TEMP
							sub TEMP4 TEMP 
							ifl TEMP4 0 setp[].shield_amount 0 else
							setp[].shield_amount TEMP4 
							ifg ARM_BLEEDOFF 0 
								{
								seta[].htextra ARM_BLEEDOFF 
								set ARM_BLEEDOFF 0
								}
								else
							seta[].htextra -1 
							
						   state HIT_IND_ARM
							
							ifl TEMP4 100 set ARMOURTYPE 0
							ifl TEMP4 0 
							 ifn PERSONEL_RESEARCH[16] 2 // player doesn't have the ablative plating research?
								{ 
								geta[].extra TEMP3 
								add TEMP3 TEMP4
								seta[].extra TEMP3 
								setp[].shield_amount 0 
								palfrom 20 20 0 0 
								}
						}
			}
	}
break
case 3
case 5
case 6
case 9
case 10
	geta[].htextra TEMP
	ifg TEMP 0 // if the actor is set to take some damage from a weapon...
		{
		geta[].htpicnum TEMP2
		ifand tiledata[TEMP2].gameflags 8 getprojectile[TEMP2].userdata PROJ_UDATA else set PROJ_UDATA 0
		ifand PROJ_UDATA 2 state fire_armour_hitstuff
		else ifand PROJ_UDATA 16384 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 262144 state cursed_hitstuff
		else ifand PROJ_UDATA 524288 set BLINDED 120
		else ife TEMP2 COOLEXPLOSION1 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 8 { wackplayer palfrom 40 40 0 0 }
			else
			{
			state shield_stuff
			ifand PROJ_UDATA 16 sound LASER_IMPACT
		   ifg player[].shield_amount 0 
				{ 
					getp[].shield_amount TEMP4
					ife PERSONEL_RESEARCH[4] 2 // player has the improved armour?
						{
						ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 4 
						ife TEMP2 GREENLASERSHOT divvar TEMP 4
						ife TEMP2 SHOTGUN divvar TEMP 3 
						ife TEMP2 F45_CALIBRE divvar TEMP 3 
						ife TEMP2 NINEMM_CALIBRE divvar TEMP 3
						}
					else
						{
						ife TEMP2 HOLLOW_POINT_SHOT divvar TEMP 3 // soft bullets damage are sixthed
						ife TEMP2 GREENLASERSHOT divvar TEMP 3 // soft damage are sixthed
						ife TEMP2 SHOTGUN divvar TEMP 2 // shotgun pellets don't penetrate armour as much
						ife TEMP2 F45_CALIBRE divvar TEMP 2 // 45 bullets don't penetrate armour as much
						}
					ifand PROJ_UDATA 32
						{
						divvar TEMP 2 // AP goes through armour
						set ARM_BLEEDOFF TEMP
						}
					ife TEMP2 1670 // radius explosion
						{
						divvar TEMP 2 // explosions go through armour
						set ARM_BLEEDOFF TEMP
						}
					ife TEMP2 2690 // missile
						{
						divvar TEMP 2 // explosions go through armour
						set ARM_BLEEDOFF TEMP
						}
					ife TEMP2 2605 // RPG
						{
						divvar TEMP 2 // explosions go through armour
						set ARM_BLEEDOFF TEMP
						}
					ife TEMP2 MPLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
					ife TEMP2 MDF_PLASMA divvar TEMP 2 // plasma doesn't work as well against body armour
					ife TEMP2 5372 divvar TEMP 2 // plasma doesn't work as well against body armour
					sub TEMP4 TEMP 
					ifl TEMP4 0 setp[].shield_amount 0 else
					setp[].shield_amount TEMP4 
					ifg ARM_BLEEDOFF 0 
						{
						seta[].htextra ARM_BLEEDOFF 
						set ARM_BLEEDOFF 0
						}
						else
					seta[].htextra -1 
					
				   state HIT_IND_ARM
					ifl TEMP4 100 set ARMOURTYPE 0
					ifl TEMP4 0 
					 ifn PERSONEL_RESEARCH[16] 2 // player doesn't have the ablative plating research?
						{ 
						geta[].extra TEMP3 
						add TEMP3 TEMP4
						seta[].extra TEMP3 
						setp[].shield_amount 0 
						palfrom 20 20 0 0 
						}
				}
			}
		}
	break
case 12 // Jane
case 13 // Micky
case 14 // Snowfall
	geta[].htextra TEMP
	ifg TEMP 0 // if the actor is set to take some damage from a weapon...
		{
		geta[].htpicnum TEMP2
		ifand tiledata[TEMP2].gameflags 8 getprojectile[TEMP2].userdata PROJ_UDATA else set PROJ_UDATA 0
		ifand PROJ_UDATA 2 state fire_armour_hitstuff
		else ifand PROJ_UDATA 16384 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 262144 state cursed_hitstuff
		else ifand PROJ_UDATA 524288 set BLINDED 120
		else ife TEMP2 COOLEXPLOSION1 state spirit_armour_hitstuff
		else ifand PROJ_UDATA 8 { wackplayer palfrom 40 40 0 0 }
			else
			{
			state shield_stuff
			ifand PROJ_UDATA 16 sound LASER_IMPACT
					ife CHAR 13 // micky?
					 ifp pboosted // energy dampener?
					 {
					  ife TEMP2 FIRELASER // have to do default hardcoded projectiles manually
						{
						sound SHORT_CIRCUIT
						palfrom 10 0 0 32
						getp[].shield_amount TEMP4
						ifl TEMP4 100
							{
							div TEMP 2
							add TEMP4 TEMP
							setp[].shield_amount TEMP4
							}
						set TEMP 0
						seta[].htextra -1
						}
					  ifand PROJ_UDATA 8209
						{
						sound SHORT_CIRCUIT
						palfrom 10 0 0 32
						getp[].shield_amount TEMP4
						ifl TEMP4 100
							{
							div TEMP 4 
							add TEMP4 TEMP
							setp[].shield_amount TEMP4
							}
						set TEMP 0
						seta[].htextra -1
						}
					}
		   ifg player[].shield_amount 0 
				{ 
					getp[].shield_amount TEMP4
					ifand PROJ_UDATA 32 nullop else
					ifand PROJ_UDATA 64 nullop else
						{
						mul TEMP 10
						div TEMP 13 // does an initial 25% flat reduction
						}
					ifand PROJ_UDATA 128 divvar TEMP 2
					set ARM_BLEEDOFF TEMP
					ifand PROJ_UDATA 32 div ARM_BLEEDOFF 3 else // AP spreads 33% to HP
					ifand PROJ_UDATA 8192 div ARM_BLEEDOFF 2 else // Electric spreads 50% to HP
					div ARM_BLEEDOFF 5 // spread 20% to HP
					sub TEMP ARM_BLEEDOFF // 1/5 damage goes to Jane/Micky/Snowfall
					sub TEMP4 TEMP // 4/5 damage goes to shield
					ifl TEMP4 0 setp[].shield_amount 0 else
					setp[].shield_amount TEMP4 
					ifg ARM_BLEEDOFF 0 
						{
						seta[].htextra ARM_BLEEDOFF 
						set ARM_BLEEDOFF 0
						}
						else
					seta[].htextra -1 
					
				   state HIT_IND_ARM
					ifl TEMP4 100 set ARMOURTYPE 0
				}
			}
		}
	break
endswitch
ends

onevent EVENT_GETAUTOAIMANGLE 
 setvar AUTOAIMANGLE 96
endevent 

defstate CHAR_APP_STUFF
	ife VOLUME 0 set CHAR_APP 0
	ife VOLUME 1 set CHAR_APP 0
	ifg VOLUME 1 { ifand CHAR_APP 1 nullop else xorvar CHAR_APP 1 } // James' bionic hand
	ife VOLUME 2 
		{
		ife LEVEL 46 set CHAR_APP 1
		ifg LEVEL 13 ifn LEVEL 46 { ifand CHAR_APP 2 nullop else xorvar CHAR_APP 2 } // Sang post Le Sang death
		}
	ifg VOLUME 2 { ifand CHAR_APP 2 nullop else xorvar CHAR_APP 2 } // Sang Post Le Sang death
ends


// ALLY STUFF

defstate ignore_ally_damage
ifand ALLY_ORDER 1 set target -1

ifg sprite[].htextra -1
	{
	geta[].htowner TEMP2
	geta[TEMP2].picnum TEMP3
	ife TEMP3 AMCSOLDIER_ACTIVE seta[].htextra -1
	ife TEMP3 EDFSOLDIER_ACTIVE seta[].htextra -1
	ife TEMP3 MSSOLDIER_ACTIVE seta[].htextra -1
	ife TEMP3 9771 seta[].htextra -1
	ife TEMP3 APLAYER 
		{ 
		ifactor APLAYER { ifmultiplayer ife COOP 1 seta[].htextra -1 } else
		ifmultiplayer { ife COOP 1 seta[].htextra -1 } else seta[].htextra -1
		}
	ife TEMP3 JANE seta[].htextra -1
	ife TEMP3 VLADMIR seta[].htextra -1
	ife TEMP3 RUSSIAN seta[].htextra -1
	ife TEMP3 TOWN_GUARD seta[].htextra -1
	ife TEMP3 10595 seta[].htextra -1
	ife TEMP3 12972 seta[].htextra -1
	ife TEMP3 6328 seta[].htextra -1
	ife TEMP3 18066 seta[].htextra -1
	ife TEMP3 20862 seta[].htextra -1
	ife TEMP3 22677 seta[].htextra -1
	}
ends

// WEAPON, AMMO, ITEMS 'N SHIT ACTIONS ===========================================================================================

defstate revolver_eject
	set TEMP4 MAXPISTOLMAG	
	sub TEMP4 PISTOLMAG
	
	set TEMP5 0
	whilevarvarn TEMP5 TEMP4
		{
		shoot 13772
		add TEMP5 1
		}
ends

defstate revolver_silver_eject
	set TEMP4 MAXPISTOLMAG	
	sub TEMP4 PISTOLMAG
	
	set TEMP5 0
	whilevarvarn TEMP5 TEMP4
		{
		shoot SRIFLESHELL
		add TEMP5 1
		}
ends

defstate spawn_lasersite // code by Dan Gaskil
ifp prunning
	{
	getp[].ang ANGVAR
	getp[].horiz zdist
	sub zdist 135

	getp[].weapon_pos temp
	ifl temp 0 mul temp -1
	mul temp 3
	sub zdist temp
	
	set temp gun_pos
	div temp -2
	sub zdist temp
	
	set temp weapon_xoffset
	div temp 2
	add ANGVAR temp
	
	mul zdist -2048
	cos mycos ANGVAR
	sin mysin ANGVAR

	hitscan player[].posx player[].posy player[].posz mysector mycos mysin zdist hitsector hitwall hitsprite hitx hity hitz CLIPMASK0
	}
	espawn 3023 // Spawn the laser sight
	
	setsprite RETURN hitx hity hitz
ends

defstate revolver_2_eject
	set TEMP4 MAXPISTOLMAG
	sub TEMP4 PISTOLMAG
	
	set TEMP5 0
	whilevarvarn TEMP5 TEMP4
		{
		shoot 13780
		add TEMP5 1
		}
ends

defstate revolver_silver2_eject
	set TEMP4 MAXPISTOLMAG
	sub TEMP4 PISTOLMAG
	
	set TEMP5 0
	whilevarvarn TEMP5 TEMP4
		{
		shoot SRIFLESHELL
		add TEMP5 1
		}
ends

defstate SHOTGUN_SHELL // shoots the proper shotgun shell being used
	ife LAST_SHELL_FIRED 1 shoot EXSHELL else 
	ife LAST_SHELL_FIRED 4 shoot FL_SHELL else 
	ife LAST_SHELL_FIRED 64 shoot MAGN_SHELL else
	ife LAST_SHELL_FIRED 1024 { setprojectile[3761].pal 5 shoot 3761 setprojectile[3761].pal 0 } else
	shoot 3761 
ends

defstate SHOTGUN_SHELL2 // shoots the proper shotgun shell being used
	ife LAST_SHELL_FIRED_2 1 shoot EXSHELL else 
	ife LAST_SHELL_FIRED_2 4 shoot FL_SHELL else 
	ife LAST_SHELL_FIRED_2 64 shoot MAGN_SHELL else
	ife LAST_SHELL_FIRED_2 1024 { setprojectile[3761].pal 5 shoot 3761 setprojectile[3761].pal 0 } else
	shoot 3761 
ends

defstate FORCE_SHOTGUN_ALTAMMO_FIRE
		
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP 
		ifn AMMO_TYPES[CURWEAP] 0 
		  ifg SHOTGUNMAG 0 
		   ife HOLD_AMMO_TEMP 0
			{ 
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
		}
	}

	ife KICKBACKPIC 5
	ife NEED_TO_FIRE 1
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP 
		sub HOLD_AMMO_TEMP 1
		ifl HOLD_AMMO_TEMP 0 set HOLD_AMMO_TEMP 0
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 0
		}
ends

defstate GREEN_BOOK_ARTIFACT
 ifpdistl 1524
 {
	ife ARTIFACTS_LOADOUT[CHAR] 8 
		{
		ifl PHEALTH PMAXHEALTH
		 ife EXTRASAVED 0
			{
			addphealth 1
			palfrom 10 0 40 0
			sound LEAF1
			set EXTRASAVED 1
			}
		}
 }
ends

defstate MAKO_RING_ARTIFACT
 ifpdistl 1524
	ife ARTIFACTS_LOADOUT[CHAR] 10 
		{
		 ife EXTRASAVED 0
			{
			ifl P_SPIRIT_ARMOUR 100 { add P_SPIRIT_ARMOUR 15 clamp P_SPIRIT_ARMOUR 0 100 }
			ifl P_FIRE_ARMOUR 100 { add P_FIRE_ARMOUR 15 clamp P_FIRE_ARMOUR 0 100 }
			palfrom 10 0 0 40
			sound GET_MAGIC
			set EXTRASAVED 1
			}
		}
ends

defstate TURNOFF_NVG
ife player[].heat_on 1
	{
	setgamepalette 0
	palfrom 30 0 0 0
	ife CHAR 0 sound JAMES_HEATOFF
	else ife CHAR 3 sound HIGH_HEATOFF
	else ife CHAR 4 sound SHEAT_EYEGLASS 
	else ife CHAR 6 sound GEO_HEATOFF
	else ife CHAR 7 sound MIK_HEATOFF
	else ife CHAR 9 sound SHEAT_EYEGLASS 
	else ife CHAR 10 sound MIK_HEATOFF
	else ife CHAR 13 sound HIGH_HEATOFF
	else sound NITEVISION_ONOFF2
	setp[].heat_on 0
	}
ends

defstate UPPERCUT_STUFF
	ifn MELEE_LOCKED_ON -1
		{
		dist TEMP2 MELEE_LOCKED_ON THISACTOR
		geta[MELEE_LOCKED_ON].extra TEMP
		ifl TEMP 40
		ifl TEMP2 750
		ifg KICKBACKPIC 0
		 ife UPPER_CUT 20
			{
			setp[].weapon_pos 10
			setp[].kickback_pic 0
			set UPPER_CUT 0
			}
		}
ends
		
defstate spawn_cold_breathe
ifand sector[].floorstat 8192 // floor set to cold breathe?
	{
		add actor_breathe_count 1
		ifg actor_breathe_count 50 
			{ 
				ifactor APLAYER
				ife player_using_hovercraft -1
				ife player_using_mech -1
				ife ANGLE 0 
				ifn CHAR 14 // Snowfall has a full helmet
				ifn CHAR 13 // Micky has a full helmet
				ifn CHAR 12 // Jane has a full helmet
				{
				getp[].horiz TEMP2
				sub TEMP2 100
				espawn 10737
				mulvar TEMP2 8
				setactorvar[RETURN].z TEMP2
				}
			else
			spawn 10737 randvar actor_breathe_count 5 
			}
	}
else
ife weather_type 1
	{
	ifdead nullop else
		{
		add actor_breathe_count 1
		ifoutside ifg actor_breathe_count 50 
			{ 
				ifactor APLAYER
				ife player_using_hovercraft -1
				ife player_using_mech -1
				ife ANGLE 0 
				{
				getp[].horiz TEMP2
				sub TEMP2 100
				espawn 10737
				mulvar TEMP2 8
				setactorvar[RETURN].z TEMP2
				}
			else
			spawn 10737 randvar actor_breathe_count 5 
			}
		}
	}
ends

defstate ITEM_BOX_DISP_STUFF
ife DISP_TEMP 21 set DISP_TEMP WEAPON1_TILE
ife DISP_TEMP 28 set DISP_TEMP WEAPON2_TILE
ife DISP_TEMP 22 set DISP_TEMP WEAPON3_TILE
ife DISP_TEMP 23 set DISP_TEMP WEAPON4_TILE
ife DISP_TEMP 26 set DISP_TEMP WEAPON5_TILE
ife DISP_TEMP 25 set DISP_TEMP WEAPON6_TILE
ife DISP_TEMP 29 set DISP_TEMP WEAPON7_TILE
ife DISP_TEMP 27 set DISP_TEMP WEAPON8_TILE
ife DISP_TEMP 24 set DISP_TEMP WEAPON9_TILE
ife DISP_TEMP 40 set DISP_TEMP W1_AMMO_TILE
ife DISP_TEMP 49 set DISP_TEMP W2_AMMO_TILE
ife DISP_TEMP 41 set DISP_TEMP W3_AMMO_TILE
ife DISP_TEMP 44 set DISP_TEMP W4_AMMO_TILE
ife DISP_TEMP 47 set DISP_TEMP W5_AMMO_TILE
ife DISP_TEMP 46 set DISP_TEMP W6_AMMO_TILE
ife DISP_TEMP 42 set DISP_TEMP W7_AMMO_TILE
ife DISP_TEMP 37 set DISP_TEMP W9_AMMO_TILE
ife DISP_TEMP 45 set DISP_TEMP W11_AMMO_TILE
ife DISP_TEMP 53 set DISP_TEMP CMEDIKIT
ife DISP_TEMP 55 set DISP_TEMP CSTEROIDS
ife DISP_TEMP 56 set DISP_TEMP CSCUBA
ife DISP_TEMP 57 set DISP_TEMP CJETPACK
ife DISP_TEMP 59 set DISP_TEMP DISP_NVG
ife DISP_TEMP 61 set DISP_TEMP CBOOTS
ife DISP_TEMP 1348 set DISP_TEMP CHOLODUKE
ends

onevent EVENT_GETSHOTRANGE
ifn using_minigun -1
{
set ANGRANGE 32
set ZRANGE 256
}
else
{
set TEMP7 GUN_ACCURACY
set ANGRANGE GUN_ACCURACY
ifg GUN_MAX_SPREAD 0 add ANGRANGE GUN_SPREAD
ifg GUN_MAX_SPREAD 0 add TEMP7 GUN_SPREAD
mulvar TEMP7 8
set ZRANGE TEMP7
}
endevent

// ALTERNATE FIRE KEY=============================================================================
// ====================================================================================================================================================================================================================

onevent EVENT_LOOKLEFT
set RETURN 1


ifp pshrunk break
ifn player_using_hovercraft -1 break
ifn FIRE_SUIT 0 break
ifn SPACE_SUIT 0 break
ifn ANGLE 0 break
ifn player_using_mech -1 break
ifn camerasprite -1 break
ifn CONTROL_VR -1 break
ifn player[].weapon_pos 0 break
ifn PCINTER 0 break
ifg MOUSEUP 0 break
	
	ife CHAR 9 // CULTIST ==================================================================================================================================================================
	{
	ife CURWEAP 2 // Sawn off double barrel mode
	   ife KICKBACKPIC 0
	   {
		getp[].ammo_amount 2 ALT_TEMP1
		 ifg ALT_TEMP1 1
			{
			ifl SHOTGUNMAG 2
				{
				setp[].kickback_pic 6
				setp[].reloading 1
				}
			else
				{
				setp[].kickback_pic 1
				xorvar GUNFIREMODE 256
				sub ALT_TEMP1 1
				setp[].ammo_amount 2 ALT_TEMP1
				}
			}
	   }
	ife CURWEAP 9 // FN FAL ironsight?
		{
		 ifcount 13
			{
			sound AUG_MOVEMENT
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				xorvar GUNFIREMODE 16384
				}
			resetcount
			}
		}
	}

	ife CURWEAP 0
	{


	ife temp_weapon 2
	ifcount 13
		{
		ifmultiplayer nullop else
			{
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}
		}
		
	ife temp_weapon 5
	 ife WEAPONS_RESEARCH[11] 2
		{
		ife player[].kickback_pic 0 { sound MINIGUN_START setp[].kickback_pic 1 }
		ifg player[].kickback_pic 2 setp[].kickback_pic 1
		}
		
	ife temp_weapon 24
	 ife WEAPONS_RESEARCH[11] 2
		{
		ife player[].kickback_pic 0 { sound MINIGUN_START setp[].kickback_pic 1 }
		ifg player[].kickback_pic 2 setp[].kickback_pic 1
		}
		
	ife temp_weapon 40
		{
		 ifcount 13
			{
			state TURNOFF_NVG
			ife SCOPE 0 
				{
				set SCOPE 2
				ifn player[].palette 2 setgamepalette 2
				sound SCIFI_ZOOM_IN
				}
				else
				{
				set SCOPE 0
				ifinwater
					{
					ifn player[].palette 1 setgamepalette 1
					}
				else
				ifn player[].palette 0 setgamepalette 0
				sound SCIFI_ZOOM_OUT
				}
			resetcount
			}
		}
	
	ife temp_weapon 15
	{
	 ifcount 13
		{
		sound SCOPE_ZOOM xorvar GUNFIREMODE 16384
		resetcount
		}	
	}
		
	ife temp_weapon 10 // Sawn off double barrel mode
	   ife KICKBACKPIC 0
	   {
	   ifand AMMO_TYPES[CURWEAP] 1
	   {
			ifg explosive_shells 1
				{
				ifl TEMP_WEAPON_MAG 2
					{
					setp[].kickback_pic 6
					setp[].reloading 1
					}
				else
					{
					setp[].kickback_pic 1
					xorvar GUNFIREMODE 256
					}
				}
	   }
	   else
	   ifand AMMO_TYPES[CURWEAP] 4
		   {
			 ifg flechete_shells 1
				{
				ifl TEMP_WEAPON_MAG 2
					{
					setp[].kickback_pic 6
					setp[].reloading 1
					}
				else
					{
					setp[].kickback_pic 1
					xorvar GUNFIREMODE 256
					}
				}
			}

	   else
		   {
			getp[].ammo_amount 0 ALT_TEMP1
			 ifg ALT_TEMP1 1
				{
				ifl TEMP_WEAPON_MAG 2
					{
					setp[].kickback_pic 6
					setp[].reloading 1
					}
				else
					{
					setp[].kickback_pic 1
					xorvar GUNFIREMODE 256
					ifand AMMO_TYPES[CURWEAP] 1 nullop else
					ifand AMMO_TYPES[CURWEAP] 4 nullop else
						{
						sub ALT_TEMP1 1
						setp[].ammo_amount 0 ALT_TEMP1
						}
					}
				}
			}
	   }
	   
	  ife temp_weapon 12 // Riot gun firing mode
	   ife KICKBACKPIC 0
		{
		ifcount 13
			{
			sound RIOTGUN_COCK
			ifand AMMO_TYPES[CURWEAP] 8 { xorvar AMMO_TYPE 8 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE } else
			ifand GUNFIREMODE 16 ifg tesla_ammo 0 { xorvar GUNFIREMODE 16 xorvar AMMO_TYPE 8 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE } else
			{ xorvar GUNFIREMODE 16 }
			resetcount
			}
		}
	   
	  ife temp_weapon 9 // Riot gun firing mode
	   ife KICKBACKPIC 0
		{
		ifcount 13
			{
			sound BRUISER_FLAME
			setp[].kickback_pic 1
			orvar GUNFIREMODE 524288
			resetcount
			}
		}
		
	  ife temp_weapon 27 // Riot gun firing mode
	   ife KICKBACKPIC 0
		{
		ifcount 13
			{
			ifg tesla_ammo 0 { sound RIOTGUN_COCK ifand AMMO_TYPES[CURWEAP] 8 quote 285 else quote 226 xorvar AMMO_TYPE 8 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE } 
			resetcount
			}
		}
		
	  ife temp_weapon 30 // Dart Gun Micro Torpedo
	   ife KICKBACKPIC 0
	   {
	    ifinwater
			{
			 ifg micro_torpedo 0
			 {
			  ife GL_COUNTDOWN 0
					{
					set GL_COUNTDOWN 30
					sub micro_torpedo 1
					}
			 }
			 else soundonce DRY_FIRE	 
			}
		else soundonce DRY_FIRE
		}
		
ife temp_weapon 31 // M60's bipod
		{
		ifp pstanding
			{
			state checkwall
			ife WALL_CLOSE 1
				{
				ifcount 16
					{
					espawn 3630
					set TEMP3 player[].posx
					add TEMP3 256
					rotatepoint player[].posx player[].posy TEMP3 player[].posy player[].ang TEMP5 TEMP6
					seta[RETURN].x TEMP5 
					seta[RETURN].y TEMP6
						setp[].weapon_pos 10
						xorvar GUNFIREMODE 512
						soundonce PUT_ON_EQUIP
						resetcount
					}
				}
			}
		}
		
ife temp_weapon 32 // Zilla Missile Launcher modes
	   ife KICKBACKPIC 0
		{
		ifcount 13
			{
			ifand GUNFIREMODE_2 2 { sound WEAP_FIRE_MODE xorvar GUNFIREMODE_2 2 }
			else
			ifand GUNFIREMODE_2 1 // if player on heat seeking already
				{
				sound WEAP_FIRE_MODE
				ifg atomic_bomb 0 // Go to Nuke mode if they have the briefcase
					{ 
					ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
					xorvar GUNFIREMODE_2 2
					xorvar GUNFIREMODE_2 1
					} 
				else xorvar GUNFIREMODE_2 1 // Turn off heatseeking mode if they don't
				}
			else
				{
				ifg heat_seek_card 0 { sound WEAP_FIRE_MODE xorvar GUNFIREMODE_2 1 } // Go to heat if they have heat seeking card
				else ifg atomic_bomb 0 // Go to Nuke if they have a Nuke
					{
					sound WEAP_FIRE_MODE
					ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
					xorvar GUNFIREMODE_2 2 
					}
				}
			resetcount
			}
		}
		
ife temp_weapon 33 // Goro gead modes
	   ife KICKBACKPIC 0
	    ife MELEE_RESEARCH[6] 2
		{
		ifcount 13
			{
			ifand GUNFIREMODE_2 4 { sound BLOOD_SPURT xorvar GUNFIREMODE_2 4 xorvar GUNFIREMODE_2 8 }
			else
			ifand GUNFIREMODE_2 8 
				{
				sound BLOOD_SPURT
				xorvar GUNFIREMODE_2 8
				}
			else
				{
				sound BLOOD_SPURT
				xorvar GUNFIREMODE_2 4
				}
			resetcount
			}
		}
		
		
	  ife temp_weapon 34 // RG-Minigun mk2 warm up
		{
		ifcount 13
			{
			sound WEAP_FIRE_MODE
			xorvar GUNFIREMODE_2 16
			resetcount
			}
		}
		
	ife temp_weapon 21 // FN FAL ironsight?
		{
		 ifcount 13
			{
			sound AUG_MOVEMENT
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				xorvar GUNFIREMODE 16384
				}
			resetcount
			}
		}
		
	ife temp_weapon 26 // AK-104 holosight?
		{
		 ifcount 13
			{
			sound AUG_MOVEMENT
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				xorvar GUNFIREMODE 16384
				}
			resetcount
			}
		}
	   
	}

	// Dropping dynamite/bomb on floor code
	ife CURWEAP 8
	ife KICKBACKPIC 0
		{
		switch CHAR
		case 0
		getp[].ammo_amount 8 ALT_TEMP1
		ifg ALT_TEMP1 0
			{
			sound TNT_BOUNCE 
			getp[].i ALT_TEMP2
			ifand GUNFIREMODE 32 espawn PROXONFLOOR_2 else
			espawn PROXONFLOOR
			seta[RETURN].owner ALT_TEMP2
			getp[].ammo_amount 8 ALT_TEMP2
			sub ALT_TEMP2 1	
			setp[].ammo_amount 8 ALT_TEMP2
			setp[].kickback_pic 10
			}
		break
		case 6
		getp[].ammo_amount 8 ALT_TEMP1
		ifg ALT_TEMP1 0
			{
			sound GRENBOUNCE 
			getp[].i ALT_TEMP2
			espawn DISCBOMBFLOOR2
			seta[RETURN].owner ALT_TEMP2
			getp[].ammo_amount 8 ALT_TEMP2
			sub ALT_TEMP2 1	
			setp[].ammo_amount 8 ALT_TEMP2
			setp[].kickback_pic 10
			}
		break
		default
		break
		endswitch
		}
		
	ife CURWEAP 5 
	ife KICKBACKPIC 0
		{
		switch CHAR
		case 4
		getp[].ammo_amount 5 ALT_TEMP1
		ifg ALT_TEMP1 0
			{
			sound TNT_BOUNCE 
			getp[].i ALT_TEMP3
			espawn DYNAMITEONFLOOR
			seta[RETURN].owner ALT_TEMP3
			getp[].ammo_amount 5 ALT_TEMP2
			sub ALT_TEMP2 1	
			setp[].ammo_amount 5 ALT_TEMP2
			setp[].weapon_pos 10
			setp[].curr_weapon 10
			}
		break
		case 6
		getp[].ammo_amount 5 ALT_TEMP1
		ifg ALT_TEMP1 0
		ife player[].weapon_pos 0
			{
			sound GRENBOUNCE
			getp[].i ALT_TEMP3
			espawn DISCBOMBFLOOR
			seta[RETURN].owner ALT_TEMP3
			getp[].ammo_amount 5 ALT_TEMP2
			ifn PS_ITEM 2 sub ALT_TEMP2 1	
			setp[].ammo_amount 5 ALT_TEMP2
			setp[].weapon_pos 10
			}
		break
		case 13
		getp[].ammo_amount 5 ALT_TEMP1
		ifg ALT_TEMP1 0
			{
			sound MC_GREN_BOUNCE
			getp[].i ALT_TEMP3
			espawn MC_GRENADE_ONFLOOR
			seta[RETURN].owner ALT_TEMP3
			getp[].ammo_amount 5 ALT_TEMP2
			sub ALT_TEMP2 1	
			setp[].ammo_amount 5 ALT_TEMP2
			setp[].weapon_pos 10
			setp[].curr_weapon 10
			}
		break
		default
		break
		endswitch
		}
		
	ife CURWEAP 10
	ife KICKBACKPIC 0
		{
		switch CHAR
		case 4
		getp[].ammo_amount 5 ALT_TEMP1
		ifg ALT_TEMP1 0
		ife player[].weapon_pos 0
			{
			sound TNT_BOUNCE 
			getp[].i ALT_TEMP2
			espawn DYNAMITEONFLOOR
			seta[RETURN].owner ALT_TEMP2
			getp[].ammo_amount 5 ALT_TEMP2
			sub ALT_TEMP2 1	
			setp[].ammo_amount 5 ALT_TEMP2
			setp[].weapon_pos 10
			}
		break
		case 13
		getp[].ammo_amount 5 ALT_TEMP1
		ifg ALT_TEMP1 0
			{
			sound MC_GREN_BOUNCE
			getp[].i ALT_TEMP3
			espawn MC_GRENADE_ONFLOOR
			seta[RETURN].owner ALT_TEMP3
			getp[].ammo_amount 5 ALT_TEMP2
			sub ALT_TEMP2 1	
			setp[].ammo_amount 5 ALT_TEMP2
			setp[].weapon_pos 10
			setp[].curr_weapon 10
			}
		break
		default
		break
		endswitch
		}
		
// ****************************************************************************************************************************
// JAMES ALT FIRE CODE ========================================================================================================
// ****************************************************************************************************************************
		
	ife CHAR 0 // James
	{
	
	ife CURWEAP 1
	 ife SPECIALIST_EQUIPMENT[2] 2 // FN57's lasersight
		ifcount 13
			{	
			ife KICKBACKPIC 0
				{
				ifand GUNFIREMODE 2048 soundonce LASERSIGHT_OFF else soundonce LASERSIGHT_ON
				xorvar GUNFIREMODE 2048
				}
			resetcount
			}
			
	ife CURWEAP 2
		{
		ife SPECIALIST_EQUIPMENT[25] 2 // Auto-5 sights
		 ifcount 13
			{
			sound JMOVE8 
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				xorvar GUNFIREMODE 16384
				}
			resetcount
			}
		ife SPECIALIST_EQUIPMENT[53] 2 // KSG-12
		 ifcount 13
			{
			sound JMOVE8
			ifand GUNFIREMODE_2 8
				{
				quote 294
				xorvar GUNFIREMODE_2 8
				}
				else
				{
				quote 295
				xorvar GUNFIREMODE_2 8
				}
			resetcount
			}
		}
			
			
	ife CURWEAP 3
		{
		ife SPECIALIST_EQUIPMENT[8] 2 // MP5's red-dot
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{					
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}		
			else
		ife SPECIALIST_EQUIPMENT[55] 2 // UMP's red-dot
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{				
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}				
			else // TMP's laser sight
			ifn SPECIALIST_EQUIPMENT[8] 2
			ifn SPECIALIST_EQUIPMENT[15] 2
			{
			ifand GUNFIREMODE 1024 nullop 
			else
			ifcount 13
				{	
				ife KICKBACKPIC 0
					{
					ifand GUNFIREMODE 2048 soundonce LASERSIGHT_OFF else soundonce LASERSIGHT_ON
					xorvar GUNFIREMODE 2048
					}
				resetcount
				}
			}
		}
		
	ife CURWEAP 4 
	{
	
	ife SPECIALIST_EQUIPMENT[77] 2 // Ranger missile
		{
		ife KICKBACKPIC 0
			{
			ifcount 13
				{
				ifand GUNFIREMODE_2 2 { sound WEAP_FIRE_MODE xorvar GUNFIREMODE_2 2 }
				else
				ifand GUNFIREMODE_2 1 // if player on heat seeking already
					{
					sound WEAP_FIRE_MODE
					ifg atomic_bomb 0 // Go to Nuke mode if they have the briefcase
						{ 
						ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
						xorvar GUNFIREMODE_2 2
						xorvar GUNFIREMODE_2 1
						} 
					else xorvar GUNFIREMODE_2 1 // Turn off heatseeking mode if they don't
					}
				else
					{
					ifg heat_seek_card 0 { sound WEAP_FIRE_MODE xorvar GUNFIREMODE_2 1 } // Go to heat if they have heat seeking card
					else ifg atomic_bomb 0 // Go to Nuke if they have a Nuke
						{
						sound WEAP_FIRE_MODE
						ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
						xorvar GUNFIREMODE_2 2 
						}
					}
				resetcount
				}
			}
		}
	else // GL's bouncing grenade fire
		{
		 ife KICKBACKPIC 0
			{
				getp[].ammo_amount 4 ALT_TEMP1
				ifg ALT_TEMP1 0
				 {
				 ifg ROCKETMAG 0
					{
					setp[].kickback_pic 3
					sub WEAPSWAYX 10
					sub WEAPSWAYY 10
					globalsound 479
					sub ALT_TEMP1 1
					setp[].ammo_amount 4 ALT_TEMP1
					sub ROCKETMAG 1
					shoot 2704
					}
				else soundonce DRY_FIRE
				}
			}
		}
	}
	
	ife CURWEAP 6 // Auto crossbow's zoom
	 ifcount 13
		{
		ife SPECIALIST_EQUIPMENT[49] 2
			{		
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}	
		}
		
	ife CURWEAP 11 // Auto crossbow's zoom
	 ifcount 13
		{
		ife SPECIALIST_EQUIPMENT[49] 2
			{		
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}	
		}
		
	ife CURWEAP 7 // Steyr Aug's zoom
	 ifcount 13
		{
		ife SPECIALIST_EQUIPMENT[45] 2 // LR300's holosight
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{			
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}			
		else
		ife SPECIALIST_EQUIPMENT[84] 2 // M4-15's holosight
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{			
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}					
		else
		ife SPECIALIST_EQUIPMENT[78] 2 // G36's holosight
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{			
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}			
		else
		ifn SPECIALIST_EQUIPMENT[78] 2
			{		
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}	
		}

	ife CURWEAP 9 
	{
	ife SPECIALIST_EQUIPMENT[22] 2 // AN-94
		{
		 ifcount 13
			{
			sound AUG_MOVEMENT
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
				xorvar GUNFIREMODE 16384
				}
			resetcount
			}
		}
		else
		ife SPECIALIST_EQUIPMENT[72] 2 // Gilboa AR
			{
			 ifcount 13
				{
				sound AUG_MOVEMENT
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					xorvar GUNFIREMODE 16384
					}
					else
					{
					set HIDE_CROSSHAIR 1
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					xorvar GUNFIREMODE 16384
					}
				resetcount
				}
			}
		else // M16+Shotgun
		{
		ife GL_COUNTDOWN 0
		ifl KICKBACKPIC 4
			{
			ifand AMMO_TYPES[CURWEAP] 1
				{
				ifg ALTMAG 0
					{
					flash
					set GL_COUNTDOWN 26
					set LAST_SHELL_FIRED 1
					shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361
					sound EXPL_SHELL_FIRE
					resetcount
					}
				else soundonce DRY_FIRE
				}
			else
			ifand AMMO_TYPES[CURWEAP] 4
				{
				ifg ALTMAG 0
					{
					flash
					set GL_COUNTDOWN 26
					set LAST_SHELL_FIRED 4
					ife ARTIFACTS_LOADOUT[CHAR] 7 // Book of Nails?
						{
						shoot 6816 shoot 6816 shoot 6816 shoot 6816 shoot 6816 shoot 6816 shoot 6816
						}
					else
						{
						shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826
						}
					sound FLECH_SHELL_FIRE
					resetcount
					}
				else soundonce DRY_FIRE
				}
			else
			ifand AMMO_TYPES[CURWEAP] 64
				{
				ifg ALTMAG 0
					{
					flash
					set LAST_SHELL_FIRED 64
					set GL_COUNTDOWN 26

					shoot RMAXREVOLVERSHOT shoot RMAXREVOLVERSHOT shoot RMAXREVOLVERSHOT shoot RMAXREVOLVERSHOT 
					shoot RMAXREVOLVERSHOT shoot RMAXREVOLVERSHOT shoot RMAXREVOLVERSHOT	
					sound MAGNUM_SHOTGUN
					resetcount
					}
				else soundonce DRY_FIRE
				}
			else
			ifand AMMO_TYPES[CURWEAP] 1024
				{
				ifg ALTMAG 0
					{
					flash
					set LAST_SHELL_FIRED 1024
					set GL_COUNTDOWN 26

					shoot 22536 shoot 22536 shoot 22536 shoot 22536
					shoot 22536 shoot 22536 shoot 22536	
					sound DRAGONS_BR_FIRE
					resetcount
					}
				else soundonce DRY_FIRE
				}
			else
				{
				ifg ALTMAG 0
					{
					set LAST_SHELL_FIRED 0
					set GL_COUNTDOWN 26
					flash
					shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN
					sound M16_SHOTGUN
					resetcount
					}
				else soundonce DRY_FIRE
				}
			}
		}
	}
		
	} // End James' stuff
	
// ****************************************************************************************************************************
// ZAXTOR ALT FIRE CODE =======================================================================================================
// ****************************************************************************************************************************

	ife CHAR 1 // Zaxtor's stuff
	{
		ife CURWEAP 1
		{
			ife SPECIALIST_EQUIPMENT[37] 2 // using gold auto-rifle?
			 {
			 ifcount 13
				{
				sound SCOPE_ZOOM
				ifand GUNFIREMODE 16384
					{
					xorvar GUNFIREMODE 16384
					}
					else
					{			
					xorvar GUNFIREMODE 16384
					}
				resetcount
				}
			  }
			else
			ifn SPECIALIST_EQUIPMENT[82] 2 // NOT using MP5k?
				{
				ife GL_COUNTDOWN 0
				ifand ZAXTOR_UPGRADE 1
				ifl KICKBACKPIC 4
					{
					getp[].ammo_amount 5 ALT_TEMP1
					ifg ALT_TEMP1 0
						{
						set GL_COUNTDOWN 26
						shoot 5375
						sound ZAX_GLFIRE
						sub ALT_TEMP1 1
						setp[].ammo_amount 5 ALT_TEMP1
						}
					else break
					}
				}
		}
		
		
ife CURWEAP 3
		{
			ife SPECIALIST_EQUIPMENT[70] 2 // Super galil?
				{
				ife player[].weapon_pos 0
				ifl KICKBACKPIC 4
					{
					ifcount 13
						{
						ifand GUNFIREMODE_2 128 
							{ 
							ifg heat_seek_card 0 { sound WEAP_FIRE_MODE xorvar GUNFIREMODE_2 1 xorvar GUNFIREMODE_2 128  } // Go to heat seeking
							else ifg atomic_bomb 0 // Go to Nuke mode if they have the briefcase
								{ 
								ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
								xorvar GUNFIREMODE_2 2
								xorvar GUNFIREMODE_2 128
								} 
								else xorvar GUNFIREMODE_2 128 
							sound WEAP_FIRE_MODE 
							}
						else ifand GUNFIREMODE_2 2 { sound WEAP_FIRE_MODE xorvar GUNFIREMODE_2 2 }
						else
						ifand GUNFIREMODE_2 1 // if player on heat seeking already
							{
							sound WEAP_FIRE_MODE
							ifg atomic_bomb 0 // Go to Nuke mode if they have the briefcase
								{ 
								ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
								xorvar GUNFIREMODE_2 2
								xorvar GUNFIREMODE_2 1
								} 
							else xorvar GUNFIREMODE_2 1 // Turn off heatseeking mode if they don't
							}
						else
							{
							sound WEAP_FIRE_MODE
							ifg player[].ammo_amount 5 0 xorvar GUNFIREMODE_2 128
							else ifg DUP_missile_ammo 0 xorvar GUNFIREMODE_2 128
							else ifg atomic_bomb 0 // Go to Nuke mode if they have the briefcase
								{ 
								ifg GL_COUNTDOWN 0 set GL_COUNTDOWN 0
								xorvar GUNFIREMODE_2 2
								} 
							}
						resetcount
						}
					}
				}
			else // Zaxtor akimbo stuff
			{
			 ifand GUNSAKIMBO 16
			 ifand GUNFIREMODE 1024
				 {
				 ifand BITS_PRESS 64
				  ife KICKBACKPIC_2 0
				   ifg player[].ammo_amount 3 1
					set KICKBACKPIC_2 1
				 }
			else
				{
			 ifcount 13
					{
					sound SCOPE_ZOOM
					xorvar GUNFIREMODE 16384
					resetcount
					}
			  }
			}
		}
		
	}
	
// ****************************************************************************************************************************
// MERLIJN ALT FIRE CODE ======================================================================================================
// ****************************************************************************************************************************
	
	ife CHAR 2 // Merlijn's stuff
	{
	ife CURWEAP 1 // dagger throw
	ife player[].weapon_pos 0
	 ife player[].kickback_pic 0
	  ifg player[].ammo_amount 1 1
		{
		soundonce THROWSOMET
		setp[].weapon_pos 10
		getp[].ammo_amount 1 TEMP
		sub TEMP 1 
		ifl TEMP 1 set TEMP 1
		setp[].ammo_amount 1 TEMP
		
		ife SPECIALIST_EQUIPMENT[38] 2 shoot 18072
		else shoot 18067
		}
	
	
	ife CURWEAP 2 // sword's 360 slashing attack
	 ife MERL_SPIN_SLASH 27
	  ifg SPRINTING 0
	   ife KICKBACKPIC 0
		{
		ifand GUNFIREMODE_2 64 break
		ifinwater break
		sub SPRINTING 75
		set MERL_SPIN_SLASH 0
		}
		
	ife CURWEAP 3
		ife SPECIALIST_EQUIPMENT[26] 2
		 ife KICKBACKPIC 0
			{
			ifrnd 96 sound SWORDSWEEP else
			ifrnd 96 sound SWORDSWEEP2 else
			sound SWORDSWEEP3
			setp[].kickback_pic 1
			set SWORD_ANIM 1
			}
	}
	
// ****************************************************************************************************************************
// BOMBSHELL ALT FIRE CODE =========================================================================================================
// ****************************************************************************************************************************

ife CHAR 10 // Bombshell
	{
	ife CURWEAP 1 // Glock laser sight
	ifcount 13
		{	
		ife KICKBACKPIC 0
			{
			ifand GUNFIREMODE 2048 soundonce LASERSIGHT_OFF else soundonce LASERSIGHT_ON
			xorvar GUNFIREMODE 2048
			}
		resetcount
		}
	ife CURWEAP 7
	ifcount 13
		{
		ifmultiplayer nullop else
			{
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}
		}
	ife CURWEAP 11
		{
		ifcount 16
			{
			xorvar GUNFIREMODE 8192
			ifand GUNFIREMODE 8192 quote 1600
			else quote 1601
			soundonce WEAP_FIRE_MODE
			resetcount
			}
		}
	}
	
// ****************************************************************************************************************************
// HIGHWIRE ALT FIRE CODE =====================================================================================================
// ****************************************************************************************************************************
	
ife CHAR 3 // Highwire
{
	
	ife CURWEAP 3
	{
		ifand HIGHWIRE_UPGRADE 64
		ifn SPECIALIST_EQUIPMENT[7] 2
		ifn SPECIALIST_EQUIPMENT[14] 2
		{
		 ifcount 13
			{
			sound AUG_MOVEMENT
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				xorvar GUNFIREMODE 16384
				ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
				}
			resetcount
			}
		}
	}
	
	ife CURWEAP 6 // SVD's scope
	ifcount 16
		{
		ife SCOPE 0 set SCOPE 1 else set SCOPE 0
		resetcount
		}
		
	ife CURWEAP 9 // RPK's bipod
	ifn SPECIALIST_EQUIPMENT[11] 2 // not using RPKM
	ifn SPECIALIST_EQUIPMENT[35] 2 // not using PKM
		{
		ifp pstanding
			{
			state checkwall
			ife WALL_CLOSE 1
				{
				ifcount 16
					{
						espawn 3630
						set TEMP3 player[].posx
						add TEMP3 256
						rotatepoint player[].posx player[].posy TEMP3 player[].posy player[].ang TEMP5 TEMP6
						seta[RETURN].x TEMP5 
						seta[RETURN].y TEMP6
						setp[].weapon_pos 10
						xorvar GUNFIREMODE 512
						soundonce PUT_ON_EQUIP
						resetcount
					}
				}
			}
		}
		

	}
	
// ****************************************************************************************************************************
// SANG ALT FIRE CODE =========================================================================================================
// ****************************************************************************************************************************
	
ife CHAR 4
{

	ife CURWEAP 1 // crystal shield
		{	
		getp[].ammo_amount 1 ALT_TEMP4
		getp[].shield_amount ALT_TEMP5
		ifg ALT_TEMP4 0 
		 ifl ALT_TEMP5 51
		 ife KICKBACKPIC 0
			{
			ife ALT_ANIM 20 set ALT_ANIM 0
			else set ALT_ANIM_2 0
		   setp[].kickback_pic 3
		   sound SANG_SHIELD_UP
		   sub ALT_TEMP4 1
		   setp[].ammo_amount 1 ALT_TEMP4
		   add ALT_TEMP5 2
		   setp[].shield_amount ALT_TEMP5
			}
		}
		
	ife CURWEAP 2 // spread lightning burst
		{	
		getp[].ammo_amount 2 ALT_TEMP1
		ifg ALT_TEMP1 0 
		 ife KICKBACKPIC 0
			{
		   setp[].kickback_pic 5
		   ife SPECIALIST_EQUIPMENT[17] 2 // Ice spell?
			   {
			   sound GREMGUN_ICE
			   eshoot FREEZEBLAST
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 32 seta[RETURN].ang ALT_TEMP2
			   eshoot FREEZEBLAST
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 64 seta[RETURN].ang ALT_TEMP2
			   eshoot FREEZEBLAST
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -32 seta[RETURN].ang ALT_TEMP2
			   eshoot FREEZEBLAST
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -64 seta[RETURN].ang ALT_TEMP2
			   shoot FREEZEBLAST
			   }
		   else
		   ife SPECIALIST_EQUIPMENT[31] 2 // Fire spell?
			   {
			   sound GREMGUN_FIRE
			   eshoot 7526
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 32 seta[RETURN].ang ALT_TEMP2
			   eshoot 7526
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 64 seta[RETURN].ang ALT_TEMP2
			   eshoot 7526
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -32 seta[RETURN].ang ALT_TEMP2
			   eshoot 7526
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -64 seta[RETURN].ang ALT_TEMP2
			   shoot 7526
			   }
		   else // Thunder spell?
		   ife SPECIALIST_EQUIPMENT[64] 2 // Gold spell?
			   {
			   sound SANG_GOLDSPELL
			   eshoot 19807
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 32 seta[RETURN].ang ALT_TEMP2
			   eshoot 19807
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 64 seta[RETURN].ang ALT_TEMP2
			   eshoot 19807
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -32 seta[RETURN].ang ALT_TEMP2
			   eshoot 19807
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -64 seta[RETURN].ang ALT_TEMP2
			   shoot 19807
			   }
		   else // Thunder spell?
			   {
			   sound 482
			   sound RIOTGUN_TESLAF
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 32 seta[RETURN].ang ALT_TEMP2
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 64 seta[RETURN].ang ALT_TEMP2
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -32 seta[RETURN].ang ALT_TEMP2
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -64 seta[RETURN].ang ALT_TEMP2
			   shoot 6198
			   }
		   sub ALT_TEMP1 1
		   setp[].ammo_amount 2 ALT_TEMP1
			}
		}
		
	ife CURWEAP 3 // Sang stuff
		{	
		ife SPECIALIST_EQUIPMENT[34] 2 // SR-2's optic site
			{
			 ifcount 13
				{
				sound SCOPE_ZOOM
				ifand GUNFIREMODE 16384
					{
					
					xorvar GUNFIREMODE 16384
					}
				else
					{
					
					xorvar GUNFIREMODE 16384
					}
				resetcount
				}
			}
		ife SPECIALIST_EQUIPMENT[71] 2 // F2000's scope
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{			
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}
		ife SPECIALIST_EQUIPMENT[74] 2 // AK47's scope
			{
			 ifcount 13
				{
				sound JMOVE8
				ifand GUNFIREMODE 16384
					{
					set HIDE_CROSSHAIR 0
					xorvar GUNFIREMODE 16384
					}
				else
					{			
					set HIDE_CROSSHAIR 1
					xorvar GUNFIREMODE 16384
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					}
				resetcount
				}
			}
		}
		
	ife CURWEAP 4 // Hellfire staff flame burst
		{
		getp[].ammo_amount 4 ALT_TEMP1
		ifg ALT_TEMP1 0 
		ife KICKBACKPIC 0
		ife KICKBACKPIC_2 0
			{
			sub ALT_TEMP1 1
			setp[].ammo_amount 4 ALT_TEMP1
			set KICKBACKPIC_2 1
			}
		}
		
	ife CURWEAP 7 // manacle's zoom
	 ifcount 13
		{
		ife SPECIALIST_EQUIPMENT[80] 2
			{		
			sound SHEAT_EYEGLASS
			xorvar GUNFIREMODE 16384
			resetcount
			}
		}
		
		
	ife CURWEAP 9
	ifcount 16
		{
		soundonce SPELL8CHARGE
		soundonce STAFF_PUTDOWN
		palfrom 40 40 40 40
		
		ifrnd 96 set PLAYER_VOICEOVER 45
		ife SPECIALIST_EQUIPMENT[57] 2
		{
		espawn 18085
		getp[].ammo_amount 9 ALT_TEMP4 // Get Nemesis Staff's ammo
		setactorvar[RETURN].ALLY_MAG ALT_TEMP4 // Set the staff's 'ammo'
		}
		else
		{
		espawn OBLIVION_STAFF_SENTRY
		getp[].ammo_amount 9 ALT_TEMP4 // Get Oblivion Staff's ammo
		mulvar ALT_TEMP4 3 // Multiply it by 3 since the staff fires 3 'shots' at once
		setactorvar[RETURN].ALLY_MAG ALT_TEMP4 // Set the staff's 'ammo'
		}
		
		spawn 13950
		
		setp[].gotweapon 9 0
		setp[].ammo_amount 9 0
		setp[].weapon_pos 10
		setp[].curr_weapon 0
		resetcount
		}

}

// ****************************************************************************************************************************
// RUSTY ALT FIRE CODE ========================================================================================================
// ****************************************************************************************************************************	
	
ife CHAR 5
{
	ife CURWEAP 1 // fan the hammer
	{
	ife SPECIALIST_EQUIPMENT[29] 2 break
		ifcount 13
			{
			sound JMOVE4
			setplayer[].weapon_pos 5
			xorvar GUNFIREMODE_2 16
			resetcount
			}
	}
	ife CURWEAP 3
	{
		ife KICKBACKPIC 0
		{
			ife SPECIALIST_EQUIPMENT[9] 2 // M41C's flamethrower
			{
			getp[].ammo_amount 7 ALT_TEMP1
			ifg ALT_TEMP1 1
				{
				ifl GL_COUNTDOWN 43 { sub ALT_TEMP1 2 setp[].ammo_amount 7 ALT_TEMP1 set GL_COUNTDOWN 46 }
				}
			else
			soundonce DRY_FIRE
			}
		else
		 ife SPECIALIST_EQUIPMENT[27] 2
				{
				 ifcount 13
					{
					sound AUG_MOVEMENT
					ifand GUNFIREMODE 16384
						{
						set HIDE_CROSSHAIR 0
						ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
						xorvar GUNFIREMODE 16384
						}
						else
						{
						set HIDE_CROSSHAIR 1
						ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
						xorvar GUNFIREMODE 16384
						}
					resetcount
					}
				}
		}
	}
ife CURWEAP 6
ife KICKBACKPIC 0
		{
		soundonce MINE_DETONATE
		set RUSTY_MINE_GUN 4
		}
ife CURWEAP 9
 ifcount 13
	{
	sound JMOVE8
	ifand GUNFIREMODE 16384
		{
		set HIDE_CROSSHAIR 0
		xorvar GUNFIREMODE 16384
		}
	else
		{
		set HIDE_CROSSHAIR 1
		xorvar GUNFIREMODE 16384
		ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
		}
	resetcount
	}
ife CURWEAP 11
ife KICKBACKPIC 0
		{
		soundonce MINE_DETONATE
		set RUSTY_MINE_GUN 4
		}
}
	
// ****************************************************************************************************************************
// GEOFFREY ALT FIRE CODE =====================================================================================================
// ****************************************************************************************************************************
	
ife CHAR 6
{

ife CURWEAP 1
{
 ife SPECIALIST_EQUIPMENT[42] 2 // player using Gold pistol?
	{
	ife KICKBACKPIC 0
	  ife GEO_MEGA_SHOT[0] 0
		{
		set GUN_VOLUME 70
		getp[].ammo_amount 1 ALT_TEMP2
		ifg ALT_TEMP2 2
			{
			setarray GEO_MEGA_SHOT[0] 32
			setp[].kickback_pic 1

			shoot GOLDEN_SHOT_MED
			shoot GOLDEN_SHOT_MED
			sound GEF_GR_FIRE
			sound GEF_GR_FIRE

			shoot 13772
			shoot 13772
			shoot 13772
			shoot 13772
			ifn PS_ITEM 2
				{
				sub ALT_TEMP2 2
				setp[].ammo_amount 1 ALT_TEMP2
				}
			}
		else soundonce DRY_FIRE
		}
	}
	else
 ifn SPECIALIST_EQUIPMENT[42] 2 // player NOT using Gold pistol?
	{
	ife KICKBACKPIC 0
	  ife GEO_MEGA_SHOT[0] 0
		{
		set GUN_VOLUME 70
		getp[].ammo_amount 1 ALT_TEMP2
		ifg ALT_TEMP2 4
			{
			ifand GEOFFREY_UPGRADE 2 
				{
				setarray GEO_MEGA_SHOT[0] 12 
				sound MAGSHOT_CHARGE
				setactorsoundpitch THISACTOR MAGSHOT_CHARGE 128
				}
				else 
				{
				setarray GEO_MEGA_SHOT[0] 24
				sound MAGSHOT_CHARGE
				}
			setp[].kickback_pic 1
			ifand GEOFFREY_UPGRADE 1
				{
				shoot REDLASERSHOT
				shoot REDLASERSHOT
				shoot REDLASERSHOT
				shoot REDLASERSHOT
				sound LASERGUN_FIRE3
				}
			else
				{
				shoot NINEMM_CALIBRE
				shoot NINEMM_CALIBRE
				shoot NINEMM_CALIBRE
				shoot NINEMM_CALIBRE
				sound GEO_PISTOLMEGA
				}
			shoot 13772
			shoot 13772
			shoot 13772
			shoot 13772
			ifn PS_ITEM 2
				{
				sub ALT_TEMP2 4
				setp[].ammo_amount 1 ALT_TEMP2
				}
			}
		else soundonce DRY_FIRE
		}
	}
}
	
ife CURWEAP 4
	{
    ife GEO_CALCULATE_TRAJ 0
	 ife KICKBACKPIC 0
		{
		quote 514
		set GEO_CALCULATE_TRAJ 16
		soundonce CALCULATE
		shoot 6480
		}
	}
	
	
ife CURWEAP 6
	{
	 ifcount 13
		{
		state TURNOFF_NVG
		ife SCOPE 0 
			{
			set SCOPE 2
			ifn player[].palette 2 setgamepalette 2
			sound SCIFI_ZOOM_IN
			}
			else
			{
			set SCOPE 0
				ifinwater
					{
					ifn player[].palette 1 setgamepalette 1
					}
				else
				ifn player[].palette 0 setgamepalette 0	
			sound SCIFI_ZOOM_OUT
			}
		resetcount
		}
	}
	
ife CURWEAP 11
	{
	 ifcount 13
		{
		state TURNOFF_NVG
		ife SCOPE 0 
			{
			set SCOPE 2
			sound SCIFI_ZOOM_IN
			}
			else
			{
			set SCOPE 0
			ifinwater
				{
				ifn player[].palette 1 setgamepalette 1
				}
			else
				ifn player[].palette 0 setgamepalette 0
			sound SCIFI_ZOOM_OUT
			}
		resetcount
		}
	}

ife CURWEAP 9
	{
	 ifcount 13
		{
		sound SCOPE_ZOOM
		ifand GUNFIREMODE 16384
			{
			
			xorvar GUNFIREMODE 16384
			}
			else
			{
			
			xorvar GUNFIREMODE 16384
			}
		resetcount
		}
	}
	
}

// ****************************************************************************************************************************
// MIKKO ALT FIRE CODE ========================================================================================================
// ****************************************************************************************************************************

ife CHAR 7
{
	ife CURWEAP 1
	{
	ifn SPECIALIST_EQUIPMENT[43] 2
	 ifn SPECIALIST_EQUIPMENT[4] 2
		{ // using default MS corp pistol?
		ife KICKBACKPIC 0
		 ifand BITS_PRESS 64 ifg PISTOLMAG 0 ife player_in_vehicle 0 ife camerasprite -1 setplayer[].kickback_pic 1
		 }
	}
	ife CURWEAP 2 // shotgun
	{
	ife SPECIALIST_EQUIPMENT[85] 2 // KSG-12
	 ifcount 13
			{
			sound JMOVE8
			ifand GUNFIREMODE_2 8
				{
				quote 294
				xorvar GUNFIREMODE_2 8
				}
				else
				{
				quote 295
				xorvar GUNFIREMODE_2 8
				}
			resetcount
			}
	else
	ifn SPECIALIST_EQUIPMENT[30] 2
	 ifn SPECIALIST_EQUIPMENT[68] 2
	  ifn SPECIALIST_EQUIPMENT[85] 2
	   {
		ife KICKBACKPIC 0
			{
			ifg SHOTGUNMAG 1
				{
				ifand GUNFIREMODE 256 nullop else 
					{
					setp[].kickback_pic 1
					xorvar GUNFIREMODE 256
					}
				}
			else ifg SHOTGUNMAG 0 setp[].kickback_pic 1
			}
	   }
	}
	ife CURWEAP 3
		{
		ife SPECIALIST_EQUIPMENT[21] 2 
		 {
		 ifcount 13
			{
			sound SCOPE_ZOOM
			ifand GUNFIREMODE 16384
				xorvar GUNFIREMODE 16384
			else
				xorvar GUNFIREMODE 16384
			resetcount
			}
		}
		else
		ife SPECIALIST_EQUIPMENT[47] 2 
		 {
		 ifcount 13
			{
			sound SCOPE_ZOOM
			ifand GUNFIREMODE 16384
				{
				set HIDE_CROSSHAIR 0
				xorvar GUNFIREMODE 16384
				}
				else
				{
				set HIDE_CROSSHAIR 1
				xorvar GUNFIREMODE 16384
				}
			resetcount
			}
		}
		else
		ifcount 16
			{
			ifand MIKKO_UPGRADE 16 // Hollow point upgrade?
				{
				ife SHOOT_MODE 0 { set SHOOT_MODE 1 quote 1603 }
				else ife SHOOT_MODE 1 { set SHOOT_MODE 2 quote 1604 }
				else ife SHOOT_MODE 2 { set SHOOT_MODE 0 quote 1602 }
				}
				else
				{
				ife SHOOT_MODE 0 { set SHOOT_MODE 1 quote 1603 }
				else ife SHOOT_MODE 1 { set SHOOT_MODE 0 quote 1602 }				
				}
			soundonce WEAP_FIRE_MODE
			resetcount
			}
		}
	ife CURWEAP 4
	 ife KICKBACKPIC 0
		{
			getp[].ammo_amount 4 ALT_TEMP1
			ifg ALT_TEMP1 0
			 {
				setp[].kickback_pic 4
				sub WEAPSWAYX 10
				sub WEAPSWAYY 10
				globalsound FIREBALL_FIRE
				sub ALT_TEMP1 1
				setp[].ammo_amount 4 ALT_TEMP1
				shoot 7052
			}
			else soundonce DRY_FIRE
		}
	ife CURWEAP 6
	 ife SPECIALIST_EQUIPMENT[59] 2
		{
	ifcount 16
	 ife weaponcount 0
			{
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}	
		}
	ife CURWEAP 11
	 ife SPECIALIST_EQUIPMENT[59] 2
		{
	ifcount 16
	 ife weaponcount 0
			{
			sound SCOPE_ZOOM
			ife SCOPE 0 set SCOPE 1 else set SCOPE 0
			resetcount
			}	
		}
}


// ****************************************************************************************************************************
// MAARTEN ALT FIRE CODE ======================================================================================================
// ****************************************************************************************************************************
	
ife CHAR 11
{
	ife CURWEAP 2
	 ifcount 13
		{
		sound SCOPE_ZOOM
		ifand GUNFIREMODE 16384
			{
			
			xorvar GUNFIREMODE 16384
			}
			else
			{
			
			xorvar GUNFIREMODE 16384
			}
		resetcount
		}
}

// ****************************************************************************************************************************
// JANE ALT FIRE CODE =========================================================================================================
// ****************************************************************************************************************************

ife CHAR 12
{
	ife CURWEAP 1
		{
		ifcount 16
			{
			xorvar GUNFIREMODE 32768
			ifand GUNFIREMODE 32768 quote 1603
			else quote 1602
			soundonce WEAP_FIRE_MODE
			resetcount
			}
		}
}

// ****************************************************************************************************************************
// MICKY ALT FIRE CODE =====================================================================================================
// ****************************************************************************************************************************
	
ife CHAR 13
{

ife CURWEAP 1
{
ife SPECIALIST_EQUIPMENT[73] 2
	{
		 ifcount 13
			{
			sound SCOPE_ZOOM
			xorvar GUNFIREMODE 16384
			resetcount
			}
	}
else
	 ife SPECIALIST_EQUIPMENT[60] 2 // longslide's lasersight
		ifcount 13
			{	
			ife KICKBACKPIC 0
				{
				ifand GUNFIREMODE 2048 soundonce LASERSIGHT_OFF else soundonce LASERSIGHT_ON
				xorvar GUNFIREMODE 2048
				}
			resetcount
			}
else
 ifn SPECIALIST_EQUIPMENT[60] 2
  ifn SPECIALIST_EQUIPMENT[73] 2
	{
	ife KICKBACKPIC 0
	 ifl KICKBACKPIC 6
		{
		set GUN_VOLUME 70
		getp[].ammo_amount 1 ALT_TEMP2
		ifg ALT_TEMP2 0
		 ifg PISTOLMAG 1
		  ife GEO_MEGA_SHOT[0] 0
			{
			ifand MICKY_UPGRADE 16 ifn SPECIALIST_EQUIPMENT[46] 2 set GUN_ACCURACY 8 else set GUN_ACCURACY 32
			setarray GEO_MEGA_SHOT[0] 4
			ife PISTOLMAG 8
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				{
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				}
				else
				{
				ifand MICKY_UPGRADE 1
					{
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT 
					}
				else
					{
					shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT
					shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT 
					}
				}
				sub PISTOLMAG 8
				sound MC_PISTOL_F2
				shoot 13772 shoot 13772 shoot 13772 shoot 13772
				shoot 13772 shoot 13772 shoot 13772 
				sub ALT_TEMP2 7
				setp[].ammo_amount 1 ALT_TEMP2
				}
			else
			ife PISTOLMAG 7
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				{
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				}
				else
				{
				ifand MICKY_UPGRADE 1
					{
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					}
				else
					{
					shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT
					shoot ZRIFLESHOT shoot ZRIFLESHOT 
					}
				}
				sub PISTOLMAG 7
				sound MC_PISTOL_F2
				shoot 13772 shoot 13772 shoot 13772 shoot 13772
				shoot 13772 shoot 13772 
				sub ALT_TEMP2 6
				setp[].ammo_amount 1 ALT_TEMP2
				}
			else
			ife PISTOLMAG 6
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				{
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				shoot GOLDEN_SHOT_LOW
				}
				else
				{
				ifand MICKY_UPGRADE 1
					{
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					shoot ARMOUR_PIERCING_SHOT
					}
				else
					{
					shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT
					shoot ZRIFLESHOT 
					}
				}
				sub PISTOLMAG 6
				sound MC_PISTOL_F2
				shoot 13772 shoot 13772 shoot 13772 shoot 13772
				shoot 13772
				sub ALT_TEMP2 5
				setp[].ammo_amount 1 ALT_TEMP2
				}
			else
			ife PISTOLMAG 5
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				{
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				}
				else
				{
				ifand MICKY_UPGRADE 1
					{
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					}
				else
					{
					shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT
					}
				}
				sub PISTOLMAG 5
				sound MC_PISTOL_F2
				shoot 13772 shoot 13772 shoot 13772 shoot 13772
				sub ALT_TEMP2 4
				setp[].ammo_amount 1 ALT_TEMP2
				}
			else
			ife PISTOLMAG 4
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				{
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW
				}
				else
				{
				ifand MICKY_UPGRADE 1
					{
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					}
					else
					{
					shoot ZRIFLESHOT shoot ZRIFLESHOT shoot ZRIFLESHOT 
					}
				}
				sub PISTOLMAG 4
				sound MC_PISTOL_F2
				shoot 13772 shoot 13772 shoot 13772 
				sub ALT_TEMP2 3
				setp[].ammo_amount 1 ALT_TEMP2
				}
			else
			ife PISTOLMAG 3
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				{
				shoot GOLDEN_SHOT_LOW shoot GOLDEN_SHOT_LOW 
				}
				else
				{
				ifand MICKY_UPGRADE 1
					{
					shoot ARMOUR_PIERCING_SHOT shoot ARMOUR_PIERCING_SHOT
					}
					else
					{
				shoot ZRIFLESHOT shoot ZRIFLESHOT 
					}
				}
				sub PISTOLMAG 3
				sound MC_PISTOL_F2
				shoot 13772 shoot 13772
				sub ALT_TEMP2 2
				setp[].ammo_amount 1 ALT_TEMP2
				}
			else
			ife PISTOLMAG 2
				{
				setp[].kickback_pic 1
				ife SPECIALIST_EQUIPMENT[46] 2
				shoot GOLDEN_SHOT_LOW 
				else
				{
				ifand MICKY_UPGRADE 1 shoot ARMOUR_PIERCING_SHOT
				else shoot ZRIFLESHOT
				}
				sub PISTOLMAG 2
				sound MC_PISTOL_F2
				shoot 13772
				sub ALT_TEMP2 1
				setp[].ammo_amount 1 ALT_TEMP2
				}
			}
		else soundonce DRY_FIRE
		}
	}
}
	
ife CURWEAP 2
 ifand MICKY_UPGRADE 2
	{
	ife SPECIALIST_EQUIPMENT[58] 2 break
	ifcount 13
		{
		sound SCOPE_ZOOM
		ife SCOPE 0 set SCOPE 1 else set SCOPE 0
		resetcount
		}
	}
	
ife CURWEAP 3
	{
		 ifcount 13
			{
			sound SCOPE_ZOOM
			xorvar GUNFIREMODE 16384
			resetcount
			}
	}
	
ife CURWEAP 4
	ifcount 13
		{	
		ife KICKBACKPIC 0
			{
			ifand GUNFIREMODE 2048 soundonce LASERSIGHT_OFF else soundonce LASERSIGHT_ON
			xorvar GUNFIREMODE 2048
			}
		resetcount
		}
			
ife CURWEAP 6
	{
	ifcount 13
		{
		sound WEAP_FIRE_MODE
		ifand GUNFIREMODE_2 16 { sound MINIGUN_STOP setp[].kickback_pic 30 }
		xorvar GUNFIREMODE_2 16
		resetcount
		}
	}
	
ife CURWEAP 11
	{
	ifcount 13
		{
		sound WEAP_FIRE_MODE
		ifand GUNFIREMODE_2 16 { sound MINIGUN_STOP setp[].kickback_pic 30 }
		xorvar GUNFIREMODE_2 16
		resetcount
		}
	}
	
	
ife CURWEAP 9
	{
	ife SPECIALIST_EQUIPMENT[76] 2
		{
		 ifcount 13
			{
			sound SCOPE_ZOOM
			xorvar GUNFIREMODE 16384
			resetcount
			}
		}
	}
	
}

// ****************************************************************************************************************************
// SNOWFALL ALT FIRE CODE ===================================================================================================
// ****************************************************************************************************************************

ife CHAR 14
{

	ife CURWEAP 1
		{
		// GUN_CHARGE
		ifand BITS_PRESS 64
		  ife KICKBACKPIC_2 0
				{
				ifand GUNFIREMODE 64
				 ifg player[].ammo_amount 1 1
					{
					set KICKBACKPIC_2 1
					}
				else
				ifl GUN_CHARGE 90
				 ifg player[].ammo_amount 1 9
					{
					add GUN_CHARGE 2
					clamp GUN_CHARGE 0 90
					}
				}
		}
		
	ife CURWEAP 2
	 ifand GUNFIREMODE_2 64
	 ifand BITS_PRESS 64
	  ife KICKBACKPIC_2 0
	   ifg player[].ammo_amount 2 1
		set KICKBACKPIC_2 1
		
ife CURWEAP 3
	{
	 ifcount 13
		{
		state TURNOFF_NVG
		ife SCOPE 0 set SCOPE 1 else set SCOPE 0	
		sound SCOPE_ZOOM
		resetcount
		}
	}

ife CURWEAP 7
	{
	 ifcount 13
		{
		state TURNOFF_NVG
		ife SCOPE 0 
			{
			set SCOPE 2
			ifn player[].palette 2 setgamepalette 2
			sound SCIFI_ZOOM_IN
			}
			else
			{
			set SCOPE 0
				ifinwater
					{
					ifn player[].palette 1 setgamepalette 1
					}
				else
				ifn player[].palette 0 setgamepalette 0	
			sound SCIFI_ZOOM_OUT
			}
		resetcount
		}
	}
		
		
	ife CURWEAP 9
	ifcount 16
		{
		soundonce SF_HMG_SEL 
		
		espawn 20862
		getp[].ammo_amount 9 ALT_TEMP4 // Get HMG's ammo
		setactorvar[RETURN].ALLY_MAG ALT_TEMP4 // Set the sentries' 'ammo'
		
		setp[].gotweapon 9 0
		setp[].ammo_amount 9 0
		setp[].weapon_pos 10
		setp[].curr_weapon 0
		resetcount
		}

}
	
endevent

// END ALTERNATE FIRE KEY=============================================================================


defstate JMOVESOUND2
  ife MOUSEUP 0
   ife DOCUMENT -1
    ife CHARSELECT 0
	 ife MISSIONUP 0
	{ 
	ifrnd 64 soundonce JMOVE6 else
	ifrnd 64 soundonce JMOVE7
	}
ends

state spawn_gunsmoke
ife PERFMODE 1
	{
		ifinwater espawn WATERBUBBLE else espawn GUNSMOKE
		geta[].x TEMP
		geta[].y TEMP2
		set TEMP3 TEMP
		add TEMP3 128
		geta[].ang TEMP4
		add TEMP4 gunsmoke_angle
		randvar TEMP5 16
		ifrnd 128 add TEMP4 TEMP5 else sub TEMP4 TEMP5
		rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6
		seta[RETURN].x TEMP5 
		seta[RETURN].y TEMP6
		geta[].z TEMP
		ifactor 10595 sub TEMP 3096 else sub TEMP 9596
		ifactor APLAYER
			{
			ifn ANGLE 0 sub TEMP 12896
			getp[].horiz TEMP2
			sub TEMP2 100
			mulvar TEMP2 14
			sub TEMP TEMP2
			}
		seta[RETURN].z TEMP
	}
ends

state spawn_gunsmoke_z
ife PERFMODE 1
	{
		ifinwater espawn WATERBUBBLE else espawn GUNSMOKE
		geta[].x TEMP
		geta[].y TEMP2
		set TEMP3 TEMP
		add TEMP3 128
		geta[].ang TEMP4
		add TEMP4 gunsmoke_angle
		randvar TEMP5 16
		ifrnd 128 add TEMP4 TEMP5 else sub TEMP4 TEMP5
		rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6
		seta[RETURN].x TEMP5 
		seta[RETURN].y TEMP6
		geta[].z TEMP
		sub TEMP gunsmoke_z
		ifactor APLAYER
			{
			ifn ANGLE 0 sub TEMP 12896
			getp[].horiz TEMP2
			sub TEMP2 100
			mulvar TEMP2 14
			sub TEMP TEMP2
			}
		seta[RETURN].z TEMP
	}
ends

defstate spawn_enemy_ARFLASH
ifrnd 64 espawn 16116
else ifrnd 64 espawn 16117
else ifrnd 64 espawn 16118
else ifrnd 64 espawn 16119
else ifrnd 64 espawn 16120
else espawn 16121
ends

defstate spawn_muzzleflash // spawn the muzzleflash first, then run this state
ife PERFMODE 1
	{
		geta[].x TEMP
		geta[].y TEMP2
		set TEMP3 TEMP
		add TEMP3 256
		geta[].ang TEMP4
		set TEMP6 gunsmoke_angle
		divvar TEMP6 2
		ifactor LPOWERSUIT add TEMP4 256 else
			{
			add TEMP4 TEMP6
			randvar TEMP5 8
			ifrnd 128 add TEMP4 TEMP5 else sub TEMP4 TEMP5
			}
		rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6
		seta[RETURN].x TEMP5 
		seta[RETURN].y TEMP6
		geta[].z TEMP
		sub TEMP gunsmoke_z
		ifactor APLAYER
			{
			ifn ANGLE 0 sub TEMP 12896
			getp[].horiz TEMP2
			sub TEMP2 100
			mulvar TEMP2 14
			sub TEMP TEMP2
			}
		seta[RETURN].z TEMP
	}
ends

defstate gun_pushback
geta[].xvel TEMP4
ifl TEMP4 40
	{
			getp[].ang knockbackang
			cos xvel knockbackang
			sin yvel knockbackang
			ifp pducking div gun_pushback_power 2
			mulvarvar xvel gun_pushback_power
			mulvarvar yvel gun_pushback_power
			getp[].posxv TEMP
			add xvel TEMP
			setp[].posxv xvel
			getp[].posyv TEMP
			add yvel TEMP
			setp[].posyv yvel
	}
ends

// HEAVYARMOUR
action JHEAVYSPRITE 0
action RHEAVYSPRITE 762
action SHEAVYSPRITE 1151
action RNHEAVYSPRITE 1631
action GHEAVYSPRITE 1400

defstate quikget
ife camerasprite -1 // Don't play pickup sounds if playing a cutscene
  {
  ifactor AMULET globalsound GET_POWERUP
  else ifactor MEGASPHERE globalsound GET_POWERUP
  else ifactor SWORD_RAMPAGE globalsound GET_POWERUP
  else ifactor COOKIE globalsound GET_COOKIE
  else ifactor SHIELD state ARMOURPICKUPSOUNDS
  else ifactor HEAVYARMOUR state ARMOURPICKUPSOUNDS
  // ammo
  else ifactor AMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound AMMO_PICK }
  else ifactor SHOTGUNAMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound AMMO_PICK }
  else ifactor BATTERYAMMO globalsound AMMO_PICK
  else ifactor RPGAMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound BIG_AMMO }
  else ifactor CRYSTALAMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound BIG_AMMO }
  else ifactor HBOMBAMMO globalsound AMMO_PICK
  else ifactor DEVISTATORAMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound BIG_AMMO }
  else ifactor FREEZEAMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound BIG_AMMO }
  else ifactor GROWAMMO { ife CHAR 4 globalsound GET_MAGIC else globalsound BIG_AMMO }
  // special ammo
  else ifactor SILVERAMMO_DRUM { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor SILVER_CROSSBOW_BOLTS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor EXPL_SHELLS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FORTYMM_NADES { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FORTYMM_CASELESS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FORTYMM_SLUGS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FORTYMM_ELECTRO { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FORTYMM_CRYO { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FORTYMM_SHELLS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor FLECHETE_SHELLS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor TESLA_AMMO_SPRITE { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor MICRO_TORPEDO_PACK { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor MAGNUM_SHELLS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor DRAGONS_SHELLS { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor HEAT_SEEK_CARD_PICKUP { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor ATOMIC_BOMB_PICKUP { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  else ifactor DUP_MISSILES_PICKUP { globalsound SPECIAL_AMMO set PLAYER_VOICEOVER 23 }
  // keys
  else ifactor FLAMEKEY globalsound GET_OLD_KEY
  else ifactor SPIDERKEY globalsound GET_OLD_KEY
  else ifactor DAGGERKEY globalsound GET_OLD_KEY
  else ifactor MOONKEY globalsound GET_OLD_KEY
  else ifactor SKULLKEY globalsound GET_OLD_KEY 
  else ifactor EYEKEY globalsound GET_OLD_KEY
  else ifactor GENERICKEY globalsound GET_GEN_KEY
  else ifactor NORMAL_KEY1 globalsound GET_GEN_KEY
  else ifactor NORMAL_KEY2 globalsound GET_GEN_KEY
  else ifactor NORMAL_KEY3 globalsound GET_GEN_KEY
  else ifactor NORMAL_KEY4 globalsound GET_GEN_KEY
  else ifactor NORMAL_KEY5 globalsound GET_GEN_KEY
  else ifactor ACCESSCARD globalsound GET_KEYCARD
  else ifactor ACCESSCARD2 globalsound GET_KEYCARD
  else ifactor SW_TECHCARD globalsound GET_KEYCARD
  else ifactor RUNEKEY globalsound GET_KEYCARD
  else ifactor BLUEPLUG globalsound GET_KEYCARD
  else ifactor REDPLUG globalsound GET_KEYCARD
  else ifactor YELLOWPLUG globalsound GET_KEYCARD
  else ifactor SW_OLDKEY globalsound GET_SW_KEY
  else ifactor ABYSS_KEY globalsound GET_OLD_KEY
  else ifactor SCARABKEY globalsound SCARAB_KEY
  else ifactor FIRE_ARMOUR globalsound BARMOUR_PICK
  else ifactor SPIRIT_ARMOUR globalsound BARMOUR_PICK
  else ifactor SUPER_ARMOUR globalsound BARMOUR_PICK
  // quest items
  else ifactor BLOODCHALICE globalsound QUEST_ITEM
  else ifactor SOULBOX globalsound QUEST_ITEM
  else ifactor SKULLCROWN globalsound QUEST_ITEM
  else ifactor DARKBOOK globalsound QUEST_ITEM
  else ifactor BROKENTORCH globalsound QUEST_ITEM
  else ifactor 17031 globalsound QUEST_ITEM
  // generic items
  else ife CHAR 0 globalsound JGETITEM
  else ife CHAR 2 globalsound MGETITEM
  else ife CHAR 3 globalsound RGETITEM
  else ife CHAR 4 globalsound SGETITEM
  else ife CHAR 5 globalsound RNGETITEM
  else ife CHAR 6 globalsound GGETITEM
  else ife CHAR 7 globalsound MSGETITEM
  else ife CHAR 9 globalsound SGETITEM
  else ife CHAR 10 globalsound RGETITEM
  else ife CHAR 11 globalsound MGETITEM
  else ife CHAR 12 globalsound JGETITEM
  else ife CHAR 13 globalsound MC_GETITEM
  else ife CHAR 14 globalsound SF_GETITEM
  else ife CHAR 15 globalsound MC_GETITEM
  else globalsound DUKE_GET
  
  ifactor MEGASPHERE palfrom 60 0 60 0
  ifactor AMULET palfrom 20 0 60 0
  }
  killit
ends

state getcode
  ifrespawn
  {
  ifspawnedby 10570 killit
    move RESPAWN_ACTOR_FLAG
    spawn RESPAWNMARKERRED
	ife camerasprite -1  // Don't play pickup sounds if playing a cutscene
		{
		ife CHAR 0 globalsound JGETITEM
		  else ife CHAR 2 globalsound MGETITEM
		  else ife CHAR 3 globalsound RGETITEM
		  else ife CHAR 4 globalsound SGETITEM
		  else ife CHAR 5 globalsound RNGETITEM
		  else ife CHAR 6 globalsound GGETITEM
		  else ife CHAR 7 globalsound MSGETITEM
		  else ife CHAR 9 globalsound SGETITEM
		  else ife CHAR 10 globalsound JGETITEM
		  else ife CHAR 11 globalsound MGETITEM
		  else 
		globalsound DUKE_GET
		}
    cstat 32768
  }
  else
    state quikget
ends


defstate respawnit
  ifcount RESPAWNITEMTIME
  {
    spawn TRANSPORTERSTAR
    move 0
    cstat 0
    sound RESPAWN_SOUND
  }
ends

defstate quikweaponget
ife CURWEAP 0 setp[].weapon_pos 10
ife camerasprite -1 // Don't play pickup sounds if playing a cutscene
ife cuts_txt -1
ife PLAYER_VOICEOVER 0
{
  ifactor SWORDSPRITE globalsound DRAW_SWORD2 else 
  ifactor MOPSPRITE globalsound WOOD_IMPACT else
  ifactor BLOODY_MOPSPRITE globalsound WOOD_IMPACT else
  globalsound GET_GUN
  ifactor CHAINSAWSPRITE
   ife CHAR 9
    {
		ife gp_subt 0
			{
			qputs 7500 ^54???:  ^0Time to shake hands with the great communicator!
			set gp_subt 95
			}
		screensound C_CHAINS1
	}
  ifactor CHAINGUNSPRITE
	{
	ife CHAR 13 
		ifrnd 196 
		{
		ife gp_subt 0
			{
			qputs 7500 ^8Micky:  ^0Time to make Swiss cheese.
			set gp_subt 60
			}
		screensound MC_SWISS
		}
	}
  ifactor FREEZESPRITE
	{
	ife CHAR 13 ifrnd 196 
		{
		ife gp_subt 0
			{
			qputs 7500 ^8Micky:  ^0let's go throw a shrimp on the barby.
			set gp_subt 60
			}
		screensound MC_BARBY
		}
	}
   ifactor SHRINKERSPRITE
   {
   ife CHAR 13 ifrnd 196 
	{
		ife gp_subt 0
			{
			qputs 7500 ^8Micky:  ^0Time for a field test.
			set gp_subt 60
			}
	screensound MC_FIELDTEST
	}
   }
  ifspawnedby APLAYER nullop else ife gp_subt 0 state randgetweapsnds
}
  ifgotweaponce 1
    break
  ifmove RESPAWN_ACTOR_FLAG break
  ifrespawn
  {
    ifspawnedby 10570 killit
  ifspawnedby APLAYER killit
    move RESPAWN_ACTOR_FLAG
    spawn RESPAWNMARKERRED
    cstat 32768
  }
  else
  killit
ends

defstate getweaponcode
ife camerasprite -1 // Don't play pickup sounds if playing a cutscene
ife cuts_txt -1
ife PLAYER_VOICEOVER 0
	{
	  ifactor SWORDSPRITE globalsound DRAW_SWORD2 else 
	  ifactor MOPSPRITE globalsound WOOD_IMPACT else
	  ifactor BLOODY_MOPSPRITE globalsound WOOD_IMPACT else
	  globalsound GET_GUN
  ifactor CHAINGUNSPRITE
	{
	ife CHAR 13 
		ifrnd 196 
		{
		ife gp_subt 0
			{
			qputs 7500 ^8Micky:  ^0Time to make Swiss cheese.
			set gp_subt 60
			}
		screensound MC_SWISS
		}
	}
  ifactor FREEZESPRITE
	{
	ife CHAR 13 ifrnd 196 
		{
		ife gp_subt 0
			{
			qputs 7500 ^8Micky:  ^0Let's go throw a shrimp on the barby.
			set gp_subt 60
			}
		screensound MC_BARBY
		}
	}
   ifactor SHRINKERSPRITE
	   {
	   ife CHAR 13 ifrnd 196 
			{
				ife gp_subt 0
					{
					qputs 7500 ^8Micky:  ^0Time for a field test.
					set gp_subt 60
					}
			screensound MC_FIELDTEST
			}
	   }
	  ifspawnedby APLAYER nullop else state randgetweapsnds
	}
  ifgotweaponce 1
    break
  ifmove RESPAWN_ACTOR_FLAG break
  ifrespawn
  {
    ifspawnedby 10570 killit
  ifspawnedby APLAYER killit
    move RESPAWN_ACTOR_FLAG
    spawn RESPAWNMARKERRED
    cstat 32768
  }
  else
  killit
ends

defstate checkenemybloodpools
ifactor CULTIST spawn 7991 
else ifactor NEWBEAST spawn 4679
else spawn BLOODPOOL
ends

defstate trigger_showoff
ife camerasprite -1
 ife sprite[].htowner PLAYER_IDENTITY
  ife cuts_txt -1
	{
	palfrom 32 32 32 32 
	set SLO_MO_SHOWOFF 40 
	screensound START_SLOW 
	spawn FRAMEEFFECT1
	}
ends

defstate standard_jibs
set HEADSHOT 0
ifactor NEWBEAST spritepal 6
  guts JIBS2 1
  ifactor LIZTROOP nullop else guts JIBS3 2
  ifmultiplayer 
  {
  guts JIBS4 1
  guts JIBS5 1
  guts JIBS6 1
  }  
  else
  {
  guts JIBS4 3
  guts JIBS5 2
  guts JIBS6 3
  ifactor SORCERER nullop else {
     shoot NJIB
     shoot NJIB
  }
  ifrnd 6 guts JIBS1 1
  }
  ifrnd 96 state checkenemybloodpools
  ifrnd 16 ifcansee ife SLO_MO_SHOWOFF 0 state trigger_showoff
  ife FAKE_SHRUNK 1 set force_taunt 13 else state jib_sounds
ends

// =======================================================================Animations

action BOAT_USE 9810 1 5 1 10
action FIGHTER_USE 13937 1 1 1 10
action HOVERTANK_USE 20192 1 1 1 10
action VR_TANK_USE 21028 1 1 1 10

action PMECH_IDLE 10499 1 1 1 10

action PEXPLODE   106   5   1   1   10
action PEXPLODEAD   113   1   1

// Merlijn

action PFIRE 9075 3 5 1 20
action PJPHOUVER  4995   1   5   1
action PSTAND 4995 1 5 1 1
action PGROWING 4995 1 5 1 1
action PWALK 4995 4 5 1 16
action PRUN 4995 4 5 1 10
action PJUMPING 7820 2 5 1 30
action PFALLING   7825   1   5
action PDUCKING   7840   1   5
action PCRAWLING  7845   2   5   1   20
action PAKICKING  7830   2   5   1   25
action PFLINTCHING  5015  1   1   1   10
action PTHROWNBACK  5015  5   1   1   18
action PFROZEN     4995  1   5
action PLYINGDEAD   5019  1   1
action PSWIMMINGGO   7855   1   5   1   10
action PSWIMMING   7855   2   5   1   13
action PSWIMMINGWAIT 7855   1   5   1   13
action PTREDWATER  7855   2   5   1   17

action P_ONBIKE 16065 1 5 1 0

// Zaxtor

action ZSTAND 4096 1 5 1 1
action ZGROW 4096 1 5 1 1
action ZJPHOUVER  4111   1   5   1
action ZWALK    4116   4   5   1   16
action ZRUN     4116   4   5   1   10
action ZJUMPING   4146   4   5   1   30
action ZFALLING   4156   1   5
action ZDUCKING   4182   1   5
action ZCRAWLING  4187   2   5   1   20
action ZAKICKING  4136   2   5   1   25
action ZFLINTCHING  4200  1   1   1   10
action ZTHROWNBACK  4200  5   1   1   18
action ZFROZEN     0  1   5
action ZLYINGDEAD   4205  1   1
action ZSWIMMINGGO   4161   1   5   1   10
action ZSWIMMING   4161   4   5   1   13
action ZSWIMMINGWAIT 4161   1   5   1   13
action ZTREDWATER  4161   2   5   1   17

action Z_ONBIKE 16085 1 5 1 0

// James

action JGROWING 3840 1 5 1 1
action JSTAND 3840 1 5 1 1
action JJPHOUVER  3900   1   5   1
action JWALK    3860   4   5   1   16
action JRUN     3860   4   5   1   10
action JJUMPING   3890   3   5   1   30
action JFALLING   3900   1   5
action JDUCKING   3926   1   5
action JCRAWLING  3931   2   5   1   20
action JAKICKING  3880   2   5   1   25
action JFLINTCHING  3946  1   1   1   10
action JTHROWNBACK  3946  5   1   1   18
action JFROZEN     3840  1   5
action JLYINGDEAD   3953  1   1
action JSWIMMINGGO   3905   1   5   1   10
action JSWIMMING   3905   4   5   1   13
action JSWIMMINGWAIT 3905   1   5   1   13
action JTREDWATER  3905   2   5   1   17

action J_ONBIKE 16050 1 5 1 0

// James bionic arm

action J2GROWING 24320 1 5 1 1
action J2STAND 24235 1 5 1 1
action J2JPHOUVER  24260   1   5   1
action J2WALK    24240   4   5   1   16
action J2RUN     24240   4   5   1   10
action J2JUMPING   24260   2   5   1   30
action J2FALLING   24265   1   5
action J2DUCKING   24270   1   5
action J2CRAWLING  24275   2   5   1   20
action J2AKICKING  24310   2   5   1   25
action J2FLINTCHING  24320  1   1   1   10
action J2THROWNBACK  24325  5   1   1   18
action J2FROZEN     24320  1   1
action J2LYINGDEAD   24325  1   1
action J2SWIMMINGGO   24300   1   5   1   10
action J2SWIMMING   24300   2   5   1   13
action J2SWIMMINGWAIT 24300   1   5   1   13
action J2TREDWATER  24300   2   5   1   17

action J2_ONBIKE 16100 1 5 1 0


// Highwire

action RGROWING 4608 1 5 1 1
action RSTAND 4608 1 5 1 1
action RJPHOUVER  4643   1   5   1
action RWALK    4623   4   5   1   16
action RRUN     4623   4   5   1   10
action RJUMPING   4643   1   5   1   30
action RFALLING   4653   1   5
action RDUCKING   4694   1   5
action RCRAWLING  4699   2   5   1   20
action RAKICKING  4658   2   5   1   25
action RFLINTCHING  4714  1   1   1   10
action RTHROWNBACK  4714  5   1   1   18
action RFROZEN     4608  1   5
action RLYINGDEAD   4721  1   1
action RSWIMMINGGO   7865   1   5   1   10
action RSWIMMING   7865   2   5   1   13
action RSWIMMINGWAIT 7865   1   5   1   13
action RTREDWATER  7865   2   5   1   17

action H_ONBIKE 16045 1 5 1 0

// Rusty Nails

action RNGROWING 5251 1 5 1 1
action RNSTAND 5251 1 5 1 1
action RNJPHOUVER  5286   1   5   1
action RNWALK    5251   4   5   1   16
action RNRUN     5251   4   5   1   10
action RNJUMPING   5281   2   5   1   30
action RNFALLING   5286   1   5
action RNDUCKING   5325   1   5
action RNCRAWLING  5330   4   5   1   20
action RNAKICKING  5256   2   5   1   25
action RNFLINTCHING  5291  1   1   1   10
action RNTHROWNBACK  5291  5   1   1   18
action RNFROZEN     5251  1   5
action RNLYINGDEAD   5298  1   1
action RNSWIMMINGGO   5300   1   5   1   10
action RNSWIMMING   5300   4   5   1   13
action RNSWIMMINGWAIT 5300   1   5   1   13
action RNTREDWATER  5300   2   5   1   17

action RN_ONBIKE 16040 1 5 1 0

action RN_ONLADDER 9727 1 5 1 1
action RN_CLIMB_LADDER 9727 2 5 1 16


// Sang

action SSTAND 4931 1 5 1 1
action SFIRE 8877 2 5 1 1
action SGROW 4931 1 5 1 1
action SWALK 4931 4 5 1 16
action SJPHOUVER  16160   1   5   1
action SRUN 4931 4 5 1 10
action SJUMPING 16155 1 5 1 30
action SFALLING   16160   1   5
action SDUCKING   16165   1   5
action SCRAWLING  16170   2   5   1   20
action SAKICKING  16150   2   5   1   25
action SFLINTCHING  4951  1   1   1   10
action STHROWNBACK  4951  5   1   1   18
action SFROZEN     4931  1   5
action SLYINGDEAD   4958  1   1
action SSWIMMINGO   16180   1   5   1   10
action SSWIMMING   16180   1   5   1   13
action SSWIMMINGWAIT 16180   1   5   1   13
action STREDWATER  16180   1   5   1   17

action S_ONBIKE 16055 1 5 1 0

// Post Le Sang death

action S2STAND 22561 1 5 1 1
action S2FIRE 22403 2 5 1 1
action S2GROW 22403 1 5 1 1
action S2WALK 22403 4 5 1 16
action S2JPHOUVER  22566   1   5   1
action S2RUN 22403 4 5 1 10
action S2JUMPING 22403 4 5 1 30
action S2FALLING   22566   1   5
action S2DUCKING   22571   1   5
action S2CRAWLING  22576   2   5   1   20
action S2AKICKING  22403   2   5   1   25
action S2FLINTCHING  22423  1   1   1   10
action S2THROWNBACK  22423  5   1   1   18
action S2FROZEN     22423  1   1
action S2LYINGDEAD   22403  1   1
action S2SWIMMINGO   22596   1   5   1   10
action S2SWIMMING   22596   4   5   1   13
action S2SWIMMINGWAIT 22596   1   5   1   13
action S2TREDWATER  22596   2   5   1   17

action S2_ONBIKE 16070 1 5 1 0

// Geoffrey

action GSTAND 5276 1 5 1 1
action GGROWING 5180 1 5 1 1
action GWALK 5025 4 5 1 16
action GRUN 5025 4 5 1 10
action GJPHOUVER  5025   1   5   1
action GJUMPING 5180 2 5 1 30
action GFALLING   5185   1   5
action GDUCKING   5190   1   5
action GCRAWLING  5195   2   5   1   20
action GAKICKING  5025   2   5   1   25
action GFLINTCHING  5045  1   1   1   10
action GTHROWNBACK  5045  5   1   1   18
action GFROZEN     5025  1   5
action GLYINGDEAD   5050  1   1
action GSWIMMINGGO   9727   1   5   1   10
action GSWIMMING   9727   2   5   1   13
action GSWIMMINGWAIT 9727   1   5   1   13
action GTREDWATER  9727   2   5   1   17

action G_ONBIKE 16075 1 5 1 0

// Mikko

action MSTAND 5527 1 5 1 1
action MGROWING 5547 1 5 1 1
action MWALK 5507 4 5 1 16
action MRUN 5507 4 5 1 10
action MJPHOUVER  5507   1   5   1
action MJUMPING 5539 1 5 1 30
action MFALLING   5544  1   5
action MDUCKING   5738   1   5
action MCRAWLING  5743   2   5   1   20
action MAKICKING  9716   2   5   1   25
action MFLINTCHING  5532  1   1   1   10
action MTHROWNBACK  5532  6   1   1   10
action MFROZEN     5547  1   5
action MLYINGDEAD   5546  1   1
action MSWIMMINGGO   12994   1   5   1   10
action MSWIMMING   12994   2   5   1   13
action MSWIMMINGWAIT 12994   1   5   1   13
action MTREDWATER  12994   2   5   1   17

action M_ONBIKE 16080 1 5 1 0

// Cultist

action PCSTAND 6327 1 5 1 1
action PCFIRE 6327 2 5 1 1
action PCGROWING 6275 1 5 1 1
action PCWALK 6275 5 5 1 16
action PCRUN 6275 5 5 1 10
action PCJPHOUVER  6275   1   5   1
action PCJUMPING 6301 4 5 1 30
action PCFALLING   6321   1   5
action PCDUCKING   13860   1   5
action PCCRAWLING  13840   3   5   1   20
action PCAKICKING  6275   2   5   1   25
action PCFLINTCHING  6364  1   5   1   10
action PCTHROWNBACK  6370  9   1   1   10
action PCFROZEN     6370  1   5
action PCLYINGDEAD   6377  1   1
action PCSWIMMINGGO   6275   1   5   1   10
action PCSWIMMING   6275   5   5   1   13
action PCSWIMMINGWAIT 6275   1   5   1   13
action PCTREDWATER  6275   2   5   1   17

action PC_ONBIKE 16040 1 5 1 0

// BOMBSHELL

action EAF_GROWING 8960 1 5 1 1
action EAF_STAND 8960 1 5 1 1
action EAF_JPHOUVER  8518   1   5   1
action EAF_WALK    8498   4   5   1   16
action EAF_RUN     8498   4   5   1   10
action EAF_JUMPING   8965   3   5   1   30
action EAF_FALLING   8975   1   5
action EAF_DUCKING   8970   1   5
action EAF_CRAWLING  9737   2   5   1   20
action EAF_AKICKING  8531   2   5   1   25
action EAF_FLINTCHING  8524  1   1   1   10
action EAF_THROWNBACK  8524  5   1   1   18
action EAF_FROZEN     8498  1   5
action EAF_LYINGDEAD   8529  1   1
action EAF_SWIMMINGGO   8498   1   5   1   10
action EAF_SWIMMING   8498   4   5   1   13
action EAF_SWIMMINGWAIT 8498   1   5   1   13
action EAF_TREDWATER  8498   2   5   1   17

action EAF_ONBIKE 16095 1 5 1 0

// Maarten

action M2STAND 24875 1 5 1 1
action M2FIRE 24915 2 5 1 20
action M2GROWING 24990 1 5 1 1
action M2WALK 24880 4 5 1 16
action M2RUN 24880 4 5 1 10
action M2JPHOUVER  24930   1   5   1
action M2JUMPING 24930 1 5 1 30
action M2FALLING   24925  1   5
action M2DUCKING   24945   1   5
action M2CRAWLING  24950   4   5   1   20
action M2AKICKING  24935   2   5   1   25
action M2FLINTCHING  24990  1   1   1   10
action M2THROWNBACK  24990  6   1   1   10
action M2FROZEN     24990  1   5
action M2LYINGDEAD   24995  1   1
action M2SWIMMINGGO   24970   1   5   1   10
action M2SWIMMING   24970   2   5   1   13
action M2SWIMMINGWAIT 24970   1   5   1   13
action M2TREDWATER  24970   2   5   1   17

action M2_ONBIKE 16040 1 5 1 0

// JANE

action LSTAND 11396 1 5 1 1
action LGROW 11396 1 5 1 1
action LJPHOUVER  11436   1   5   1
action LWALK    11406   4   5   1   16
action LRUN     11406   4   5   1   10
action LJUMPING   11436   4   5   1   30
action LFALLING   11446   1   5
action LDUCKING   11451   1   5
action LCRAWLING  11451   3   5   1   20
action LAKICKING  11426   2   5   1   25
action LFLINTCHING  11466  1   1   1   10
action LTHROWNBACK  11466  5   1   1   18
action LFROZEN     11396  1   5
action LLYINGDEAD   11471  1   1
action LSWIMMINGGO   13059   1   5   1   10
action LSWIMMING   13059   2   5   1   13
action LSWIMMINGWAIT 13059   1   5   1   13
action LTREDWATER  13059   2   5   1   17

action L_ONBIKE 16040 1 5 1 0

action L_ONLADDER 11406 1 5 1 1
action L_CLIMB_LADDER 11406 2 5 1 16

// Micky

action MC_STAND 14984 1 5 1 1
action MC_GROWING 14984 1 5 1 1
action MC_WALK 14989 4 5 1 16
action MC_RUN 14989 4 5 1 10
action MC_JPHOUVER  16120   1   5   1
action MC_JUMPING 16120 2 5 1 30
action MC_FALLING   16125   1   5
action MC_DUCKING   15020   1   5
action MC_CRAWLING  16130   2  5   1   20
action MC_AKICKING  16110   2   5   1   25
action MC_FLINTCHING  15014  1   1   1   10
action MC_THROWNBACK  15014  6   1   1   18
action MC_FROZEN     15014  1   5
action MC_LYINGDEAD   15019  1   1
action MC_SWIMMINGGO   16140   2   5   1   10
action MC_SWIMMING   16140   2   5   1   13
action MC_SWIMMINGWAIT 16140   2   5   1   13
action MC_TREDWATER  16140   2   5   1   17

action MC_ONBIKE 16060 1 5 1 0

// Micky no suit

action MCNS_STAND 17724 1 5 1 1
action MCNS_GROW 17724 1 5 1 1
action MCNS_JPHOUVER  17724   1   5   1
action MCNS_WALK    17729   4   5   1   16
action MCNS_RUN     17729   4   5   1   10
action MCNS_JUMPING   17729   4   5   1   30
action MCNS_FALLING   17724   1   5
action MCNS_DUCKING   17724   1   5
action MCNS_CRAWLING  17729   4   5   1   20
action MCNS_AKICKING  17729   4   5   1   25
action MCNS_FLINTCHING  17724  1   1   1   10
action MCNS_THROWNBACK  17724  5   1   1   18
action MCNS_FROZEN     17724  1   5
action MCNS_LYINGDEAD   17724  1   1
action MCNS_SWIMMINGGO   17724   1   5   1   10
action MCNS_SWIMMING   17729   4   5   1   13
action MCNS_SWIMMINGWAIT 17729   1   5   1   13
action MCNS_TREDWATER  17729   4   5   1   17

// Snowfall

action SF_STAND 19331 1 5 1 1
action SF_WALK 19336 4 5 1 16

action SF_GROWING 19331 1 5 1 1
action SF_RUN 19336 4 5 1 10
action SF_JPHOUVER  19361   1   5   1
action SF_JUMPING 19356 1 5 1 30
action SF_FALLING   19366   1   5
action SF_DUCKING   19488   1   5
action SF_CRAWLING  19488   4   5   1   20
action SF_AKICKING  19528   1   5   1   25
action SF_FLINTCHING  19331  1   1   1   10
action SF_THROWNBACK  19477  5   1   1   18
action SF_FROZEN     19477  1   5
action SF_LYINGDEAD   19481  1   1
action SF_SWIMMINGGO   19508   1   5   1   10
action SF_SWIMMING  19508   4   5   1   13
action SF_SWIMMINGWAIT 19508   1   5   1   13
action SF_TREDWATER  19508   4   5   1   17

action SF_ONBIKE 16090 1 5 1 0

// Cassandra

action CSTAND 16520 1 5 1 1
action CGROW 16520 1 5 1 1
action CWALK 16525 4 5 1 16
action CJPHOUVER  16520   1   5   1
action CRUN 16525 4 5 1 10
action CJUMPING 16525 4 5 1 30
action CFALLING   16525   1   5
action CDUCKING   16545   1   5
action CCRAWLING  16545   4   5   1   20
action CAKICKING  16525   2   5   1   25
action CFLINTCHING  16525  1   1   1   10
action CTHROWNBACK  16525  5   1   1   18
action CFROZEN     16525  1   5
action CLYINGDEAD   16525  1   1
action CSWIMMINGO   16525   1   5   1   10
action CSWIMMING   16525   4   5   1   13
action CSWIMMINGWAIT 16525   1   5   1   13
action CTREDWATER  16525   2   5   1   17

// Civilian 
 
action CIV_ASTAND 14194 1 5 1 0
action CIV_AWALK 13995 4 5 1 16
action CIV_ARUN 13995 4 5 1 10

// ENVIRO_SUIT

action ES_STAND 12272 1 5 1 1
action ES_GROWING 12318 1 5 1 1
action ES_WALK 12318 4 5 1 16
action ES_RUN 12318 4 5 1 10
action ES_JPHOUVER  12318   1   5   1
action ES_JUMPING 12318 4 5 1 30
action ES_FALLING   12318   1   5
action ES_DUCKING   12338   1   5
action ES_CRAWLING  12338   2   5   1   20
action ES_AKICKING  12318   2   5   1   25
action ES_FLINTCHING  12348  1   1   1   10
action ES_THROWNBACK  12348  5   1   1   18
action ES_FROZEN     12318  1   5
action ES_LYINGDEAD   12352  1   1
action ES_SWIMMINGGO   12318   1   5   1   10
action ES_SWIMMING   12318   4   5   1   13
action ES_SWIMMINGWAIT 12318   1   5   1   13
action ES_TREDWATER  12318   2   5   1   17

// JUGGERNAUT SUIT

action JG_STAND 22537 1 5 1 1
action JG_FIRE 22537 2 5 1 1
action JG_GROWING 22547 1 5 1 1
action JG_WALK 22517 4 5 1 24
action JG_RUN 22517 4 5 1 20
action JG_JPHOUVER  22517   1   5   1
action JG_JUMPING 22517 4 5 1 30
action JG_FALLING   22517   1   5
action JG_DUCKING   22517   1   5
action JG_CRAWLING  22517   2   5   1   20
action JG_AKICKING  22517   2   5   1   25
action JG_FLINTCHING  22547  1   1   1   10
action JG_THROWNBACK  22547  5   1   1   18
action JG_FROZEN     22547  1   5
action JG_LYINGDEAD   22551  1   1
action JG_SWIMMINGGO   22517   1   5   1   10
action JG_SWIMMING   22517   4   5   1   13
action JG_SWIMMINGWAIT 22517   1   5   1   13
action JG_TREDWATER  22517   2   5   1   17

// SPACESUIT

action SS_STAND 21640 1 5 1 1
action SS_GROWING 21640 1 5 1 1
action SS_WALK 21645 4 5 1 16
action SS_RUN 21645 4 5 1 10
action SS_JPHOUVER  21665   1   5   1
action SS_JUMPING 21665 1 5 1 30
action SS_FALLING   21665   1   5
action SS_DUCKING   21670   1   5
action SS_CRAWLING  21688   2   5   1   20
action SS_AKICKING  21640   2   5   1   25
action SS_FLINTCHING  21640  1   1   1   10
action SS_THROWNBACK  21675  5   1   1   18
action SS_FROZEN     21640  1   5
action SS_LYINGDEAD   21679  1   1
action SS_SWIMMINGGO   21645   1   5   1   10
action SS_SWIMMING   21645   4   5   1   13
action SS_SWIMMINGWAIT 21645   1   5   1   13
action SS_TREDWATER  21645   2   5   1   17


defstate STOPSTEPSOUNDS
stopsound STEP1 stopsound STEP2 stopsound STEP3 stopsound STEP4 stopsound WOOD1 stopsound WOOD2 stopsound WOOD3 stopsound WOOD4 
stopsound TIN1 stopsound TIN2 stopsound TIN3 stopsound TIN4 stopsound GRATES1 stopsound GRATE2 stopsound GRATE3 stopsound GRATE4
stopsound GRASS1 stopsound GRASS2 stopsound GRASS3 stopsound GRASS4 stopsound TILE1 stopsound TILE2 stopsound TILE3 stopsound TILE4
stopsound CARPET1 stopsound CARPET2 stopsound CARPET3 stopsound CARPET4 stopsound SNOW1 stopsound SNOW2 stopsound SNOW3 stopsound SNOW4
stopsound DIRT1 stopsound DIRT2 stopsound DIRT3 stopsound DIRT4 stopsound SLOSH1 stopsound SLOSH2 stopsound SLOSH3 stopsound SLOSH4
stopsound CRETE1 stopsound CRETE2 stopsound CRETE3 stopsound CRETE4 stopsound CHAINLINK1 stopsound CHAINLINK2 stopsound CHAINLINK3
stopsound CHAINLINK4 stopsound GLASS1 stopsound GLASS2S stopsound GLASS3S stopsound GLASS4 stopsound CARDBOARD1 stopsound CARDBOARD2 
stopsound CARDBOARD3 stopsound CARDBOARD4 stopsound MUD1 stopsound MUD2 stopsound MUD3 stopsound MUD4 stopsound LEAF1 stopsound LEAF2
stopsound LEAF3 stopsound LEAF4 stopsound PLANK1 stopsound PLANK2 stopsound PLANK3 stopsound PLANK4 stopsound DUCT1 stopsound DUCT2
stopsound DUCT3 stopsound DUCT4 stopsound FORCEF_STEP1 stopsound FORCEF_STEP2 stopsound FORCEF_STEP3 stopsound FORCEF_STEP4
stopsound ICE_1 stopsound ICE_2 stopsound ICE_3 stopsound ICE_4 stopsound SAND_1 stopsound SAND_2 stopsound SAND_3 stopsound SAND_4
stopsound GRAVEL_1 stopsound GRAVEL_2 stopsound GRAVEL_3 stopsound GRAVEL_4 stopsound BONE1 stopsound BONE2 stopsound COINS_1 stopsound COINS_2
ends


defstate landsounds
add WEAPSWAYY 10
ifl CHOKE 1
ifl FCHOKE 1
{
getp[].hard_landing TEMP
ife CHAR 0
	{
	ifg TEMP 3 soundonce JLAND_HEAVY else soundonce JLAND 
	}
else
ife CHAR 2
	{
	ifg TEMP 3
		{
		soundonce LANDMETAL
		soundonce LAND_HEAVY
		}
	else
		{
		ifrnd 64 sound H_ARMOUR_S1 else
		ifrnd 128 sound H_ARMOUR_S2 
		}
	}
else
ifg TEMP 3 
	{ 
	soundonce LAND_HEAVY 
	ife CHAR 5 soundonce RN_HLAND
	ife CHAR 9 soundonce CULTIST_HLAND 
	ife CHAR 10 sound BS_HARDL 
	}
ife CHAR 3 ife CURWEAP 9 ife SPECIALIST_EQUIPMENT[35] 2 { ifg GUNMAG 3 soundonce CHAIN_RATTLE }
ife CHAR 12 ife CURWEAP 9 { getp[].ammo_amount 9 TEMP ifg TEMP 5 soundonce CHAIN_RATTLE }
ife CURWEAP 0 ife temp_weapon 27 { getp[].ammo_amount 0 TEMP ifg TEMP 5 soundonce CHAIN_RATTLE }
getp[].spritebridge TEMP2
ife STEPSOUNDFX 1 soundonce LANDWOOD else
ife STEPSOUNDFX 2 soundonce LANDMETAL else
ife STEPSOUNDFX 3 soundonce LANDMETAL else
ife STEPSOUNDFX 4 soundonce LANDGRASS else
ife STEPSOUNDFX 6 soundonce LANDCARPET else
ife STEPSOUNDFX 7 nullop else
ife STEPSOUNDFX 8 soundonce LANDSNOW else
ife STEPSOUNDFX 9 { ifonwater soundonce WATER_SPLASH else soundonce LANDWATER spawn 8435 } else
ife STEPSOUNDFX 10 soundonce LANDDIRT else
ife STEPSOUNDFX 12 soundonce LAND_MUD else
ife STEPSOUNDFX 13 soundonce LAVA_SPLASH else
ife STEPSOUNDFX 14 { soundonce LANDMETAL soundonce LANDWATER } else
ife STEPSOUNDFX 15 { soundonce LANDNORMAL soundonce LANDWATER } else
ife STEPSOUNDFX 17 soundonce LANDCHAIN else
ife STEPSOUNDFX 18 soundonce LANDGLASS else
ife STEPSOUNDFX 19 soundonce LANDCARDB else
ife STEPSOUNDFX 20 soundonce LAND_MUD else
ife STEPSOUNDFX 21 soundonce LAND_MUD else
ife STEPSOUNDFX 22 soundonce LAND_LEAF else
ife STEPSOUNDFX 23 soundonce LAND_PLANK else
ife STEPSOUNDFX 24 soundonce LANDMETAL else
ife STEPSOUNDFX 25 sound FORCEF_LAND else
ife STEPSOUNDFX 26 soundonce LAND_ICE else
ife STEPSOUNDFX 27 soundonce LAND_GRAVEL else
ife STEPSOUNDFX 28 soundonce LANDDIRT else
ife STEPSOUNDFX 30 soundonce LAND_BONE else
ife STEPSOUNDFX 31 soundonce LAND_COINS else
ifonwater ife TEMP2 0 soundonce WATER_SPLASH else
	{
	ife FIRE_SUIT 1 soundonce LANDMETAL
	else ife JUGGERN_SUIT 1 soundonce LAND_HEAVY
	else ife CHAR 0 soundonce LANDNORMAL3
	else ife CHAR 3 soundonce LANDNORMAL2
	else ife CHAR 4 
		{
		ifand CHAR_APP 2 soundonce LANDNORMAL3 else
		soundonce LANDNORMAL2
		}
	else ife CHAR 5 soundonce LANDNORMAL3
	else ife CHAR 6 soundonce LANDNORMAL3
	else ife CHAR 9 soundonce LANDNORMAL2
	else ife CHAR 11 soundonce LANDNORMAL2
	else ife CHAR 12 soundonce LANDMETAL
	else ife CHAR 13 soundonce LANDNORMAL4
	else ife CHAR 14 soundonce LANDNORMAL4
	else ife CHAR 15 soundonce LANDNORMAL2
	else ife CHAR 20 soundonce LANDNORMAL2
	else soundonce LANDNORMAL
	}
}
ends

// ************************************** MERLIJN ANIMS     ANIMS******************************************************

defstate check_pstandard
  ifp pwalking
    action PWALK
  else
    ifp pkicking
      action PAKICKING
  else
    ifp prunning
      action PRUN
  else
    ifp pjumping
      action PJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action PDUCKING
ends

defstate MERLIJN_ANIMS

ifaction 0 ife CHARSELECT 0 action PSTAND
ife PLAYERONTHEBIKE 1 action P_ONBIKE

ife KICKBACKPIC 1 { ifaction PFIRE nullop else action PFIRE }

	ifaction P_ONBIKE
	ife PLAYERONTHEBIKE 0 action PSTAND

ifaction PFIRE
{
 ifactioncount 2
  action PSTAND
   break
}

  ifaction PFLINTCHING
  {
    ifactioncount 2
      action PSTAND
    break
  }

  ifinwater
  {
    ifaction PTREDWATER
    {
      ifp pwalking prunning
        action PSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action PTREDWATER
    else
    {
      ifaction PSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action PSWIMMINGWAIT
      }
      else
        ifaction PSWIMMINGWAIT
      {
        ifactioncount 2
          action PSWIMMINGGO
      }
      else
        ifaction PSWIMMINGGO
      {
        ifactioncount 2
          action PSWIMMING
      }
      else
        action PTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction PJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action PJPHOUVER
    break
  }
  else
  {
    ifaction PTREDWATER
      action PSTAND
    ifaction PSWIMMING
      action PSTAND
    ifaction PSWIMMINGWAIT
      action PSTAND
    ifaction PSWIMMINGGO
      action PSTAND
    ifaction PJPHOUVER
      action PFALLING
  }

  ifaction PFALLING
  {
    ifp ponground
      { action PSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_pstandard
    }
  }

  ifaction PDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action PCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action PCRAWLING
    }
    else
    {
      ifp pstanding
         action PSTAND
      else
        state check_pstandard
    }
  }

  else ifaction PCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action PCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action PDUCKING
    }
    else
    {
      ifp pstanding
       action PSTAND
      else
        state check_pstandard
    }
  }
  else
    ifgapzl 48
      action PDUCKING

  else
    ifaction PJUMPING
  {
    ifp ponground
       action PSTAND
    else
      ifactioncount 4
        ifp pfalling
          action PFALLING
  }

  ifp pfalling
    action PFALLING
  else
    ifaction PSTAND
      state check_pstandard
  else
    ifaction PAKICKING
  {
    ifactioncount 2
      action PSTAND
    break
  }
  else
    ifaction PWALK
  {
    ifp pfalling
      action PFALLING
    else
      ifp pstanding
        action PSTAND
    else
      ifp prunning
        action PRUN
    else
      ifp pjumping
        action PJUMPING
    else
      ifp pducking
        action PDUCKING
  }

  else
    ifaction PRUN
  {
    ifp pstanding
       action PSTAND
    else
      ifp pwalking
        action PWALK
    else
      ifp pjumping
        action PJUMPING
    else
      ifp pducking
        action PDUCKING
  }
  ends
  

  


// **************************************J A M E S    S T A N F I E L D     ANIMS******************************************************

defstate check_jstandard
  ifp pwalking
    action JWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action JAKICKING
  else
    ifp prunning
      action JRUN
  else
    ifp pjumping
      action JJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action JDUCKING
ends

defstate JAMES_ANIMS

ifaction 0 ife CHARSELECT 0 action JSTAND
ife PLAYERONTHEBIKE 1 action J_ONBIKE

		
	ifaction J_ONBIKE
	ife PLAYERONTHEBIKE 0 action JSTAND
		
	


  ifaction JFLINTCHING
  {
    ifactioncount 2
      action JSTAND
    break
  }

  ifinwater
  {
    ifaction JTREDWATER
    {
      ifp pwalking prunning
        action JSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action JTREDWATER
    else
    {
      ifaction JSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action JSWIMMINGWAIT
      }
      else
        ifaction JSWIMMINGWAIT
      {
        ifactioncount 2
          action JSWIMMINGGO
      }
      else
        ifaction JSWIMMINGGO
      {
        ifactioncount 2
          action JSWIMMING
      }
      else
        action JTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction JJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action JJPHOUVER
    break
  }
  else
  {
    ifaction JTREDWATER
      action JSTAND
    ifaction JSWIMMING
      action JSTAND
    ifaction JSWIMMINGWAIT
      action JSTAND
    ifaction JSWIMMINGGO
      action JSTAND
    ifaction JJPHOUVER
      action JFALLING
  }

  ifaction JFALLING
  {
    ifp ponground
      { action JSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_jstandard
    }
  }

  ifaction JDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action JCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action JCRAWLING
    }
    else
    {
      ifp pstanding
         action JSTAND
      else
        state check_jstandard
    }
  }

  else ifaction JCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action JCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action JDUCKING
    }
    else
    {
      ifp pstanding
       action JSTAND
      else
        state check_jstandard
    }
  }
  else
    ifgapzl 48
      action JDUCKING

  else
    ifaction JJUMPING
  {
    ifp ponground
       action JSTAND
    else
      ifactioncount 4
        ifp pfalling
          action JFALLING
  }

  ifp pfalling
    action JFALLING
  else
    ifaction JSTAND
      state check_jstandard
  else
    ifaction JAKICKING
  {
    ifactioncount 2
      action JSTAND
    break
  }
  else
    ifaction JWALK
  {
    ifp pfalling
      action JFALLING
    else
      ifp pstanding
        action JSTAND
    else
      ifp prunning
        action JRUN
    else
      ifp pjumping
        action JJUMPING
    else
      ifp pducking
        action JDUCKING
  }

  else
    ifaction JRUN
  {
    ifp pstanding
       action JSTAND 
    else
      ifp pwalking
        action JWALK
    else
      ifp pjumping
        action JJUMPING
    else
      ifp pducking
        action JDUCKING
  }
ends

// **************************************J A M E S    S T A N F I E L D     ANIMS******************************************************

defstate check_j2standard
  ifp pwalking
    action J2WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action J2AKICKING
  else
    ifp prunning
      action J2RUN
  else
    ifp pjumping
      action J2JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action J2DUCKING
ends

defstate JAMES2_ANIMS

ifaction 0 ife CHARSELECT 0 action J2STAND
ife PLAYERONTHEBIKE 1 action J2_ONBIKE

		
	ifaction J2_ONBIKE
	ife PLAYERONTHEBIKE 0 action J2STAND
		
  ifaction J2FLINTCHING
  {
    ifactioncount 2
      action J2STAND
    break
  }

  ifinwater
  {
    ifaction J2TREDWATER
    {
      ifp pwalking prunning
        action J2SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action J2TREDWATER
    else
    {
      ifaction J2SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action J2SWIMMINGWAIT
      }
      else
        ifaction J2SWIMMINGWAIT
      {
        ifactioncount 2
          action J2SWIMMINGGO
      }
      else
        ifaction J2SWIMMINGGO
      {
        ifactioncount 2
          action J2SWIMMING
      }
      else
        action J2TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction J2JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action J2JPHOUVER
    break
  }
  else
  {
    ifaction J2TREDWATER
      action J2STAND
    ifaction J2SWIMMING
      action J2STAND
    ifaction J2SWIMMINGWAIT
      action J2STAND
    ifaction J2SWIMMINGGO
      action J2STAND
    ifaction J2JPHOUVER
      action J2FALLING
  }

  ifaction J2FALLING
  {
    ifp ponground
      { action J2STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_j2standard
    }
  }

  ifaction J2DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action J2CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action J2CRAWLING
    }
    else
    {
      ifp pstanding
         action J2STAND
      else
        state check_j2standard
    }
  }

  else ifaction J2CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action J2CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action J2DUCKING
    }
    else
    {
      ifp pstanding
       action J2STAND
      else
        state check_j2standard
    }
  }
  else
    ifgapzl 48
      action J2DUCKING

  else
    ifaction J2JUMPING
  {
    ifp ponground
       action J2STAND
    else
      ifactioncount 4
        ifp pfalling
          action J2FALLING
  }

  ifp pfalling
    action J2FALLING
  else
    ifaction J2STAND
      state check_j2standard
  else
    ifaction J2AKICKING
  {
    ifactioncount 2
      action J2STAND
    break
  }
  else
    ifaction J2WALK
  {
    ifp pfalling
      action J2FALLING
    else
      ifp pstanding
        action J2STAND
    else
      ifp prunning
        action J2RUN
    else
      ifp pjumping
        action J2JUMPING
    else
      ifp pducking
        action J2DUCKING
  }

  else
    ifaction J2RUN
  {
    ifp pstanding
       action J2STAND 
    else
      ifp pwalking
        action J2WALK
    else
      ifp pjumping
        action J2JUMPING
    else
      ifp pducking
        action J2DUCKING
  }
ends

// **************************************Z A X T O R     ANIMS******************************************************

defstate check_zstandard
  ifp pwalking
    action ZWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action ZAKICKING
  else
    ifp prunning
      action ZRUN
  else
    ifp pjumping
      action ZJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action ZDUCKING
ends

defstate ZAXTOR_ANIMS

ife PLAYERONTHEBIKE 1 action Z_ONBIKE
ifaction 0 ife CHARSELECT 0 { action ZSTAND }

  ifaction ZFLINTCHING
  {
    ifactioncount 2
      action ZSTAND
    break
  }
  
	ifaction Z_ONBIKE
	ife PLAYERONTHEBIKE 0 action ZSTAND

  ifinwater
  {
    ifaction ZTREDWATER
    {
      ifp pwalking prunning
        action ZSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action ZTREDWATER
    else
    {
      ifaction ZSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action ZSWIMMINGWAIT
      }
      else
        ifaction ZSWIMMINGWAIT
      {
        ifactioncount 2
          action ZSWIMMINGGO
      }
      else
        ifaction ZSWIMMINGGO
      {
        ifactioncount 2
          action ZSWIMMING
      }
      else
        action ZTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction ZJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action ZJPHOUVER
    break
  }
  else
  {
    ifaction ZTREDWATER
      action ZSTAND
    ifaction ZSWIMMING
      action ZSTAND
    ifaction ZSWIMMINGWAIT
      action ZSTAND
    ifaction ZSWIMMINGGO
      action ZSTAND
    ifaction ZJPHOUVER
      action ZFALLING
  }

  ifaction ZFALLING
  {
    ifp ponground
      { action ZSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_zstandard
    }
  }

  ifaction ZDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action ZCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action ZCRAWLING
    }
    else
    {
      ifp pstanding
         action ZSTAND
      else
        state check_zstandard
    }
  }

  else ifaction ZCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action ZCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action ZDUCKING
    }
    else
    {
      ifp pstanding
       action ZSTAND
      else
        state check_zstandard
    }
  }
  else
    ifgapzl 48
      action ZDUCKING

  else
    ifaction ZJUMPING
  {
    ifp ponground
       action ZSTAND
    else
      ifactioncount 4
        ifp pfalling
          action ZFALLING
  }

  ifp pfalling
    action ZFALLING
  else
    ifaction ZSTAND
      state check_zstandard
  else
    ifaction ZAKICKING
  {
    ifactioncount 2
      action ZSTAND
    break
  }
  else
    ifaction ZWALK
  {
    ifp pfalling
      action ZFALLING
    else
      ifp pstanding
        action ZSTAND
    else
      ifp prunning
        action ZRUN
    else
      ifp pjumping
        action ZJUMPING
    else
      ifp pducking
        action ZDUCKING
  }

  else
    ifaction ZRUN
  {
    ifp pstanding
       action ZSTAND
    else
      ifp pwalking
        action ZWALK
    else
      ifp pjumping
        action ZJUMPING
    else
      ifp pducking
        action ZDUCKING
  }
  ends

// **************************************R O B    W I J K S T R A     ANIMS******************************************************

defstate check_rstandard
  ifp pwalking
    action RWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action RAKICKING
  else
    ifp prunning
      action RRUN
  else
    ifp pjumping
      action RJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action RDUCKING
ends

defstate HIGHWIRE_ANIMS

ife PLAYERONTHEBIKE 1 action H_ONBIKE


ifaction 0 ife CHARSELECT 0 { action RSTAND }


	ifaction H_ONBIKE
	ife PLAYERONTHEBIKE 0 action RSTAND

  ifaction RFLINTCHING
  {
    ifactioncount 2
      action RSTAND
    break
  }

  ifinwater
  {
    ifaction RTREDWATER
    {
      ifp pwalking prunning
        action RSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action RTREDWATER
    else
    {
      ifaction RSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action RSWIMMINGWAIT
      }
      else
        ifaction RSWIMMINGWAIT
      {
        ifactioncount 2
          action RSWIMMINGGO
      }
      else
        ifaction RSWIMMINGGO
      {
        ifactioncount 2
          action RSWIMMING
      }
      else
        action RTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction RJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action RJPHOUVER
    break
  }
  else
  {
    ifaction RTREDWATER
      action RSTAND
    ifaction RSWIMMING
      action RSTAND
    ifaction RSWIMMINGWAIT
      action RSTAND
    ifaction RSWIMMINGGO
      action RSTAND
    ifaction RJPHOUVER
      action RFALLING
  }

  ifaction RFALLING
  {
    ifp ponground
      { action RSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_rstandard
    }
  }

  ifaction RDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action RCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action RCRAWLING
    }
    else
    {
      ifp pstanding
         action RSTAND
      else
        state check_rstandard
    }
  }

  else ifaction RCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action RCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action RDUCKING
    }
    else
    {
      ifp pstanding
       action RSTAND
      else
        state check_rstandard
    }
  }
  else
    ifgapzl 48
      action RDUCKING

  else
    ifaction RJUMPING
  {
    ifp ponground
       action RSTAND
    else
      ifactioncount 4
        ifp pfalling
          action RFALLING
  }

  ifp pfalling
    action RFALLING
  else
    ifaction RSTAND
      state check_rstandard
  else
    ifaction RAKICKING
  {
    ifactioncount 2
      action RSTAND
    break
  }
  else
    ifaction RWALK
  {
    ifp pfalling
      action RFALLING
    else
      ifp pstanding
        action RSTAND
    else
      ifp prunning
        action RRUN
    else
      ifp pjumping
        action RJUMPING
    else
      ifp pducking
        action RDUCKING
  }

  else
    ifaction RRUN
  {
    ifp pstanding
       action RSTAND
    else
      ifp pwalking
        action RWALK
    else
      ifp pjumping
        action RJUMPING
    else
      ifp pducking
        action RDUCKING
  }
ends

// **************************************S A N G L U S S   W A R L O C K     ANIMS******************************************************

defstate check_sstandard
  ifp pwalking
    action SWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action SAKICKING
  else
    ifp prunning
      action SRUN
  else
    ifp pjumping
      action SJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action SDUCKING
ends

defstate SANG_ANIMS

ife PLAYERONTHEBIKE 1 action S_ONBIKE
ifaction 0 ife CHARSELECT 0 { action SSTAND }


	ifaction S_ONBIKE
	ife PLAYERONTHEBIKE 0 action SSTAND
ife KICKBACKPIC 1 { ifaction SFIRE nullop else action SFIRE }


ifaction SFIRE
{
 ifactioncount 2
  action SSTAND
   break
}

  ifaction SFLINTCHING
  {
    ifactioncount 2
      action SSTAND
    break
  }

  ifinwater
  {
    ifaction STREDWATER
    {
      ifp pwalking prunning
        action SSWIMMINGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action STREDWATER
    else
    {
      ifaction SSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action SSWIMMINGWAIT
      }
      else
        ifaction SSWIMMINGWAIT
      {
        ifactioncount 2
          action SSWIMMINGO
      }
      else
        ifaction SSWIMMINGO
      {
        ifactioncount 2
          action SSWIMMING
      }
      else
        action STREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction SJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action SJPHOUVER
    break
  }
  else
  {
    ifaction STREDWATER
      action SSTAND
    ifaction SSWIMMING
      action SSTAND
    ifaction SSWIMMINGWAIT
      action SSTAND
    ifaction SSWIMMINGO
      action SSTAND
    ifaction SJPHOUVER
      action SFALLING
  }

  ifaction SFALLING
  {
    ifp ponground
      { action SSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_sstandard
    }
  }

  ifaction SDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action SCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action SCRAWLING
    }
    else
    {
      ifp pstanding
         action SSTAND
      else
        state check_sstandard
    }
  }

  else ifaction SCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action SCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action SDUCKING
    }
    else
    {
      ifp pstanding
       action SSTAND
      else
        state check_sstandard
    }
  }
  else
    ifgapzl 48
      action SDUCKING

  else
    ifaction SJUMPING
  {
    ifp ponground
       action SSTAND
    else
      ifactioncount 4
        ifp pfalling
          action SFALLING
  }


  ifp pfalling
    action SFALLING
  else
    ifaction SSTAND
      state check_sstandard
  else
    ifaction SAKICKING
  {
    ifactioncount 2
      action SSTAND
    break
  }
  else
    ifaction SWALK
  {
    ifp pfalling
      action SFALLING
    else
      ifp pstanding
        action SSTAND
    else
      ifp prunning
        action SRUN
    else
      ifp pjumping
        action SJUMPING
    else
      ifp pducking
        action SDUCKING
  }

  else
    ifaction SRUN
  {
    ifp pstanding
       action SSTAND
    else
      ifp pwalking
        action SWALK
    else
      ifp pjumping
        action SJUMPING
    else
      ifp pducking
        action SDUCKING
  }
ends


defstate check_S2standard
  ifp pwalking
    action S2WALK
  else
    ifp pkicking
      action S2AKICKING
  else
    ifp prunning
      action S2RUN
  else
    ifp pjumping
      action S2JUMPING
  else
    ifp pducking
      action S2DUCKING
ends

defstate SANG2_ANIMS

ife PLAYERONTHEBIKE 1 action S2_ONBIKE
ifaction 0 ife CHARSELECT 0 { action S2STAND }


	ifaction S2_ONBIKE
	ife PLAYERONTHEBIKE 0 action S2STAND


  ifaction S2FLINTCHING
  {
    ifactioncount 2
      action S2STAND
    break
  }

  ifinwater
  {
    ifaction S2TREDWATER
    {
      ifp pwalking prunning
        action S2SWIMMINGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action S2TREDWATER
    else
    {
      ifaction S2SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action S2SWIMMINGWAIT
      }
      else
        ifaction S2SWIMMINGWAIT
      {
        ifactioncount 2
          action S2SWIMMINGO
      }
      else
        ifaction S2SWIMMINGO
      {
        ifactioncount 2
          action S2SWIMMING
      }
      else
        action S2TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction S2JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action S2JPHOUVER
    break
  }
  else
  {
    ifaction S2TREDWATER
      action S2STAND
    ifaction S2SWIMMING
      action S2STAND
    ifaction S2SWIMMINGWAIT
      action S2STAND
    ifaction S2SWIMMINGO
      action S2STAND
    ifaction S2JPHOUVER
      action S2FALLING
  }

  ifaction S2FALLING
  {
    ifp ponground
      { action S2STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_S2standard
    }
  }

  ifaction S2DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action S2CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action S2CRAWLING
    }
    else
    {
      ifp pstanding
         action S2STAND
      else
        state check_S2standard
    }
  }

  else ifaction S2CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action S2CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action S2DUCKING
    }
    else
    {
      ifp pstanding
       action S2STAND
      else
        state check_S2standard
    }
  }
  else
    ifgapzl 48
      action S2DUCKING

  else
    ifaction S2JUMPING
  {
    ifp ponground
       action S2STAND
    else
      ifactioncount 4
        ifp pfalling
          action S2FALLING
  }


  ifp pfalling
    action S2FALLING
  else
    ifaction S2STAND
      state check_S2standard
  else
    ifaction S2AKICKING
  {
    ifactioncount 2
      action S2STAND
    break
  }
  else
    ifaction S2WALK
  {
    ifp pfalling
      action S2FALLING
    else
      ifp pstanding
        action S2STAND
    else
      ifp prunning
        action S2RUN
    else
      ifp pjumping
        action S2JUMPING
    else
      ifp pducking
        action S2DUCKING
  }

  else
    ifaction S2RUN
  {
    ifp pstanding
       action S2STAND
    else
      ifp pwalking
        action S2WALK
    else
      ifp pjumping
        action S2JUMPING
    else
      ifp pducking
        action S2DUCKING
  }
ends

// **************************************R U S T Y   N A I L S   ANIMS******************************************************

state check_rnstandard
  ifp pwalking
    action RNWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action RNAKICKING
  else
    ifp prunning
      action RNRUN
  else
    ifp pjumping
      action RNJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action RNDUCKING
ends

defstate RUSTY_ANIMS

ifaction 0 ife CHARSELECT 0 action RNSTAND
ife PLAYERONTHEBIKE 1 action RN_ONBIKE
		
	ifaction RN_ONBIKE
	ife PLAYERONTHEBIKE 0 action RNSTAND

  ifaction RNFLINTCHING
  {
    ifactioncount 2
      action RNSTAND
    break
  }

  ifinwater
  {
    ifaction RNTREDWATER
    {
      ifp pwalking prunning
        action RNSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action RNTREDWATER
    else
    {
      ifaction RNSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action RNSWIMMINGWAIT
      }
      else
        ifaction RNSWIMMINGWAIT
      {
        ifactioncount 2
          action RNSWIMMINGGO
      }
      else
        ifaction RNSWIMMINGGO
      {
        ifactioncount 2
          action RNSWIMMING
      }
      else
        action RNTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction RNJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action RNJPHOUVER
    break
  }
  else
  {
    ifaction RNTREDWATER
      action RNSTAND
    ifaction RNSWIMMING
      action RNSTAND
    ifaction RNSWIMMINGWAIT
      action RNSTAND
    ifaction RNSWIMMINGGO
      action RNSTAND
    ifaction RNJPHOUVER
      action RNFALLING
  }

  ifaction RNFALLING
  {
    ifp ponground
      { action RNSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_rnstandard
    }
  }

  ifaction RNDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action RNCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action RNCRAWLING
    }
    else
    {
      ifp pstanding
         action RNSTAND
      else
        state check_rnstandard
    }
  }

  else ifaction RNCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action RNCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action RNDUCKING
    }
    else
    {
      ifp pstanding
       action RNSTAND
      else
        state check_rnstandard
    }
  }
  else
    ifgapzl 48
      action RNDUCKING

  else
    ifaction RNJUMPING
  {
    ifp ponground
       action RNSTAND
    else
      ifactioncount 4
        ifp pfalling
          action RNFALLING
  }


  ifp pfalling
    action RNFALLING
  else
    ifaction RNSTAND
      state check_rnstandard
  else
    ifaction RNAKICKING
  {
    ifactioncount 2
      action RNSTAND
    break
  }
  else
    ifaction RNWALK
  {
    ifp pfalling
      action RNFALLING
    else
      ifp pstanding
        action RNSTAND
    else
      ifp prunning
        action RNRUN
    else
      ifp pjumping
        action RNJUMPING
    else
      ifp pducking
        action RNDUCKING
  }

  else
    ifaction RNRUN
  {
    ifp pstanding
       action RNSTAND
    else
      ifp pwalking
        action RNWALK
    else
      ifp pjumping
        action RNJUMPING
    else
      ifp pducking
        action RNDUCKING
  }
ends

// ************************************** GEOFFREY ANIMS******************************************************

defstate check_gstandard
  ifp pwalking
    action GWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action GAKICKING
  else
    ifp prunning
      action GRUN
  else
    ifp pjumping
      action GJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action GDUCKING
ends

defstate GEOFFREY_ANIMS

ifaction 0 ife CHARSELECT 0 { action GSTAND }
ife PLAYERONTHEBIKE 1 action G_ONBIKE



	ifaction G_ONBIKE
	ife PLAYERONTHEBIKE 0 action GSTAND
 
  ifaction GFLINTCHING
  {
    ifactioncount 2
      action GSTAND
    break
  }

  ifinwater
  {
    ifaction GTREDWATER
    {
      ifp pwalking prunning
        action GSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action GTREDWATER
    else
    {
      ifaction GSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action GSWIMMINGWAIT
      }
      else
        ifaction GSWIMMINGWAIT
      {
        ifactioncount 2
          action GSWIMMINGGO
      }
      else
        ifaction GSWIMMINGGO
      {
        ifactioncount 2
          action GSWIMMING
      }
      else
        action GTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction GJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action GJPHOUVER
    break
  }
  else
  {
    ifaction GTREDWATER
      action GSTAND
    ifaction GSWIMMING
      action GSTAND
    ifaction GSWIMMINGWAIT
      action GSTAND
    ifaction GSWIMMINGGO
      action GSTAND
    ifaction PJPHOUVER
      action PFALLING
  }

  ifaction GFALLING
  {
    ifp ponground
      { action GSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_gstandard
    }
  }

  ifaction GDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action GCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action GCRAWLING
    }
    else
    {
      ifp pstanding
         action GSTAND
      else
        state check_gstandard
    }
  }

  else ifaction GCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action GCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action GDUCKING
    }
    else
    {
      ifp pstanding
       action GSTAND
      else
        state check_gstandard
    }
  }
  else
    ifgapzl 48
      action GDUCKING

  else
    ifaction GJUMPING
  {
    ifp ponground
       action GSTAND
    else
      ifactioncount 4
        ifp pfalling
          action GFALLING
  }

  ifp pfalling
    action GFALLING
  else
    ifaction GSTAND
      state check_gstandard
  else
    ifaction GAKICKING
  {
    ifactioncount 2
      action GSTAND
    break
  }
  else
    ifaction GWALK
  {
    ifp pfalling
      action GFALLING
    else
      ifp pstanding
        action GSTAND
    else
      ifp prunning
        action GRUN
    else
      ifp pjumping
        action GJUMPING
    else
      ifp pducking
        action GDUCKING
  }

  else
    ifaction GRUN
  {
    ifp pstanding
       action GSTAND
    else
      ifp pwalking
        action GWALK
    else
      ifp pjumping
        action GJUMPING
    else
      ifp pducking
        action GDUCKING
  }
  ends

// ************************************** MIKKO ANIMS******************************************************

defstate check_mstandard
  ifp pwalking
    action MWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action MAKICKING
  else
    ifp prunning
      action MRUN
  else
    ifp pjumping
      action MJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action MDUCKING
ends

defstate MIKKO_ANIMS


ifaction 0 ife CHARSELECT 0 { action MSTAND }
ife PLAYERONTHEBIKE 1 action M_ONBIKE


	ifaction M_ONBIKE
	ife PLAYERONTHEBIKE 0 action MSTAND

  ifaction MFLINTCHING
  {
    ifactioncount 2
      action MSTAND
    break
  }

  ifinwater
  {
    ifaction MTREDWATER
    {
      ifp pwalking prunning
        action MSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action MTREDWATER
    else
    {
      ifaction MSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action MSWIMMINGWAIT
      }
      else
        ifaction MSWIMMINGWAIT
      {
        ifactioncount 2
          action MSWIMMINGGO
      }
      else
        ifaction MSWIMMINGGO
      {
        ifactioncount 2
          action MSWIMMING
      }
      else
        action MTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction MJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action MJPHOUVER
    break
  }
  else
  {
    ifaction MTREDWATER
      action MSTAND
    ifaction MSWIMMING
      action MSTAND
    ifaction MSWIMMINGWAIT
      action MSTAND
    ifaction MSWIMMINGGO
      action MSTAND
    ifaction MJPHOUVER
      action MFALLING
  }

  ifaction MFALLING
  {
    ifp ponground
      { action MSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_mstandard
    }
  }

  ifaction MDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action MCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action MCRAWLING
    }
    else
    {
      ifp pstanding
         action MSTAND
      else
        state check_mstandard
    }
  }

  else ifaction MCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action MCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action MDUCKING
    }
    else
    {
      ifp pstanding
       action MSTAND
      else
        state check_mstandard
    }
  }
  else
    ifgapzl 48
      action MDUCKING

  else
    ifaction MJUMPING
  {
    ifp ponground
       action MSTAND
    else
      ifactioncount 4
        ifp pfalling
          action MFALLING
  }

  ifp pfalling
    action MFALLING
  else
    ifaction MSTAND
      state check_mstandard
  else
    ifaction MAKICKING
  {
    ifactioncount 2
      action MSTAND
    break
  }
  else
    ifaction MWALK
  {
    ifp pfalling
      action MFALLING
    else
      ifp pstanding
        action MSTAND
    else
      ifp prunning
        action MRUN
    else
      ifp pjumping
        action MJUMPING
    else
      ifp pducking
        action MDUCKING
  }

  else
    ifaction MRUN
  {
    ifp pstanding
       action MSTAND
    else
      ifp pwalking
        action MWALK
    else
      ifp pjumping
        action MJUMPING
    else
      ifp pducking
        action MDUCKING
  }
  ends
  
// **************************************C U L T I S T   A N I M S******************************************************
  
  
defstate check_pcstandard
  ifp pwalking
    action PCWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action PCAKICKING
  else
    ifp prunning
      action PCRUN
  else
    ifp pjumping
      action PCJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action PCDUCKING
ends

defstate PCULTIST_ANIMS

ifaction 0 ife CHARSELECT 0 action PCSTAND
ife PLAYERONTHEBIKE 1 action PC_ONBIKE

ife KICKBACKPIC 1 { ifaction PCFIRE nullop else action PCFIRE }

	ifaction PC_ONBIKE
	ife PLAYERONTHEBIKE 0 action PCSTAND

ifaction PCFIRE
{
 ifactioncount 2
  action PCSTAND
   break
}

  ifaction PFLINTCHING
  {
    ifactioncount 2
      action PCSTAND
    break
  }

  ifinwater
  {
    ifaction PCTREDWATER
    {
      ifp pwalking prunning
        action PCSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action PCTREDWATER
    else
    {
      ifaction PCSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action PCSWIMMINGWAIT
      }
      else
        ifaction PCSWIMMINGWAIT
      {
        ifactioncount 2
          action PCSWIMMINGGO
      }
      else
        ifaction PCSWIMMINGGO
      {
        ifactioncount 2
          action PCSWIMMING
      }
      else
        action PCTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction PCJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action PCJPHOUVER
    break
  }
  else
  {
    ifaction PCTREDWATER
      action PCSTAND
    ifaction PCSWIMMING
      action PCSTAND
    ifaction PCSWIMMINGWAIT
      action PCSTAND
    ifaction PCSWIMMINGGO
      action PCSTAND
    ifaction PCJPHOUVER
      action PCFALLING
  }

  ifaction PCFALLING
  {
    ifp ponground
      { action PCSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_pcstandard
    }
  }

  ifaction PCDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action PCCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action PCCRAWLING
    }
    else
    {
      ifp pstanding
         action PCSTAND
      else
        state check_pcstandard
    }
  }

  else ifaction PCCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action PCCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action PCDUCKING
    }
    else
    {
      ifp pstanding
       action PCSTAND
      else
        state check_pcstandard
    }
  }
  else
    ifgapzl 48
      action PCDUCKING

  else
    ifaction PCJUMPING
  {
    ifp ponground
       action PCSTAND
    else
      ifactioncount 4
        ifp pfalling
          action PCFALLING
  }

  ifp pfalling
    action PCFALLING
  else
    ifaction PCSTAND
      state check_pcstandard
  else
    ifaction PCAKICKING
  {
    ifactioncount 2
      action PCSTAND
    break
  }
  else
    ifaction PCWALK
  {
    ifp pfalling
      action PCFALLING
    else
      ifp pstanding
        action PCSTAND
    else
      ifp prunning
        action PCRUN
    else
      ifp pjumping
        action PCJUMPING
    else
      ifp pducking
        action PCDUCKING
  }

  else
    ifaction PCRUN
  {
    ifp pstanding
       action PCSTAND
    else
      ifp pwalking
        action PCWALK
    else
      ifp pjumping
        action PCJUMPING
    else
      ifp pducking
        action PCDUCKING
  }
  ends
  
// **************************************BOMBSHELL ANIMS******************************************************

defstate check_eaf_standard
  ifp pwalking
    action EAF_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action EAF_AKICKING
  else
    ifp prunning
      action EAF_RUN
  else
    ifp pjumping
      action EAF_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action EAF_DUCKING
ends

defstate EAF_ANIMS

ifaction 0 ife CHARSELECT 0 action EAF_STAND
ife PLAYERONTHEBIKE 1 action EAF_ONBIKE

		
	ifaction EAF_ONBIKE
	ife PLAYERONTHEBIKE 0 action EAF_STAND

  ifaction EAF_FLINTCHING
  {
    ifactioncount 2
      action EAF_STAND
    break
  }


  ifinwater
  {
    ifaction EAF_TREDWATER
    {
      ifp pwalking prunning
        action EAF_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action EAF_TREDWATER
    else
    {
      ifaction EAF_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action EAF_SWIMMINGWAIT
      }
      else
        ifaction EAF_SWIMMINGWAIT
      {
        ifactioncount 2
          action EAF_SWIMMINGGO
      }
      else
        ifaction EAF_SWIMMINGGO
      {
        ifactioncount 2
          action EAF_SWIMMING
      }
      else
        action EAF_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction EAF_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action EAF_JPHOUVER
    break
  }
  else
  {
    ifaction EAF_TREDWATER
      action EAF_STAND
    ifaction EAF_SWIMMING
      action EAF_STAND
    ifaction EAF_SWIMMINGWAIT
      action EAF_STAND
    ifaction EAF_SWIMMINGGO
      action EAF_STAND
    ifaction EAF_JPHOUVER
      action EAF_FALLING
  }

  ifaction EAF_FALLING
  {
    ifp ponground
      { action EAF_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_eaf_standard
    }
  }

  ifaction EAF_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action EAF_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action EAF_CRAWLING
    }
    else
    {
      ifp pstanding
         action EAF_STAND
      else
        state check_eaf_standard
    }
  }

  else ifaction EAF_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action EAF_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action EAF_DUCKING
    }
    else
    {
      ifp pstanding
       action EAF_STAND
      else
        state check_eaf_standard
    }
  }
  else
    ifgapzl 48
      action EAF_DUCKING

  else
    ifaction EAF_JUMPING
  {
    ifp ponground
       action EAF_STAND
    else
      ifactioncount 4
        ifp pfalling
          action EAF_FALLING
  }

  ifp pfalling
    action EAF_FALLING
  else
    ifaction EAF_STAND
      state check_eaf_standard
  else
    ifaction EAF_AKICKING
  {
    ifactioncount 2
      action EAF_STAND
    break
  }
  else
    ifaction EAF_WALK
  {
    ifp pfalling
      action EAF_FALLING
    else
      ifp pstanding
        action EAF_STAND
    else
      ifp prunning
        action EAF_RUN
    else
      ifp pjumping
        action EAF_JUMPING
    else
      ifp pducking
        action EAF_DUCKING
  }

  else
    ifaction EAF_RUN
  {
    ifp pstanding
       action EAF_STAND 
    else
      ifp pwalking
        action EAF_WALK
    else
      ifp pjumping
        action EAF_JUMPING
    else
      ifp pducking
        action EAF_DUCKING
  }
ends

// ************************************** MAARTEN ANIMS******************************************************

defstate check_m2standard
  ifp pwalking
    action M2WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action M2AKICKING
  else
    ifp prunning
      action M2RUN
  else
    ifp pjumping
      action M2JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action M2DUCKING
ends

state MAARTEN_ANIMS

ifaction 0 ife CHARSELECT 0 { action M2STAND }
ife PLAYERONTHEBIKE 1 action M2_ONBIKE

ife KICKBACKPIC 1 { ifaction M2FIRE nullop else action M2FIRE }


	ifaction M2_ONBIKE
	ife PLAYERONTHEBIKE 0 action M2STAND

ifaction M2FIRE
{
 ifactioncount 2
  action M2STAND
   break
}


  ifaction M2FLINTCHING
  {
    ifactioncount 2
      action M2STAND
    break
  }

  ifinwater
  {
    ifaction M2TREDWATER
    {
      ifp pwalking prunning
        action M2SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action M2TREDWATER
    else
    {
      ifaction M2SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action M2SWIMMINGWAIT
      }
      else
        ifaction M2SWIMMINGWAIT
      {
        ifactioncount 2
          action M2SWIMMINGGO
      }
      else
        ifaction M2SWIMMINGGO
      {
        ifactioncount 2
          action M2SWIMMING
      }
      else
        action M2TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction M2JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action M2JPHOUVER
    break
  }
  else
  {
    ifaction M2TREDWATER
      action M2STAND
    ifaction M2SWIMMING
      action M2STAND
    ifaction M2SWIMMINGWAIT
      action M2STAND
    ifaction M2SWIMMINGGO
      action M2STAND
    ifaction M2JPHOUVER
      action M2FALLING
  }

  ifaction M2FALLING
  {
    ifp ponground
      { action M2STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_m2standard
    }
  }

  ifaction M2DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action M2CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action M2CRAWLING
    }
    else
    {
      ifp pstanding
         action M2STAND
      else
        state check_m2standard
    }
  }

  else ifaction M2CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action M2CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action M2DUCKING
    }
    else
    {
      ifp pstanding
       action M2STAND
      else
        state check_m2standard
    }
  }
  else
    ifgapzl 48
      action M2DUCKING

  else
    ifaction M2JUMPING
  {
    ifp ponground
       action M2STAND
    else
      ifactioncount 4
        ifp pfalling
          action M2FALLING
  }

  ifp pfalling
    action M2FALLING
  else
    ifaction M2STAND
      state check_m2standard
  else
    ifaction M2AKICKING
  {
    ifactioncount 2
      action M2STAND
    break
  }
  else
    ifaction M2WALK
  {
    ifp pfalling
      action M2FALLING
    else
      ifp pstanding
        action M2STAND
    else
      ifp prunning
        action M2RUN
    else
      ifp pjumping
        action M2JUMPING
    else
      ifp pducking
        action M2DUCKING
  }

  else
    ifaction M2RUN
  {
    ifp pstanding
       action M2STAND
    else
      ifp pwalking
        action M2WALK
    else
      ifp pjumping
        action M2JUMPING
    else
      ifp pducking
        action M2DUCKING
  }
ends

// **************************************J A N E   ANIMS******************************************************

defstate check_lstandard
  ifp pwalking
    action LWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action LAKICKING
  else
    ifp prunning
      action LRUN
  else
    ifp pjumping
      action LJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action LDUCKING
ends

defstate JANE_ANIMS

ifaction 0 ife CHARSELECT 0 { action LSTAND }
ife PLAYERONTHEBIKE 1 action L_ONBIKE


	ifg onladder 0
		{
		ifg fpress 0
		{ ifaction L_CLIMB_LADDER nullop else action L_CLIMB_LADDER }
		else
		ifg bpress 0
		{ ifaction L_CLIMB_LADDER nullop else action L_CLIMB_LADDER }
		else
		action L_ONLADDER
		}
		
	ifaction L_ONBIKE
	ife PLAYERONTHEBIKE 0 action LSTAND
		
	ifaction L_ONLADDER
	ifl onladder 1
		action LSTAND
		
	ifaction L_CLIMB_LADDER
	ifl onladder 1
		action LSTAND

  ifaction LFLINTCHING
  {
    ifactioncount 2
      action LSTAND
    break
  }

  ifinwater
  {
    ifaction LTREDWATER
    {
      ifp pwalking prunning
        action LSWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action LTREDWATER
    else
    {
      ifaction LSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action LSWIMMINGWAIT
      }
      else
        ifaction LSWIMMINGWAIT
      {
        ifactioncount 2
          action LSWIMMINGGO
      }
      else
        ifaction LSWIMMINGGO
      {
        ifactioncount 2
          action LSWIMMING
      }
      else
        action LTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction LJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action LJPHOUVER
    break
  }
  else
  {
    ifaction LTREDWATER
      action LSTAND
    ifaction LSWIMMING
      action LSTAND
    ifaction LSWIMMINGWAIT
      action LSTAND
    ifaction LSWIMMINGGO
      action LSTAND
    ifaction LJPHOUVER
      action LFALLING
  }

  ifaction LFALLING
  {
    ifp ponground
      { action LSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_lstandard
    }
  }

  ifaction LDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action LCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action LCRAWLING
    }
    else
    {
      ifp pstanding
         action LSTAND
      else
        state check_lstandard
    }
  }

  else ifaction LCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action LCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action LDUCKING
    }
    else
    {
      ifp pstanding
       action LSTAND
      else
        state check_lstandard
    }
  }
  else
    ifgapzl 48
      action LDUCKING

  else
    ifaction LJUMPING
  {
    ifp ponground
       action LSTAND
    else
      ifactioncount 4
        ifp pfalling
          action LFALLING
  }

  ifp pfalling
    action LFALLING
  else
    ifaction LSTAND
      state check_lstandard
  else
    ifaction LAKICKING
  {
    ifactioncount 2
      action LSTAND
    break
  }
  else
    ifaction LWALK
  {
    ifp pfalling
      action LFALLING
    else
      ifp pstanding
        action LSTAND
    else
      ifp prunning
        action LRUN
    else
      ifp pjumping
        action LJUMPING
    else
      ifp pducking
        action LDUCKING
  }

  else
    ifaction LRUN
  {
    ifp pstanding
       action LSTAND
    else
      ifp pwalking
        action LWALK
    else
      ifp pjumping
        action LJUMPING
    else
      ifp pducking
        action LDUCKING
  }
  ends
  
// ************************************** MICKY ANIMS******************************************************

defstate check_mc_standard
  ifp pwalking
    action MC_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action MC_AKICKING
  else
    ifp prunning
      action MC_RUN
  else
    ifp pjumping
      action MC_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action MC_DUCKING
ends

defstate MICKY_ANIMS

ifaction 0 ife CHARSELECT 0 { action MC_STAND }
ife PLAYERONTHEBIKE 1 action MC_ONBIKE


	ifaction MC_ONBIKE
	ife PLAYERONTHEBIKE 0 action MC_STAND

  ifaction MC_FLINTCHING
  {
    ifactioncount 2
      action MC_STAND
    break
  }

  ifinwater
  {
    ifaction MC_TREDWATER
    {
      ifp pwalking prunning
        action MC_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action MC_TREDWATER
    else
    {
      ifaction MC_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action MC_SWIMMINGWAIT
      }
      else
        ifaction MC_SWIMMINGWAIT
      {
        ifactioncount 2
          action MC_SWIMMINGGO
      }
      else
        ifaction MC_SWIMMINGGO
      {
        ifactioncount 2
          action MC_SWIMMING
      }
      else
        action MC_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction MC_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action MC_JPHOUVER
    break
  }
  else
  {
    ifaction MC_TREDWATER
      action MC_STAND
    ifaction MC_SWIMMING
      action MC_STAND
    ifaction MC_SWIMMINGWAIT
      action MC_STAND
    ifaction MC_SWIMMINGGO
      action MC_STAND
    ifaction MC_JPHOUVER
      action MC_FALLING
  }

  ifaction MC_FALLING
  {
    ifp ponground
      { action MC_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_mc_standard
    }
  }

  ifaction MC_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action MC_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action MC_CRAWLING
    }
    else
    {
      ifp pstanding
         action MC_STAND
      else
        state check_mc_standard
    }
  }

  else ifaction MC_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action MC_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action MC_DUCKING
    }
    else
    {
      ifp pstanding
       action MC_STAND
      else
        state check_mc_standard
    }
  }
  else
    ifgapzl 48
      action MC_DUCKING

  else
    ifaction MC_JUMPING
  {
    ifp ponground
       action MC_STAND
    else
      ifactioncount 4
        ifp pfalling
          action MC_FALLING
  }


  ifp pfalling
    action MC_FALLING
  else
    ifaction MC_STAND
      state check_mc_standard
  else
    ifaction MC_AKICKING
  {
    ifactioncount 2
      action MC_STAND
    break
  }
  else
    ifaction MC_WALK
  {
    ifp pfalling
      action MC_FALLING
    else
      ifp pstanding
        action MC_STAND
    else
      ifp prunning
        action MC_RUN
    else
      ifp pjumping
        action MC_JUMPING
    else
      ifp pducking
        action MC_DUCKING
  }

  else
    ifaction MC_RUN
  {
    ifp pstanding
       action MC_STAND
    else
      ifp pwalking
        action MC_WALK
    else
      ifp pjumping
        action MC_JUMPING
    else
      ifp pducking
        action MC_DUCKING
  }
  ends
  

// ************************************** MICKY NO SUT ANIMS******************************************************

defstate check_mcns_standard
  ifp pwalking
    action MCNS_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action MCNS_AKICKING
  else
    ifp prunning
      action MCNS_RUN
  else
    ifp pjumping
      action MCNS_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action MCNS_DUCKING
ends

defstate MICKY_NO_SUIT_ANIMS

ifaction 0 ife CHARSELECT 0 { action MCNS_STAND }
ifaction ZERO ife CHARSELECT 0 { action MCNS_STAND }

  ifaction MCNS_FLINTCHING
  {
    ifactioncount 2
      action MCNS_STAND
    break
  }

  ifinwater
  {
    ifaction MCNS_TREDWATER
    {
      ifp pwalking prunning
        action MCNS_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action MCNS_TREDWATER
    else
    {
      ifaction MCNS_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action MCNS_SWIMMINGWAIT
      }
      else
        ifaction MCNS_SWIMMINGWAIT
      {
        ifactioncount 2
          action MCNS_SWIMMINGGO
      }
      else
        ifaction MCNS_SWIMMINGGO
      {
        ifactioncount 2
          action MCNS_SWIMMING
      }
      else
        action MCNS_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction MCNS_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action MCNS_JPHOUVER
    break
  }
  else
  {
    ifaction MCNS_TREDWATER
      action MCNS_STAND
    ifaction MCNS_SWIMMING
      action MCNS_STAND
    ifaction MCNS_SWIMMINGWAIT
      action MCNS_STAND
    ifaction MCNS_SWIMMINGGO
      action MCNS_STAND
    ifaction MCNS_JPHOUVER
      action MCNS_FALLING
  }

  ifaction MCNS_FALLING
  {
    ifp ponground
      { action MCNS_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_mcns_standard
    }
  }

  ifaction MCNS_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action MCNS_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action MCNS_CRAWLING
    }
    else
    {
      ifp pstanding
         action MCNS_STAND
      else
        state check_mcns_standard
    }
  }

  else ifaction MCNS_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action MCNS_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action MCNS_DUCKING
    }
    else
    {
      ifp pstanding
       action MCNS_STAND
      else
        state check_mcns_standard
    }
  }
  else
    ifgapzl 48
      action MCNS_DUCKING

  else
    ifaction MCNS_JUMPING
  {
    ifp ponground
       action MCNS_STAND
    else
      ifactioncount 4
        ifp pfalling
          action MCNS_FALLING
  }

  ifp pfalling
    action MCNS_FALLING
  else
    ifaction MCNS_STAND
      state check_mcns_standard
  else
    ifaction MCNS_AKICKING
  {
    ifactioncount 2
      action MCNS_STAND
    break
  }
  else
    ifaction MCNS_WALK
  {
    ifp pfalling
      action MCNS_FALLING
    else
      ifp pstanding
        action MCNS_STAND
    else
      ifp prunning
        action MCNS_RUN
    else
      ifp pjumping
        action MCNS_JUMPING
    else
      ifp pducking
        action MCNS_DUCKING
  }

  else
    ifaction MCNS_RUN
  {
    ifp pstanding
       action MCNS_STAND
    else
      ifp pwalking
        action MCNS_WALK
    else
      ifp pjumping
        action MCNS_JUMPING
    else
      ifp pducking
        action MCNS_DUCKING
  }
  ends
 
  
// ************************************** SNOWFALL ANIMS******************************************************

defstate check_sf_standard
  ifp pwalking
    action SF_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action SF_AKICKING
  else
    ifp prunning
      action SF_RUN
  else
    ifp pjumping
      action SF_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action SF_DUCKING
ends

defstate SNOWFALL_ANIMS

ifaction 0 ife CHARSELECT 0 { action SF_STAND }
ife PLAYERONTHEBIKE 1 action SF_ONBIKE


	ifaction SF_ONBIKE
	ife PLAYERONTHEBIKE 0 action SF_STAND

  ifaction SF_FLINTCHING
  {
    ifactioncount 2
      action SF_STAND
    break
  }

  ifinwater
  {
    ifaction SF_TREDWATER
    {
      ifp pwalking prunning
        action SF_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action SF_TREDWATER
    else
    {
      ifaction SF_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action SF_SWIMMINGWAIT
      }
      else
        ifaction SF_SWIMMINGWAIT
      {
        ifactioncount 2
          action SF_SWIMMINGGO
      }
      else
        ifaction SF_SWIMMINGGO
      {
        ifactioncount 2
          action SF_SWIMMING
      }
      else
        action SF_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction SF_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action SF_JPHOUVER
    break
  }
  else
  {
    ifaction SF_TREDWATER
      action SF_STAND
    ifaction SF_SWIMMING
      action SF_STAND
    ifaction SF_SWIMMINGWAIT
      action SF_STAND
    ifaction SF_SWIMMINGGO
      action SF_STAND
    ifaction SF_JPHOUVER
      action SF_FALLING
  }

  ifaction SF_FALLING
  {
    ifp ponground
      { action SF_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_sf_standard
    }
  }

  ifaction SF_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action SF_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action SF_CRAWLING
    }
    else
    {
      ifp pstanding
         action SF_STAND
      else
        state check_sf_standard
    }
  }

  else ifaction SF_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action SF_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action SF_DUCKING
    }
    else
    {
      ifp pstanding
       action SF_STAND
      else
        state check_sf_standard
    }
  }
  else
    ifgapzl 48
      action SF_DUCKING

  else
    ifaction SF_JUMPING
  {
    ifp ponground
       action SF_STAND
    else
      ifactioncount 4
        ifp pfalling
          action SF_FALLING
  }
  
  ifp pfalling
    action SF_FALLING
  else
    ifaction SF_STAND
      state check_sf_standard
  else
    ifaction SF_AKICKING
  {
    ifactioncount 2
      action SF_STAND
    break
  }
  else
    ifaction SF_WALK
  {
    ifp pfalling
      action SF_FALLING
    else
      ifp pstanding
        action SF_STAND
    else
      ifp prunning
        action SF_RUN
    else
      ifp pjumping
        action SF_JUMPING
    else
      ifp pducking
        action SF_DUCKING
  }

  else
    ifaction SF_RUN
  {
    ifp pstanding
       action SF_STAND
    else
      ifp pwalking
        action SF_WALK
    else
      ifp pjumping
        action SF_JUMPING
    else
      ifp pducking
        action SF_DUCKING
  }
  ends
  
// CIVILIAN ANIMS


defstate check_civ_standard
  ifp pwalking
    action CIV_AWALK
  else
    ifp pkicking
      action CIV_AWALK
  else
    ifp prunning
      action CIV_ARUN
  else
    ifp pjumping
      action CIV_ARUN
  else
    ifp pducking
      action CIV_AWALK
ends

defstate CIVILIAN_ANIMS

ifaction 0 ife CHARSELECT 0 action CIV_ASTAND
 
    ifaction CIV_ASTAND
      state check_civ_standard
  else
    ifaction CIV_AWALK
  {
      ifp pstanding
        action CIV_ASTAND
    else
      ifp prunning
        action CIV_ARUN
  }

  else
    ifaction CIV_ARUN
  {
    ifp pstanding
       action CIV_ASTAND
    else
      ifp pwalking
        action CIV_AWALK
  }
  ends
  
// **************************************CASSANDRA ANIMS******************************************************

defstate check_cstandard
  ifp pwalking
    action CWALK
  else
    ifp pkicking
	 ife camerasprite -1
      action CAKICKING
  else
    ifp prunning
      action CRUN
  else
    ifp pjumping
      action CJUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action CDUCKING
ends

defstate CASSANDRA_ANIMS

ifaction 0 ife CHARSELECT 0 { action CSTAND }

  ifaction CFLINTCHING
  {
    ifactioncount 2
      action CSTAND
    break
  }

  ifinwater
  {
    ifaction CTREDWATER
    {
      ifp pwalking prunning
        action CSWIMMINGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action CTREDWATER
    else
    {
      ifaction CSWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action CSWIMMINGWAIT
      }
      else
        ifaction CSWIMMINGWAIT
      {
        ifactioncount 2
          action CSWIMMINGO
      }
      else
        ifaction CSWIMMINGO
      {
        ifactioncount 2
          action CSWIMMING
      }
      else
        action CTREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction CJPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action CJPHOUVER
    break
  }
  else
  {
    ifaction CTREDWATER
      action CSTAND
    ifaction CSWIMMING
      action CSTAND
    ifaction CSWIMMINGWAIT
      action CSTAND
    ifaction CSWIMMINGO
      action CSTAND
    ifaction CJPHOUVER
      action CFALLING
  }

  ifaction CFALLING
  {
    ifp ponground
      { action CSTAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_cstandard
    }
  }

  ifaction CDUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action CCRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action CCRAWLING
    }
    else
    {
      ifp pstanding
         action CSTAND
      else
        state check_cstandard
    }
  }

  else ifaction CCRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action CCRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action CDUCKING
    }
    else
    {
      ifp pstanding
       action CSTAND
      else
        state check_cstandard
    }
  }
  else
    ifgapzl 48
      action CDUCKING

  else
    ifaction CJUMPING
  {
    ifp ponground
       action CSTAND
    else
      ifactioncount 4
        ifp pfalling
          action CFALLING
  }

  ifp pfalling
    action CFALLING
  else
    ifaction CSTAND
      state check_cstandard
  else
    ifaction CAKICKING
  {
    ifactioncount 2
      action CSTAND
    break
  }
  else
    ifaction CWALK
  {
    ifp pfalling
      action CFALLING
    else
      ifp pstanding
        action CSTAND
    else
      ifp prunning
        action CRUN
    else
      ifp pjumping
        action CJUMPING
    else
      ifp pducking
        action CDUCKING
  }

  else
    ifaction CRUN
  {
    ifp pstanding
       action CSTAND
    else
      ifp pwalking
        action CWALK
    else
      ifp pjumping
        action CJUMPING
    else
      ifp pducking
        action CDUCKING
  }
ends

// ************************************** ENVIROSUIT ANIMS******************************************************

defstate check_ES_standard
  ifp pwalking
    action ES_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action ES_AKICKING
  else
    ifp prunning
      action ES_RUN
  else
    ifp pjumping
      action ES_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action ES_DUCKING
ends

defstate ENVIRO_SUIT_ANIMS
  ifaction ES_FLINTCHING
  {
    ifactioncount 2
      action ES_STAND
    break
  }

  ifinwater
  {
    ifaction ES_TREDWATER
    {
      ifp pwalking prunning
        action ES_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action ES_TREDWATER
    else
    {
      ifaction ES_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action ES_SWIMMINGWAIT
      }
      else
        ifaction ES_SWIMMINGWAIT
      {
        ifactioncount 2
          action ES_SWIMMINGGO
      }
      else
        ifaction ES_SWIMMINGGO
      {
        ifactioncount 2
          action ES_SWIMMING
      }
      else
        action ES_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction ES_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action ES_JPHOUVER
    break
  }
  else
  {
    ifaction ES_TREDWATER
      action ES_STAND
    ifaction ES_SWIMMING
      action ES_STAND
    ifaction ES_SWIMMINGWAIT
      action ES_STAND
    ifaction ES_SWIMMINGGO
      action ES_STAND
    ifaction ES_JPHOUVER
      action ES_FALLING
  }

  ifaction ES_FALLING
  {
    ifp ponground
      { action ES_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_ES_standard
    }
  }

  ifaction ES_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action ES_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action ES_CRAWLING
    }
    else
    {
      ifp pstanding
         action ES_STAND
      else
        state check_ES_standard
    }
  }

  else ifaction ES_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action ES_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action ES_DUCKING
    }
    else
    {
      ifp pstanding
       action ES_STAND
      else
        state check_ES_standard
    }
  }
  else
    ifgapzl 48
      action ES_DUCKING

  else
    ifaction ES_JUMPING
  {
    ifp ponground
       action ES_STAND
    else
      ifactioncount 4
        ifp pfalling
          action ES_FALLING
  }

  ifp pfalling
    action ES_FALLING
  else
    ifaction ES_STAND
      state check_ES_standard
  else
    ifaction ES_AKICKING
  {
    ifactioncount 2
      action ES_STAND
    break
  }
  else
    ifaction ES_WALK
  {
    ifp pfalling
      action ES_FALLING
    else
      ifp pstanding
        action ES_STAND
    else
      ifp prunning
        action ES_RUN
    else
      ifp pjumping
        action ES_JUMPING
    else
      ifp pducking
        action ES_DUCKING
  }

  else
    ifaction ES_RUN
  {
    ifp pstanding
       action ES_STAND
    else
      ifp pwalking
        action ES_WALK
    else
      ifp pjumping
        action ES_JUMPING
    else
      ifp pducking
        action ES_DUCKING
  }
  ends
  
  // ************************************** JUGGERNAUT SUIT ANIMS******************************************************

defstate check_JG_standard
  ifp pwalking
    action JG_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action JG_AKICKING
  else
    ifp prunning
      action JG_RUN
  else
    ifp pjumping
      action JG_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action JG_DUCKING
ends

defstate JUGGERN_SUIT_ANIMS

ife KICKBACKPIC 1 ifp pstanding {  ifaction JG_FIRE nullop else action JG_FIRE }
 
ifaction JG_FIRE
{
 ifactioncount 2
 ife KICKBACKPIC 0
  action JG_STAND
   break
}


  ifaction JG_FLINTCHING
  {
    ifactioncount 2
      action JG_STAND
    break
  }

  ifinwater
  {
    ifaction JG_TREDWATER
    {
      ifp pwalking prunning
        action JG_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action JG_TREDWATER
    else
    {
      ifaction JG_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action JG_SWIMMINGWAIT
      }
      else
        ifaction JG_SWIMMINGWAIT
      {
        ifactioncount 2
          action JG_SWIMMINGGO
      }
      else
        ifaction JG_SWIMMINGGO
      {
        ifactioncount 2
          action JG_SWIMMING
      }
      else
        action JG_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction JG_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action JG_JPHOUVER
    break
  }
  else
  {
    ifaction JG_TREDWATER
      action JG_STAND
    ifaction JG_SWIMMING
      action JG_STAND
    ifaction JG_SWIMMINGWAIT
      action JG_STAND
    ifaction JG_SWIMMINGGO
      action JG_STAND
    ifaction JG_JPHOUVER
      action JG_FALLING
  }

  ifaction JG_FALLING
  {
    ifp ponground
      { action JG_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_JG_standard
    }
  }

  ifaction JG_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action JG_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action JG_CRAWLING
    }
    else
    {
      ifp pstanding
         action JG_STAND
      else
        state check_JG_standard
    }
  }

  else ifaction JG_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action JG_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action JG_DUCKING
    }
    else
    {
      ifp pstanding
       action JG_STAND
      else
        state check_JG_standard
    }
  }
  else
    ifgapzl 48
      action JG_DUCKING

  else
    ifaction JG_JUMPING
  {
    ifp ponground
       action JG_STAND
    else
      ifactioncount 4
        ifp pfalling
          action JG_FALLING
  }

  ifp pfalling
    action JG_FALLING
  else
    ifaction JG_STAND
      state check_JG_standard
  else
    ifaction JG_AKICKING
  {
    ifactioncount 2
      action JG_STAND
    break
  }
  else
    ifaction JG_WALK
  {
    ifp pfalling
      action JG_FALLING
    else
      ifp pstanding
        action JG_STAND
    else
      ifp prunning
        action JG_RUN
    else
      ifp pjumping
        action JG_JUMPING
    else
      ifp pducking
        action JG_DUCKING
  }

  else
    ifaction JG_RUN
  {
    ifp pstanding
       action JG_STAND
    else
      ifp pwalking
        action JG_WALK
    else
      ifp pjumping
        action JG_JUMPING
    else
      ifp pducking
        action JG_DUCKING
  }
  ends
  
 // ************************************** SPACESUIT ANIMS******************************************************

defstate check_SS_standard
  ifp pwalking
    action SS_WALK
  else
    ifp pkicking
	 ife camerasprite -1
      action SS_AKICKING
  else
    ifp prunning
      action SS_RUN
  else
    ifp pjumping
      action SS_JUMPING
  else
    ifp pducking
	 ife camerasprite -1
      action SS_DUCKING
ends

defstate SPACE_SUIT_ANIMS

  ifaction SS_FLINTCHING
  {
    ifactioncount 2
      action SS_STAND
    break
  }

  ifinwater
  {
    ifaction SS_TREDWATER
    {
      ifp pwalking prunning
        action SS_SWIMMINGGO
    }
    else
      ifp pstanding pwalkingback prunningback
        action SS_TREDWATER
    else
    {
      ifaction SS_SWIMMING
      {
        ifrnd 4
          spawn WATERBUBBLE
        ifactioncount 4
          action SS_SWIMMINGWAIT
      }
      else
        ifaction SS_SWIMMINGWAIT
      {
        ifactioncount 2
          action SS_SWIMMINGGO
      }
      else
        ifaction SS_SWIMMINGGO
      {
        ifactioncount 2
          action SS_SWIMMING
      }
      else
        action SS_TREDWATER
    }

    ifrnd 4
      spawn WATERBUBBLE // For effect

    break
  }
  else ifp pjetpack
  {
    ifaction SS_JPHOUVER
    {
      ifactioncount 4
        resetactioncount
    }
    else
      action SS_JPHOUVER
    break
  }
  else
  {
    ifaction SS_TREDWATER
      action SS_STAND
    ifaction SS_SWIMMING
      action SS_STAND
    ifaction SS_SWIMMINGWAIT
      action SS_STAND
    ifaction SS_SWIMMINGGO
      action SS_STAND
    ifaction SS_JPHOUVER
      action SS_FALLING
  }

  ifaction SS_FALLING
  {
    ifp ponground
      { action SS_STAND state landsounds }
    else
    {
      ifp pfalling
        break
      else
        state check_SS_standard
    }
  }

  ifaction SS_DUCKING
  {
    ifgapzl 48
    {
      ifp pwalking pwalkingback prunning prunningback
        action SS_CRAWLING
    }
    else ifp pducking
    {
      ifp pwalking pwalkingback prunning prunningback
        action SS_CRAWLING
    }
    else
    {
      ifp pstanding
         action SS_STAND
      else
        state check_SS_standard
    }
  }

  else ifaction SS_CRAWLING
  {
    ifgapzl 48
    {
      ifp pstanding
        action SS_CRAWLING
    }
    else
      ifp pducking
    {
      ifp pstanding
        action SS_DUCKING
    }
    else
    {
      ifp pstanding
       action SS_STAND
      else
        state check_SS_standard
    }
  }
  else
    ifgapzl 48
      action SS_DUCKING

  else
    ifaction SS_JUMPING
  {
    ifp ponground
       action SS_STAND
    else
      ifactioncount 4
        ifp pfalling
          action SS_FALLING
  }

  ifp pfalling
    action SS_FALLING
  else
    ifaction SS_STAND
      state check_SS_standard
  else
    ifaction SS_AKICKING
  {
    ifactioncount 2
      action SS_STAND
    break
  }
  else
    ifaction SS_WALK
  {
    ifp pfalling
      action SS_FALLING
    else
      ifp pstanding
        action SS_STAND
    else
      ifp prunning
        action SS_RUN
    else
      ifp pjumping
        action SS_JUMPING
    else
      ifp pducking
        action SS_DUCKING
  }

  else
    ifaction SS_RUN
  {
    ifp pstanding
       action SS_STAND
    else
      ifp pwalking
        action SS_WALK
    else
      ifp pjumping
        action SS_JUMPING
    else
      ifp pducking
        action SS_DUCKING
  }
  ends
  
defstate PLAYERANIMS
ife FIRE_SUIT 1 ifn CHAR 12 state ENVIRO_SUIT_ANIMS
else ife SPACE_SUIT 1 ifn CHAR 12 ifn CHAR 13 ifn CHAR 14 state SPACE_SUIT_ANIMS
else ife JUGGERN_SUIT 1 ifn CHAR 12 ifn CHAR 13 ifn CHAR 14 state JUGGERN_SUIT_ANIMS
else
{
ife CHAR -1 action ZERO
ife CHAR 0 
	{
	ifand CHAR_APP 1 state JAMES2_ANIMS else
	state JAMES_ANIMS
	}
ife CHAR 1 state ZAXTOR_ANIMS
ife CHAR 2 state MERLIJN_ANIMS
ife CHAR 3 state HIGHWIRE_ANIMS
ife CHAR 4 
	{
	ifand CHAR_APP 2 state SANG2_ANIMS else
	state SANG_ANIMS
	}
ife CHAR 5 state RUSTY_ANIMS
ife CHAR 6 state GEOFFREY_ANIMS
ife CHAR 7 state MIKKO_ANIMS
ife CHAR 8 action ZERO
ife CHAR 9 state PCULTIST_ANIMS
ife CHAR 10 state EAF_ANIMS
ife CHAR 11 state MAARTEN_ANIMS
ife CHAR 12 state JANE_ANIMS
ife CHAR 13 state MICKY_ANIMS
ife CHAR 14 
	{
	ife TIMEZONE 6 state CIVILIAN_ANIMS else
	state SNOWFALL_ANIMS
	}
ife CHAR 15 state MICKY_NO_SUIT_ANIMS
ife CHAR 20 state CASSANDRA_ANIMS
}
ends

defstate DISP_nvg
ife HELMET_LOADOUT[CHAR] 4 set DISP_NVG GHOST_GOGGLES else
ife HELMET_LOADOUT[CHAR] 2 set DISP_NVG CHEAT else
set DISP_NVG CNVG
ends

defstate mind_shield_state
ifp pstanding
 ife CHARSELECT 0
	{
	ife INTERNALCOUNT 0
		{
		ife MYSTICAL_RESEARCH[3] 2
			ifl P_SPIRIT_ARMOUR 20
				{
				ife camerasprite -1 palfrom 10 0 0 10
				add P_SPIRIT_ARMOUR 4
				set INTERNALCOUNT 52
				}
		else
		ife MYSTICAL_RESEARCH[2] 2
			ifl P_SPIRIT_ARMOUR 15
				{
				ife camerasprite -1 palfrom 10 0 0 10
				add P_SPIRIT_ARMOUR 3
				set INTERNALCOUNT 52
				}
		else
		ife MYSTICAL_RESEARCH[1] 2
			ifl P_SPIRIT_ARMOUR 10
				{
				ife camerasprite -1 palfrom 10 0 0 10
				add P_SPIRIT_ARMOUR 2
				set INTERNALCOUNT 52
				}
		}
	}
ends

state check_cased_grenades_avail
	ife GL_COUNTDOWN 43
		{
		 ifand AMMO_TYPES[CURWEAP] 32
		 {
		  ife fortymm_shells 0
			{
			ifand AMMO_TYPE 32 xorvar AMMO_TYPE 32 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE
			set GL_COUNTDOWN 0
			setp[].weapon_pos 10
			xorvar GUNFIREMODE 32768
			}
		  }
		else
		 ifand AMMO_TYPES[CURWEAP] 128
		 {
		  ife fortymm_MIA_shells 0
			{
			ifand AMMO_TYPE 128 xorvar AMMO_TYPE 128 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE
			set GL_COUNTDOWN 0
			setp[].weapon_pos 10
			xorvar GUNFIREMODE 32768
			}
		 }
		else
		 ifand AMMO_TYPES[CURWEAP] 256
		 {
		  ife fortymm_plasma 0
			{
			ifand AMMO_TYPE 256 xorvar AMMO_TYPE 256 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE
			set GL_COUNTDOWN 0
			setp[].weapon_pos 10
			xorvar GUNFIREMODE 32768
			}
		 }
		else
		ife fortymm_grenades 0
			{
			set GL_COUNTDOWN 0
			setp[].weapon_pos 10
			xorvar GUNFIREMODE 32768
			}
		}
ends

defstate shoot_empty_40mmshell
	ifand AMMO_TYPES[CURWEAP] 128
	{ setprojectile[13531].pal 7 shoot 13531 setprojectile[13531].pal 0 }
	else
	ifand AMMO_TYPES[CURWEAP] 256
	{ setprojectile[13531].pal 2 shoot 13531 setprojectile[13531].pal 0 }
	else
	ifand AMMO_TYPES[CURWEAP] 32
	{ setprojectile[13531].pal 25 shoot 13531 setprojectile[13531].pal 0 }
	else
	shoot 13531
ends

defstate check_caseless_grenades_avail
	ife GL_COUNTDOWN 43
		{
		ifand AMMO_TYPES[CURWEAP] 512
			{
			  ife fortymm_slug 0
				{
				xorvar AMMO_TYPE 512 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE
				set GL_COUNTDOWN 0
				setp[].weapon_pos 10
				xorvar GUNFIREMODE 32768
				}
			}
		else
		ifand AMMO_TYPES[CURWEAP] 2048
			{
			  ife fortymm_electro 0
				{
				xorvar AMMO_TYPE 2048 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE
				set GL_COUNTDOWN 0
				setp[].weapon_pos 10
				xorvar GUNFIREMODE 32768
				}
			}
		else
		ifand AMMO_TYPES[CURWEAP] 4096
			{
			  ife fortymm_cryo 0
				{
				xorvar AMMO_TYPE 4096 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE
				set GL_COUNTDOWN 0
				setp[].weapon_pos 10
				xorvar GUNFIREMODE 32768
				}
			}
		else
		ife fortymm_caseless 0
			{
			set GL_COUNTDOWN 0
			setp[].weapon_pos 10
			xorvar GUNFIREMODE 32768
			}
		}
ends

defstate PS_JAMES
{
ifand CHAR_APP 1
	{
	ifaction ZERO action J2STAND
	ifaction J2STAND set MOVESOUND 0
	ifaction JSTAND action J2STAND
	ife FIRE_SUIT 1 ifaction J2STAND action ES_STAND
	ife JUGGERN_SUIT 1 ifaction J2STAND action JG_STAND
	ife SPACE_SUIT 1 ifaction J2STAND action SS_STAND
	ife on_tripwire 1 action J2STAND
	ifl SLIDE_KICK 27 action J2DUCKING
	}

else
	{
	ifaction ZERO action JSTAND
	ifaction JSTAND set MOVESOUND 0
	ife FIRE_SUIT 1 ifaction JSTAND action ES_STAND
	ife JUGGERN_SUIT 1 ifaction JSTAND action JG_STAND
	ife SPACE_SUIT 1 ifaction JSTAND action SS_STAND
	ife on_tripwire 1 action JSTAND
	ifl SLIDE_KICK 27 action JDUCKING
	}

ife TIMEZONE 2 setvar screen_pal 7

qputs 90 MJ12 Injection
qputs 12 Used MJ12 Injection

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision goggles
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Night vision goggles
	qputs 106 Night vision on
	qputs 107 Night vision off
	}

qputs 6 GiroTek Protective Boots
qputs 75 Protective boots on

qputs 3 Portable Medikit

qputs 89 Airtank

qputs 47 Portable forcefield on
qputs 48 Portable forcefield off
qputs 49 Portable forcefield not found yet!
qputs 51 Portable forcefield
qputs 91 Portable forcefield

qputs 88 Jetpack
qputs 50 Jetpack not found yet!
qputs 52 Jetpack on
qputs 53 Jetpack off

qputs 102 We're gonna fry your ass, Stanfield!


getp[].holoduke_on TEMP
ifn TEMP -1
{
seta[TEMP].cstat 32768
seta[TEMP].xrepeat 1
seta[TEMP].yrepeat 1
ife PS_ITEM 0
	{
	stopsound TELEPORTER
	soundonce PFIELD
	espawn 5208
	seta[RETURN].pal 3
	set TEMP4 RETURN
	espawn 5208
	seta[RETURN].pal 18
	setactorvar[RETURN].TEMP8 TEMP4
	set PS_ITEM 1
	}
}
else
ife TEMP -1
ife PS_ITEM 1
{
soundonce BOS4_ATTACK
setactorsoundpitch THISACTOR BOS4_ATTACK 1024
set PS_ITEM 0
}

smaxammo 2 100
smaxammo 3 300
smaxammo 9 300

ife INJURED 1
	{
	setp[].weapon_pos 10
	ife player[].over_shoulder_on 1 setp[].over_shoulder_on 0
	
	getp[].posxv TEMP
	mulvar TEMP 10
	ifand BITS_PRESS P_SPRINTING
	 ifg SPRINTING 0 divvar TEMP 12 else divvar TEMP 15
	setp[].posxv TEMP
	getp[].posyv TEMP
	mulvar TEMP 10
	ifand BITS_PRESS P_SPRINTING
	 ifg SPRINTING 0 divvar TEMP 12 else divvar TEMP 15
	setp[].posyv TEMP
	
	ifp pstanding nullop else ifrnd 2 spawn BLOODPOOL
	}


ife SHOOTGRENADE THISACTOR { shoot J_GRENADE ifg bomb_throw_power 96 soundonce JEXERT set SHOOTGRENADE -1 }

setp[].knuckle_incs 0


	ife on_tripwire 1 set CKNEE 5132 else
	ifl ROUNDHOUSE_KICK 27 set CKNEE 5153 else
	ifl SPIN_KICK 20 set CKNEE 5153 else
	ifl FLYING_KICK 27 set CKNEE 5153 else
	ifl TWIRL_KICK 20 set CKNEE 5153 else
	set CKNEE 5132
	
set CKEYCARDTILE 5130
set CKEYCARDTILE2 5128
set CKEYCARDTILE3 5127
set CTRIPBOMB 5129
set CDETON 5173
set CTIP 5177
set CPIPEBOMB 5250

ifand CHAR_APP 1 set CHOLDING 9438 else set CHOLDING 9426

set CHOLDING_2 9426
set CHOLDING_3 11893

set C_ARM_1 5182
set C_ARM_2 12182

ifand CHAR_APP 1 set C_PISTOL_1 8991 else
set C_PISTOL_1 8988
set C_PISTOL_2 8988

set CMEDIKIT 5230
set CSTEROIDS 5192
set CHOLODUKE 5228
set CJETPACK 5233

set CHEAT 5347
set CNVG 5234

state DISP_nvg

set CSCUBA 5232
set CBOOTS 5235
set C_ARMOUR 5229
set C_HEAVY_ARMOUR 5236
ifand CHAR_APP 1
	{
	set C_HAND_1 19892
	set C_HAND_2 19893
	}
else
	{
	set C_HAND_1 7893
	set C_HAND_2 7894
	}


ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 90 
else set PMAX_STAMINA 120

set CIICON 5138

// MELEE

ifp pboosted
{
stopsound DUKE_HARTBEAT
soundonce J_INJECTION
getp[].jumping_counter TEMP
ifg TEMP 0 { setp[].poszv -6536 }

iffloordistl 32 { getp[].falling_counter TEMP ifl TEMP 61 setp[].falling_counter 8 }

ifl PHEALTH PMAXHEALTH { addphealth 3 }

}

ife temp_weapon 0
{
ifp pboosted
	{
	set WEAPON0_TOTALTIME 9
	set WEAPON0_HOLDDELAY 9
	set WEAPON0_FIREDELAY 4
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE
	}
else
	{
	ifand CHAR_APP 1
		{
		set WEAPON0_TOTALTIME 17
		set WEAPON0_HOLDDELAY 17
		set WEAPON0_FIREDELAY 7
		set WEAPON0_FIRESOUND 532
		set WEAPON0_SHOOTS 5357
		}
	else
		{
		set WEAPON0_TOTALTIME 17
		set WEAPON0_HOLDDELAY 17
		set WEAPON0_FIREDELAY 7
		set WEAPON0_FIRESOUND 532
		set WEAPON0_SHOOTS KNEE
		}
	}
ife CURWEAP 0
	{
	set GUNMAG -1
	ifand CHAR_APP 1
		{
		ifp pboosted { ife KICKBACKPIC 7 { sound PUNCH shoot 5357 } } else
		ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
		}
		else
		{
		ifp pboosted { ife KICKBACKPIC 7 { sound PUNCH shoot KNEE } } else
		ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
		}
		
		state UPPERCUT_STUFF
		
	}
}


// PISTOL
set WEAPON1_HOLDDELAY 10
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_CLIP 0

ife SPECIALIST_EQUIPMENT[28] 2 // Using the OTs33?
{
smaxammo 1 400
set WEAPON1_TILE 13418
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5981
setarray AMMO_AMOUNT[1] 27
set WEAPON1_SHOOTS 0
set WEAPON1_FIRESOUND 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 3
set WEAPON1_FLAGS 68
	
	ife CURWEAP 1
		{
			set WEAPON_TYPE 0
			set GUN_MAX_SPREAD 32
			ifand GUNFIREMODE 64 
				{
				set GUN_ACCURACY 48
				set GUN_VOLUME 28
				}
				else 
				{
				set GUN_ACCURACY 24
				set GUN_VOLUME 14
				}
				
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP OTS33_FIRE }
			
			set GUN_SIZE 0
		ife KICKBACKPIC 1 
			{ 
			shoot NINEMM_CALIBRE ifand GUNFIREMODE 64 shoot NINEMM_CALIBRE
			ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1
			}
		ife KICKBACKPIC 2
			{ 
			shoot 13772
			add GUN_SPREAD 8
			ifvarl GUNMAG 6 sound MAG_LOW		
			ifand GUNFIREMODE 64 shoot 13780
			set GUN_RECOIL 5
			set gunsmoke_angle 78
			state spawn_gunsmoke
			ifand GUNFIREMODE 64 { set gunsmoke_angle -70 state spawn_gunsmoke } 			
			}	
		}
	
}
else
ife SPECIALIST_EQUIPMENT[2] 2 // Using the Fn57?
{
smaxammo 1 200
set WEAPON1_TILE 10394
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 12
set WEAPON1_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON1_FIRESOUND 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 4
set WEAPON1_FLAGS 16448

ife CURWEAP 1
	{
	set WEAPON_TYPE 1
	set GUN_MAX_SPREAD 0
	ifand GUNFIREMODE 64 set GUN_VOLUME 40 else set GUN_VOLUME 20
	ifand GUNFIREMODE 2048 set GUN_ACCURACY 8 else 
		{ ifand GUNFIREMODE 64 set GUN_ACCURACY 64 else set GUN_ACCURACY 32 }
	set GUN_SIZE 0
	
	ifand GUNFIREMODE 2048
		{
		ifand GUNFIREMODE 64 xorvar GUNFIREMODE 2048
		ife player[].weapon_pos 0
			{
			state spawn_lasersite
			ifand SPECIALIST_CUSTOM[2] 1073741824 seta[RETURN].pal 1
			else ifand SPECIALIST_CUSTOM[2] 2147483648 seta[RETURN].pal 8
			else seta[RETURN].pal 0
			}
		}
		
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FN57_FIRE }
		
				ife KICKBACKPIC 2
				{
				shoot 13772
				ifand GUNFIREMODE 64 shoot 13780
				}
				
		ife KICKBACKPIC 2 
			{ 
			ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1
				getp[].horiz TEMP 
				add TEMP 7
				setp[].horiz TEMP 
			}
		ife KICKBACKPIC 3
			{ 
			getp[].horiz TEMP 
			sub TEMP 7 
			setp[].horiz TEMP 
			
			set gunsmoke_angle 96
			state spawn_gunsmoke
			ifand GUNFIREMODE 64 { set gunsmoke_angle -84 state spawn_gunsmoke } 
			
			}	
				
		
	}

}
else
ife SPECIALIST_EQUIPMENT[36] 2 // Using the Gold Jericho?
{
smaxammo 1 300
set WEAPON1_TILE 14617
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 18
set WEAPON1_SHOOTS GOLDEN_SHOT_MED
set WEAPON1_FIRESOUND 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 4
set WEAPON1_FLAGS 16448

		ife CURWEAP 1
		{
			set WEAPON_TYPE 3
			set GUN_MAX_SPREAD 48
			ifand GUNFIREMODE 64 
					{
					set GUN_VOLUME 40 
					set GUN_ACCURACY 16
					}
				else 
					{
					set GUN_VOLUME 20
					set GUN_ACCURACY 4
					}
			
			set GUN_SIZE 0
				ife KICKBACKPIC 2
				{
				shoot 13772
				ifand GUNFIREMODE 64 { sound JERICHO_FIRE shoot 13780 }
				}
				
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP JERICHO_FIRE }
				
		ife KICKBACKPIC 2 
			{ 
			ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1
				getp[].horiz TEMP 
				add TEMP 10
				setp[].horiz TEMP 
			}
		ife KICKBACKPIC 3
			{ 
			ifand GUNFIREMODE 64 add GUN_SPREAD 12
			add GUN_SPREAD 12
			getp[].horiz TEMP 
			sub TEMP 10 
			setp[].horiz TEMP 
			
			set gunsmoke_angle 96
			state spawn_gunsmoke
			ifand GUNFIREMODE 64 { set gunsmoke_angle -84 state spawn_gunsmoke } 
			
			}	
			
				
		}
}
else
ife SPECIALIST_EQUIPMENT[44] 2 // Using the ppk?
{
smaxammo 1 300
set WEAPON1_TILE 15877
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 257 else setarray WEAPON_SPECIAL[1] 256
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 16
set WEAPON1_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 4
set WEAPON1_FLAGS 16448
set WEAPON1_FIRESOUND 4
		
			ife CURWEAP 1
			{			
			set WEAPON_TYPE 1
			set GUN_MAX_SPREAD 0
				
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SUP_GLOCK } 
			ifand GUNFIREMODE 64 set GUN_VOLUME 10 else set GUN_VOLUME 5

			
			    set GUN_ACCURACY 8
				set GUN_SIZE 0
					
				ife KICKBACKPIC 2
				{
				shoot 13772
				ifand GUNFIREMODE 64 
					{ 
					shoot 13780 
					sound SUP_GLOCK
					} 
				}
				
		ife KICKBACKPIC 2 
			{ 
			ifand GUNFIREMODE 64 
			{ 
			sub PISTOLMAG 2 
			}
			else sub PISTOLMAG 1
				getp[].horiz TEMP 
				add TEMP 10
				setp[].horiz TEMP 
			}
		ife KICKBACKPIC 3
			{ 
			getp[].horiz TEMP 
			sub TEMP 10 
			setp[].horiz TEMP 
			
			set gunsmoke_angle 96
			state spawn_gunsmoke
			ifand GUNFIREMODE 64 { set gunsmoke_angle -84 state spawn_gunsmoke } 
			
			}	
			
				
			}
}
else
ife JAMES_1911 1 // Using the IW 1911?
{
smaxammo 1 200
set WEAPON1_TILE 10389
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 14
set WEAPON1_SHOOTS F45_CALIBRE
set WEAPON1_FIRESOUND 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 4
set WEAPON1_FLAGS 16448	
			ife CURWEAP 1
			{			
			ifand AMMO_TYPES[CURWEAP] 2
				{
				set WEAPON_TYPE 7
				set WEAPON1_SHOOTS SILVERAMMOSHOT
				ife CURWEAP 1 ife KICKBACKPIC 2 sound TOMMYG_SFIRE
				}
			else
				{
				set WEAPON_TYPE 2
				set WEAPON1_SHOOTS F45_CALIBRE
				}	
			set GUN_MAX_SPREAD 32
			ifand GUNFIREMODE 64 
				{
				set GUN_ACCURACY 16
				set GUN_VOLUME 32 
				}
				else 
				{
				set GUN_ACCURACY 1
				set GUN_VOLUME 16
				}
			set GUN_SIZE 0
				ife KICKBACKPIC 2
				{
				ifand AMMO_TYPES[CURWEAP] 2 shoot SRIFLESHELL else shoot 13772
				ifand GUNFIREMODE 64 { ifand AMMO_TYPES[CURWEAP] 2 shoot SRIFLESHELL else shoot 13780 sound S1911_FIRE } 
				 espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP S1911_FIRE
				}
				
		ifg KICKBACKPIC 1
		 ifl KICKBACKPIC 6
			{
			ifand BITS_PRESS 4 ifg PISTOLMAG 0 setplayer[].kickback_pic 1
			}
				
		ife KICKBACKPIC 2 
			{ 
			ifand GUNFIREMODE 64 
				{ 
				ifand AMMO_TYPES[CURWEAP] 2 ifg silver_ammo 0 sub silver_ammo 1
				sub PISTOLMAG 2 
				}
			else sub PISTOLMAG 1
			set GUN_RECOIL 10
			}
		ife KICKBACKPIC 3
			{ 
			add GUN_SPREAD 12
			ifand GUNFIREMODE 64 add GUN_SPREAD 12
			set gunsmoke_angle 96
			state spawn_gunsmoke
			ifand GUNFIREMODE 64 { set gunsmoke_angle -84 state spawn_gunsmoke } 
			
			}	
			
				
			}
}
else
ife JAMES_1911 0 // Using the glock?
{
smaxammo 1 400
set WEAPON1_TILE 5210
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 18

ifand JAMES_UPGRADE 2
	{
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 3
	set WEAPON1_FLAGS 70
	}
else
	{
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 3
	set WEAPON1_FLAGS 64
	}
	ife CURWEAP 1
		{	
		set WEAPON_TYPE 2
		ifand JAMES_UPGRADE 8
				{
				set WEAPON1_SHOOTS ZRIFLESHOT
				set WEAPON1_FIRESOUND 4
				ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 1711 } 
				}
		else
				{
				set WEAPON1_SHOOTS NINEMM_CALIBRE
				set WEAPON1_FIRESOUND 4
				ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GLOCKFIRE } 
				}
			
			
		ifand GUNFIREMODE 64 
				{
				set GUN_MAX_SPREAD 48
				set GUN_VOLUME 24 
				}
		else 
				{
				set GUN_MAX_SPREAD 24
				set GUN_VOLUME 12
				}
			set GUN_ACCURACY 4
			set GUN_SIZE 0
		ife KICKBACKPIC 1 
			{ 
			ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1
			}
		ife KICKBACKPIC 2
			{ 
			shoot 13772
			ifvarl GUNMAG 6 sound MAG_LOW
			ifand GUNFIREMODE 64 shoot 13780
			set GUN_RECOIL 5
			ifand JAMES_UPGRADE 2
				{
				add GUN_SPREAD 8
				ifand GUNFIREMODE 64 add GUN_SPREAD 8
				}
			else
				{
				add GUN_SPREAD 10
				ifand GUNFIREMODE 64 add GUN_SPREAD 10
				}
			set gunsmoke_angle 96
			state spawn_gunsmoke
			ifand GUNFIREMODE 64 { set gunsmoke_angle -84 state spawn_gunsmoke } 	
			}			
		}
	
}

	ife CURWEAP 1
	{
	
	ifand GUNFIREMODE 64
		{
		set WEAPON1_SHOTSPERBURST 2
		set GUN_HANDS 2
		set HANDS_DRAW 1
		set WEAPON1_RELOAD 69
		}
		else
		{
		set WEAPON1_SHOTSPERBURST 1
		set GUN_HANDS 1
		set HANDS_DRAW 2
		set WEAPON1_RELOAD 35
		}

  ifl PISTOLMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
     ifn CHARSELECT 1
   {
   ifn CUR_AMMO 0
	   {
	   setp[].reloading 1
	   setp[].kickback_pic 6
	   }
   }

	set GUNMAG PISTOLMAG
	ife SPECIALIST_EQUIPMENT[36] 2 { ifand GUNFIREMODE 64 set MAXPISTOLMAG 18 else set MAXPISTOLMAG 9 } else
	ife SPECIALIST_EQUIPMENT[44] 2 { ifand GUNFIREMODE 64 set MAXPISTOLMAG 16 else set MAXPISTOLMAG 8 } else
	ife SPECIALIST_EQUIPMENT[2] 2 { ifand GUNFIREMODE 64 set MAXPISTOLMAG 40 else set MAXPISTOLMAG 20 } else
	ife SPECIALIST_EQUIPMENT[28] 2 { ifand GUNFIREMODE 64 set MAXPISTOLMAG 54 else set MAXPISTOLMAG 27 } else
	ife JAMES_1911 1 { ifand GUNFIREMODE 64 set MAXPISTOLMAG 16 else set MAXPISTOLMAG 8 } else
	ifand GUNFIREMODE 64 { ifand JAMES_UPGRADE 1 set MAXPISTOLMAG 60 else set MAXPISTOLMAG 36 } else
	{ ifand JAMES_UPGRADE 1 set MAXPISTOLMAG 30 else set MAXPISTOLMAG 18 }
	
		ife KICKBACKPIC 10 state JMOVESOUND2
		ife KICKBACKPIC 42 state JMOVESOUND2
		
		ife KICKBACKPIC 34
			{
			ifand GUNFIREMODE 64 
				{ 
				ife PISTOLMAG 0 set RELOAD_TYPE 2
				ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } 
				else set PISTOLMAG MAXPISTOLMAG divvar PISTOLMAG 2 
				} 
			else { ife PISTOLMAG 0 set RELOAD_TYPE 1 ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO }
			else set PISTOLMAG MAXPISTOLMAG }
			}
			
		ife KICKBACKPIC 68
			{
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}
			
		ife SPECIALIST_EQUIPMENT[2] 2 // FN 57
		{
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 10 sound FN57_RELOAD
		ife KICKBACKPIC 13 ife PISTOLMAG 0 spawn 3720
		ife KICKBACKPIC 34 
			{
			ife RELOAD_TYPE 1 { sound AUTOMAG_SLIDE set RELOAD_TYPE 0 }
			ife RELOAD_TYPE 2 sound AUTOMAG_SLIDE
			}
		ife KICKBACKPIC 42 sound FN57_RELOAD
		ife KICKBACKPIC 45 spawn 3720
		ife KICKBACKPIC 68 ife RELOAD_TYPE 2 { sound AUTOMAG_SLIDE set RELOAD_TYPE 0 }
		}
		else
		ife SPECIALIST_EQUIPMENT[36] 2 // Gold Jericho
		{
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 13 { sound JERICHO_RELOAD ife PISTOLMAG 0 spawn 3720 }
		ife KICKBACKPIC 34 
			{
			ife RELOAD_TYPE 1 { sound JERICHO_SLIDE set RELOAD_TYPE 0 }
			ife RELOAD_TYPE 2 sound JERICHO_SLIDE
			}
		ife KICKBACKPIC 45 { sound JERICHO_RELOAD spawn 3720 }
		ife KICKBACKPIC 68 ife RELOAD_TYPE 2 { sound JERICHO_SLIDE set RELOAD_TYPE 0 }
		}
		else
		ife SPECIALIST_EQUIPMENT[44] 2 // PPK
		{
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 13 { sound PPK_RELOAD ife PISTOLMAG 0 spawn 3720 }
		ife KICKBACKPIC 34 
			{
			ife RELOAD_TYPE 1 { sound GLOCK_SLIDE set RELOAD_TYPE 0 }
			ife RELOAD_TYPE 2 sound GLOCK_SLIDE
			}
		ife KICKBACKPIC 45 { sound PPK_RELOAD spawn 3720 }
		ife KICKBACKPIC 65 ife RELOAD_TYPE 2 { sound GLOCK_SLIDE set RELOAD_TYPE 0 }
		}
		else
		ife SPECIALIST_EQUIPMENT[28] 2 // OTs33
		{
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 13 { sound TMAGOUT ife PISTOLMAG 0 spawn 3737 }
		ife KICKBACKPIC 26 sound TMAGIN
		ife KICKBACKPIC 45 { sound TMAGOUT spawn 3737 }
		ife KICKBACKPIC 58 sound TMAGIN
		}
		else
		ifn SPECIALIST_EQUIPMENT[2] 2
		ife JAMES_1911 1 // M1911
		{
		set GUN_AMMO_TYPES 2
		ife KICKBACKPIC 13 { sound S1911_RELOAD ife PISTOLMAG 0 spawn 7103 }
		ife KICKBACKPIC 34 
			{
			ife RELOAD_TYPE 1 { sound S1911_SLIDE set RELOAD_TYPE 0 }
			ife RELOAD_TYPE 2 sound S1911_SLIDE
			}
		ife KICKBACKPIC 45 { sound S1911_RELOAD spawn 7103 }
		ife KICKBACKPIC 68 ife RELOAD_TYPE 2 { sound S1911_SLIDE set RELOAD_TYPE 0 }
		}
		else // glock
		{
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 13 { sound GLOCK_RELOAD ife PISTOLMAG 0 { ifand JAMES_UPGRADE 1 spawn 3737 else spawn 3720 } }
		ife KICKBACKPIC 34 
			{
			ife RELOAD_TYPE 1 { sound GLOCK_SLIDE set RELOAD_TYPE 0 }
			ife RELOAD_TYPE 2 sound GLOCK_SLIDE
			}
		ife KICKBACKPIC 45 { sound GLOCK_RELOAD ifand JAMES_UPGRADE 1 spawn 3737 else spawn 3720 }
		ife KICKBACKPIC 65 ife RELOAD_TYPE 2 { sound GLOCK_SLIDE set RELOAD_TYPE 0 }
		}
	}


// SHOTGUN
ife JAMES_JACKH 1 // USING THE IW BONUS JACKHAMMER
{
set WEAPON2_TILE 12160
set W2_AMMO_TILE 5225
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 4

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 62
set WEAPON2_FIREDELAY 3
set WEAPON2_TOTALTIME 7
set WEAPON2_HOLDDELAY 32
set WEAPON2_FLAGS 1024
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 5
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 70
	set GUN_ACCURACY 24
	set GUN_MAX_SPREAD 8
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUNMAG SHOTGUNBOXMAG
	set MAX_SHOTGUNBOXMAG 10
	
	ifand BITS_PRESS 4
		  ifg SHOTGUNBOXMAG 0 
		   ife KICKBACKPIC 0
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
			
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP JACKHAMMER } 

	
	ife KICKBACKPIC 3
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	
			ife KICKBACKPIC 2 
								{
								sub SHOTGUNBOXMAG 1 
								getp[].ammo_amount 2 HOLD_AMMO_TEMP
								add HOLD_AMMO_TEMP 1
								setp[].ammo_amount 2 HOLD_AMMO_TEMP 
								set gunsmoke_angle 96
								state spawn_gunsmoke
								}
			ife KICKBACKPIC 3 add GUN_SPREAD 8
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 10 state JMOVESOUND2

			ife KICKBACKPIC 13 { sound JACKH_MAGOUT ife SHOTGUNBOXMAG 0 spawn 7111 }
			
			ife KICKBACKPIC 30 state JMOVESOUND2
			ife KICKBACKPIC 43 
			{
			sound JACKH_MAGIN
			set TEMP5 SHOTGUNBOXMAG
			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 TEMP5

				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 HOLD_AMMO_TEMP 
					sub HOLD_AMMO_TEMP TEMP6 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
			}
			
		ifl SHOTGUNBOXMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
			}
			
	}
}
else
ife SPECIALIST_EQUIPMENT[61] 2 // USING THE GOLD HK CAWS
{
set WEAPON2_TILE 19759
set W2_AMMO_TILE 5225
setarray AMMO_AMOUNT[2] 5
setarray WEAPON_SPECIAL[2] 4

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 40
set WEAPON2_FIREDELAY 3
set WEAPON2_TOTALTIME 7
set WEAPON2_HOLDDELAY 32
set WEAPON2_FLAGS 1024
set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
set WEAPON2_SPAWNTIME 5
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 70
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 24
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUNMAG SHOTGUNBOXMAG
	set MAX_SHOTGUNBOXMAG 10
	
	ifand BITS_PRESS 4
		  ifg SHOTGUNBOXMAG 0 
		   ife KICKBACKPIC 0
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
			
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP USAS-12_FIRE } 
	
			ife KICKBACKPIC 3 
			{ 
			  setprojectile[3761].pal 40 shoot 3761 setprojectile[3761].pal 0
			  geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
			}	

	
	ife KICKBACKPIC 3
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	
			ife KICKBACKPIC 2 
								{
								sub SHOTGUNBOXMAG 1 
								getp[].ammo_amount 2 HOLD_AMMO_TEMP
								add HOLD_AMMO_TEMP 1
								setp[].ammo_amount 2 HOLD_AMMO_TEMP 
								set gunsmoke_angle 96
								state spawn_gunsmoke
								}
			ife KICKBACKPIC 3 { set GUN_RECOIL 16 add GUN_SPREAD 12 }
			ife KICKBACKPIC 10 state JMOVESOUND2

			ife KICKBACKPIC 13 { sound AUTOSHOT_OPEN ife SHOTGUNBOXMAG 0 spawn 6781 }
			
			ife KICKBACKPIC 24 state JMOVESOUND2
			ife KICKBACKPIC 32
			{
			soundonce AUTOSHOT_CLOSE
			set TEMP5 SHOTGUNBOXMAG
			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 TEMP5

				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 HOLD_AMMO_TEMP 
					sub HOLD_AMMO_TEMP TEMP6 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
			}
			
		ifl SHOTGUNBOXMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
			}
			
	}
}
else // USING THE AUTO-5?
ife SPECIALIST_EQUIPMENT[25] 2
{
set WEAPON2_TILE 13385
set W2_AMMO_TILE 5225
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 27
set WEAPON2_FIREDELAY 2
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set MAX_SHOTGUNMAG 5
	
	ifg SHOTGUNMAG MAX_SHOTGUNMAG set SHOTGUNMAG MAX_SHOTGUNMAG
	
	set GUN_VOLUME 70
	set GUN_ACCURACY 12
	set GUN_MAX_SPREAD 24
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG SHOTGUNMAG
	
	set GUN_AMMO_TYPES 1
	set WEAPON2_TOTALTIME 5
	set WEAPON2_FLAGS 17408
	set WEAPON2_SHOOTS 2613
	set WEAPON2_FIRESOUND 4
	
	ifand AMMO_TYPES[CURWEAP] 1
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 9361
	set WEAPON2_FIRESOUND EXPL_SHELL_FIRE
	ife explosive_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] 1 }
	}
	else
	ifand AMMO_TYPES[CURWEAP] 4  
	{
	set WEAPON_TYPE 9
	ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
	set WEAPON2_SHOOTS 6826
	set WEAPON2_FIRESOUND FLECH_SHELL_FIRE
	ife flechete_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] 4 }
	}
	else
	{
	set WEAPON_TYPE 2
	set WEAPON2_SHOOTS 2613
	set WEAPON2_FIRESOUND AUTO5_FIRE
	}
	
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		  ifg SHOTGUNMAG 0 
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
	}
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 434 } 
	
	ife KICKBACKPIC 3
	{
	add GUN_SPREAD 12
	ife NEED_TO_FIRE 1
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP 
		sub HOLD_AMMO_TEMP 1
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 0
		}
	}
		
	ife player[].reloading 1
		{
		ife KICKBACKPIC 21 
			{ 
			sound AUTO5_INSERT 
			ife BELT_LOADOUT[0] 5 setactorsoundpitch THISACTOR AUTO5_INSERT 512
			add SHOTGUNMAG 1 
			
			ifand AMMO_TYPES[CURWEAP] 1 { set LAST_SHELL_FIRED 1 sub explosive_shells 1 }
			else
			ifand AMMO_TYPES[CURWEAP] 4 { set LAST_SHELL_FIRED 4 sub flechete_shells 1 }
			else
				{
				set LAST_SHELL_FIRED 0 
				getp[].ammo_amount 2 ALLY_MAG
				sub ALLY_MAG 1 
				ifl ALLY_MAG 0 set ALLY_MAG 0
				setp[].ammo_amount 2 ALLY_MAG
				}
						
			}
		// ife KICKBACKPIC 29 soundonce WINCHUP
		}
		else
			{
			ife KICKBACKPIC 2 
								{												
								ifand AMMO_TYPES[CURWEAP] 1 set LAST_SHELL_FIRED 1
								else ifand AMMO_TYPES[CURWEAP] 4 set LAST_SHELL_FIRED 4
								else set LAST_SHELL_FIRED 0 								
								sub SHOTGUNMAG 1 
								ife AMMO_TYPES[CURWEAP] 0
									{
									getp[].ammo_amount 2 ALLY_MAG
									add ALLY_MAG 1 
									setp[].ammo_amount 2 ALLY_MAG
									}
								set gunsmoke_angle 96
								state spawn_gunsmoke
								}
			ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 25 setp[].horiz TEMP }
			ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 25 setp[].horiz TEMP  }
			ife KICKBACKPIC 4 state SHOTGUN_SHELL
			}

			
	}

}
else // USING THE KSG-12?
ife SPECIALIST_EQUIPMENT[53] 2
{
smaxammo 2 70
set WEAPON2_TILE 16079
set W2_AMMO_TILE 5225
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 36
set WEAPON2_FIREDELAY 2
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 12
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 
set WEAPON2_TOTALTIME 18
set WEAPON2_FIRESOUND 4

ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 80
	set GUN_AMMO_TYPES 5
	set GUN_ACCURACY 24
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 2
	set GUN_HANDS 2
		set GUNMAG SHOTGUNMAG
		
	ifl SHOTGUNMAG 0 set SHOTGUNMAG 0
	ifl SHOTGUNBOXMAG 0 set SHOTGUNBOXMAG 0
		
	ife KICKBACKPIC 3 add GUN_SPREAD 24
		
	ifand GUNFIREMODE_2 8 // Using KSG-12's second tube?
		{
		ifand AMMO_TYPES[15] 1
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 9361
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE }
		ife explosive_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 1 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
		}
		else
		ifand AMMO_TYPES[15] 4  
		{
		set WEAPON_TYPE 9
		ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
		set WEAPON2_SHOOTS 6826
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE }
		ife flechete_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 4 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
		}
		else
		ifand AMMO_TYPES[15] 64  
		{
		set WEAPON_TYPE 0
		set WEAPON2_SHOOTS RMAXREVOLVERSHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MAGNUM_SHOTGUN }
		ife magnum_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 64 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
		}
		else
		ifand AMMO_TYPES[15] 1024 
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 22536
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP DRAGONS_BR_FIRE }
		ife dragon_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 1024 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
		}
		else
		{
		set WEAPON_TYPE 2
		set WEAPON2_SHOOTS 2613
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP KSG_12_FIRE }
		}
		
ife KICKBACKPIC 0
{
ifand BITS_PRESS 4
	{
	getp[].ammo_amount 2 HOLD_AMMO_TEMP
	  ifg SHOTGUNBOXMAG 0 
	   ife HOLD_AMMO_TEMP 0
		{ 
		add HOLD_AMMO_TEMP 1
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 1
		}
	}
}

ife KICKBACKPIC 5
ife NEED_TO_FIRE 1
	{
	getp[].ammo_amount 2 HOLD_AMMO_TEMP 
	sub HOLD_AMMO_TEMP 1
	ifl HOLD_AMMO_TEMP 0 set HOLD_AMMO_TEMP 0
	setp[].ammo_amount 2 HOLD_AMMO_TEMP 
	set NEED_TO_FIRE 0
	}
		
		ife NEEDS_PUMP 1 set MAX_SHOTGUNBOXMAG 7 else set MAX_SHOTGUNBOXMAG 8
		ifg SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
		ife SHOTGUNBOXMAG 0 ife KICKBACKPIC 0 set NEEDS_PUMP 1
		ife player[].reloading 1
			{
			ife KICKBACKPIC 22 
				{ 
				sound KSG_12_INSERT 
				ife BELT_LOADOUT[0] 5 setactorsoundpitch THISACTOR KSG_12_INSERT 128
				add SHOTGUNBOXMAG 1 
				
				ifand AMMO_TYPES[15] 1
					{
					set LAST_SHELL_FIRED_2 1
					sub explosive_shells 1
					}
				else
				ifand AMMO_TYPES[15] 4  
					{
					set LAST_SHELL_FIRED_2 4
					sub flechete_shells 1
					}
				else
				ifand AMMO_TYPES[15] 64  
				    {
					set LAST_SHELL_FIRED_2 64
					sub magnum_shells 1
					}
				else
				ifand AMMO_TYPES[15] 1024  
				    {
					set LAST_SHELL_FIRED_2 1024
					sub dragon_shells 1
					}
				else
					{
					set LAST_SHELL_FIRED_2 0
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					sub HOLD_AMMO_TEMP 1 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
			}
		else ife player[].reloading 0
			{
			ife KICKBACKPIC 9 sound KSG_12_PUMP
			ife KICKBACKPIC 0 ifg SHOTGUNBOXMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 6 
			}
		
			ife KICKBACKPIC 2 				
				{
				sub SHOTGUNBOXMAG 1 
					ife AMMO_TYPES[15] 0
					{
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					add HOLD_AMMO_TEMP 1 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
			ife KICKBACKPIC 3
				{
				ifand GUNFIREMODE_2 8
					{
					ifand AMMO_TYPES[15] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				else
					{
					ifand AMMO_TYPES[15] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				}
			ife KICKBACKPIC 4 { set gunsmoke_angle 96 state spawn_gunsmoke }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 16 
			 ife player[].reloading 0 
				{
				ife NEEDS_PUMP 1 set NEEDS_PUMP 0
				else // If it didn't need pumping, eject a shell
					state SHOTGUN_SHELL2
				}
		}
	else // using first tube
		{
		ifand AMMO_TYPES[CURWEAP] 1
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 9361
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE }
		ife explosive_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		ifand AMMO_TYPES[CURWEAP] 4  
		{
		set WEAPON_TYPE 9
		ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
		set WEAPON2_SHOOTS 6826
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE }
		ife flechete_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		ifand AMMO_TYPES[CURWEAP] 64  
		{
		set WEAPON_TYPE 0
		set WEAPON2_SHOOTS RMAXREVOLVERSHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MAGNUM_SHOTGUN } 
		ife magnum_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 64 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		ifand AMMO_TYPES[CURWEAP] 1024  
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 22536
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP DRAGONS_BR_FIRE } 
		ife dragon_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1024 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		{
		set WEAPON_TYPE 2
		set WEAPON2_SHOOTS 2613
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP KSG_12_FIRE } 
		}
		
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP  
		  ifg SHOTGUNMAG 0 
		   ife HOLD_AMMO_TEMP 0
			{ 
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			set NEED_TO_FIRE 1
			setp[].kickback_pic 1
			}
		}
	}

	ife KICKBACKPIC 5
	ife NEED_TO_FIRE 1
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP 
		sub HOLD_AMMO_TEMP 1
		ifl HOLD_AMMO_TEMP 0 set HOLD_AMMO_TEMP 0
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 0
		}

		ife NEEDS_PUMP 1 set MAX_SHOTGUNMAG 7 else set MAX_SHOTGUNMAG 8
		ifg SHOTGUNMAG MAX_SHOTGUNMAG set SHOTGUNMAG MAX_SHOTGUNMAG
		ife SHOTGUNMAG 0 ife KICKBACKPIC 0 set NEEDS_PUMP 1
		ife player[].reloading 1
			{
			ife KICKBACKPIC 22 
				{ 
				sound KSG_12_INSERT
				ife BELT_LOADOUT[0] 5 setactorsoundpitch THISACTOR KSG_12_INSERT 128
				add SHOTGUNMAG 1 
				
				ifand AMMO_TYPES[2] 1
					{
					set LAST_SHELL_FIRED 1
					sub explosive_shells 1
					}
				else
				ifand AMMO_TYPES[2] 4  
					{
					set LAST_SHELL_FIRED 4
					sub flechete_shells 1
					}
				else
				ifand AMMO_TYPES[2] 64  
					{
					set LAST_SHELL_FIRED 64
					sub magnum_shells 1
					}
				else
				ifand AMMO_TYPES[2] 1024  
					{
					set LAST_SHELL_FIRED 1024
					sub dragon_shells 1
					}
				else
					{
					set LAST_SHELL_FIRED 0
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					sub HOLD_AMMO_TEMP 1 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
			}
		else ife player[].reloading 0
			{
			ife KICKBACKPIC 9 sound KSG_12_PUMP
			ife KICKBACKPIC 0 ifg SHOTGUNMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 6 
			}
			ife KICKBACKPIC 2 				
				{
				sub SHOTGUNMAG 1 
				
				ifand AMMO_TYPES[2] 1 set LAST_SHELL_FIRED 1
				else
				ifand AMMO_TYPES[2] 4 set LAST_SHELL_FIRED 4
				else
				ifand AMMO_TYPES[2] 64 set LAST_SHELL_FIRED 64
				else
				ifand AMMO_TYPES[2] 1024 set LAST_SHELL_FIRED 1024
				else set LAST_SHELL_FIRED 0
				
								ife AMMO_TYPE 0
									{
									getp[].ammo_amount 2 HOLD_AMMO_TEMP
									add HOLD_AMMO_TEMP 1 
									setp[].ammo_amount 2 HOLD_AMMO_TEMP
									}
				}
			ife KICKBACKPIC 3
				{
				ifand GUNFIREMODE_2 8
					{
					ifand AMMO_TYPES[15] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				else
					{
					ifand AMMO_TYPES[CURWEAP] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				}
			ife KICKBACKPIC 4 { set gunsmoke_angle 96 state spawn_gunsmoke }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 16 
			 ife player[].reloading 0 
				{
				ife NEEDS_PUMP 1 set NEEDS_PUMP 0
				else // If it didn't need pumping, eject a shell
				state SHOTGUN_SHELL
				}
			}
		}
}
else // USING THE PROTECTA-12
{
set WEAPON2_TILE 5216
set W2_AMMO_TILE 5225
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 27
set WEAPON2_FIREDELAY 2
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	ifand JAMES_UPGRADE 1024 set MAX_SHOTGUNMAG 16
	else set MAX_SHOTGUNMAG 12
	ifg SHOTGUNMAG MAX_SHOTGUNMAG set SHOTGUNMAG MAX_SHOTGUNMAG
	
	set GUN_VOLUME 70
	set GUN_ACCURACY 24
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 1
	set GUN_HANDS 2
	set GUNMAG SHOTGUNMAG
	
	set GUN_AMMO_TYPES 1
	set WEAPON2_TOTALTIME 5
	set WEAPON2_FLAGS 17408
	set WEAPON2_SHOOTS 2613
	set WEAPON2_FIRESOUND 4
	
	
	
	ifand AMMO_TYPES[CURWEAP] 1
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 9361
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE } 
	ife explosive_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	ifand AMMO_TYPES[CURWEAP] 4  
	{
	set WEAPON_TYPE 9
	ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
	set WEAPON2_SHOOTS 6826
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE } 
	ife flechete_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	{
	set WEAPON_TYPE 2
	set WEAPON2_SHOOTS 2613
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP PROTECTA_FIRE } 
	}
	
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		  ifg SHOTGUNMAG 0 
		   ife player[].ammo_amount 2 0
		    ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
	}
	
	ife KICKBACKPIC 3
	{
	add GUN_SPREAD 24
	ife NEED_TO_FIRE 1
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP
		sub HOLD_AMMO_TEMP 1
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 0
		}
	}
		
	ife player[].reloading 1
		{
		ife KICKBACKPIC 21 
			{ 
			sound SPAS12_INS 
			ife BELT_LOADOUT[0] 5 setactorsoundpitch THISACTOR SPAS12_INS 512
			add SHOTGUNMAG 1 

			ifand AMMO_TYPES[CURWEAP] 1 { set LAST_SHELL_FIRED 1 sub explosive_shells 1 }
			else
			ifand AMMO_TYPES[CURWEAP] 4 { set LAST_SHELL_FIRED 4 sub flechete_shells 1 }
					else
						{
						set LAST_SHELL_FIRED 0
						getp[].ammo_amount 2 HOLD_AMMO_TEMP
						sub HOLD_AMMO_TEMP 1 
						setp[].ammo_amount 2 HOLD_AMMO_TEMP
						}
			
			}
		ife KICKBACKPIC 29 soundonce WINCHUP
		}
		else
			{
			ife KICKBACKPIC 2 
								{
								sub SHOTGUNMAG 1 
								ife AMMO_TYPES[CURWEAP] 0
									{
									getp[].ammo_amount 2 HOLD_AMMO_TEMP
									add HOLD_AMMO_TEMP 1 
									setp[].ammo_amount 2 HOLD_AMMO_TEMP
									}
								set gunsmoke_angle 96
								state spawn_gunsmoke
								}
			ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 25 setp[].horiz TEMP }
			ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 25 setp[].horiz TEMP  }
			ife KICKBACKPIC 4 state SHOTGUN_SHELL
			}
	}

}


// MACHINEGUN
ife SPECIALIST_EQUIPMENT[8] 2 // using the MP5SD+M203?
{
set WEAPON3_TILE 11886
setarray WEAPON_SPECIAL[3] 2
set W3_AMMO_TILE 5362
setarray AMMO_AMOUNT[3] 50

set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS CHAINGUN
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 
set WEAPON3_CLIP 0		
set WEAPON3_TOTALTIME 3
set WEAPON3_FIREDELAY 2
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_FLAGS 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_SIZE 1
	set GUN_VOLUME 2
	set GUN_HANDS 2
	
	ifand GUNFIREMODE 32768
	set GUN_AMMO_TYPES 2048
	else
	set GUN_AMMO_TYPES 32
	
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	
	state check_cased_grenades_avail
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MP5_FIRE } 
	
	set GUNMAG MGUNMAG
	// set MAXMGUNMAG 30
	
		ifand GUNFIREMODE 16384 
			{
			set GUN_MAX_SPREAD 8
			set GUN_ACCURACY 8
			ife KICKBACKPIC 1 { getp[].horiz TEMP add TEMP 1 setp[].horiz TEMP }
			ife KICKBACKPIC 2 
				{
				getp[].horiz TEMP sub TEMP 1 setp[].horiz TEMP
				set gunsmoke_angle 0
				state spawn_gunsmoke
				}
			ife KICKBACKPIC 2 add GUN_SPREAD 6
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0  xorvar GUNFIREMODE 16384 }
			}
			else
			{
			set GUN_MAX_SPREAD 16
			set GUN_ACCURACY 16
			ife KICKBACKPIC 2 
				{
				set GUN_RECOIL 5
				set gunsmoke_angle 72
				state spawn_gunsmoke
				}
			ife KICKBACKPIC 2 add GUN_SPREAD 8
			}
			
		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
					ife GL_COUNTDOWN 34 soundonce GL_OPEN
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}
			
		ife RELOAD_TYPE 0
		{
		ife KICKBACKPIC 17 sound MP5_RELOAD
		ife KICKBACKPIC 10 state JMOVESOUND2
		
		ife KICKBACKPIC 30 
			{
			set MAXMGUNMAG 31
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		}
		else
		ife RELOAD_TYPE 1
		{
		ife KICKBACKPIC 17 sound MP5_BOLT
		ife KICKBACKPIC 27 { sound MP5_RELOAD ife MGUNMAG 0 spawn 3737 }
		ife KICKBACKPIC 30 state JMOVESOUND2
		
		ife KICKBACKPIC 40 
			{
			set MAXMGUNMAG 30
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		}

	  ifl MGUNMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 6
			set WEAPON3_RELOAD 62
			set RELOAD_TYPE 1
			}
		}
  }
}
else
ife SPECIALIST_EQUIPMENT[55] 2 // using the UMP45?
{
set WEAPON3_TILE 16107
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 5362
setarray AMMO_AMOUNT[3] 40

set WEAPON3_SPAWN 0

set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 
set WEAPON3_CLIP 0		
set WEAPON3_TOTALTIME 3
set WEAPON3_FIREDELAY 2
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_FLAGS 0

	ife CURWEAP 3
	{
	set GUN_AMMO_TYPES 2
	set GUN_SIZE 1
	set GUN_VOLUME 6
	set GUN_HANDS 2
	ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 1024
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP UMP_FIRE }
	
	ifand AMMO_TYPES[CURWEAP] 2
		{
		set WEAPON_TYPE 7
		set WEAPON3_SHOOTS SILVERAMMOSHOT
		ife KICKBACKPIC 2 sound TOMMYG_SFIRE
		ife silver_ammo 0 ife MGUNMAG 0 xorvar AMMO_TYPE 2
		}
		else
		{
		set WEAPON_TYPE 2
		set WEAPON3_SHOOTS F45_CALIBRE
		}
	
	set GUNMAG MGUNMAG
	
		ifand GUNFIREMODE 16384 
			{
			set GUN_MAX_SPREAD 16
			set GUN_ACCURACY 8
			ife KICKBACKPIC 2 
				{
				add GUN_SPREAD 8
				set GUN_RECOIL 3
				set gunsmoke_angle 0
				state spawn_gunsmoke
				}
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
			}
			else
			{
			set GUN_MAX_SPREAD 32
			set GUN_ACCURACY 12
			ife KICKBACKPIC 2 
				{
				add GUN_SPREAD 14
				set GUN_RECOIL 4
				set gunsmoke_angle 72
				state spawn_gunsmoke
				}
			}
			
		ife RELOAD_TYPE 0
		{
		ife KICKBACKPIC 17 sound UMP_RELOAD
		ife KICKBACKPIC 10 { ife silver_ammo 0 { xorvar AMMO_TYPE 2 setarray AMMO_TYPES[CURWEAP] 0 } state JMOVESOUND2 }
		
		ife KICKBACKPIC 30 
			{
			set GUN_RECOIL_COUNT 0
			set MAXMGUNMAG 26
			ifand AMMO_TYPES[CURWEAP] 2 // using silver ammo?
				{
				ifl silver_ammo MAXMGUNMAG set MGUNMAG silver_ammo else set MGUNMAG MAXMGUNMAG
				}
			else
				{
				ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
				}
			}
		}
		else
		ife RELOAD_TYPE 1
		{
		ife KICKBACKPIC 17 sound UMP_BOLT
		ife KICKBACKPIC 27 { sound UMP_RELOAD ife MGUNMAG 0 spawn 3737 }
		ife KICKBACKPIC 30 { ife silver_ammo 0 { xorvar AMMO_TYPE 2 setarray AMMO_TYPES[CURWEAP] 0 } state JMOVESOUND2 }
		
		// ife KICKBACKPIC 58 sound UMP_BOLT
		ife KICKBACKPIC 40 
			{
			set MAXMGUNMAG 25
			ifand AMMO_TYPES[CURWEAP] 2 // using silver ammo?
				{
				ifl silver_ammo MAXMGUNMAG set MGUNMAG silver_ammo else set MGUNMAG MAXMGUNMAG
				}
			else
				{
				ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
				}
			}
		}

  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
   		setp[].reloading 1
   		setp[].kickback_pic 6
		set WEAPON3_RELOAD 62
		set RELOAD_TYPE 1
		}
	}
  }
}
else
ife SPECIALIST_EQUIPMENT[15] 2 // using the PP-19 Bizon?
{
set WEAPON3_TILE 12067
set W3_AMMO_TILE 12062
setarray WEAPON_SPECIAL[3] 0
setarray AMMO_AMOUNT[3] 64

set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 
set WEAPON3_CLIP 0		
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOTSPERBURST 1

	ife CURWEAP 3
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 12
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 2
	
	set WEAPON3_FIREDELAY 2
	set WEAPON3_TOTALTIME 3
	
	set WEAPON3_FLAGS 68
	
		set GUN_SIZE 1
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 32
		
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP PP19_FIRE } 
		
		ife KICKBACKPIC 2 
			{
			add GUN_SPREAD 8
			set GUN_RECOIL 5
			
			set gunsmoke_angle 72
			state spawn_gunsmoke
			}

	set GUNMAG MGUNMAG
	set MAXMGUNMAG 64
					
		ife KICKBACKPIC 7 { sound PP19_RELOAD ife MGUNMAG 0 spawn 14641 }
		ife KICKBACKPIC 15 sound PP19_FOLEY
		ife KICKBACKPIC 46 sound AK47_SLIDE
		ife KICKBACKPIC 40 sound PP19_FOLEY
		
		ife KICKBACKPIC 30 
			{
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}


  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
		set WEAPON3_RELOAD 58
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
  }
  
}
else // Using the MP7?
{
ifand JAMES_UPGRADE 128 set WEAPON3_TILE 5365
else set WEAPON3_TILE 5211
set W3_AMMO_TILE 5221
ifand GUNSAKIMBO 2 setarray WEAPON_SPECIAL[3] 1 else setarray WEAPON_SPECIAL[3] 0
setarray AMMO_AMOUNT[3] 50

set WEAPON3_HOLDDELAY 2
set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS ZRIFLESHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 
set WEAPON3_CLIP 0
set WEAPON3_FIRESOUND 4


	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	
	ifand GUNFIREMODE 1024 // Are they doubled up?
		{
		set GUN_ACCURACY 16
		set GUN_MAX_SPREAD 64
		set WEAPON3_FIREDELAY 2
		set WEAPON3_TOTALTIME 3
		set WEAPON3_FLAGS 68
		set WEAPON3_SHOTSPERBURST 2
		set WEAPON3_RELOAD 70
		set GUN_HANDS 2
		}
	else
		{
		set WEAPON3_SHOTSPERBURST 1
		set WEAPON3_RELOAD 35
		set WEAPON3_FIREDELAY 2
		set WEAPON3_TOTALTIME 3
		set WEAPON3_FLAGS 68
		set GUN_HANDS 1
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 32
		}
	
	ifand JAMES_UPGRADE 128 // Suppressed?
		{
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SUP_TMP } 
		ifand GUNFIREMODE 1024 set GUN_VOLUME 8 else set GUN_VOLUME 4
		}
		else
		{
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP TMPFIRE } 
		ifand GUNFIREMODE 1024 set GUN_VOLUME 28 else set GUN_VOLUME 14
		}
	
	ifand GUNFIREMODE 2048
	 ife player[].weapon_pos 0
		{
		ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 2048
		state spawn_lasersite
		seta[RETURN].x hitx
		seta[RETURN].y hity
		seta[RETURN].z hitz
		
				ifand SPECIALIST_CUSTOM[3] 1073741824 seta[RETURN].pal 1
				else ifand SPECIALIST_CUSTOM[3] 2147483648 seta[RETURN].pal 8
				else seta[RETURN].pal 0
		
		}
	
	set GUNMAG MGUNMAG
	ifand GUNFIREMODE 1024 
	{ ifand JAMES_UPGRADE 16 set MAXMGUNMAG 100 else set MAXMGUNMAG 60 }
	else 
	{ ifand JAMES_UPGRADE 16 set MAXMGUNMAG 50 else set MAXMGUNMAG 30 }
		ife KICKBACKPIC 1 { ifand GUNFIREMODE 1024 set GUN_RECOIL 3 else set GUN_RECOIL 2 }
		ife KICKBACKPIC 2 
			{
			ifand GUNFIREMODE 1024 add GUN_SPREAD 8
			else add GUN_SPREAD 4
			
			set gunsmoke_angle 72
			state spawn_gunsmoke
			ifand GUNFIREMODE 1024 { set gunsmoke_angle -72 state spawn_gunsmoke } 
			
			}
		ife KICKBACKPIC 8 { sound TMP_RELOAD ife MGUNMAG 0 spawn 3737 }
		ife KICKBACKPIC 10 state JMOVESOUND2
		
		ife KICKBACKPIC 44 { sound TMP_RELOAD spawn 3737 }
		ife KICKBACKPIC 46 state JMOVESOUND2
		
		ife KICKBACKPIC 22 
		{
		ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG 
		ifand GUNFIREMODE 1024 divvar MGUNMAG 2
		}
		ife KICKBACKPIC 60 
		{
		ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
		}


  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
  }
 }

// RPG

ife SPECIALIST_EQUIPMENT[77] 2 // Ranger missile launcher
{
smaxammo 4 100
set WEAPON4_TILE 22538 
set W4_AMMO_TILE 22537
setarray AMMO_AMOUNT[4] 10

set WEAPON4_FIRESOUND Z_MISSILE_FIRE
set WEAPON4_SHOOTS 0
set WEAPON4_RELOAD 44
set WEAPON4_FIREDELAY 2
set WEAPON4_TOTALTIME 8
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0


ife CURWEAP 4
	{ 
	set GUN_AMMO_TYPES 512
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_VOLUME 25
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG ROCKETMAG
	set WEAPON4_FIRESOUND 4
	
		ifand BITS_PRESS 4
		   ife player[].ammo_amount 4 0
		   ife player[].kickback_pic 0
		   {
		   ifand GUNFIREMODE_2 4
			 ifg DUP_missile_ammo 0
				{
				setp[].kickback_pic 1
				}
		   ifand GUNFIREMODE_2 2
			 ifg atomic_bomb 0
			  ife GEO_MEGA_SHOT[1] 1
				{
				setp[].kickback_pic 1
				}
			}
	
	set gunsmoke_angle 96
	ife KICKBACKPIC 5 state spawn_gunsmoke
	ife KICKBACKPIC 2
		{
		
		sub WEAPSWAYX 10
		sub WEAPSWAYY 10
		espawn 2520 state SPAWN_IN_PLAYER_FRONT 
		setactorvar[RETURN].TEMP XM8_FIRE 
		
		ifand GUNFIREMODE_2 2 setactorvar[RETURN].TEMP  Z_MISSILE_FIRE
		else ifand GUNFIREMODE_2 4 setactorvar[RETURN].TEMP  DUP_FIRE
		else setactorvar[RETURN].TEMP  RANGER_FIRE
		}
		
		ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { sound RANGER_ROTATE getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		
		ife KICKBACKPIC 2 
			{
			ife GEO_MEGA_SHOT[1] 1
			 ifand GUNFIREMODE_2 2
			  ifg atomic_bomb 0
				{
				globalsound Z_WARNING
				shoot ATOM_BOMB
				sub atomic_bomb 1
				setarray GEO_MEGA_SHOT[1] 0
				getp[].ammo_amount 4 TEMP
				ifg TEMP 0
					{
					add TEMP 1
					setp[].ammo_amount 4 TEMP
					}
				}
			else
			 ifand GUNFIREMODE_2 1
			  ifg heat_seek_card 0
				{
				ifand GUNFIREMODE_2 4
				 ifg DUP_missile_ammo 0
					{
					setprojectile[HOMING_MISSILE].userdata 32
					setprojectile[HOMING_MISSILE].pal 10
					eshoot HOMING_MISSILE // userdata has to be changed before firing
					setprojectile[HOMING_MISSILE].userdata 64
					setprojectile[HOMING_MISSILE].pal 21
					sound HEAT_SEEK
					setthisprojectile[RETURN].hitradius 4500
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].pal 14
					setthisprojectile[RETURN].vel 975
					setthisprojectile[RETURN].xrepeat 40
					setthisprojectile[RETURN].yrepeat 40
					setthisprojectile[RETURN].extra 275
					setthisprojectile[RETURN].extra_rand 275
					setthisprojectile[RETURN].userdata 32
					setthisprojectile[RETURN].isound EXPLOSION_BIG
					setthisprojectile[RETURN].spawns BIG_EXPLOSION
					sub DUP_missile_ammo 1
					getp[].ammo_amount 4 TEMP
					ifg TEMP 0
						{
						add TEMP 1
						setp[].ammo_amount 4 TEMP
						}
					}
					else
					{
					eshoot HOMING_MISSILE
					ife KICKBACKPIC 2 sub ROCKETMAG 1
					sound HEAT_SEEK
					setthisprojectile[RETURN].hitradius 2250
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 775
					setthisprojectile[RETURN].extra 75
					setthisprojectile[RETURN].extra_rand 75
					}
				sub heat_seek_card 1
				}
			else
				{
				ifand GUNFIREMODE_2 4
				 ifg DUP_missile_ammo 0
					{
					setprojectile[MICRO_MISSILE].userdata 32
					setprojectile[MICRO_MISSILE].pal 14
					eshoot MICRO_MISSILE  // userdata has to be changed before firing
					setprojectile[MICRO_MISSILE].userdata 64
					setprojectile[MICRO_MISSILE].pal 0
					setthisprojectile[RETURN].hitradius 4500
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 975
					setthisprojectile[RETURN].xrepeat 40
					setthisprojectile[RETURN].yrepeat 40
					setthisprojectile[RETURN].extra 275
					setthisprojectile[RETURN].extra_rand 275
					setthisprojectile[RETURN].isound EXPLOSION_BIG
					setthisprojectile[RETURN].spawns BIG_EXPLOSION
					sub DUP_missile_ammo 1
					getp[].ammo_amount 4 TEMP
					ifg TEMP 0
						{
						add TEMP 1
						setp[].ammo_amount 4 TEMP
						}
					}
					else
					{
					eshoot MICRO_MISSILE
					ife KICKBACKPIC 2 sub ROCKETMAG 1
					setthisprojectile[RETURN].hitradius 2250
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 675
					setthisprojectile[RETURN].velmult 2
					setthisprojectile[RETURN].extra 75
					setthisprojectile[RETURN].extra_rand 75
					}
				}
			}
			
		set WEAPON_TYPE 4
		ifand GUNFIREMODE_2 1 // heat
			{
			ifg NUKE_COUNTDOWN 0 set NUKE_COUNTDOWN 0
			ife heat_seek_card 0 xorvar GUNFIREMODE_2 1 // take off heat mode if no heat card
			}
		ifand GUNFIREMODE_2 4 // DUP missiles
			{
			set WEAPON_TYPE 9
			ifg NUKE_COUNTDOWN 0 set NUKE_COUNTDOWN 0
			ifg DUP_missile_ammo 10 set DUP_missile_ammo 10 // fail safe to make sure they have a limit of 10
			ife DUP_missile_ammo 0 xorvar GUNFIREMODE_2 4 // take off DUP mod if no DUP missiles left
			}
		ifand GUNFIREMODE_2 2 // nuke
			{
			set WEAPON_TYPE 10
			ifg atomic_bomb 1 set atomic_bomb 1 // fail safe to make sure they have a limit of 1
			ife atomic_bomb 0 ife KICKBACKPIC 0 xorvar GUNFIREMODE_2 2 // take off atomic mode if no atomic
			}
			
		ifand GUNFIREMODE_2 2
		 ife KICKBACKPIC 0
		 {
		 ife GEO_MEGA_SHOT[1] 1 set GUN_ACCURACY 0
		  ife GEO_MEGA_SHOT[1] 0
			{
			set GUN_ACCURACY NUKE_COUNTDOWN
			ife NUKE_COUNTDOWN 0 set NUKE_COUNTDOWN 191
			ifg NUKE_COUNTDOWN 0 sub NUKE_COUNTDOWN 1 
			ife NUKE_COUNTDOWN 180 soundonce Z_STANDBY
			ife NUKE_COUNTDOWN 130 soundonce Z_COUNTD
			ife NUKE_COUNTDOWN 40 soundonce Z_SYSREADY
			ife NUKE_COUNTDOWN 5 state NUKE_TAUNTS
			ife NUKE_COUNTDOWN 1 { setarray GEO_MEGA_SHOT[1] 1 set NUKE_COUNTDOWN 0 }
			}
		  }
		
				
	ife KICKBACKPIC 10 state JMOVESOUND2
	ife KICKBACKPIC 15 sound RANGER_RELOAD
	ife KICKBACKPIC 22 state JMOVESOUND2
	ife KICKBACKPIC 40 sound RANGER_ROTATE
	ife KICKBACKPIC 26 { ifl CUR_AMMO 6 set ROCKETMAG CUR_AMMO else set ROCKETMAG 6 }
	
	  ifl ROCKETMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
		    {
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 13
				}
			}	
	}
}
else
{
smaxammo 4 50
set WEAPON4_TILE 5212 
set W4_AMMO_TILE 5223
setarray AMMO_AMOUNT[4] 6

set WEAPON4_FIRESOUND 479
set WEAPON4_SHOOTS 2698
set WEAPON4_RELOAD 58
set WEAPON4_FIREDELAY 2
set WEAPON4_TOTALTIME 8
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0


ife CURWEAP 4
	{ 
	set WEAPON_TYPE 4
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_VOLUME 25
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG ROCKETMAG
	set gunsmoke_angle 96
	ife KICKBACKPIC 5 state spawn_gunsmoke
	ife KICKBACKPIC 2
		{
		sub ROCKETMAG 1
		sub WEAPSWAYX 10
		sub WEAPSWAYY 10
		}
		
		ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		
				
	ife KICKBACKPIC 10 state JMOVESOUND2
	ife KICKBACKPIC 16 sound J_GL_OPEN 
	ife KICKBACKPIC 30 sound DRUM_OUT
	
	ife KICKBACKPIC 40 { ifl CUR_AMMO 6 set ROCKETMAG CUR_AMMO else set ROCKETMAG 6 }
	ife KICKBACKPIC 47 sound DRUM_IN
	ife KICKBACKPIC 57 sound J_GL_CLOSE
	
	  ifl ROCKETMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 13
			}
		}
		
		
	}
}

ife CURWEAP 10 set GUNMAG -1
ife CURWEAP 8 { set WEAPON_TYPE 4 set GUNMAG -1 }

// PIPEBOMB
set WEAPON5_TILE 5215
set W5_AMMO_TILE 5209
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 0

ife CURWEAP 5 
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_VOLUME 0
	set GUN_HANDS 1
	set GUN_SIZE 0
	ife KICKBACKPIC 2 sound JG_FLIP
	}

// SHRINKER
ife SPECIALIST_EQUIPMENT[49] 2 // Auto-Crossbow
{
set WEAPON6_TILE 15918
set W6_AMMO_TILE 15927
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 10
smaxammo 6 100

set WEAPON6_CLIP 0
set WEAPON6_RELOAD 42
set WEAPON6_FIREDELAY 2
set WEAPON6_TOTALTIME 5
set WEAPON6_HOLDDELAY 0
set WEAPON6_FLAGS 4
set WEAPON6_SHOOTS 0
set WEAPON6_SPAWNTIME -1
set WEAPON6_SPAWN 0
set WEAPON6_SHOTSPERBURST 1
set WEAPON6_INITIALSOUND 0
set WEAPON6_FIRESOUND 4
set WEAPON6_SOUND2TIME 15
set WEAPON6_SOUND2SOUND 4
set WEAPON6_RELOADSOUND1 4
set WEAPON6_RELOADSOUND2 4

	ife CURWEAP 6
	{
	set WEAPON_TYPE 5
	set GUN_VOLUME 3
	set TEMP9 50
	sub TEMP9 BOW_PULLBACK
	set GUN_ACCURACY TEMP9
	set GUN_AMMO_TYPES 0
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG AUTOSHOTMAG
	
	clamp AUTOSHOTMAG 0 5
	
	ife KICKBACKPIC 0
	 ife player[].weapon_pos 0
		{
		ifg BOW_PULLBACK 0
		 ifg player[].ammo_amount 6 0
			{
			ifand BITS_PRESS 4 nullop
			else setp[].kickback_pic 1
			}
		}
	
	ife KICKBACKPIC 2 
	{
	sub AUTOSHOTMAG 1
	eshoot 5011
	getthisprojectile[RETURN].extra TEMP4
	add TEMP4 BOW_PULLBACK
	add TEMP4 BOW_PULLBACK
	setthisprojectile[RETURN].extra TEMP4
	divvar BOW_PULLBACK 10
	setthisprojectile[RETURN].velmult BOW_PULLBACK
	seta[RETURN].owner THISACTOR
	sound J_AUTOCROSS_FIRE
	set TEMP5 BOW_PULLBACK
	mulvar TEMP5 -10
	setactorsoundpitch THISACTOR J_AUTOCROSS_FIRE TEMP5
	stopsound CROSSBOW_DRAWBACK
	set BOW_PULLBACK 0
	}
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
	ife KICKBACKPIC 3 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
	ife KICKBACKPIC 3 { set gun_pushback_power -4 state gun_pushback }
	
	ifg KICKBACKPIC 6 ife SCOPE 1 set SCOPE 0
	
	
	ife KICKBACKPIC 10 sound J_AUTOCROSS_MAGO
	ife KICKBACKPIC 39 sound J_AUTOCROSS_MAGI
	ife KICKBACKPIC 13 state JMOVESOUND2
	ife KICKBACKPIC 17 sound J_AUTOCROSS_SLIDE
	ife KICKBACKPIC 31 sound J_AUTOCROSS_SLIDE
	ife KICKBACKPIC 20 ife AUTOSHOTMAG 0 spawn 3756
	
	ife KICKBACKPIC 33 state JMOVESOUND2
	ife KICKBACKPIC 35 
	{
	ifl CUR_AMMO 20 { set AUTOSHOTMAG CUR_AMMO } else set AUTOSHOTMAG 5 
	}
		

  ifl AUTOSHOTMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}

	}
}
else // XM-8 Laser rifle
	{
	set WEAPON6_TILE 5214
	set W6_AMMO_TILE 5224
	setarray WEAPON_SPECIAL[6] 0
	setarray AMMO_AMOUNT[6] 20
	smaxammo 6 140

	set WEAPON6_CLIP 0
	set WEAPON6_RELOAD 52
	set WEAPON6_FIREDELAY 2
	set WEAPON6_TOTALTIME 4
	set WEAPON6_HOLDDELAY 0
	set WEAPON6_FLAGS 4
	set WEAPON6_SHOOTS GREENLASERSHOT
	set WEAPON6_SPAWNTIME -1
	set WEAPON6_SPAWN 0
	set WEAPON6_SHOTSPERBURST 1
	set WEAPON6_INITIALSOUND 0
	set WEAPON6_FIRESOUND 4
	set WEAPON6_SOUND2TIME 15
	set WEAPON6_SOUND2SOUND 4
	set WEAPON6_RELOADSOUND1 4
	set WEAPON6_RELOADSOUND2 4

		ife CURWEAP 6
		{
		set WEAPON_TYPE 2
		set GUN_VOLUME 15
		set GUN_AMMO_TYPES 0
		set GUN_SIZE 1
		set GUN_HANDS 2
		set GUNMAG AUTOSHOTMAG
		ife KICKBACKPIC 2 { sub AUTOSHOTMAG 1 espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP XM8_FIRE } 
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke set gun_pushback_power -4 state gun_pushback }
		
		ifl KICKBACKPIC 4 
		 ife player[].weapon_pos 0
			{
			state spawn_lasersite
			seta[RETURN].x hitx
			seta[RETURN].y hity
			seta[RETURN].z hitz
			}

		ife KICKBACKPIC 7 sound LASERSIGHT_OFF
		ife KICKBACKPIC 50 sound LASERSIGHT_ON
		ife KICKBACKPIC 13 state JMOVESOUND2
		
		ife KICKBACKPIC 15 sound XM8_RELOAD
		ife KICKBACKPIC 20 ife AUTOSHOTMAG 0 spawn 3756
		
		ife KICKBACKPIC 43 state JMOVESOUND2
		ife KICKBACKPIC 45 
			{
			ifl CUR_AMMO 20 { set AUTOSHOTMAG CUR_AMMO } else set AUTOSHOTMAG 20 
			}
		set GUN_MAX_SPREAD 0	
			
		set GUN_ACCURACY 4
			

	  ifl AUTOSHOTMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
		   {
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}

		}
	}

// DEVISTATOR
ife SPECIALIST_EQUIPMENT[78] 2 // G36?
{
	smaxammo 7 300
	set WEAPON7_TILE 22571
	setarray WEAPON_SPECIAL[7] 2
	set W7_AMMO_TILE 15906
	setarray AMMO_AMOUNT[7] 30

	set WEAPON7_FIREDELAY 2
	set WEAPON7_TOTALTIME 3
	set WEAPON7_FLAGS 4
	set WEAPON7_SPAWN 0
	set WEAPON7_SHOOTS HOLLOW_POINT_SHOT
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_CLIP 0
	set WEAPON7_RELOADSOUND1 4
	set WEAPON7_RELOADSOUND2 4
	set WEAPON7_FIRESOUND 4

	ife CURWEAP 7
	{
	set WEAPON_TYPE 2
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP K2_FIRE }
	set GUN_VOLUME 18
		
	ifand GUNFIREMODE 32768 // If GL is selected
	set GUN_AMMO_TYPES 2048 // set ammo types to m203 compatible
	else
	set GUN_AMMO_TYPES 32 // set firing menu to switching to gl
	
	set GUN_SIZE 2
	set GUN_HANDS 2
		
	state check_cased_grenades_avail

	
		ifand GUNFIREMODE 16384 // Using holosight?
			{
			set GUN_MAX_SPREAD 6
			set GUN_ACCURACY 8
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
			}
		else
			{
			set GUN_ACCURACY 12
			set GUN_MAX_SPREAD 16
			}
			ife player[].weapon_pos 0
				{
				state spawn_lasersite
				seta[RETURN].x hitx
				seta[RETURN].y hity
				seta[RETURN].z hitz		
				
				ifand SPECIALIST_CUSTOM[45] 1073741824 seta[RETURN].pal 1
				else ifand SPECIALIST_CUSTOM[45] 2147483648 seta[RETURN].pal 8
				else seta[RETURN].pal 0
				}
			
			ife KICKBACKPIC 2 { set GUN_RECOIL 12 add GUN_SPREAD 8 set gunsmoke_angle 64 state spawn_gunsmoke  }		
		
		set GUNMAG MACHINE_MAG		

			set MAX_MACHINE_MAG 30
			ife KICKBACKPIC 12 { sound VAL_MAG_OUT ife MACHINE_MAG 0 spawn 3756 }
			ife KICKBACKPIC 33 
			{
			sound VAL_MAG_IN
			ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG
			}
			
			ife KICKBACKPIC 15 state JMOVESOUND2	
			ife KICKBACKPIC 60 state JMOVESOUND2
			ife KICKBACKPIC 51 soundonce AUG_BOLT
			
		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
					ife GL_COUNTDOWN 34 soundonce GL_OPEN2
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT2
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE2
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}
		

	  ifl MACHINE_MAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON7_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
		

		
	}
}
else
ife SPECIALIST_EQUIPMENT[84] 2 // M4-15?
{
	smaxammo 7 300
	set WEAPON7_TILE 15898
	setarray WEAPON_SPECIAL[7] 0
	set W7_AMMO_TILE 15906
	setarray AMMO_AMOUNT[7] 30

	set WEAPON7_FIREDELAY 3
	set WEAPON7_TOTALTIME 4
	set WEAPON7_FLAGS 4
	set WEAPON7_SPAWN 0
	set WEAPON7_SHOOTS RMAXREVOLVERSHOT
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_CLIP 0
	set WEAPON7_RELOADSOUND1 4
	set WEAPON7_RELOADSOUND2 4
	set WEAPON7_FIRESOUND 4

	ife CURWEAP 7
	{
	set WEAPON_TYPE 0
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	
	set GUN_AMMO_TYPES 0
	

		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP M4-15_FIRE }
		set GUN_VOLUME 4

	set GUN_SIZE 1
	set GUN_HANDS 2

		ifand GUNFIREMODE 16384 // Using holosight?
			{
			set GUN_MAX_SPREAD 12
			set GUN_ACCURACY 8
			ife KICKBACKPIC 1 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
			ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }				
			ife KICKBACKPIC 3 { add GUN_SPREAD 8 set gunsmoke_angle 0 state spawn_gunsmoke  }
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
				
			}
			else
			{
			set GUN_ACCURACY 12
			set GUN_MAX_SPREAD 24
			ife player[].weapon_pos 0
				{
				state spawn_lasersite
				seta[RETURN].x hitx
				seta[RETURN].y hity
				seta[RETURN].z hitz		
				
				ifand SPECIALIST_CUSTOM[84] 1073741824 seta[RETURN].pal 1
				else ifand SPECIALIST_CUSTOM[84] 2147483648 seta[RETURN].pal 8
				else seta[RETURN].pal 0
				}
			
			ife KICKBACKPIC 1 { getp[].horiz TEMP add TEMP 4 setp[].horiz TEMP }
			ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 4 setp[].horiz TEMP }
			ife KICKBACKPIC 3 { add GUN_SPREAD 8 set gunsmoke_angle 64 state spawn_gunsmoke  }		
			}
		
			set GUNMAG MACHINE_MAG

			set MAX_MACHINE_MAG 30
			ife KICKBACKPIC 12 { sound M4-15_REL ife MACHINE_MAG 0 spawn 3756 }
			ife KICKBACKPIC 33 
			{
			ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG
			}
			
			ife KICKBACKPIC 15 state JMOVESOUND2	
			ife KICKBACKPIC 45 state JMOVESOUND2
			ife KICKBACKPIC 52 soundonce BOLT_CATCH

	  ifl MACHINE_MAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON7_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
	}
}
else
ife SPECIALIST_EQUIPMENT[45] 2 // LR300?
{
	smaxammo 7 300
	set WEAPON7_TILE 15895
	setarray WEAPON_SPECIAL[7] 2
	set W7_AMMO_TILE 15906
	setarray AMMO_AMOUNT[7] 30

	set WEAPON7_FIREDELAY 2
	set WEAPON7_TOTALTIME 3
	set WEAPON7_FLAGS 4
	set WEAPON7_SPAWN 0
	set WEAPON7_SHOOTS ZRIFLESHOTU
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_CLIP 0
	set WEAPON7_RELOADSOUND1 4
	set WEAPON7_RELOADSOUND2 4
	set WEAPON7_FIRESOUND 4

	ife CURWEAP 7
	{
	set WEAPON_TYPE 0
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	

		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP LR300_FIRE }
		set GUN_VOLUME 18
		
	ifand GUNFIREMODE 32768 // If GL is selected
	set GUN_AMMO_TYPES 2048 // set ammo types to m203 compatible
	else
	set GUN_AMMO_TYPES 32 // set firing menu to switching to gl
	
	set GUN_SIZE 2
	set GUN_HANDS 2
	
	
	state check_cased_grenades_avail

		ifand GUNFIREMODE 16384 // Using holosight?
			{
			set GUN_MAX_SPREAD 16
			set GUN_ACCURACY 8
			ife KICKBACKPIC 1 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
			ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }				
			ife KICKBACKPIC 3 { add GUN_SPREAD 8 set gunsmoke_angle 0 state spawn_gunsmoke  }
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
				
			}
			else
			{
			set GUN_ACCURACY 16
			set GUN_MAX_SPREAD 32
			ife player[].weapon_pos 0
				{
				state spawn_lasersite
				seta[RETURN].x hitx
				seta[RETURN].y hity
				seta[RETURN].z hitz		
				
				ifand SPECIALIST_CUSTOM[45] 1073741824 seta[RETURN].pal 1
				else ifand SPECIALIST_CUSTOM[45] 2147483648 seta[RETURN].pal 8
				else seta[RETURN].pal 0
				}
			
			
			ife KICKBACKPIC 2 { set GUN_RECOIL 10 add GUN_SPREAD 8 set gunsmoke_angle 64 state spawn_gunsmoke  }		
			}
		

		set GUNMAG MACHINE_MAG
			

			set MAX_MACHINE_MAG 60
			ife KICKBACKPIC 12 { sound LR300_MAGOUT ife MACHINE_MAG 0 spawn 3756 }
			ife KICKBACKPIC 30 
			{
			sound LR300_MAGIN
			ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG
			}
			
			ife KICKBACKPIC 15 state JMOVESOUND2	
			ife KICKBACKPIC 45 state JMOVESOUND2
			ife KICKBACKPIC 52 soundonce BOLT_CATCH
			
		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
					ife GL_COUNTDOWN 34 soundonce GL_OPEN2
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT2
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE2
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}
		

	  ifl MACHINE_MAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON7_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
		

		
	}
}
else // Steyr AUG?
{
smaxammo 7 400
set WEAPON7_TILE 5218
set W7_AMMO_TILE 5222
setarray AMMO_AMOUNT[7] 50
setarray WEAPON_SPECIAL[7] 0

set WEAPON7_INITIALSOUND 0
set WEAPON7_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON7_FIRESOUND 4
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_FLAGS 12
set WEAPON7_RELOAD 85

	ife CURWEAP 7
	{
	set WEAPON_TYPE 1
	set GUN_AMMO_TYPES 0
	set GUN_VOLUME 13
	set GUN_SIZE 1
	set GUN_HANDS 2
	set GUNMAG MACHINE_MAG
	ife KICKBACKPIC 2 { set gunsmoke_angle 64 state spawn_gunsmoke }
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AUG_FIRE }

		ifand JAMES_UPGRADE 4 set MAX_MACHINE_MAG 100 else set MAX_MACHINE_MAG 30
		ife KICKBACKPIC 1 
			{ 
			getp[].horiz TEMP 
			ifand JAMES_UPGRADE 256 add TEMP 2 else
			add TEMP 4 
			setp[].horiz TEMP 
			}
		ife KICKBACKPIC 2
			{ 
			getp[].horiz TEMP 
			ife SCOPE 1
				{
				ifand JAMES_UPGRADE 256 { add GUN_SPREAD 3 sub TEMP 2 } 
				else { add GUN_SPREAD 6 sub TEMP 4 }
				}
			else
				{
				ifand JAMES_UPGRADE 256 { add GUN_SPREAD 6 sub TEMP 2 } 
				else { add GUN_SPREAD 10 sub TEMP 4 }
				}

			setp[].horiz TEMP 
			}
		
		ife KICKBACKPIC 13 soundonce AUG_BOLT
        ife KICKBACKPIC 21 soundonce AUG_MOVEMENT	
		ife KICKBACKPIC 46 
			{
			soundonce AUG_RELOAD 
			ife MACHINE_MAG 0
				{
				ifand JAMES_UPGRADE 4 spawn 12190 
				else spawn 3756
				}
			}
	
		ife KICKBACKPIC 60 
		{
		ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG 
		}
		ife KICKBACKPIC 73 soundonce AUG_MOVEMENT	
		
		
ifl MACHINE_MAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
	
	ifg SCOPE 0
			{
			state TURNOFF_NVG
			set GUN_ACCURACY 2
			set GUN_MAX_SPREAD 8
			set WEAPON7_FIREDELAY 3
			set WEAPON7_TOTALTIME 4
			}
			else
				{
				set GUN_ACCURACY 4
				set GUN_MAX_SPREAD 32
				set WEAPON7_FIREDELAY 2
				set WEAPON7_TOTALTIME 3
				}

		ifg KICKBACKPIC 5
			{
			set SCOPE 0
			}
		
	}
}

// TRIPBOMB
set WEAPON8_TILE 5217
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS 0
set WEAPON8_FIREDELAY 2
set WEAPON8_FLAGS 256

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_VOLUME 0
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 256
	set GUN_SIZE 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	}
	
// FREEZER
ife SPECIALIST_EQUIPMENT[22] 2 // using the AN-94?
	{
	set WEAPON9_TILE 13364
	setarray WEAPON_SPECIAL[9] 8
	set W9_AMMO_TILE 13365
	setarray AMMO_AMOUNT[9] 30

	set WEAPON9_HOLDDELAY 1
	set WEAPON9_SPAWN 0
	set WEAPON9_SHOOTS MSCORP_SHOT
	set WEAPON9_INITIALSOUND 4
	set WEAPON9_CLIP 0
	set WEAPON9_RELOADSOUND1 4
	set WEAPON9_RELOADSOUND2 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	set GUN_VOLUME 14
	
	state check_caseless_grenades_avail
	
		ifand GUNFIREMODE 32768 // If GL is selected
		set GUN_AMMO_TYPES 4096 // set ammo types to gp25/30 compatible
		else
		set GUN_AMMO_TYPES 64 // set firing menu to switching to gl
	
	ifand GUNFIREMODE 32768
		{
		ifand GUNFIREMODE 16384 xorvar GUNFIREMODE 16384
		}

		set GUNMAG RIFLEMAG
			ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 3 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke  }
			
			set MAXRIFLEMAG 30
			ife KICKBACKPIC 12 { sound AN-94_OUT ife RIFLEMAG 0 spawn 3756 }
			
			ife KICKBACKPIC 33
				{
				ifl CUR_AMMO MAXRIFLEMAG set RIFLEMAG CUR_AMMO else set RIFLEMAG MAXRIFLEMAG
				}
			
			ife KICKBACKPIC 15 state JMOVESOUND2

			ife KICKBACKPIC 60 state JMOVESOUND2
			ife KICKBACKPIC 63 soundonce VAL_SLIDE
			
			
				ifand GUNFIREMODE 16384 
						{				
						ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
						set WEAPON9_FLAGS 16452
						set WEAPON9_FIREDELAY 2
						set WEAPON9_TOTALTIME 6
						ifl GUNMAG 2 // Aim mode fires 2-burst shots so don't if they only have 1 round left
						{
						set WEAPON9_FIRESOUND AN-94_FIRE
						set WEAPON9_SHOTSPERBURST 1
						set GUN_ACCURACY 4
						ife KICKBACKPIC 2 
							{
							sub RIFLEMAG 1 
							set gunsmoke_angle 0
							state spawn_gunsmoke
							}
						}
						else
						{
						set WEAPON9_FLAGS 16452
						set WEAPON9_FIRESOUND AN-94_FIRE2
						set WEAPON9_SHOTSPERBURST 2
						set GUN_ACCURACY 4
						set GUN_MAX_SPREAD 16
						ife KICKBACKPIC 2 
							{
							sub RIFLEMAG 2 
							set gunsmoke_angle 0
							state spawn_gunsmoke
							}
						}
						ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 8 setp[].horiz TEMP }
						ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 8 setp[].horiz TEMP }
						ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
						ife KICKBACKPIC 3 add GUN_SPREAD 8
						}
					else
					{
					set WEAPON9_FLAGS 68
					set WEAPON9_FIREDELAY 2
					set WEAPON9_TOTALTIME 4
					set WEAPON9_FIRESOUND 4
					set WEAPON9_SHOTSPERBURST 1
					set GUN_ACCURACY 8
					set GUN_MAX_SPREAD 48
					ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AN-94_FIRE } 
					ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
					ife KICKBACKPIC 3 
						{
						sub RIFLEMAG 1 
						add GUN_SPREAD 8
						getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP 
						
						set gunsmoke_angle 72
						state spawn_gunsmoke
						
						}
					}
					
				ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
				getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
				ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
				
				ife GL_COUNTDOWN 40 sound AUG_MOVEMENT
				ife GL_COUNTDOWN 18 soundonce GL_RELOAD
				
				ife KICKBACKPIC 46 soundonce AK104_BOLT

							
						ifg GL_COUNTDOWN 44
							{
							sub WEAPSWAYX 5
							sub WEAPSWAYY 5
							}

	  ifl RIFLEMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON9_RELOAD 58
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
				
		
		}
	}
else
ife SPECIALIST_EQUIPMENT[72] 2 // using the Gilboa?
	{
	set WEAPON9_TILE 19847
	setarray WEAPON_SPECIAL[9] 2
	set W9_AMMO_TILE 19857
	setarray AMMO_AMOUNT[9] 30
	
	set WEAPON9_FLAGS 68		
	set WEAPON9_FIREDELAY 2
	set WEAPON9_TOTALTIME 4		
	set WEAPON9_FIRESOUND 4		
	set WEAPON9_SHOTSPERBURST 2	
	set WEAPON9_HOLDDELAY 1
	set WEAPON9_SPAWN 0
	set WEAPON9_SHOOTS ARMOUR_PIERCING_SHOT
	set WEAPON9_INITIALSOUND 4
	set WEAPON9_CLIP 0
	set WEAPON9_RELOADSOUND1 4
	set WEAPON9_RELOADSOUND2 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 1
	set GUN_SIZE 2
	set GUN_HANDS 2
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	set GUN_VOLUME 28
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GILBOA_FIRE }
	
	state check_cased_grenades_avail
	
	ifand GUNFIREMODE 32768 // If GL is selected
	set GUN_AMMO_TYPES 2048 // set ammo types to m203 compatible
	else
	set GUN_AMMO_TYPES 32 // set firing menu to switching to gl
	
	
	ifand GUNFIREMODE 32768
		{
		ifand GUNFIREMODE 16384 xorvar GUNFIREMODE 16384
		}

		set GUNMAG RIFLEMAG
			ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 7 setp[].horiz TEMP }
			ife KICKBACKPIC 3 { getp[].horiz TEMP sub TEMP 7 setp[].horiz TEMP }
			ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke  }
			ife KICKBACKPIC 12 sound AUG_MOVEMENT
			
			set MAXRIFLEMAG 60
			ife KICKBACKPIC 23 { sound GILBOA_RELOAD ife RIFLEMAG 0 spawn 3756 }

			ife KICKBACKPIC 33
				{
				ifl CUR_AMMO MAXRIFLEMAG set RIFLEMAG CUR_AMMO else set RIFLEMAG MAXRIFLEMAG
				}
			
			ife KICKBACKPIC 15 state JMOVESOUND2

			ife KICKBACKPIC 60 state JMOVESOUND2
			ife KICKBACKPIC 64 soundonce BOLT_CATCH
						
				ifand GUNFIREMODE 16384 
						{
						ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
						set GUN_ACCURACY 8
						set GUN_MAX_SPREAD 32
						ife KICKBACKPIC 2 
							{
							sub RIFLEMAG 2 
							set gunsmoke_angle 0
							state spawn_gunsmoke
							}
						}
					else
					{
					set GUN_ACCURACY 16
					set GUN_MAX_SPREAD 96
					ife KICKBACKPIC 2 
						{
						sub RIFLEMAG 2 
						
						set gunsmoke_angle 72
						state spawn_gunsmoke
						
						}
					}
					
						ife KICKBACKPIC 3 { set GUN_RECOIL 16 add GUN_SPREAD 8 }
						ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 ifand GUNFIREMODE 16384 xorvar GUNFIREMODE 16384 }
						
					
				ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
				getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
				ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
				
				ife GL_COUNTDOWN 40 sound AG36_LOAD
				ife GL_COUNTDOWN 18 soundonce GL_RELOAD
				
		ife KICKBACKPIC 46 state JMOVESOUND2
		ife KICKBACKPIC 52 soundonce BOLT_CATCH

							
						ifg GL_COUNTDOWN 44
							{
							sub WEAPSWAYX 5
							sub WEAPSWAYY 5
							}

	  ifl RIFLEMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON9_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
				
		
		}
	}
else // Using the M4+Masterkey Shotgun?
	{
	set WEAPON9_TILE 5213
	set W9_AMMO_TILE 5219
	setarray WEAPON_SPECIAL[9] 4
	setarray AMMO_AMOUNT[9] 30

	set WEAPON9_FIREDELAY 2
	set WEAPON9_TOTALTIME 3
	set WEAPON9_HOLDDELAY 1
	set WEAPON9_FIRESOUND 4
	set WEAPON9_FLAGS 4
	set WEAPON9_SPAWN 0
	set WEAPON9_SHOOTS MSCORP_SHOT
	set WEAPON9_INITIALSOUND 4
	set WEAPON9_SHOTSPERBURST 1
	set WEAPON9_CLIP 0
	set WEAPON9_RELOADSOUND1 4
	set WEAPON9_RELOADSOUND2 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_AMMO_TYPES 5
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 2
	set GUN_HANDS 2
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	set GUN_VOLUME 14
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP M16_FIRE }

		set GUNMAG RIFLEMAG
			ife KICKBACKPIC 2 { sub RIFLEMAG 1 set GUN_RECOIL 10 add GUN_SPREAD 8 set gunsmoke_angle 64 state spawn_gunsmoke  }
			
			ifand JAMES_UPGRADE 32
			{
			set MAXRIFLEMAG 100
			ife KICKBACKPIC 12 { sound M16OUT ife RIFLEMAG 0 spawn 12190 }
			ife KICKBACKPIC 33 sound M16IN
			}
			else
			{
			set MAXRIFLEMAG 30
			ife KICKBACKPIC 12 { sound M16OUT ife RIFLEMAG 0 spawn 3756 }
			ife KICKBACKPIC 33 sound M16IN
			}
			ife KICKBACKPIC 33
				{
				ifl CUR_AMMO MAXRIFLEMAG set RIFLEMAG CUR_AMMO else set RIFLEMAG MAXRIFLEMAG
				}
			
			ife KICKBACKPIC 15 state JMOVESOUND2
			ife KICKBACKPIC 48 state JMOVESOUND2
			ife KICKBACKPIC 51 soundonce BOLT_CATCH

	  ifl RIFLEMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON9_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
		
			ifg GL_COUNTDOWN 23
			ifl GL_COUNTDOWN 27
				{
				ifand AMMO_TYPES[CURWEAP] 64 { set gun_pushback_power -128 state gun_pushback }
				sub WEAPSWAYX 8
				sub WEAPSWAYY 8
				}
				
			ifl ALTMAG 0 set ALTMAG 0
						
			ife ALTMAG 0 ife GL_COUNTDOWN 0 set NEEDS_PUMP 1
			
			ife NEEDS_PUMP 1
			 ifg ALTMAG 0 
			  ife GL_COUNTDOWN 0
				{
				ifand JAMES_UPGRADE 512 nullop else
				set GL_COUNTDOWN 20
				}
				
					ife GL_COUNTDOWN 0
					{
					ifand AMMO_TYPES[CURWEAP] 1 ifl explosive_shells 1 ife ALTMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE  }
					ifand AMMO_TYPES[CURWEAP] 4 ifl flechete_shells 1 ife ALTMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
					ifand AMMO_TYPES[CURWEAP] 64 ifl magnum_shells 1 ife ALTMAG 0 { xorvar AMMO_TYPE 64 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
					ifand AMMO_TYPES[CURWEAP] 1024 ifl dragon_shells 1 ife ALTMAG 0 { xorvar AMMO_TYPE 1024 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
					}
				
			ife GL_COUNTDOWN 35 
				{ 
				add ALTMAG 1 
				ifand AMMO_TYPES[CURWEAP] 1 { set LAST_SHELL_FIRED 1 sub explosive_shells 1 }
				else ifand AMMO_TYPES[CURWEAP] 4 { set LAST_SHELL_FIRED 4 sub flechete_shells 1 }
				else ifand AMMO_TYPES[CURWEAP] 64 { set LAST_SHELL_FIRED 64 sub magnum_shells 1 }
				else ifand AMMO_TYPES[CURWEAP] 1024 { set LAST_SHELL_FIRED 1024 sub dragon_shells 1 }
				else
					{
					set LAST_SHELL_FIRED 0
					getp[].ammo_amount 2 TEMP3
					sub TEMP3 1 
					setp[].ammo_amount 2 TEMP3
					}
				sound M16_SHOT_INS
				ife BELT_LOADOUT[0] 5 setactorsoundpitch THISACTOR M16_SHOT_INS 256
				}
			ife GL_COUNTDOWN 28 set GL_COUNTDOWN 0
			ife GL_COUNTDOWN 25 
				{ 
					ifg ALARM_DETECT 0 add ALARM_COUNTER 70
					
				sub ALTMAG 1 getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP 
				set gunsmoke_angle 32 state spawn_gunsmoke 
				set gun_pushback_power -32
				}
			ife GL_COUNTDOWN 24 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP  }
			ife GL_COUNTDOWN 16 ifand JAMES_UPGRADE 512 { state SHOTGUN_SHELL set GL_COUNTDOWN 0 }
			ife GL_COUNTDOWN 14 sound R870PUMP
			ife GL_COUNTDOWN 10 ife NEEDS_PUMP 0 state SHOTGUN_SHELL
			ife GL_COUNTDOWN 7 ife NEEDS_PUMP 1 set NEEDS_PUMP 0
		
	}
}

// EXPANDER
ife SPECIALIST_EQUIPMENT[49] 2 // Auto-Crossbow
{
set W11_AMMO_TILE 15928
setarray AMMO_AMOUNT[11] 10
smaxammo 11 40

set WEAPON11_CLIP 0
set WEAPON11_RELOAD 42
set WEAPON11_FIREDELAY 2
set WEAPON11_TOTALTIME 5
set WEAPON11_HOLDDELAY 0
set WEAPON11_FLAGS 1024
set WEAPON11_SHOOTS 12232
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_INITIALSOUND 0
set WEAPON11_FIRESOUND J_AUTOCROSS_FIRE
set WEAPON11_SOUND2TIME 15
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

	ife CURWEAP 11
	{
	set WEAPON_TYPE 5
	set GUN_VOLUME 3
	set GUN_AMMO_TYPES 0
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG SLUGSHOTMAG
	clamp SLUGSHOTMAG 0 20
	ife KICKBACKPIC 2 sub SLUGSHOTMAG 1
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
	ife KICKBACKPIC 3 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
	ife KICKBACKPIC 3 { set gun_pushback_power -4 state gun_pushback }
	
	ifg KICKBACKPIC 6 ife SCOPE 1 set SCOPE 0
	
	
	ife KICKBACKPIC 10 sound J_AUTOCROSS_MAGO
	ife KICKBACKPIC 39 sound J_AUTOCROSS_MAGI
	ife KICKBACKPIC 13 state JMOVESOUND2
	ife KICKBACKPIC 17 sound J_AUTOCROSS_SLIDE
	ife KICKBACKPIC 31 sound J_AUTOCROSS_SLIDE
	ife KICKBACKPIC 20 ife SLUGSHOTMAG 0 spawn 3756
	
	ife KICKBACKPIC 33 state JMOVESOUND2
	ife KICKBACKPIC 35 
	{
	ifl CUR_AMMO 20 { set SLUGSHOTMAG CUR_AMMO } else set SLUGSHOTMAG 20 
	}
		
			set GUN_ACCURACY 32
		

  ifl SLUGSHOTMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}

	}
}
else // Xm-8 Laser Rifle Slug shot
	{
	set W11_AMMO_TILE 5226
	setarray AMMO_AMOUNT[11] 5
	smaxammo 11 50

	set WEAPON11_CLIP 0
	set WEAPON11_RELOAD 52
	set WEAPON11_FIREDELAY 2
	set WEAPON11_TOTALTIME 3
	set WEAPON11_HOLDDELAY 0
	set WEAPON11_FLAGS 16384
	set WEAPON11_SHOOTS 5125
	set WEAPON11_SPAWNTIME -1
	set WEAPON11_SPAWN 0
	set WEAPON11_SHOTSPERBURST 1
	set WEAPON11_INITIALSOUND 0
	set WEAPON11_FIRESOUND SLUGFIRE
	set WEAPON11_SOUND2TIME 15
	set WEAPON11_SOUND2SOUND 4
	set WEAPON11_RELOADSOUND1 4
	set WEAPON11_RELOADSOUND2 4

		ife CURWEAP 11
		{
		set WEAPON_TYPE 9
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 0
		set GUN_VOLUME 40
		set GUN_SIZE 1
		set GUN_HANDS 2
		set GUNMAG SLUGSHOTMAG
		ife KICKBACKPIC 2 
		{ 
		set GUN_RECOIL 10 sub SLUGSHOTMAG 1

		set gunsmoke_angle 64 state spawn_gunsmoke 
		set gun_pushback_power -32
		state gun_pushback
		}
		
		ifl KICKBACKPIC 4 
		 ife player[].weapon_pos 0
			{
			state spawn_lasersite
			seta[RETURN].x hitx
			seta[RETURN].y hity
			seta[RETURN].z hitz
			}

		ife KICKBACKPIC 7 sound LASERSIGHT_OFF
		ife KICKBACKPIC 50 sound LASERSIGHT_ON
		
		ife KICKBACKPIC 13 state JMOVESOUND2
		ife KICKBACKPIC 15 sound XM8_RELOAD
		ife KICKBACKPIC 20 ife SLUGSHOTMAG 0 spawn 3756
		
		ife KICKBACKPIC 43 state JMOVESOUND2
		ife KICKBACKPIC 45 
		{
		ifl CUR_AMMO 5 set SLUGSHOTMAG CUR_AMMO else set SLUGSHOTMAG 5 
		}
			
			ifand GUNFIREMODE 16384
				{
				ifg KICKBACKPIC 6 xorvar GUNFIREMODE 16384
				}
			


	  ifl SLUGSHOTMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
		   {
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}


		}
	}

}
ends

spriteshadow 5501
spritenoshade 5501

useractor notenemy 5501
fall
ifaction 0
{
action ACAR
set INTERNALCOUNT 0
seta[].blend 255
seta[].shade 30
strength 2000
spawn SHOOTME2
}

ifaction ACAR
{
sizeat 22 22
geta[].shade TEMP
ifl INTERNALCOUNT 0
	{
	cstat 2 add TEMP 1 seta[].shade TEMP
	ifg TEMP 35 killit
	}
else
	{
	ifg TEMP sector[].floorshade { cstat 2 sub TEMP 1 seta[].shade TEMP }
	else ife TEMP sector[].floorshade cstat 0
	}
ife HOLOGRAM_ON -1 set INTERNALCOUNT -1
}

enda

onevent EVENT_HOLODUKEON

ifg player[].holoduke_amount 0
ife CHAR 1
	{
	espawn 5501
	setp[].holoduke_on RETURN
	set HOLOGRAM_ON RETURN
	sound SOMETHINGHITFORCE
	}

endevent

onevent EVENT_HOLODUKEOFF

ife CHAR 1
ifg player[].holoduke_amount 0
	{
	set HOLOGRAM_ON -1
	setp[].holoduke_on -1
	sound SOMETHINGHITFORCE
	}

endevent

defstate PS_ZAXTOR // God Speed...
{
setp[].knuckle_incs 0
ifaction ZERO action ZSTAND
ife on_tripwire 1 action ZSTAND
ife FIRE_SUIT 1 ifaction ZSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction ZSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction ZSTAND action SS_STAND

smaxammo 3 300
smaxammo 6 50
smaxammo 7 90
smaxammo 9 10
smaxammo 11 50

qputs 3 Portable Medikit

qputs 90 TurboBoots
qputs 12 Used TurboBoots

qputs 6 Boots
qputs 75 Protective boots on

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision goggles
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Night vision goggles
	qputs 106 Night vision on
	qputs 107 Night vision off
	}

qputs 89 ScubaGear

qputs 47 ZaxtorHologram on
qputs 48 ZaxtorHologram off
qputs 49 ZaxtorHologram not found yet!
qputs 51 ZaxtorHologram
qputs 91 ZaxtorHologram

qputs 102 We're gonna fry your ass, Znort!

qputs 88 Jetpack
qputs 50 Jetpack not found yet!
qputs 52 Jetpack on
qputs 53 Jetpack off


set CMEDIKIT 53
set CSTEROIDS 5512
set CHOLODUKE 5511
set CJETPACK 57

set CHEAT 68
set CNVG 59

state DISP_nvg

set CSCUBA 56
set CBOOTS 61
set C_ARMOUR 54
set C_HEAVY_ARMOUR 5410

set CKNEE 5496
set CKEYCARDTILE 5492
set CKEYCARDTILE2 5491
set CKEYCARDTILE3 5490
set CTRIPBOMB 5489
set CDETON 5484
set CTIP 5481

set C_PISTOL_1 8993
set C_PISTOL_2 8993

set C_ARM_1 16054
set C_ARM_2 12188

set CPIPEBOMB 2573
set CHOLDING 9427
set CHOLDING_2 9427
set CHOLDING_3 12114

set C_HAND_1 5478
set C_HAND_2 5479

set CIICON 5507

ifl player[].holoduke_amount 0 set HOLOGRAM_ON -1

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 70 
else set PMAX_STAMINA 100

ifp pboosted stopsound DUKE_HARTBEAT

// MELEE
ife temp_weapon 0
{
set WEAPON0_FIRESOUND 0
set WEAPON0_TOTALTIME 14
set WEAPON0_HOLDDELAY 14
set WEAPON0_FIREDELAY 7
set WEAPON0_SHOOTS KNEE
}

// PISTOL
ife SPECIALIST_EQUIPMENT[82] 2 // using MP5k?
{
smaxammo 1 600
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 22645
set W1_AMMO_TILE 22653
setarray AMMO_AMOUNT[1] 40
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 3
set WEAPON1_CLIP 0
set WEAPON1_HOLDDELAY 0
set WEAPON1_SPAWNTIME 0
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 598
set WEAPON1_RELOADSOUND2 599
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_RELOAD 27
set WEAPON1_FLAGS 4
set WEAPON1_FIRESOUND 4

ife CURWEAP 1
	{	
	set WEAPON_TYPE 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 16
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUN_VOLUME 6
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 30
	
		set WEAPON1_SHOOTS CHAINGUN
		ife KICKBACKPIC 2 
			{ 
			add GUN_SPREAD 6 
			sub PISTOLMAG 1 
			espawn 2520 
			state SPAWN_IN_PLAYER_FRONT 
			setactorvar[RETURN].TEMP MP5K_FIRE 
			ifvarl GUNMAG 6 sound MAG_LOW 
			shoot 13772 
			set gunsmoke_angle 64 
			state spawn_gunsmoke 
		    set GUN_RECOIL 5 
			}
		ife KICKBACKPIC 10 sound KASHTAN_MAGOUT
		ife KICKBACKPIC 15 ife PISTOLMAG 0 spawn 3756
					
		ife KICKBACKPIC 20 
			{
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}
			
		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
		
	}
}
else
ife SPECIALIST_EQUIPMENT[37] 2 // using gold auto-rifle?
{
smaxammo 1 250
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 14629
set W1_AMMO_TILE 5468
setarray AMMO_AMOUNT[1] 25


set WEAPON1_CLIP 0
set WEAPON1_HOLDDELAY 0
set WEAPON1_SPAWNTIME 0
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 598
set WEAPON1_RELOADSOUND2 599
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_RELOAD 27
set WEAPON1_FLAGS 4

	set WEAPON1_FIRESOUND 4
	set WEAPON1_SHOOTS GOLDEN_SHOT_LOW

ife CURWEAP 1
	{	
	set WEAPON_TYPE 3
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_VOLUME 12
	set GUNMAG -1
	set PISTOLMAG 1
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP ZAX_GRIFLE_F } 
	
		set GUN_MAX_SPREAD 0
		ifand GUNFIREMODE 16384 // Is the sight active?
			{
			set WEAPON1_FIREDELAY 2
			set WEAPON1_TOTALTIME 5
			set GUN_ACCURACY 8
			}
			else
			{
			set WEAPON1_FIREDELAY 2
			set WEAPON1_TOTALTIME 4
			set GUN_ACCURACY 32
			}
	
		ife KICKBACKPIC 2 shoot RIFLESHELL
		ife KICKBACKPIC 3 { set GUN_RECOIL 5 set gunsmoke_angle 64 state spawn_gunsmoke }
		
	}
}
else
{
smaxammo 1 300
setarray WEAPON_SPECIAL[1] 0
ifand ZAXTOR_UPGRADE 1 set WEAPON1_TILE 5441
else set WEAPON1_TILE 5388
set W1_AMMO_TILE 5467
setarray AMMO_AMOUNT[1] 25
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 4
set WEAPON1_CLIP 0
set WEAPON1_HOLDDELAY 0
set WEAPON1_SPAWNTIME 0
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 598
set WEAPON1_RELOADSOUND2 599
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_RELOAD 27
set WEAPON1_FLAGS 6
set WEAPON1_FIRESOUND 4

ife CURWEAP 1
	{	
	set WEAPON_TYPE 0
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_VOLUME 12
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 50
	
	ifand ZAXTOR_UPGRADE 4
		{
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 8
		ife player[].weapon_pos 0
			{
			state spawn_lasersite
			seta[RETURN].x hitx
			seta[RETURN].y hity
			seta[RETURN].z hitz
			}
		}
		else
		{
		set GUN_ACCURACY 16
		set GUN_MAX_SPREAD 16
		}
	
	ifand ZAXTOR_UPGRADE 2
		{
		set WEAPON1_SHOOTS ZRIFLESHOTU
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP ASSAULTRIFLEU } 
		}
	else
		{
		set WEAPON1_SHOOTS ZRIFLESHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP ASSAULTRIFLE }
		}
	
		ife KICKBACKPIC 2 
			{ 
			add GUN_SPREAD 6 
			ifvarl GUNMAG 6 sound MAG_LOW
			shoot RIFLESHELL 
			sub PISTOLMAG 1 
			set gunsmoke_angle 64 
			state spawn_gunsmoke 
			set GUN_RECOIL 5 
			}
		ife KICKBACKPIC 10 sound 598
		ife KICKBACKPIC 15 ife PISTOLMAG 0 spawn 3756
		
		ifg GL_COUNTDOWN 23
			{
			sub WEAPSWAYX 5
			sub WEAPSWAYY 5
			}
			
		ife KICKBACKPIC 20 
			{
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}
			
		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
		
	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[5] 2 // leadgun quadshotgun
{
set WEAPON2_TILE 8315
set W2_AMMO_TILE 49
setarray AMMO_AMOUNT[2] 3
setarray WEAPON_SPECIAL[2] 0

smaxammo 2 25
	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 4
	set WEAPON2_TOTALTIME 38
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS 2613
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 28
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND QUAD_SHOTGUN
	set WEAPON2_SOUND2TIME 15
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 48
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 90
	set GUNMAG -1
		ife KICKBACKPIC 4 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		set gunsmoke_angle 32 state spawn_gunsmoke
		set gunsmoke_angle 48 state spawn_gunsmoke
		state gun_pushback set gun_pushback_power -512 
		getp[].horiz TEMP
		add TEMP 20
		setp[].horiz TEMP
		
		}

		ife KICKBACKPIC 5  // AND UP AGAIN...
		{
		getp[].horiz TEMP
		add TEMP 20
		setp[].horiz TEMP
		}

		ife KICKBACKPIC 6  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 20
		setp[].horiz TEMP
		}

		ife KICKBACKPIC 7 // ...BACK TO NORMAL
		{
		getp[].horiz TEMP
		sub TEMP 20
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 8 sound LEADS_RELOAD
		ife KICKBACKPIC 29 sound GL_INSERT2

			ife KICKBACKPIC 24 
			{ 
			  shoot 3761 
			  
			  eshoot 3761 
			  geta[RETURN].ang TEMP add TEMP 128 seta[RETURN].ang TEMP
			  eshoot 3761 
			  geta[RETURN].ang TEMP sub TEMP 896 seta[RETURN].ang TEMP
			  eshoot 3761 
			  geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
			}	
	}

}
else
ife SPECIALIST_EQUIPMENT[62] 2 // using gold shotgun?
{
smaxammo 2 100

set WEAPON2_TILE 19766
set W2_AMMO_TILE 5477
setarray AMMO_AMOUNT[2] 6
setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 31
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 7
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND ZAX_GOLDS_FIRE
	set WEAPON2_SOUND2TIME 10
	set WEAPON2_SOUND2SOUND ZAX_GOLDS_PUMP
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 24
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 60
	set GUNMAG -1
	
		ife KICKBACKPIC 3 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		set gunsmoke_angle 32 state spawn_gunsmoke
		state gun_pushback set gun_pushback_power -16		
		}

		ife KICKBACKPIC 4  // AND UP AGAIN...
		{
		getp[].horiz TEMP
		add TEMP 5
		setp[].horiz TEMP
		}

		ife KICKBACKPIC 5  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		add TEMP 5
		setp[].horiz TEMP
		}

		ife KICKBACKPIC 6 // ...BACK TO NORMAL
		{
		getp[].horiz TEMP
		sub TEMP 5
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 7 // ...BACK TO NORMAL
		{
		getp[].horiz TEMP
		sub TEMP 5
		setp[].horiz TEMP
		}

			ife KICKBACKPIC 24 
			{ 
			  setprojectile[3761].pal 40 shoot 3761 setprojectile[3761].pal 0
			  geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
			}	
	}
}
else
{
smaxammo 2 50

set WEAPON2_TILE 11107
set W2_AMMO_TILE 49
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 26
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS 2613
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 14
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND 591
	set WEAPON2_SOUND2TIME 9
	set WEAPON2_SOUND2SOUND 592
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 60
	set GUNMAG -1
		ife KICKBACKPIC 4 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		set gunsmoke_angle 32 state spawn_gunsmoke
		set gunsmoke_angle 48 state spawn_gunsmoke
		state gun_pushback set gun_pushback_power -256 
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		}

		ife KICKBACKPIC 5  // AND UP AGAIN...
		{
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		}

		ife KICKBACKPIC 6  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}

		ife KICKBACKPIC 7 // ...BACK TO NORMAL
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}

			ife KICKBACKPIC 24 
			{ 
			  shoot 3761 
			  eshoot 3761 
			  geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
			}	
	}
}

// MACHINEGUN
ife SPECIALIST_EQUIPMENT[70] 2 // Super Galil?
{
set WEAPON3_TILE 16015
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 16025
setarray AMMO_AMOUNT[3] 30

set WEAPON3_FIREDELAY 2
set WEAPON3_HOLDDELAY 3
set WEAPON3_RELOAD 0
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_SPAWN 0
set WEAPON3_RELOADSOUND2 5
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 

ife CURWEAP 3
	{
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 12
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 2
	set GUN_VOLUME 25
	set GUN_AMMO_TYPES 512
	set GUNMAG -1
	
		ife player[].weapon_pos 0
			{
			state spawn_lasersite
			seta[RETURN].x hitx
			seta[RETURN].y hity
			seta[RETURN].z hitz
			}

	set WEAPON3_SHOTSPERBURST 1
	set GUN_HANDS 2
			
	set WEAPON3_FIRESOUND 4
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP ZAX_SGALILF }
		
		ife KICKBACKPIC 5 
			{
			ife GEO_MEGA_SHOT[2] 1
			 ifand GUNFIREMODE_2 2
			  ifg atomic_bomb 0
				{
				globalsound Z_WARNING
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP Z_MISSILE_FIRE
				shoot ATOM_BOMB
				sub atomic_bomb 1
				setarray GEO_MEGA_SHOT[2] 0
				}
			else
			 ifand GUNFIREMODE_2 1
			  ifg heat_seek_card 0
				{
				ifand GUNFIREMODE_2 4
				 ifg DUP_missile_ammo 0
					{
					set WEAPON3_SHOOTS 0
					setprojectile[HOMING_MISSILE].userdata 32
					setprojectile[HOMING_MISSILE].pal 10
					eshoot HOMING_MISSILE // userdata has to be changed before firing
					setprojectile[HOMING_MISSILE].userdata 64
					setprojectile[HOMING_MISSILE].pal 21
					sound HEAT_SEEK
					setthisprojectile[RETURN].hitradius 4500
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 975
					setthisprojectile[RETURN].xrepeat 40
					setthisprojectile[RETURN].yrepeat 40
					setthisprojectile[RETURN].extra 275
					setthisprojectile[RETURN].extra_rand 275
					setthisprojectile[RETURN].userdata 32
					setthisprojectile[RETURN].isound EXPLOSION_BIG
					setthisprojectile[RETURN].spawns BIG_EXPLOSION
					espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP DUP_FIRE
					sub DUP_missile_ammo 1
					}
					else
					{
					set WEAPON3_SHOOTS 0
					eshoot HOMING_MISSILE
					espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP Z_MISSILE_FIRE
					sound HEAT_SEEK
					setthisprojectile[RETURN].hitradius 2250
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 775
					setthisprojectile[RETURN].extra 75
					setthisprojectile[RETURN].extra_rand 75
					}
				sub heat_seek_card 1
				}
			else
			 ifand GUNFIREMODE_2 128 // normal missiles
				{
				ifand GUNFIREMODE_2 4
				 ifg DUP_missile_ammo 0
					{
					set WEAPON3_SHOOTS 0
					setprojectile[MICRO_MISSILE].userdata 32
					setprojectile[MICRO_MISSILE].pal 14
					eshoot MICRO_MISSILE  // userdata has to be changed before firing
					setprojectile[MICRO_MISSILE].userdata 64
					setprojectile[MICRO_MISSILE].pal 0
					setthisprojectile[RETURN].hitradius 4500
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 975
					setthisprojectile[RETURN].xrepeat 40
					setthisprojectile[RETURN].yrepeat 40
					setthisprojectile[RETURN].extra 275
					setthisprojectile[RETURN].extra_rand 275
					setthisprojectile[RETURN].isound EXPLOSION_BIG
					setthisprojectile[RETURN].spawns BIG_EXPLOSION
					espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP DUP_FIRE
					sub DUP_missile_ammo 1
					}
					else
					{
					set WEAPON3_SHOOTS 0
					espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP Z_MISSILE_FIRE
					eshoot MICRO_MISSILE
					setthisprojectile[RETURN].hitradius 2250
					setthisprojectile[RETURN].workslike 65538
					setthisprojectile[RETURN].vel 675
					setthisprojectile[RETURN].velmult 2
					setthisprojectile[RETURN].extra 75
					setthisprojectile[RETURN].extra_rand 75
					}
				}
			}
			
		ifand GUNFIREMODE_2 1 // heat
			{
			set WEAPON3_FLAGS 0
			set WEAPON3_TOTALTIME 19
			
			ife KICKBACKPIC 5
				{
				ifand GUNFIREMODE_2 4 nullop else
					{
					getp[].ammo_amount 5 TEMP
					sub TEMP 1
					setp[].ammo_amount 5 TEMP
					}
				}
			
			ifand GUNFIREMODE_2 4 // DUP missiles
			{
			set WEAPON_TYPE 9
			ifg DUP_missile_ammo 10 set DUP_missile_ammo 10 // fail safe to make sure they have a limit of 10
			ife DUP_missile_ammo 0 
				{
				xorvar GUNFIREMODE_2 4 // take off DUP mod if no DUP missiles left
				}
			}

			ife heat_seek_card 0 
				{
				xorvar GUNFIREMODE_2 1 // take off heat mode if no heat card
				xorvar GUNFIREMODE_2 128 // go to normal mode
				}
			}
			else
		ifand GUNFIREMODE_2 2 // nuke
			{
			set WEAPON_TYPE 10
			set WEAPON3_FLAGS 0
			set WEAPON3_TOTALTIME 19
			ifg atomic_bomb 1 set atomic_bomb 1 // fail safe to make sure they have a limit of 1
			ife atomic_bomb 0 ife KICKBACKPIC 0 xorvar GUNFIREMODE_2 2 // take off atomic mode if no atomic
			}
			else
			ifand GUNFIREMODE_2 128
			{
			set WEAPON_TYPE 4
			set WEAPON3_FLAGS 0
			set WEAPON3_TOTALTIME 19
			
			ifand GUNFIREMODE_2 4 // DUP missiles
			{
			ifg DUP_missile_ammo 10 set DUP_missile_ammo 10 // fail safe to make sure they have a limit of 10
			ife DUP_missile_ammo 0 
				{
				xorvar GUNFIREMODE_2 4 // take off DUP mod if no DUP missiles left
				}
			}
			else
			ife KICKBACKPIC 5
				{
				getp[].ammo_amount 5 TEMP
				sub TEMP 1
				setp[].ammo_amount 5 TEMP
				}
			ife player[].ammo_amount 5 0 ife DUP_missile_ammo 0 { xorvar GUNFIREMODE_2 128 setp[].weapon_pos 10 }
			}
			else
			{
			set WEAPON_TYPE 0
			set WEAPON3_FLAGS 68
			set WEAPON3_TOTALTIME 4
			set WEAPON3_SHOOTS MSCORP_SHOT
			ife KICKBACKPIC 2 set GUN_RECOIL 5
			ife KICKBACKPIC 3 add GUN_SPREAD 8
			}	
		ifand GUNFIREMODE_2 2
		 ife KICKBACKPIC 0
		 {
		 ife GEO_MEGA_SHOT[2] 1 set GUN_ACCURACY 0
		  ife GEO_MEGA_SHOT[2] 0
			{
			set GUN_ACCURACY NUKE_COUNTDOWN
			ife NUKE_COUNTDOWN 0 set NUKE_COUNTDOWN 191
			ifg NUKE_COUNTDOWN 0 sub NUKE_COUNTDOWN 1 
			ife NUKE_COUNTDOWN 180 soundonce Z_STANDBY
			ife NUKE_COUNTDOWN 130 soundonce Z_COUNTD
			ife NUKE_COUNTDOWN 40 soundonce Z_SYSREADY
			ife NUKE_COUNTDOWN 5 state NUKE_TAUNTS
			ife NUKE_COUNTDOWN 1 { setarray GEO_MEGA_SHOT[2] 1 set NUKE_COUNTDOWN 0 }
			}
		  }
		  
	ifg NUKE_COUNTDOWN 0 ife GEO_MEGA_SHOT[2] 0 { ifand GUNFIREMODE_2 2 nullop else set NUKE_COUNTDOWN 0 }
		  
	ife KICKBACKPIC 2 {  set gunsmoke_angle 64 state spawn_gunsmoke }
	}

}
else
ife SPECIALIST_EQUIPMENT[23] 2 // RC-APSMG?
{
set WEAPON3_TILE 13368
ifand GUNSAKIMBO 16 setarray WEAPON_SPECIAL[3] 1 else setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 41
setarray AMMO_AMOUNT[3] 50

set WEAPON3_FIREDELAY 2
set WEAPON3_HOLDDELAY 3
set WEAPON3_TOTALTIME 3
set WEAPON3_RELOAD 0
set WEAPON3_CLIP 0
set WEAPON3_FLAGS 68
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON3_RELOADSOUND1 4
set WEAPON3_SPAWN 0
set WEAPON3_RELOADSOUND2 5
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 

	ife CURWEAP 3
	{
	set WEAPON_TYPE 1
	set GUN_AMMO_TYPES 0
	ifand GUNFIREMODE 16384
		set GUN_ACCURACY 16
		else
		set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_VOLUME 6
	set GUNMAG -1
	set WEAPON3_SHOTSPERBURST 1
	ifand GUNFIREMODE 1024
		{
		mulvar GUN_ACCURACY 2
		set GUN_HANDS 2
		}
		else
		set GUN_HANDS 1
	ifg KICKBACKPIC_2 0
		{
		add KICKBACKPIC_2 1
		ifg KICKBACKPIC_2 2 set KICKBACKPIC_2 0
		}
	ife KICKBACKPIC_2 2
		{
		shoot ARMOUR_PIERCING_SHOT
		sound AP_SMG
		set GUN_RECOIL 5
		set gunsmoke_angle -64
		state spawn_gunsmoke
		getp[].ammo_amount 3 TEMP
		ifg TEMP 0 sub TEMP 1 
		setp[].ammo_amount 3 TEMP
			randvar TEMP 1024  
			zshoot TEMP 13780
		}	
	ife KICKBACKPIC 2 { set GUN_RECOIL 5 espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AP_SMG }
	}
}
else
{
set WEAPON3_TILE 5389
ifand GUNSAKIMBO 16 setarray WEAPON_SPECIAL[3] 1 else setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 41
setarray AMMO_AMOUNT[3] 50

set WEAPON3_FIREDELAY 2
set WEAPON3_HOLDDELAY 3
set WEAPON3_TOTALTIME 3
set WEAPON3_RELOAD 0
set WEAPON3_CLIP 0
set WEAPON3_FLAGS 68
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS CHAINGUN
set WEAPON3_RELOADSOUND1 4
set WEAPON3_SPAWN 0
set WEAPON3_RELOADSOUND2 5
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_AMMO_TYPES 0
	ifand GUNFIREMODE 16384
		set GUN_ACCURACY 12
		else
		set GUN_ACCURACY 24
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_VOLUME 6
	set GUNMAG -1
	set WEAPON3_SHOTSPERBURST 1
	ifand GUNFIREMODE 1024
		{
		mulvar GUN_ACCURACY 2
		set GUN_HANDS 2
		}
		else
		set GUN_HANDS 1
	ifg KICKBACKPIC_2 0
		{
		add KICKBACKPIC_2 1
		ifg KICKBACKPIC_2 2 set KICKBACKPIC_2 0
		}
	ife KICKBACKPIC_2 2
		{
		shoot CHAINGUN
		sound ZAX_SMG 
		set GUN_RECOIL 5
		set gunsmoke_angle -64
		state spawn_gunsmoke
		getp[].ammo_amount 3 TEMP
		ifg TEMP 0 sub TEMP 1 
		setp[].ammo_amount 3 TEMP
			randvar TEMP 1024  
			zshoot TEMP 13780
		}	
	ife KICKBACKPIC 2 { set GUN_RECOIL 5 espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP ZAX_SMG }
	}
}
	
// RPG
ife SPECIALIST_EQUIPMENT[75] 2 // Plasma launcher
	{
	smaxammo 4 40
	set WEAPON4_TILE 19917
	set W4_AMMO_TILE 19916
	setarray AMMO_AMOUNT[4] 3

	set WEAPON4_FIRESOUND CY_PLASMA_FIRE
	set WEAPON4_SHOOTS 14644
	set WEAPON4_RELOAD 30
	set WEAPON4_FIREDELAY 4
	set WEAPON4_TOTALTIME 20
	set WEAPON4_HOLDDELAY 0
	set WEAPON4_FLAGS 2

	ife CURWEAP 4
		{
		set WEAPON_TYPE 4
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_VOLUME 90
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 32
		set GUN_MAX_SPREAD 0
		set GUNMAG -1
		}
	}
else
	{
	smaxammo 4 60
	set WEAPON4_TILE 23
	set W4_AMMO_TILE 5466
	setarray AMMO_AMOUNT[4] 5

	set WEAPON4_FIRESOUND 531
	set WEAPON4_SHOOTS RPG
	set WEAPON4_RELOAD 30
	set WEAPON4_FIREDELAY 2
	set WEAPON4_TOTALTIME 14
	set WEAPON4_HOLDDELAY 0
	set WEAPON4_FLAGS 0

	ife CURWEAP 4
		{
		set WEAPON_TYPE 4
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_VOLUME 70
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 32
		set GUN_MAX_SPREAD 0
		set GUNMAG -1
		}
	}

// PIPEBOMB
set WEAPON5_TILE 26
set W5_AMMO_TILE 47
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 1

ife CURWEAP 5
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUNMAG -1
	ife KICKBACKPIC 12 sound TNT_THROW
	}

// SHRINKER
set WEAPON6_TILE 5386
set W6_AMMO_TILE 46
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 10

set WEAPON6_FIREDELAY 3
set WEAPON6_SHOOTS 2556
set WEAPON6_TOTALTIME 12
set WEAPON6_FIRESOUND 0
set WEAPON6_INITIALSOUND 11
set WEAPON6_SHOTSPERBURST 0
set WEAPON6_FLAGS 2

ife CURWEAP 6
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 30
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUNMAG -1
	}

// DEVISTATOR
ife SPECIALIST_EQUIPMENT[52] 2 // DZ Firestorm cannon
	{
	set WEAPON7_TILE 9163
	set W7_AMMO_TILE 5469
	setarray AMMO_AMOUNT[7] 25
	setarray WEAPON_SPECIAL[7] 0

	set WEAPON7_FIREDELAY 3
	set WEAPON7_TOTALTIME 5
	set WEAPON7_INITIALSOUND BRUISER_FLAME
	set WEAPON7_SHOOTS RPG
	set WEAPON7_SHOTSPERBURST 2
	set WEAPON7_FLAGS 72
	set WEAPON7_FIRESOUND 0

	ife CURWEAP 7
		{
		set WEAPON_TYPE 8
		set GUN_SIZE 2
		set GUN_HANDS 2
		ife KICKBACKPIC 1 sound FIREBALL_FIRE
		set GUN_VOLUME 15
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 32
		set GUN_MAX_SPREAD 0
		set GUNMAG -1
		}
	}
else
	{
	set WEAPON7_TILE 5464
	set W7_AMMO_TILE 5465
	setarray AMMO_AMOUNT[7] 25
	setarray WEAPON_SPECIAL[7] 0

	set WEAPON7_FIREDELAY 3
	set WEAPON7_TOTALTIME 5
	set WEAPON7_INITIALSOUND PETRIFYGUN
	set WEAPON7_SHOOTS RPG
	set WEAPON7_SHOTSPERBURST 2
	set WEAPON7_FLAGS 72
	set WEAPON7_FIRESOUND 0

	ife CURWEAP 7
		{
		set WEAPON_TYPE 4
		set GUN_SIZE 2
		set GUN_HANDS 2
		ife KICKBACKPIC 1 sound SONICC
		set GUN_VOLUME 15
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 32
		set GUN_MAX_SPREAD 0
		set GUNMAG -1
		
		ife KICKBACKPIC 4
			{
			ife ALT_DEVI_CYCLE 0 set ALT_DEVI_CYCLE 1 else set ALT_DEVI_CYCLE 0
			}
		
		}
	}

// TRIPBOMB
set WEAPON8_TILE 5450
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUNMAG -1
	}

// FREEZER
set WEAPON9_TILE 5385
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 5382
setarray AMMO_AMOUNT[9] 1

set WEAPON9_SHOOTS PETRIFYRAY
set WEAPON9_FIREDELAY 3
set WEAPON9_TOTALTIME 5
set WEAPON9_HOLDDELAY 0 
set WEAPON9_FIRESOUND PETRIFYGUN
set WEAPON9_INITIALSOUND PETRIFYGUN
set WEAPON9_FLAGS 20

ife CURWEAP 9
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 20
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 0
	set GUNMAG -1
	}

// EXPANDER
set W11_AMMO_TILE 45
setarray AMMO_AMOUNT[11] 20

set WEAPON11_CLIP 0
set WEAPON11_RELOAD 0
set WEAPON11_FIREDELAY 2
set WEAPON11_TOTALTIME 5
set WEAPON11_HOLDDELAY 0
set WEAPON11_FLAGS 2
set WEAPON11_SHOOTS 2448
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_INITIALSOUND 388
set WEAPON11_FIRESOUND 388
set WEAPON11_SOUND2TIME 0
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

ife CURWEAP 11
	{
	set WEAPON_TYPE 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 15
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUNMAG -1
	}


}
ends

defstate PS_MERLIJN
{
setp[].knuckle_incs 0
ifaction ZERO action PSTAND
ife FIRE_SUIT 1 ifaction PSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction PSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction PSTAND action SS_STAND
ife on_tripwire 1 action PSTAND

qputs 3 Healing Elixir

qputs 90 Power Bracers
qputs 12 Used Power Bracers

qputs 6 Boots of protection
qputs 75 Boots of protection on

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision goggles
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Knight vision goggles
	qputs 106 Knight vision on
	qputs 107 Knight vision off
	}


qputs 89 Diving Helmet!

qputs 47 Heavy Shield
qputs 48 Heavy Shield
qputs 49 -
qputs 51 Heavy Shield
qputs 91 Heavy Shield

qputs 88 Boots of flying!
qputs 50 Boots of flying not found yet!
qputs 52 Boots of flying on
qputs 53 Boots of flying off

qputs 102 We're gonna fry your ass, Merlijn!

smaxammo 1 10
smaxammo 2 1
smaxammo 3 1
smaxammo 4 100
smaxammo 6 50
smaxammo 7 100
smaxammo 9 1
smaxammo 11 100

state mind_shield_state

getp[].holoduke_on TEMP
ifn TEMP -1
{
sound OARMOURPICK
stopsound SOMETHINGHITFORCE
stopsound TELEPORTER
setp[].holoduke_amount 0
set MERLIJNSHIELD 200
set MSHIELDTYPE 1
}

set CKNEE 5061
set CKEYCARDTILE 3837
set CKEYCARDTILE2 3836
set CKEYCARDTILE3 3835
set CTRIPBOMB 3834
set CDETON 2570
set CTIP 10265

set C_ARM_1 15973
set C_ARM_2 12186

set C_PISTOL_1 8992
set C_PISTOL_2 8992

set CMEDIKIT 4977
set CSTEROIDS 5030
set CHOLODUKE 4976
set CJETPACK 7918

set CHEAT 5028
set CNVG 5031

state DISP_nvg

set CSCUBA 4967
set CBOOTS 4968
set C_ARMOUR 4975
set C_HEAVY_ARMOUR 4959

set C_HAND_1 7897
set C_HAND_2 7898

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 100 
else
	{
	ife PERSONEL_RESEARCH[21] 2 set PMAX_STAMINA 170 // improved robes?
	else set PMAX_STAMINA 150
	}

set CPIPEBOMB 5041
set CHOLDING 9428
set CHOLDING_2 9428
set CHOLDING_3 12115

set CIICON 3822

ife PERSONEL_RESEARCH[29] 2 // Improved shield research?
	{
	ife MSHIELDTYPE 0
		{
		ifg MERLIJNSHIELD 175 set MERLIJNSHIELD 175
		}
	else
	ife MSHIELDTYPE 1
		{
		ifg MERLIJNSHIELD 325 set MERLIJNSHIELD 325
		}
	}
else
	{
	ife MSHIELDTYPE 0
		{
		ifg MERLIJNSHIELD 125 set MERLIJNSHIELD 125
		}
	else
	ife MSHIELDTYPE 1
		{
		ifg MERLIJNSHIELD 250 set MERLIJNSHIELD 250
		}
	}

ifp pboosted
{
stopsound DUKE_HARTBEAT
soundonce M_BRACER
setprojectile[4960].extra 300
setprojectile[19].extra 300

getp[].jumping_counter TEMP
ifg TEMP 0 { setp[].poszv -6536 }

iffloordistl 32 { getp[].falling_counter TEMP ifl TEMP 61 setp[].falling_counter 8 }

}
else
{
setprojectile[4960].extra 150
setprojectile[19].extra 150
}



// MELEE
ife CURWEAP 0
{
ife temp_weapon 0
	{
	set WEAPON_TYPE 0
	set WEAPON0_FIRESOUND 532
	set WEAPON0_TOTALTIME 12
	set WEAPON0_HOLDDELAY 12
	set WEAPON0_FIREDELAY 7
	set WEAPON0_SHOOTS KNEE
	set GUN_HANDS 1

	ife CURWEAP 0
		{
		set GUNMAG -1
		set GUN_HANDS 1
		set GUN_SIZE 0
			state UPPERCUT_STUFF
			
		}

	}
}

// PISTOL
ife SPECIALIST_EQUIPMENT[38] 2 // Gold dagger
{
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 14603
set W1_AMMO_TILE 5029
setarray AMMO_AMOUNT[1] 20

getplayer[].ammo_amount 1 TEMP
ifg TEMP 10 setplayer[].ammo_amount 1 10

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS 14605
set WEAPON1_SPAWNTIME -0
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_INITIALSOUND PUNCH
set WEAPON1_FIRESOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 0
set WEAPON1_RELOADSOUND2 0
set WEAPON1_FIREDELAY 9
set WEAPON1_TOTALTIME 14
set WEAPON1_FLAGS 256

	ife CURWEAP 1
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 0
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_HANDS 1
	ife KICKBACKPIC 9 
		{
		getp[].ammo_amount 1 TEMP
		add TEMP 1
		setp[].ammo_amount 1 TEMP
		}
	}
}
else // Standard Dagger
{
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 4970
set W1_AMMO_TILE 5029
setarray AMMO_AMOUNT[1] 20

getplayer[].ammo_amount 1 TEMP
ifg TEMP 10 setplayer[].ammo_amount 1 10

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS 14604
set WEAPON1_SPAWNTIME -0
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_INITIALSOUND PUNCH
set WEAPON1_FIRESOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 0
set WEAPON1_RELOADSOUND2 0
set WEAPON1_FIREDELAY 9
set WEAPON1_TOTALTIME 14
set WEAPON1_FLAGS 256

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUNMAG -1
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_HANDS 1
	ife KICKBACKPIC 9 
		{
		getp[].ammo_amount 1 TEMP
		add TEMP 1
		setp[].ammo_amount 1 TEMP
		}
	}
}


// SHOTGUN/SWORD
ife SPECIALIST_EQUIPMENT[51] 2 // Guandao?
{
set WEAPON2_TILE 16069
set W2_AMMO_TILE 5029
setarray AMMO_AMOUNT[2] 25
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 0
set WEAPON2_FIREDELAY 6
set WEAPON2_TOTALTIME 12
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 256
set WEAPON2_SHOOTS 16076
set WEAPON2_SPAWNTIME -1
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 1
set WEAPON2_INITIALSOUND 4
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME -1
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 4

	ife CURWEAP 2
	{
	ifand GUNSAKIMBO 8 xorvar GUNSAKIMBO 8
	set WEAPON_TYPE 2
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUNMAG -1
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 1
	set GUN_HANDS 2
		setp[].ammo_amount 2 1
		
		
ifl MERL_SPIN_SLASH 27
	{
	add MERL_SPIN_SLASH 1
	lockplayer 5
	setp[].knee_incs 0
	setp[].quick_kick 0
	set swing_type 0
	ifl MERL_SPIN_SLASH 3 setp[].kickback_pic 1
    ifl MERL_SPIN_SLASH 10 setp[].rotscrnang -128 else
    ifl MERL_SPIN_SLASH 13 setp[].rotscrnang -64 else
	ifl MERL_SPIN_SLASH 16 setp[].rotscrnang 64
	getp[].ang TEMP5
	ife MERL_SPIN_SLASH 1 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 2 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 3 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 4 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 5 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 6 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 7 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 8 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 9 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 10 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 11 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 12 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 13 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 14 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 15 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 16 { shoot 16076 sub TEMP5 128 setp[].ang TEMP5 }
	ife MERL_SPIN_SLASH 1 sound GUANDAO_DRAW
	}
		
	ife KICKBACKPIC 0 set SWORD_ANIM 0
	ife KICKBACKPIC 3
		{
		ifrnd 128 sound GUANDAO_SLASH1 else
		sound GUANDAO_SLASH2
		}
		
		ife KICKBACKPIC 11
		{
		randvar SWORD_ANIM 2
		ifand BITS_PRESS 4 setp[].kickback_pic 2
		}
		
		
	}
}
else
ife SPECIALIST_EQUIPMENT[63] 2 // golden sword
{
set WEAPON2_TILE 19781
set W2_AMMO_TILE 5029
setarray AMMO_AMOUNT[2] 25

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 0
set WEAPON2_FIREDELAY 9
set WEAPON2_TOTALTIME 12
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 256
set WEAPON2_SHOOTS 19802
set WEAPON2_SPAWNTIME -1
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 1
set WEAPON2_INITIALSOUND 4
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME -1
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 4

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 0
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
		setp[].ammo_amount 2 1
		
	setarray WEAPON_SPECIAL[2] 0
		
	
	set GUN_SIZE 1
	set GUN_HANDS 1

	ife KICKBACKPIC 1
		{
		espawn 2520 
		state SPAWN_IN_PLAYER_FRONT 
		ifrnd 96 setactorvar[RETURN].TEMP SWORDSWEEP
		else ifrnd 96 setactorvar[RETURN].TEMP SWORDSWEEP2
		else setactorvar[RETURN].TEMP SWORDSWEEP3
		}
		
		ifl MERL_SPIN_SLASH 27
			{
			add MERL_SPIN_SLASH 1
			lockplayer 5
			setp[].knee_incs 0
			setp[].quick_kick 0
			set swing_type 0
			ifl MERL_SPIN_SLASH 3 setp[].kickback_pic 1
			ifl MERL_SPIN_SLASH 10 setp[].rotscrnang -128 else
			ifl MERL_SPIN_SLASH 13 setp[].rotscrnang -64 else
			ifl MERL_SPIN_SLASH 16 setp[].rotscrnang 64
			getp[].ang TEMP5
			ife MERL_SPIN_SLASH 1 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 2 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 3 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 4 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 5 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 6 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 7 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 8 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 9 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 10 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 11 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 12 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 13 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 14 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 15 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 16 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 1 sound KICK_SWING 
			}
		
	}
}
else
{
set WEAPON2_TILE 4974
set W2_AMMO_TILE 5029
setarray AMMO_AMOUNT[2] 25

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 0
set WEAPON2_FIREDELAY 9
set WEAPON2_TOTALTIME 12
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 256
set WEAPON2_SHOOTS 4961
set WEAPON2_SPAWNTIME -1
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 1
set WEAPON2_INITIALSOUND 4
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME -1
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 4

	ife CURWEAP 2
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 0
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
		setp[].ammo_amount 2 1
		
	setarray WEAPON_SPECIAL[2] 0
		
	set GUN_SIZE 1
	set GUN_HANDS 1
		
	ife KICKBACKPIC 1
		{
		ifrnd 96 sound SWORDSWEEP else
		ifrnd 96 sound SWORDSWEEP2 else
		sound SWORDSWEEP3
		}
		
		
		ifl MERL_SPIN_SLASH 27
			{
			add MERL_SPIN_SLASH 1
			lockplayer 5
			setp[].knee_incs 0
			setp[].quick_kick 0
			set swing_type 0
			ifl MERL_SPIN_SLASH 3 setp[].kickback_pic 1
			ifl MERL_SPIN_SLASH 10 setp[].rotscrnang -128 else
			ifl MERL_SPIN_SLASH 13 setp[].rotscrnang -64 else
			ifl MERL_SPIN_SLASH 16 setp[].rotscrnang 64
			getp[].ang TEMP5
			ife MERL_SPIN_SLASH 1 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 2 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 3 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 4 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 5 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 6 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 7 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 8 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 9 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 10 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 11 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 12 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 13 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 14 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 15 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 16 { shoot 4961 add TEMP5 128 setp[].ang TEMP5 }
			ife MERL_SPIN_SLASH 1 sound KICK_SWING 
			}
		
	}
}

// MACHINEGUN/AXE
ife SPECIALIST_EQUIPMENT[26] 2 // Long axe?
{
set WEAPON3_TILE 13403
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 5029
setarray AMMO_AMOUNT[3] 25

set WEAPON3_FIREDELAY 11
set WEAPON3_TOTALTIME 20
set WEAPON3_HOLDDELAY 0
set WEAPON3_FIRESOUND 4
set WEAPON3_FLAGS 256
set WEAPON3_SPAWN 0
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 0
set WEAPON3_CLIP 0
set WEAPON3_INITIALSOUND AXESWING
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUNMAG -1
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	
	ife SWORD_ANIM 0
	{
	set WEAPON_TYPE 0
	set WEAPON3_SHOOTS 13404
	}
	else
	ife SWORD_ANIM 1
	{
	set WEAPON_TYPE 1
	set WEAPON3_SHOOTS 13383
	}
	
	setp[].ammo_amount 3 1
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 9 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 15 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }

	}
}
else
{
set WEAPON3_TILE 5026
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 5029
setarray AMMO_AMOUNT[3] 25

set WEAPON3_FIREDELAY 11
set WEAPON3_TOTALTIME 20
set WEAPON3_HOLDDELAY 0
set WEAPON3_FIRESOUND 4
set WEAPON3_FLAGS 256
set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS 4960
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 0
set WEAPON3_CLIP 0
set WEAPON3_INITIALSOUND AXESWING
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUNMAG -1
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	setp[].ammo_amount 3 1
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 9 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 15 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }

	}
}

// RPG
ife SPECIALIST_EQUIPMENT[56] 2 // using compound bow?
{
set WEAPON4_TILE 18087
set W4_AMMO_TILE 4979
setarray AMMO_AMOUNT[4] 8

set WEAPON4_FIRESOUND COM_BOWFIRE
set WEAPON4_SHOOTS 18096
set WEAPON4_RELOAD 30
set WEAPON4_FIREDELAY 18
set WEAPON4_TOTALTIME 20
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 256

	ife CURWEAP 4
	{
	set WEAPON_TYPE 5
	set GUN_VOLUME 10
	set GUN_AMMO_TYPES 0
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
		ife KICKBACKPIC 9 sound COM_BOWDRAW
		
		ife KICKBACKPIC 18 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 19 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		
		ifand BITS_PRESS 4 ife KICKBACKPIC 15 setp[].kickback_pic 13 else
		ifand BITS_PRESS 64 ifl KICKBACKPIC 16 setp[].kickback_pic 0
	}
}
else
{
set WEAPON4_TILE 4978 
set W4_AMMO_TILE 4979
setarray AMMO_AMOUNT[4] 10

set WEAPON4_FIRESOUND 574
set WEAPON4_SHOOTS 5010
set WEAPON4_RELOAD 30
set WEAPON4_FIREDELAY 18
set WEAPON4_TOTALTIME 20
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 256

	ife CURWEAP 4
	{
	set WEAPON_TYPE 5
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
		ife KICKBACKPIC 9 sound BOWDRAW
		
		ife KICKBACKPIC 18 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 19 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		
		ifand BITS_PRESS 4 ife KICKBACKPIC 15 setp[].kickback_pic 13 else
		ifand BITS_PRESS 64 ifl KICKBACKPIC 16 setp[].kickback_pic 0
	}
}
	
// PIPEBOMB
set WEAPON5_TILE 5045
set W5_AMMO_TILE 5050
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 2

ife CURWEAP 5 
	{  
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUN_VOLUME 5 
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	}

ife SHOOTHOLYG THISACTOR { shoot HOLYHANDG set SHOOTHOLYG -1 }

// SHRINKER
set WEAPON6_TILE 10245
set W6_AMMO_TILE 10244
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 10

set WEAPON6_CLIP 0
set WEAPON6_RELOAD 0
set WEAPON6_FIREDELAY 18
set WEAPON6_TOTALTIME 24
set WEAPON6_HOLDDELAY 0
set WEAPON6_FLAGS 256
set WEAPON6_SHOOTS 0
set WEAPON6_SPAWNTIME -1
set WEAPON6_SPAWN 0
set WEAPON6_SHOTSPERBURST 0
set WEAPON6_INITIALSOUND AXESWING
set WEAPON6_FIRESOUND 4
set WEAPON6_SOUND2TIME -1
set WEAPON6_SOUND2SOUND 4
set WEAPON6_RELOADSOUND1 4
set WEAPON6_RELOADSOUND2 4

ife CURWEAP 6
	{
	set WEAPON_TYPE 8
	set GUN_VOLUME 60
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_HANDS 2
	set GUN_SIZE 2
	soundonce SPELL2AMB
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 9 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 15 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 16 shoot 19802
	ife KICKBACKPIC 18
		{
		    flash
			ife SPECIALIST_EQUIPMENT[18] 2 // Ice sword?
			{
			sound GREMGUN_ICE
			eshoot 7159
			setthisprojectile[RETURN].extra 110
			eshoot 7159
			setthisprojectile[RETURN].extra 110
			geta[RETURN].ang TEMP
			sub TEMP 26
			seta[RETURN].ang TEMP
			eshoot 7159
			setthisprojectile[RETURN].extra 110
			geta[RETURN].ang TEMP
			add TEMP 26
			seta[RETURN].ang TEMP
			}
			else
			{
			sound SPELL2FIRE
			shoot SPELL2
			eshoot SPELL2
			geta[RETURN].ang TEMP
			sub TEMP 26
			seta[RETURN].ang TEMP
			eshoot SPELL2
			geta[RETURN].ang TEMP
			add TEMP 26
			seta[RETURN].ang TEMP
			}
		}
	}
	

// DEVISTATOR
ife SPECIALIST_EQUIPMENT[50] 2 // Tibetan War cannon?
{
set WEAPON7_TILE 15991
set W7_AMMO_TILE 16009
setarray AMMO_AMOUNT[7] 3

set WEAPON7_FIREDELAY 2
set WEAPON7_INITIALSOUND 0
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_FLAGS 256
setarray WEAPON_SPECIAL[7] 0

set WEAPON7_FIRESOUND WARCANNON_FIRE
set WEAPON7_SHOOTS 16004

set WEAPON7_TOTALTIME 36


	ife CURWEAP 7
	{
	set WEAPON_TYPE 4
	set GUN_VOLUME 60
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 64
	set GUNMAG -1
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	ife KICKBACKPIC 2 flash
    ife KICKBACKPIC 3 
		{ 
		set gunsmoke_angle 64 state spawn_gunsmoke 
		set gun_pushback_power -128
		state gun_pushback
		}	
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 7 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 10 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 11 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 13 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	}
}
else
{
set WEAPON7_TILE 5027
set W7_AMMO_TILE 5060
setarray AMMO_AMOUNT[7] 10

set WEAPON7_FIREDELAY 2
set WEAPON7_INITIALSOUND 0
set WEAPON7_SHOTSPERBURST 21
set WEAPON7_FLAGS 256
setarray WEAPON_SPECIAL[7] 0


ifand MERLIJN_UPGRADE 1 ifand MERLIJN_UPGRADE 2 set WEAPON7_TOTALTIME 15 
else ifand MERLIJN_UPGRADE 1 set WEAPON7_TOTALTIME 20 
else ifand MERLIJN_UPGRADE 2 set WEAPON7_TOTALTIME 35
else set WEAPON7_TOTALTIME 40


	ife CURWEAP 7
	{
	ifand MERLIJN_UPGRADE 2 
		 {
		 set WEAPON_TYPE 0
		 set WEAPON7_FIRESOUND 1954
		 set WEAPON7_SHOOTS ZRIFLESHOTU
		 }
	else 
		 {
		 set WEAPON_TYPE 2
		 set WEAPON7_FIRESOUND 831
		 set WEAPON7_SHOOTS SHOTGUN
		 }
	set GUNMAG -1
	set GUN_VOLUME 60
	set GUN_AMMO_TYPES 0
	set GUN_MAX_SPREAD 0
	ifand MERLIJN_UPGRADE 4 set GUN_ACCURACY 32 else set GUN_ACCURACY 64
	set GUN_SIZE 2
	ifand MERLIJN_UPGRADE 1 set GUN_HANDS 1 else set GUN_HANDS 2
	ife KICKBACKPIC 1 { ifand MERLIJN_UPGRADE 2 nullop else sound ZIPPOLIGHT }
	ifand MERLIJN_UPGRADE 2 
		{
		soundonce SOFTFIRE_AMBIENCE
		}
	ife KICKBACKPIC 2 flash
    ife KICKBACKPIC 3 
		{ 
		set gunsmoke_angle 64 state spawn_gunsmoke 
		ifand MERLIJN_UPGRADE 1 set gun_pushback_power -32 else set gun_pushback_power -128
		state gun_pushback
		}	
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 7 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 10 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 11 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 13 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
	ife KICKBACKPIC 33 { ifand MERLIJN_UPGRADE 2 nullop else sound BLUNDER_LOAD }
	}
}
	
// TRIPBOMB
set WEAPON8_TILE 11022
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS 0
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328


ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_HANDS 1
	set GUN_SIZE 0
	set GUN_VOLUME 0
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	}


// FREEZER
set WEAPON9_TILE 5040
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 5029
setarray AMMO_AMOUNT[9] 40

set WEAPON9_FIREDELAY 11
set WEAPON9_TOTALTIME 22
set WEAPON9_HOLDDELAY 0
set WEAPON9_FIRESOUND 4
set WEAPON9_FLAGS 256
set WEAPON9_SPAWN 0
set WEAPON9_SHOOTS 19
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_RELOAD 0
set WEAPON9_CLIP 0
set WEAPON9_INITIALSOUND DRAGONSLAYERSW
set WEAPON9_RELOADSOUND1 4
set WEAPON9_RELOADSOUND2 5 

	ife CURWEAP 9
	{
	set WEAPON_TYPE 7
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUNMAG -1
	set GUN_SIZE 3
	set GUN_HANDS 2
	set GUN_VOLUME 10
	setp[].ammo_amount 9 1
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 9 { getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { shoot 19 getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 15 { shoot 19 getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
	ife KICKBACKPIC 17 { shoot 19 }
	}
	
// EXPANDER
set W11_AMMO_TILE 10245
setarray AMMO_AMOUNT[11] 15

set WEAPON11_CLIP 0
set WEAPON11_RELOAD 0
set WEAPON11_FIREDELAY 11
set WEAPON11_TOTALTIME 15
set WEAPON11_HOLDDELAY 0
set WEAPON11_FLAGS 256
set WEAPON11_SHOOTS 0
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_INITIALSOUND SWORDSWEEP
set WEAPON11_FIRESOUND DEMON_THROWFIRE
set WEAPON11_SOUND2TIME 0
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

ife CURWEAP 11
	{
	set WEAPON_TYPE 8
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUNMAG -1
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_VOLUME 20
	soundonce TORCHFIRE
	
	ife KICKBACKPIC 7
		shoot 6875
	
	ife KICKBACKPIC 9
		{
		    flash
			shoot BRUISERFIREBALL
			eshoot BRUISERFIREBALL
			geta[RETURN].ang TEMP
			sub TEMP 26
			seta[RETURN].ang TEMP
			eshoot BRUISERFIREBALL
			geta[RETURN].ang TEMP
			add TEMP 26
			seta[RETURN].ang TEMP
			eshoot BRUISERFIREBALL
			geta[RETURN].ang TEMP
			sub TEMP 64
			seta[RETURN].ang TEMP
			eshoot BRUISERFIREBALL
			geta[RETURN].ang TEMP
			add TEMP 64
			seta[RETURN].ang TEMP
		}
	}

	ifg MSHIELDUP 0
	 ifg MERLIJNSHIELD 0 
	  set HANDS_DRAW 1
	  else
	  set HANDS_DRAW 2
	
ifg player_in_vehicle 0 set MSHIELDUP 0	  
ifg onladder 0 set MSHIELDUP 0
else ife GUN_HANDS 1 { ife MSHIELDUP 1 sound RIOTSHIELD_UP ifl MSHIELDUP 10 add MSHIELDUP 1 }
else ife GUN_HANDS 2 { ife MSHIELDUP 9 sound RIOTSHIELD_UP ifg MSHIELDUP 0 sub MSHIELDUP 1  }
	
	
}
ends

defstate PS_HIGHWIRE
{
setp[].knuckle_incs 0
ifaction ZERO action RSTAND
ife FIRE_SUIT 1 ifaction RSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction RSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction RSTAND action SS_STAND
ife on_tripwire 1 action RSTAND
ifl SLIDE_KICK 27 action RDUCKING

ifaction RSTAND set MOVESOUND 0

qputs 3 First-aid Kit

qputs 6 Protective footwear
qputs 75 Protective footwear on

qputs 90 Vodka!
qputs 12 Used Vodka!!

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision goggles
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Night vision goggles
	qputs 106 Night vision on
	qputs 107 Night vision off
	}

qputs 89 Oxygen Tank

qputs 47 Support Radio
qputs 48 Support Radio
qputs 49 Support Radio not found yet!
qputs 51 Support Radio!
qputs 91 Support Radio!

qputs 88 Jetpack
qputs 50 Jetpack not found yet!
qputs 52 Jetpack on
qputs 53 Jetpack off

qputs 102 We're gonna fry your ass, Highwire!

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 70 else
set PMAX_STAMINA 100


ifp pboosted
	{
	ifrnd 16 addphealth 3
	getp[].steroids_amount TEMP ife TEMP 398 soundonce DRINKSOME
	}


smaxammo 3 300
smaxammo 4 20
smaxammo 6 70
smaxammo 7 50
smaxammo 11 50

set CKNEE 5888
set CKEYCARDTILE 6141
set CKEYCARDTILE2 6140
set CKEYCARDTILE3 6139
set CTRIPBOMB 6138
set CDETON 2570
set CTIP 6134
set CHOLDING 9437
set CHOLDING_2 9437
set CHOLDING_3 12230

set C_ARM_1 16055
set C_ARM_2 12183
set C_PISTOL_1 8987
set C_PISTOL_2 8987

set CMEDIKIT 6000
set CSTEROIDS 6001
set CHOLODUKE 6003
set CJETPACK 6008

set CHEAT 6053
set CNVG 6004

state DISP_nvg

set CSCUBA 6006
set CBOOTS 6002
set C_ARMOUR 5999
set C_HEAVY_ARMOUR 5998

set CPIPEBOMB 5942

set C_HAND_1 7895
set C_HAND_2 7896


set CIICON 5894

getp[].holoduke_on TEMP8
ifn TEMP8 -1
{
		
stopsound TELEPORTER
stopsound SOMETHINGHITFORCE
soundonce R_BACKUPR

	ife TIMEZONE 1 espawn RUSSIAN else
	espawn AMCSOLDIER_ACTIVE
	getp[].posx TEMP
	getp[].posy TEMP2

	set TEMP3 TEMP
	add TEMP3 768

	randvar TEMP4 2048

	rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6

	updatesector TEMP5 TEMP6 TEMP7
	seta[RETURN].x TEMP5 
	seta[RETURN].y TEMP6
	getp[].posz TEMP
	add TEMP 5600
	seta[RETURN].z TEMP

getp[].holoduke_amount TEMP
ifl TEMP 2400 ifg TEMP 1200 setp[].holoduke_amount 1200
else ifl TEMP 1201 ifg TEMP 0 setp[].holoduke_amount 0
setp[].holoduke_on -1
}

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set WEAPON_TYPE 0
	set GUN_HANDS 1
	set GUNMAG -1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}


// PISTOL
ife SPECIALIST_EQUIPMENT[10] 2 // using the pp-2000?
{
smaxammo 1 400
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 11859
set W1_AMMO_TILE 5221
setarray AMMO_AMOUNT[1] 30

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 43
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS NINEMM_CALIBRE
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 3

set WEAPON1_FLAGS 4


	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 10
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 20
	ife KICKBACKPIC 1 
			{
			shoot 13772 
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
		ife KICKBACKPIC 2 
			{ 
			espawn 2520 
			state SPAWN_IN_PLAYER_FRONT 
			setactorvar[RETURN].TEMP KASHTAN_FIRE 
			set GUN_RECOIL 5 
			ifvarl GUNMAG 6 sound MAG_LOW
			add GUN_SPREAD 8
			}
		ife KICKBACKPIC 16 { sound KASHTAN_MAGOUT ife PISTOLMAG 0 spawn 3737 }
		
		ife KICKBACKPIC 32 
			{
			sound KASHTAN_MAGIN
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}

		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
		{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
		}

	}
}
else
ife SPECIALIST_EQUIPMENT[39] 2 // using the gold skorpion?
{
smaxammo 1 400
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 13508
set W1_AMMO_TILE 5221
setarray AMMO_AMOUNT[1] 20

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 38
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS GOLDEN_SHOT_LOW
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 3

set WEAPON1_FLAGS 4


	ife CURWEAP 1
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 10
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 16
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 20
	ife KICKBACKPIC 1 
			{
			shoot 13772 
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
		ife KICKBACKPIC 2 { ifvarl GUNMAG 6 sound MAG_LOW add GUN_SPREAD 6 set GUN_RECOIL 5 espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SKORP_FIRE }
		ife KICKBACKPIC 13 { sound KASHTAN_MAGOUT ife PISTOLMAG 0 spawn 3737 }
		
		ife KICKBACKPIC 28 
			{
			sound KASHTAN_MAGIN
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}

		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
		{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
		}

	}
}
else ife SPECIALIST_EQUIPMENT[32] 2 // Automag?
{
smaxammo 1 150
setarray WEAPON_SPECIAL[1] 0
set WEAPON1_TILE 13430
set W1_AMMO_TILE 5981
setarray AMMO_AMOUNT[1] 8

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 43
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS RMAXREVOLVERSHOT
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 5

ife CHARSELECT 0
{
set WEAPON1_FLAGS 16384
}

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 50
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 4
	set GUN_MAX_SPREAD 64
	set GUN_HANDS 1
	set GUN_SIZE 0
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 8
	ife KICKBACKPIC 2 
			{
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AUTOMAG_FIRE
			shoot 13772 
			getp[].horiz TEMP add TEMP 7 setp[].horiz TEMP
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
		ife KICKBACKPIC 3 { add GUN_SPREAD 20 getp[].horiz TEMP sub TEMP 7 setp[].horiz TEMP }	
		ife KICKBACKPIC 20 { sound AUTOMAG_RELOAD ife PISTOLMAG 0 spawn 7103 }
		
		ife KICKBACKPIC 42 
			{
			ife PISTOLMAG 0 sound AUTOMAG_SLIDE
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}

		ifl PISTOLMAG 1
		 ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
	}
}
else // Tokarov?
{
smaxammo 1 200
set WEAPON1_TILE 5990
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5981
setarray AMMO_AMOUNT[1] 16

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 43
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS ZRIFLESHOT
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 5

ife CHARSELECT 0
{
ifand HIGHWIRE_UPGRADE 4 set WEAPON1_FLAGS 0 else
set WEAPON1_FLAGS 16384
}


	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 16
	set GUN_AMMO_TYPES 0
	ifand HIGHWIRE_UPGRADE 8 set GUN_ACCURACY 4
	else
	set GUN_ACCURACY 4
	set GUN_MAX_SPREAD 32
	set GUN_HANDS 1
	set GUN_SIZE 0
	set GUNMAG PISTOLMAG
	ifand HIGHWIRE_UPGRADE 2 set MAXPISTOLMAG 20 else set MAXPISTOLMAG 8
	ife KICKBACKPIC 2 
			{
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 594
			shoot 13772 
			getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
		ife KICKBACKPIC 3 { add GUN_SPREAD 5 getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }	
		ife KICKBACKPIC 16 { sound TMAGOUT ife PISTOLMAG 0 { ifand HIGHWIRE_UPGRADE 2 spawn 3737 else spawn 7103 } }
		
		ife KICKBACKPIC 35
			{
			sound TMAGIN
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}

		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[13] 2 // Using the Saiga-12?
{
smaxammo 2 50
set WEAPON2_TILE 12095
set W2_AMMO_TILE 5982
setarray AMMO_AMOUNT[2] 10

set WEAPON2_CLIP 0
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 4
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 17408
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 0
set WEAPON2_RELOADSOUND1 0
set WEAPON2_RELOADSOUND2 0

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
		set GUNMAG SHOTGUNBOXMAG 
		set MAX_SHOTGUNBOXMAG 8
		setarray WEAPON_SPECIAL[2] 4
		set GUN_VOLUME 70
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 16
		set GUN_MAX_SPREAD 32
		set GUN_SIZE 2
		set GUN_HANDS 2
		
		
	ifand BITS_PRESS 4
		  ifg SHOTGUNBOXMAG 0 
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			setp[].ammo_amount 2 1
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}

	

		ife KICKBACKPIC 2 // IF THE SHOTGUN ANIMATION IS ON IT'S 2nd FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SAIGA12_FIRE
		sub SHOTGUNBOXMAG 1
		ife NEED_TO_FIRE 1 set NEED_TO_FIRE 0 else
			{
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			}
		
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -32
		state gun_pushback
		
		set gunsmoke_angle 64 state spawn_gunsmoke 
		}
		ife KICKBACKPIC 3 add GUN_SPREAD 12
		
	ifand AMMO_TYPES[CURWEAP] 1 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	ifand AMMO_TYPES[CURWEAP] 4 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	
	ife KICKBACKPIC 52 sound VAL_SLIDE


		ife KICKBACKPIC 3  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		shoot 3761
		}

	  ifl SHOTGUNBOXMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
	   ifn CUR_AMMO 0
		   {
		   set WEAPON2_RELOAD 61
		   setp[].reloading 1
		   setp[].kickback_pic 6
		   }
		}

	ife KICKBACKPIC 15 sound SAIGA12_MOUT
	ife KICKBACKPIC 16 ife SHOTGUNBOXMAG 0 spawn 3756
	ife KICKBACKPIC 37 
		{ 
		sound SAIGA12_MIN
			set TEMP5 SHOTGUNBOXMAG
			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 TEMP5

				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 TEMP4 sub TEMP4 TEMP6 setp[].ammo_amount 2 TEMP4
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
		}	
		
	}

}
else
ife SPECIALIST_EQUIPMENT[65] 2 // Using the Golden Triple threat?
{
smaxammo 2 60
set WEAPON2_TILE 19774
set W2_AMMO_TILE 5982
setarray AMMO_AMOUNT[2] 6
setarray WEAPON_SPECIAL[2] 4

set WEAPON2_CLIP 0
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 7
set WEAPON2_RELOAD 30
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 17408
set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 0
set WEAPON2_RELOADSOUND1 0
set WEAPON2_RELOADSOUND2 0

	ife CURWEAP 2
	{
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 0
	

	set WEAPON_TYPE 3
	set WEAPON2_FIRESOUND 4
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP OVERUNDER_FIRE }
	
		set GUNMAG SHOTGUNBOXMAG 
		set MAX_SHOTGUNBOXMAG 3
		set GUN_VOLUME 60
		
	ifand BITS_PRESS 4
		  ifg SHOTGUNBOXMAG 0 
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}

	
	ife KICKBACKPIC 3
	{
	add GUN_SPREAD 32
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	}
		
		ife KICKBACKPIC 2 
			{
			sub SHOTGUNBOXMAG 1
			set NEEDS_PUMP 1
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			}

		ife KICKBACKPIC 3 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -64
		state gun_pushback
		
		set gunsmoke_angle 64 state spawn_gunsmoke 
		set gunsmoke_angle 48 state spawn_gunsmoke 
		
		}

		ife KICKBACKPIC 5  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 20
			{
			set TEMP5 SHOTGUNBOXMAG
			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 TEMP5
				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 TEMP4 sub TEMP4 TEMP6 setp[].ammo_amount 2 TEMP4
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
			}

	  ifl SHOTGUNBOXMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
	   ifn CUR_AMMO 0
		   {
		   setp[].reloading 1
		   setp[].kickback_pic 6
		   }
		}
		
		
		ife KICKBACKPIC 8 soundonce OVERUNDER_LOAD

		ife KICKBACKPIC 12
		 ife NEEDS_PUMP 1
		{
			ife SHOTGUNBOXMAG 0 { setprojectile[3761].pal 40 eshoot 3761 setprojectile[3761].pal 0 }
			setprojectile[3761].pal 40 eshoot 3761 setprojectile[3761].pal 0
		geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
		set NEEDS_PUMP 0
		}
		
		
	}

}
else // Using the Remington 870?
{
smaxammo 2 70
set WEAPON2_TILE 5991
set W2_AMMO_TILE 5982
setarray AMMO_AMOUNT[2] 10

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 30
set WEAPON2_FIREDELAY 2
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 12
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 
set WEAPON2_TOTALTIME 26

ife CURWEAP 2
{
set GUN_VOLUME 60
set GUN_AMMO_TYPES 5
set GUN_ACCURACY 12
set GUN_MAX_SPREAD 64
set GUN_SIZE 2
set GUN_HANDS 2
	set GUNMAG SHOTGUNMAG
	
	
	ifand AMMO_TYPES[CURWEAP] 1
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 9361
	set WEAPON2_FIRESOUND EXPL_SHELL_FIRE
	ife KICKBACKPIC 0
		{
		ife explosive_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
	}
	else
	ifand AMMO_TYPES[CURWEAP] 4  
	{
	set WEAPON_TYPE 9
	ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
	set WEAPON2_SHOOTS 6826
	set WEAPON2_FIRESOUND FLECH_SHELL_FIRE
	ife KICKBACKPIC 0
		{
		ife flechete_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
	}
	else
	ifand AMMO_TYPES[CURWEAP] 64  
	{
	set WEAPON_TYPE 0
	set WEAPON2_SHOOTS RMAXREVOLVERSHOT
	set WEAPON2_FIRESOUND MAGNUM_SHOTGUN
	ife KICKBACKPIC 0
		{
		ife magnum_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 64 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
	}
	else
	ifand AMMO_TYPES[CURWEAP] 1024  
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 22536
	set WEAPON2_FIRESOUND DRAGONS_BR_FIRE
	ife KICKBACKPIC 0
		{
		ife dragon_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1024 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
	}
	else
	{
	set WEAPON_TYPE 2
	set WEAPON2_SHOOTS 2613
	set WEAPON2_FIRESOUND 578
	}
	
	ife KICKBACKPIC 3 add GUN_SPREAD 32
	
	setarray WEAPON_SPECIAL[2] 0
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		  ifg SHOTGUNMAG 0 
		   ife player[].ammo_amount 2 0
			{ 
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			setp[].kickback_pic 1
			set TEMP9 1
			}
	}
	
	ife KICKBACKPIC 5
	ife TEMP9 1
		{
		getp[].ammo_amount 2 TEMP2 
		sub TEMP2 1
		setp[].ammo_amount 2 TEMP2 
		set TEMP9 0
		}
		
	ifand HIGHWIRE_UPGRADE 32
		{
		ife NEEDS_PUMP 1 set MAX_SHOTGUNMAG 7 else set MAX_SHOTGUNMAG 8
		}
	else
		{
		ife NEEDS_PUMP 1 set MAX_SHOTGUNMAG 5 else set MAX_SHOTGUNMAG 6
		}
		
	clamp SHOTGUNMAG 0 MAX_SHOTGUNMAG
		
	ife SHOTGUNMAG 0 ife KICKBACKPIC 0 set NEEDS_PUMP 1
	ife player[].reloading 1
		{
		ife KICKBACKPIC 22 
			{ 
			getp[].sound_pitch TEMP2
			ife BELT_LOADOUT[3] 5 setp[].sound_pitch 512
			sound R870INSERT 
			ife BELT_LOADOUT[3] 5 setp[].sound_pitch TEMP2
			add SHOTGUNMAG 1 
			ifand AMMO_TYPES[CURWEAP] 1 { set LAST_SHELL_FIRED 1 sub explosive_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 4 { set LAST_SHELL_FIRED 4 sub flechete_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 64 { set LAST_SHELL_FIRED 64 sub magnum_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 1024 { set LAST_SHELL_FIRED 1024 sub dragon_shells 1 }
			else
				{
				set LAST_SHELL_FIRED 0
				getp[].ammo_amount 2 TEMP3
				sub TEMP3 1 
				setp[].ammo_amount 2 TEMP3
				}
			}
		}
	else ife player[].reloading 0
		{
		ife KICKBACKPIC 9 sound R870PUMP
		ife KICKBACKPIC 0 ifg SHOTGUNMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 6 
		}
		
		ife KICKBACKPIC 2 
			{ 
			sub SHOTGUNMAG 1 
					ife AMMO_TYPES[CURWEAP] 0
					{
					getp[].ammo_amount 2 TEMP3
					add TEMP3 1 
					setp[].ammo_amount 2 TEMP3
					}
			}
		ife KICKBACKPIC 4 { set gunsmoke_angle 96 state spawn_gunsmoke }
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
		ife KICKBACKPIC 24 
		 ife player[].reloading 0 
			{
			ife NEEDS_PUMP 1 set NEEDS_PUMP 0
			else // If it didn't need pumping, eject a shell
			state SHOTGUN_SHELL
			}
		
	}
		

}

// MACHINEGUN

ife SPECIALIST_EQUIPMENT[7] 2 // M16A2+M203?
{
	set WEAPON3_TILE 11871
	setarray WEAPON_SPECIAL[3] 2
	set W3_AMMO_TILE 10474
	setarray AMMO_AMOUNT[3] 30

	set WEAPON3_FIREDELAY 2
	set WEAPON3_TOTALTIME 3
	set WEAPON3_HOLDDELAY 1
	set WEAPON3_FIRESOUND 4
	set WEAPON3_FLAGS 4
	set WEAPON3_SPAWN 0
	set WEAPON3_SHOOTS ZRIFLESHOTU
	set WEAPON3_INITIALSOUND 4
	set WEAPON3_SHOTSPERBURST 1
	set WEAPON3_CLIP 0
	set WEAPON3_RELOADSOUND1 4
	set WEAPON3_RELOADSOUND2 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	set GUN_VOLUME 14
	
	ifand GUNFIREMODE 32768 // If GL is selected
	set GUN_AMMO_TYPES 2048 // set ammo types to m203 compatible
	else
	set GUN_AMMO_TYPES 32 // set firing menu to switching to gl
	
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 2
	set GUN_HANDS 2
	
	state check_cased_grenades_avail

		clamp MGUNMAG 0 MAXMGUNMAG
		set GUNMAG MGUNMAG
		
			ife KICKBACKPIC 2 
				{ 
				espawn 2520 
				state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP M16_FIRE
				sub MGUNMAG 1 
				set GUN_RECOIL 10 
				add GUN_SPREAD 8 
				set gunsmoke_angle 64 
				state spawn_gunsmoke 
				}
			

			set MAXMGUNMAG 30
			ife KICKBACKPIC 12 { sound M16OUT ife MGUNMAG 0 spawn 3756 }
			ife KICKBACKPIC 33 
			{
			sound M16IN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
			
			ife KICKBACKPIC 15 state JMOVESOUND2
						
		ife KICKBACKPIC 46 state JMOVESOUND2
		ife KICKBACKPIC 52 soundonce BOLT_CATCH
			
		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
					ife GL_COUNTDOWN 34 soundonce GL_OPEN
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}
					
				
		

	  ifl MGUNMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON3_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
		

		
	}
}
else
ife SPECIALIST_EQUIPMENT[14] 2 // AS VAL?
{
set WEAPON3_TILE 11037
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 5983
setarray AMMO_AMOUNT[3] 30

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_FIRESOUND 4
set WEAPON3_FLAGS 4
set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 2
	set GUN_AMMO_TYPES 0
	
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_MAX_SPREAD 24
	set GUNMAG MGUNMAG
	set MAXMGUNMAG 30
		ife KICKBACKPIC 1 { sub MGUNMAG 1 
		set gunsmoke_angle 32 state spawn_gunsmoke }
		ife KICKBACKPIC 2 add GUN_SPREAD 4
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AS_VAL_FIRE }
		
		ife KICKBACKPIC 10 { sound VAL_MAG_OUT ife MGUNMAG 0 spawn 3756 }
		
		ife KICKBACKPIC 24
			{
			sound VAL_MAG_IN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		
		set GUN_ACCURACY 4
		
		
		
		ife KICKBACKPIC 40 sound JMOVE8
		
		ife KICKBACKPIC 50 sound VAL_SLIDE
		
		ife KICKBACKPIC 56 sound JMOVE8


  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
		set WEAPON3_RELOAD 58
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
	
	}
}
else // standard AKM?
{
ifand HIGHWIRE_UPGRADE 1 set WEAPON3_TILE 6018 else
set WEAPON3_TILE 5992
setarray WEAPON_SPECIAL[3] 8
set W3_AMMO_TILE 5983
setarray AMMO_AMOUNT[3] 30

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 4
set WEAPON3_HOLDDELAY 2
set WEAPON3_FIRESOUND 4
set WEAPON3_FLAGS 4
set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS MSCORP_SHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 15
	set GUN_HANDS 2
	
	ifand GUNFIREMODE 16384 set GUN_ACCURACY 4 else set GUN_ACCURACY 8
	ifand HIGHWIRE_UPGRADE 16 set GUN_MAX_SPREAD 32 else
	set GUN_MAX_SPREAD 76
	set GUNMAG MGUNMAG
	set GUN_SIZE 2
	
		ifand GUNFIREMODE 32768 // If GL is selected
		set GUN_AMMO_TYPES 4096 // set ammo types to gp25/30 compatible
		else
		set GUN_AMMO_TYPES 64
		
	
	// ifand HIGHWIRE_UPGRADE 1 set MAXMGUNMAG 75 else set MAXMGUNMAG 30
		ife KICKBACKPIC 1 sub MGUNMAG 1
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 597 }
		ife KICKBACKPIC 2 { set GUN_RECOIL 8
		ifand GUNFIREMODE 16384 set gunsmoke_angle 0 else set gunsmoke_angle 32 state spawn_gunsmoke }
		ife KICKBACKPIC 3 add GUN_SPREAD 8
		
		state check_caseless_grenades_avail
		
		ife KICKBACKPIC 10 
			{ 
			ifand HIGHWIRE_UPGRADE 1 { sound DRUM_OUT ife MGUNMAG 0 spawn 7111 }
			else { sound AK47_RELOAD ife MGUNMAG 0 spawn 3756 }
			}

		ife KICKBACKPIC 26
			{
			ifl MGUNMAG 1 { ifand HIGHWIRE_UPGRADE 1 set MAXMGUNMAG 75 else set MAXMGUNMAG 30 }
			else { ifand HIGHWIRE_UPGRADE 1 set MAXMGUNMAG 76 else set MAXMGUNMAG 31 }
			}
			
		ife KICKBACKPIC 30 
			{ 
			ifand HIGHWIRE_UPGRADE 1 sound DRUM_IN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		
		ifand GUNFIREMODE 16384 
			{
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
			}
			
		ife KICKBACKPIC 40 sound AUG_MOVEMENT
		
		ife KICKBACKPIC 48 sound AK47_SLIDE
		ife GL_COUNTDOWN 16 soundonce GL_RELOAD
		
		ife KICKBACKPIC 55 sound AUG_MOVEMENT
		
		ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
		

  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
		set WEAPON3_RELOAD 58
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
			ifg GL_COUNTDOWN 23
			{
			sub WEAPSWAYX 5
			sub WEAPSWAYY 5
			}
	
	}
}

// RPG
set WEAPON4_TILE 5993
set W4_AMMO_TILE 5984
setarray AMMO_AMOUNT[4] 2

set WEAPON4_FIRESOUND 600
set WEAPON4_SHOOTS RPG7_ROCKET
set WEAPON4_RELOAD 0
set WEAPON4_FIREDELAY 2
set WEAPON4_TOTALTIME 35
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0
	
	ife CURWEAP 4
	{
	set WEAPON_TYPE 4
	set GUN_VOLUME 80
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUNMAG -1
	ife KICKBACKPIC 2
		{
		set gunsmoke_angle 96 state spawn_gunsmoke  
		}
		
	ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP
	set gunsmoke_angle 64 state spawn_gunsmoke }
	ife KICKBACKPIC 4 { set gun_pushback_power -96 state gun_pushback }
    ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
	ife KICKBACKPIC 3 { set gun_pushback_power -128 state gun_pushback }
	
	ife KICKBACKPIC 21 sound RPG7_LOAD
	}

// PIPEBOMB
set WEAPON5_TILE 5986
set W5_AMMO_TILE 5985
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 18
set WEAPON5_TOTALTIME 29
set WEAPON5_HOLDDELAY 22
set PIPEBOMB_CONTROL 2

	ife CURWEAP 5 
		{
		set WEAPON_TYPE 6
		set GUN_SIZE 0
		set GUN_HANDS 2
		set GUN_VOLUME 0
		set GUN_AMMO_TYPES 0
		set GUN_ACCURACY 32
		set GUN_MAX_SPREAD 0
		set GUNMAG -1
		
		ife KICKBACKPIC 0
		 ifand BITS_PRESS 64
		  ifg CUR_AMMO 0
		 {
		  setp[].kickback_pic 22
		  sub CUR_AMMO 1
		  setp[].ammo_amount 5 CUR_AMMO
		  spawn 6078
		  sound H_GREN_BOUNCE
		 }
		
		}

ife SHOOTGRENADE THISACTOR 
	{ 
	set TEMP2 bomb_throw_power
	divvar TEMP2 42
	shoot H_GRENADE 
	ifg bomb_throw_power 96 soundonce R_EXERT 
	set SHOOTGRENADE -1 
	}

// SHRINKER
set WEAPON6_TILE 5994
set W6_AMMO_TILE 5987
setarray WEAPON_SPECIAL[6] 512
setarray AMMO_AMOUNT[6] 10
setplayer[THISACTOR].gotweapon 11 0

set WEAPON6_CLIP 0
set WEAPON6_FIREDELAY 2
set WEAPON6_SHOOTS RIFLESHOT
set WEAPON6_HOLDDELAY 0
set WEAPON6_TOTALTIME 5
set WEAPON6_FIRESOUND 4
set WEAPON6_INITIALSOUND 0
set WEAPON6_SHOTSPERBURST 0
set WEAPON6_FLAGS 16388
set WEAPON6_SPAWNTIME -1
set WEAPON6_SPAWN 0
set WEAPON6_SOUND2TIME -1
set WEAPON6_SOUND2SOUND 4
set WEAPON6_RELOADSOUND1 4
set WEAPON6_RELOADSOUND2 4

	ife CURWEAP 6
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 60
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	
	set GUNMAG RIFLEMAG
		ife KICKBACKPIC 2 sub RIFLEMAG 1
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 559 }
		ife KICKBACKPIC 3 { add GUN_SPREAD 16 getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 4 
			{ getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP set gunsmoke_angle 16 state spawn_gunsmoke }
		ife KICKBACKPIC 13 { soundonce ASMAGOUT ife RIFLEMAG 0 spawn 3756 }
		
		ife KICKBACKPIC 26  
			{
			ifl CUR_AMMO 10 set RIFLEMAG CUR_AMMO else set RIFLEMAG 10
			}		
		ifg SCOPE 0
			{
			ife RIFLEMAG 0 set SCOPE 0
			set GUN_ACCURACY 2
			state TURNOFF_NVG
			
			}
			else
			set GUN_ACCURACY 16
			set GUN_MAX_SPREAD 32

		ifg KICKBACKPIC 5
			{
			set SCOPE 0
			}
			
		ife KICKBACKPIC 50 sound AK47_SLIDE
			

  ifl RIFLEMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
		set WEAPON6_RELOAD 61
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
	}
	
// DEVISTATOR
set WEAPON7_TILE 5995
set W7_AMMO_TILE 5989
setarray AMMO_AMOUNT[7] 6

set WEAPON7_FIREDELAY 2
set WEAPON7_TOTALTIME 16
set WEAPON7_RELOAD 54
set WEAPON7_INITIALSOUND 0
set WEAPON7_SHOOTS 5968
set WEAPON7_FIRESOUND RGL_FIRE
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_FLAGS 0

	ife CURWEAP 7
	{
	set WEAPON_TYPE 4
	set GUN_VOLUME 60
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	setarray WEAPON_SPECIAL[7] 0
	set GUNMAG ROCKETMAG
	ife KICKBACKPIC 2 sub ROCKETMAG 1
	ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP
	set gunsmoke_angle 64 state spawn_gunsmoke }
	ife KICKBACKPIC 4 { set gun_pushback_power -96 state gun_pushback }
    ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	ife KICKBACKPIC 6 soundonce ROTATEBARREL
	
	getp[].reloading TEMP
	ife TEMP 1
		{
		ife KICKBACKPIC 23 soundonce J_GL_OPEN
		ife KICKBACKPIC 40 { sound RGL_PUTIN add ROCKETMAG 1 }
		ife KICKBACKPIC 50 soundonce J_GL_CLOSE
		}
	
	}
	
// TRIPBOMB
set WEAPON8_TILE 27

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328
setarray AMMO_AMOUNT[8] 1

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_VOLUME 0
	set GUN_HANDS 2
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	}

// FREEZER
ife SPECIALIST_EQUIPMENT[35] 2 // PKM?
{
smaxammo 9 300
set WEAPON9_TILE 13456
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 13457
setarray AMMO_AMOUNT[9] 40

set WEAPON9_FIREDELAY 2
// set WEAPON9_RELOAD 78
set WEAPON9_TOTALTIME 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_SHOOTS MSCORP_SHOT
set WEAPON9_FIRESOUND 4
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 25
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 3
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 64
	set GUNMAG MACHINE_MAG
	set MAX_MACHINE_MAG 100
	
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP PKM_FIRE }
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 7 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { getp[].horiz TEMP sub TEMP 7 setp[].horiz TEMP }
		ifg KICKBACKPIC 0 ifl KICKBACKPIC 5 { set gun_pushback_power -1 state gun_pushback }
		
	ife KICKBACKPIC 3 { add GUN_SPREAD 16 set gunsmoke_angle 64 state spawn_gunsmoke }
		
	ife KICKBACKPIC 14 sound PKM_COVER_U
	ife KICKBACKPIC 26 sound PKM_BOX_OUT
	ife KICKBACKPIC 40 sound PKM_BOX_IN
	ife KICKBACKPIC 48 sound PKM_CHAIN
	ife KICKBACKPIC 75 sound PKM_COVER_D
	ife KICKBACKPIC 87 sound PKM_SLIDE
	
	ife KICKBACKPIC 52 
		{
		ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG
		}
	
	
	  ifl MACHINE_MAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON9_RELOAD 98
			setp[].reloading 1
			setp[].kickback_pic 5
			}
		}
	
	}
}
else
ife SPECIALIST_EQUIPMENT[11] 2 // RPKM?
{
smaxammo 9 400
set WEAPON9_TILE 11880
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 5983
setarray AMMO_AMOUNT[9] 50

set WEAPON9_FIREDELAY 2

set WEAPON9_TOTALTIME 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_SHOOTS MSCORP_SHOT
set WEAPON9_FIRESOUND 4
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 20
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 1
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUNMAG MACHINE_MAG
	set MAX_MACHINE_MAG 40
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP RPK_FIRE }
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 7 setp[].horiz TEMP }
	ife KICKBACKPIC 3 { add GUN_SPREAD 8 getp[].horiz TEMP sub TEMP 7 setp[].horiz TEMP }
	ifg KICKBACKPIC 0 ifl KICKBACKPIC 5 { set gun_pushback_power -1 state gun_pushback }
	ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke }
	ife KICKBACKPIC 18 soundonce AK47_RELOAD
	ife KICKBACKPIC 30 ife MACHINE_MAG 0 spawn 3756
	ife KICKBACKPIC 57 sound AK104_BOLT
	ife KICKBACKPIC 35 
		{
		ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG
		}
	  ifl MACHINE_MAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON9_RELOAD 69
			setp[].reloading 1
			setp[].kickback_pic 5
			}
		}
	}
}
else // RPK?
{
smaxammo 9 400
set WEAPON9_TILE 5996
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 5980
setarray AMMO_AMOUNT[9] 50

set WEAPON9_FIREDELAY 2
set WEAPON9_TOTALTIME 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_SHOOTS MSCORP_SHOT
set WEAPON9_FIRESOUND 4
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 20
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 2
	set GUNMAG MACHINE_MAG
	set MAX_MACHINE_MAG 75
	ifand GUNFIREMODE 512 // Tripod active?
		{
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 16
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { add GUN_SPREAD 4 getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
		}
	else
		{
		set GUN_ACCURACY 24
		set GUN_MAX_SPREAD 48
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { add GUN_SPREAD 8 getp[].horiz TEMP sub TEMP 6 setp[].horiz TEMP }
		ifg KICKBACKPIC 0 ifl KICKBACKPIC 5 { set gun_pushback_power -6 state gun_pushback }
		}
		
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP RPK_FIRE }
		
	ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke }
	ife KICKBACKPIC 13 soundonce RPK_DRUM_OUT
	ife KICKBACKPIC 30 ife MACHINE_MAG 0 spawn 7111

	ife KICKBACKPIC 52 
	{
	soundonce RPK_DRUM_IN
	ifl CUR_AMMO MAX_MACHINE_MAG set MACHINE_MAG CUR_AMMO else set MACHINE_MAG MAX_MACHINE_MAG
	}
	
		ife KICKBACKPIC 60 sound AUG_MOVEMENT
		
		ife KICKBACKPIC 73 sound AK47_SLIDE
		ife GL_COUNTDOWN 83 sound AUG_MOVEMENT
	
	ifand GUNFIREMODE 512
		{
		ifand BITS_PRESS 64
		ifcount 16
			{
			setp[].weapon_pos 10
			xorvar GUNFIREMODE 512
			soundonce PUT_ON_EQUIP
			resetcount
			}
		}
		else
		ifp pstanding
		{
		state checkwall
			ife WALL_CLOSE 1
				set player_bipod 0
		}
		
	
	  ifl MACHINE_MAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			set WEAPON9_RELOAD 85
			setp[].reloading 1
			setp[].kickback_pic 5
			}
		}
	
	}
}

// Expander
set W11_AMMO_TILE 5988
setarray AMMO_AMOUNT[11] 5

set WEAPON11_CLIP 0
set WEAPON11_FIREDELAY 2
set WEAPON11_SHOOTS ANBSHOT
set WEAPON11_HOLDDELAY 0
set WEAPON11_RELOAD 45
set WEAPON11_TOTALTIME 5
set WEAPON11_FIRESOUND NB_GUNFIRE
set WEAPON11_INITIALSOUND 0
set WEAPON11_SHOTSPERBURST 0
set WEAPON11_FLAGS 16388
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SOUND2TIME -1
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

ife CURWEAP 11
	{
	set WEAPON_TYPE 8
	set GUN_VOLUME 10
	set GUN_HANDS 2
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 0
	set GUNMAG ANBMAG
		ife KICKBACKPIC 2 sub ANBMAG 1
		ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP 
		set gunsmoke_angle 16 state spawn_gunsmoke }
		ife KICKBACKPIC 13 { soundonce ASMAGOUT ife ANBMAG 0 shoot 5963 }
		ife KICKBACKPIC 26  
			{
			ifl CUR_AMMO 5 set ANBMAG CUR_AMMO else set ANBMAG 5
			}
		ifg SCOPE 0
			{
			ife ANBMAG 0 set SCOPE 0
			state TURNOFF_NVG
			
			}
		ifg KICKBACKPIC 5 set SCOPE 0
		  ifl ANBMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
	}

}
ends

defstate PS_SANGLUSS
{
state CHAR_APP_STUFF
ifand CHAR_APP 2 
	{
	ifaction ZERO action S2STAND
	ifaction SSTAND action S2STAND
	ife on_tripwire 1 action S2STAND
	ife FIRE_SUIT 1 ifaction S2STAND action ES_STAND
	ife JUGGERN_SUIT 1 ifaction S2STAND action JG_STAND
	ife SPACE_SUIT 1 ifaction S2STAND action SS_STAND

	ifaction S2STAND set MOVESOUND 0
	}
 else
	{
	ifaction ZERO action SSTAND
	ife on_tripwire 1 action SSTAND
	ife FIRE_SUIT 1 ifaction SSTAND action ES_STAND
	ife JUGGERN_SUIT 1 ifaction SSTAND action JG_STAND
	ife SPACE_SUIT 1 ifaction SSTAND action SS_STAND
	ifaction SSTAND set MOVESOUND 0
	}

qputs 3 Medical Bag

qputs 6 Boots of Safety
qputs 75 Boots of Safety on

qputs 90 Blood Potion
qputs 12 Used Blood Potion!

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
{
qputs 101 Heat seeking Eye
qputs 106 Heat vision on
qputs 107 Heat vision off
}
else
{
qputs 101 Night seeing Eye 
qputs 106 Night vision on
qputs 107 Night vision off
}

qputs 89 Egyptian Breathing Mask

qputs 47 Mirror orb on
qputs 48 Mirror orb off
qputs 49 Mirror orb not found yet
qputs 51 Mirror orb
qputs 91 Mirror orb

qputs 88 Flying Pitchfork!
qputs 50 Flying Pitchfork not found yet!
qputs 52 Flying Pitchfork activated
qputs 53 Flying Pitchfork deactivated

qputs 102 We're gonna fry your ass, Sangluss!

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 70 else
{
ife PERSONEL_RESEARCH[21] 2 // improved robes?
	{
	ifand CHAR_APP 2 set PMAX_STAMINA 140 else
	set PMAX_STAMINA 120
	}
else
	{
	ifand CHAR_APP 2 set PMAX_STAMINA 120 else
	set PMAX_STAMINA 100
	}
}

state mind_shield_state

ifp pboosted
	{
	getp[].steroids_amount TEMP ife TEMP 398 soundonce DRINKELIXER
	}
	
setp[].knuckle_incs 0

ifand CHAR_APP 2 set CKNEE 23841 else
	{
	ifg player[].boot_amount 0 set CKNEE 6365 else set CKNEE 6384
	}
	


ifand CHAR_APP 2 // Crusader Sang?
	{
	set CKEYCARDTILE 23863
	set CKEYCARDTILE2 23865
	set CKEYCARDTILE3 23866
	set CTRIPBOMB 23864
	set C_HAND_1 6363
	set C_HAND_2 6364
	set CPIPEBOMB 6256
	set CDETON 23846
	set C_ARM_1 23850
	set C_ARM_2 23849
	set CHOLDING 23867
	set CHOLDING_2 23867
	set CHOLDING_3 23854
	set CTIP 23880
	set C_PISTOL_1 8994
	set C_PISTOL_2 8994
	}
else
ife SPECIALIST_EQUIPMENT[40] 2 // Gold ring equipped?
	{	
	set CKEYCARDTILE 6398
	set CKEYCARDTILE2 6396
	set CKEYCARDTILE3 6395
	set CTRIPBOMB 6397
	set C_HAND_1 13502
	set C_HAND_2 13503
	set CPIPEBOMB 13500
	set CDETON 6250
	set C_ARM_1 16056
	set C_ARM_2 12185
	set CHOLDING 9430
	set CHOLDING_2 9441
	set CHOLDING_3 12265
	set CTIP 6393
	set C_PISTOL_1 8987
	set C_PISTOL_2 8987
	}
else // standard ring equipped?
	{
	set CKEYCARDTILE 6398
	set CKEYCARDTILE2 6396
	set CKEYCARDTILE3 6395
	set CTRIPBOMB 6397
	set C_HAND_1 7899
	set C_HAND_2 7900
	set CPIPEBOMB 6254
	set CDETON 6250
	set C_ARM_1 16056
	set C_ARM_2 12185
	set CHOLDING 9430
	set CHOLDING_2 9441
	set CHOLDING_3 12265
	set CTIP 6393
	set C_PISTOL_1 8987
	set C_PISTOL_2 8987
	}


set CMEDIKIT 6377
set CSTEROIDS 6372
set CHOLODUKE 6373
set CJETPACK 6371

set CHEAT 6374
set CNVG 6387

state DISP_nvg

set CSCUBA 6376
set CBOOTS 6375
set C_ARMOUR 6638
set C_HEAVY_ARMOUR 6275

set CIICON 6176

smaxammo 1 200
smaxammo 2 70
smaxammo 4 75
smaxammo 6 50

smaxammo 11 10

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set GUN_HANDS 1
	set GUNMAG -1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}

// PISTOL
ife SPECIALIST_EQUIPMENT[40] 2 // Gold Ring
{
ifand CHAR_APP 2
	{
	set SANG_HAND1 23865
	set SANG_HAND2 23866
	}
else
	{
	set SANG_HAND1 13498
	set SANG_HAND2 13499
	}

set WEAPON1_TILE 13497
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 19804
setarray AMMO_AMOUNT[1] 15

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 8
set WEAPON1_HOLDDELAY 0
set WEAPON1_FLAGS 4
set WEAPON1_SHOOTS GOLD_SPELL1
set WEAPON1_SPAWNTIME -1
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 481
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 399
set WEAPON1_RELOADSOUND2 400

ife CURWEAP 1
	{
	set WEAPON_TYPE 3
	set GUNMAG -1
	set GUN_HANDS 1
	set GUN_VOLUME 7
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_AMMO_TYPES 0
	
		ife KICKBACKPIC 2
		{
			eshoot GOLD_SPELL1
			geta[RETURN].ang TEMP
			sub TEMP 26
			seta[RETURN].ang TEMP
			eshoot GOLD_SPELL1
			geta[RETURN].ang TEMP
			add TEMP 26
			seta[RETURN].ang TEMP
			eshoot GOLD_SPELL1
			geta[RETURN].zvel TEMP
			add TEMP 512
			seta[RETURN].zvel TEMP
			eshoot GOLD_SPELL1
			geta[RETURN].zvel TEMP
			sub TEMP 512
			seta[RETURN].zvel TEMP
		}
	
	}
}
else // normal ring?
{
set WEAPON1_TILE 6324
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 6306
setarray AMMO_AMOUNT[1] 15

ifand CHAR_APP 2
	{
	set SANG_HAND1 23865
	set SANG_HAND2 23866
	}
else
	{
	set SANG_HAND1 6391
	set SANG_HAND2 6392
	}

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 8
set WEAPON1_HOLDDELAY 0
set WEAPON1_FLAGS 4
set WEAPON1_SHOOTS SPELL1
set WEAPON1_SPAWNTIME -1
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 481
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 399
set WEAPON1_RELOADSOUND2 400

ife CURWEAP 1
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_HANDS 1
	set GUN_VOLUME 7
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_AMMO_TYPES 0
	
		ife KICKBACKPIC 2
		{
			eshoot SPELL1
			geta[RETURN].ang TEMP
			sub TEMP 26
			seta[RETURN].ang TEMP
			eshoot SPELL1
			geta[RETURN].ang TEMP
			add TEMP 26
			seta[RETURN].ang TEMP
			eshoot SPELL1
			geta[RETURN].zvel TEMP
			add TEMP 512
			seta[RETURN].zvel TEMP
			eshoot SPELL1
			geta[RETURN].zvel TEMP
			sub TEMP 512
			seta[RETURN].zvel TEMP
		}
	
	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[17] 2 // Ice spell?
{
setarray AMMO_AMOUNT[2] 10
set WEAPON2_TILE 6383 
set W2_AMMO_TILE 6307
setarray WEAPON_SPECIAL[2] 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 4
set WEAPON2_TOTALTIME 24
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_FIRESOUND GREMGUN_ICE
set WEAPON2_SPAWN 0
set WEAPON2_SOUND2SOUND 4
set WEAPON2_SHOOTS 0
set WEAPON2_SHOTSPERBURST 1

	ife CURWEAP 2
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUN_VOLUME 35
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	
	
	ife KICKBACKPIC 4
		{
		eshoot 7159
		setthisprojectile[RETURN].extra 100
		}
	
	}
}
else
ife SPECIALIST_EQUIPMENT[31] 2 // Fire spell?
{
setarray AMMO_AMOUNT[2] 10
set WEAPON2_TILE 6386 
set W2_AMMO_TILE 13449
setarray WEAPON_SPECIAL[2] 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 4
set WEAPON2_TOTALTIME 24
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_FIRESOUND GREMGUN_FIRE
set WEAPON2_SPAWN 0
set WEAPON2_SOUND2SOUND 4
set WEAPON2_SHOOTS 0
set WEAPON2_SHOTSPERBURST 1

	ife CURWEAP 2
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUN_VOLUME 35
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	
	
	ife KICKBACKPIC 4
		{
		eshoot 7163
		setthisprojectile[RETURN].extra 50
		}
	
	}
}
else
ife SPECIALIST_EQUIPMENT[64] 2 // Gold spell?
{
setarray AMMO_AMOUNT[2] 6
set WEAPON2_TILE 19803
set W2_AMMO_TILE 19805
setarray WEAPON_SPECIAL[2] 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 4
set WEAPON2_TOTALTIME 24
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_FIRESOUND SANG_GOLDSPELL
set WEAPON2_SPAWN 0
set WEAPON2_SOUND2SOUND 4
set WEAPON2_SHOOTS GOLD_SPELL2
set WEAPON2_SHOTSPERBURST 1

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
	set GUNMAG -1
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUN_VOLUME 35
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0	
	}
	
}
else
{
setarray AMMO_AMOUNT[2] 10
set WEAPON2_TILE 6325 
set W2_AMMO_TILE 6307
setarray WEAPON_SPECIAL[2] 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 4
set WEAPON2_TOTALTIME 24
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_FIRESOUND 482
set WEAPON2_SPAWN 0
set WEAPON2_SOUND2SOUND 4
set WEAPON2_SHOOTS SPELL2
set WEAPON2_SHOTSPERBURST 1

	ife CURWEAP 2
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUN_VOLUME 35
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}
}

// MACHINEGUN
ife SPECIALIST_EQUIPMENT[74] 2 // Using the Custom AK47?
{
set WEAPON3_TILE 19901
setarray WEAPON_SPECIAL[3] 8
set W3_AMMO_TILE 5983
setarray AMMO_AMOUNT[3] 30
smaxammo 3 250

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 4
set WEAPON3_HOLDDELAY 1
set WEAPON3_FIRESOUND 4
set WEAPON3_FLAGS 4
set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS MSCORP_SHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 15
	set GUN_HANDS 2
	
	ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 1024 // disable dual mode if player had 2 uzis and switched to this
	
	
	ifand GUNFIREMODE 16384 set GUN_ACCURACY 4 else set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 48
	set GUNMAG MGUNMAG
	set GUN_SIZE 2
	
		ifand GUNFIREMODE 32768 // If GL is selected
		set GUN_AMMO_TYPES 4096 // set ammo types to gp25/30 compatible
		else
		set GUN_AMMO_TYPES 64
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AK47_FIRE }
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP 
		ifand GUNFIREMODE 16384 set gunsmoke_angle 0 else set gunsmoke_angle 32 state spawn_gunsmoke }
		ife KICKBACKPIC 3 { add GUN_SPREAD 12 getp[].horiz TEMP sub TEMP 6 setp[].horiz TEMP }
		
		state check_caseless_grenades_avail
		
		ife KICKBACKPIC 10 
			{ 
			sound AK47_RELOAD ife MGUNMAG 0 spawn 3756
			}

		ife KICKBACKPIC 26
			{
			ifl MGUNMAG 1 set MAXMGUNMAG 30
			else set MAXMGUNMAG 31
			}
			
		ife KICKBACKPIC 30 
			{ 
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		
		ifand GUNFIREMODE 16384 
			{
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
			}
			
		ife KICKBACKPIC 40 sound AUG_MOVEMENT
		
		ife KICKBACKPIC 46 sound AK47_SLIDE
		ife GL_COUNTDOWN 38 sound AUG_MOVEMENT
		ife GL_COUNTDOWN 16 soundonce GL_RELOAD
		
		ife KICKBACKPIC 54 sound AUG_MOVEMENT
		
		ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
		

  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
		set WEAPON3_RELOAD 58
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
			ifg GL_COUNTDOWN 23
			{
			sub WEAPSWAYX 5
			sub WEAPSWAYY 5
			}
	
	}
}
else 
ife SPECIALIST_EQUIPMENT[71] 2 // Using the F2000?
{
set W3_AMMO_TILE 6849
setarray WEAPON_SPECIAL[3] 2
set WEAPON3_TILE 19836
setarray AMMO_AMOUNT[3] 30
smaxammo 3 250

	set WEAPON3_HOLDDELAY 1
	set WEAPON3_FIRESOUND 4
	set WEAPON3_FLAGS 4
	set WEAPON3_SPAWN 0
	set WEAPON3_RELOAD 42
	set WEAPON3_SHOOTS ZRIFLESHOTU
	set WEAPON3_INITIALSOUND 4
	set WEAPON3_SHOTSPERBURST 1
	set WEAPON3_CLIP 0
	set WEAPON3_RELOADSOUND1 4
	set WEAPON3_RELOADSOUND2 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
		set GUN_SIZE 2
		set GUN_HANDS 2
		set WEAPON3_FIREDELAY 2
		set WEAPON3_TOTALTIME 3
		set GUN_MAX_SPREAD 48
		set GUN_VOLUME 6
		set GUNMAG MGUNMAG
		set MAXMGUNMAG 30
		
	ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 1024 // disable dual mode if player had 2 uzis and switched to this
		
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP F2000_FIRE }
		
	ifand GUNFIREMODE 32768 // If GL is selected
	set GUN_AMMO_TYPES 2048 // set ammo types to m203 compatible
	else
	set GUN_AMMO_TYPES 32 // set firing menu to switching to gl
		
		ifand GUNFIREMODE 16384 // Is the sight active?
			{
			set GUN_ACCURACY 8
			ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0  xorvar GUNFIREMODE 16384 }
			}
			else
			set GUN_ACCURACY 16
			
			ifand GUNSAKIMBO 16 xorvar GUNSAKIMBO 16
			
		
			set TEMP2 6
		
			ife KICKBACKPIC 2 
			{ add GUN_SPREAD 6 set GUN_RECOIL 6
			set gunsmoke_angle 64 state spawn_gunsmoke }
			
			ife KICKBACKPIC 11 { sound VAL_MAG_OUT ife MGUNMAG 0 spawn 6781 }
						
			ife KICKBACKPIC 30 
				{
				sound VAL_MAG_IN
				ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
				}
			
ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1

state check_cased_grenades_avail

		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
					ife GL_COUNTDOWN 34 soundonce GL_OPEN2
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT2
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE2
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}
			
	   ifl MGUNMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 7
			}
		}
		
			
	}
	
}
else 
ife SPECIALIST_EQUIPMENT[6] 2 // Using the BAR?
{
set W3_AMMO_TILE 6849
setarray WEAPON_SPECIAL[3] 0
set WEAPON3_TILE 11119
setarray AMMO_AMOUNT[3] 20
set GUN_VOLUME 6
smaxammo 3 200

	set WEAPON3_FIREDELAY 2
	set WEAPON3_TOTALTIME 6
	set WEAPON3_HOLDDELAY 1
	set WEAPON3_FIRESOUND 4
	set WEAPON3_FLAGS 8276
	set WEAPON3_SPAWN 0
	set WEAPON3_RELOAD 42
	set WEAPON3_SHOOTS RMAXREVOLVERSHOT
	set WEAPON3_INITIALSOUND 4
	set WEAPON3_SHOTSPERBURST 1
	set WEAPON3_CLIP 0
	set WEAPON3_RELOADSOUND1 4
	set WEAPON3_RELOADSOUND2 4
	
	ife CURWEAP 3
	{
	ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 1024 // disable dual mode if player had 2 uzis and switched to this
	set WEAPON_TYPE 0
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_ACCURACY 16
		set GUN_MAX_SPREAD 48
		set GUN_AMMO_TYPES 0
		set GUN_VOLUME 24
		set GUNMAG MGUNMAG
		set MAXMGUNMAG 20
		
		
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP BAR_FIRE }
		
			ife KICKBACKPIC 3 { add GUN_SPREAD 18 set GUN_RECOIL 20 set gunsmoke_angle 64 state spawn_gunsmoke }
			ife KICKBACKPIC 5 { set gunsmoke_angle 64 state spawn_gunsmoke }

			ife KICKBACKPIC 11 { sound AUTOSHOT_OPEN ife MGUNMAG 0 spawn 6781 }
						
			ife KICKBACKPIC 40 
				{
				sound AUTOSHOT_CLOSE
				ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
				}
			
			
	   ifl MGUNMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 7
			}
		}
		
			
	}
	
}
else 
ife SPECIALIST_EQUIPMENT[16] 2 // Using the PPSH?
{
smaxammo 3 400
setarray AMMO_AMOUNT[3] 71
setarray WEAPON_SPECIAL[3] 0
set WEAPON3_TILE 12061
set W3_AMMO_TILE 6312
set WEAPON3_SHOOTS CHAINGUN
set WEAPON3_HOLDDELAY 1
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 55
set WEAPON3_CLIP 0
set WEAPON3_SPAWN 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_INITIALSOUND 4

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_FLAGS 68

	ife CURWEAP 3
	{
	ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 1024 // disable dual mode if player had 2 uzis and switched to this
	set WEAPON_TYPE 0
	set GUN_VOLUME 14
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUNMAG MGUNMAG
	set MAXMGUNMAG 71
	set GUN_ACCURACY 12 
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 2
	set TEMP2 3	
	
		ife KICKBACKPIC 1 { set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP PPSH_FIRE }
		ife KICKBACKPIC 2 { add GUN_SPREAD 12 set GUN_RECOIL 5 }
		ife KICKBACKPIC 22 { sound FG42_MAGOUT ife MGUNMAG 0 spawn 7111 }
		ife KICKBACKPIC 37 
			{
			sound FG42_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		
   ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
   		setp[].reloading 1
   		setp[].kickback_pic 7
		}
	}
		
	}
}
else
ife SPECIALIST_EQUIPMENT[34] 2 // using the SR-2?
{
set WEAPON3_TILE 13444
set W3_AMMO_TILE 5221
setarray WEAPON_SPECIAL[3] 0
setarray AMMO_AMOUNT[3] 40
smaxammo 3 300

set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 5 
set WEAPON3_CLIP 0		
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_RELOAD 35

	ife CURWEAP 3
	{
	ifand GUNFIREMODE 1024 xorvar GUNFIREMODE 1024 // disable dual mode if player had 2 uzis and switched to this
	set WEAPON_TYPE 1
	set GUN_VOLUME 12
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 1
	set GUN_SIZE 1
	set GUN_MAX_SPREAD 24
		ifand GUNFIREMODE 16384 // Is the sight active?
				{
				set GUN_ACCURACY 2
				set WEAPON3_FLAGS 68
				}
			else
				{
				set GUN_ACCURACY 16
				set WEAPON3_FLAGS 68
				}
	set GUNMAG MGUNMAG
	set MAXMGUNMAG 30
		ife KICKBACKPIC 2 
			{
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SR-2_FIRE
			set GUN_RECOIL 3
			add GUN_SPREAD 8
			
			set gunsmoke_angle 72
			state spawn_gunsmoke
			
			}
					
		ife KICKBACKPIC 8 { sound SR-2_MAGOUT ife MGUNMAG 0 spawn 3737 }
		ife KICKBACKPIC 10 state JMOVESOUND2
		ife KICKBACKPIC 25 
			{
			sound SR-2_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}

  ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
   {
   	ifn CUR_AMMO 0
   		{
   		setp[].reloading 1
   		setp[].kickback_pic 6
		}
	}
	
  }
  
}
else // Using the Uzi?
{
smaxammo 3 400
setarray AMMO_AMOUNT[3] 50
ifand GUNSAKIMBO 2 setarray WEAPON_SPECIAL[3] 1 else setarray WEAPON_SPECIAL[3] 0
set WEAPON3_TILE 6326
set W3_AMMO_TILE 6312
set WEAPON3_SHOOTS ZRIFLESHOT
set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_CLIP 0
set WEAPON3_SPAWN 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_INITIALSOUND 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 1
	set GUN_MAX_SPREAD 64
	set GUNMAG MGUNMAG
	ifand GUNFIREMODE 1024 { ifand SANG_UPGRADE 2 set MAXMGUNMAG 120 else set MAXMGUNMAG 60 }
	else { ifand SANG_UPGRADE 2 set MAXMGUNMAG 60 else set MAXMGUNMAG 30 }
	
	ifand SANG_UPGRADE 1 { set GUN_ACCURACY 8 set TEMP2 3 } else { set GUN_ACCURACY 16 set TEMP2 6 }	
	
		ifand SANG_UPGRADE 4 // Suppressed?
		{
		set WEAPON3_FIRESOUND 4
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SUP_TMP }
		ifand GUNFIREMODE 1024 set GUN_VOLUME 8 else set GUN_VOLUME 4
		}
		else
		{
		set WEAPON3_FIRESOUND 4
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 495 }
		ifand GUNFIREMODE 1024 set GUN_VOLUME 16 else set GUN_VOLUME 8
		}
	
	set WEAPON3_FLAGS 68
	
ifand GUNFIREMODE 1024
	{
	mulvar GUN_ACCURACY 2
	set GUN_HANDS 2
	set WEAPON3_RELOAD 65
	set WEAPON3_SHOTSPERBURST 2
	ife KICKBACKPIC 1 { set gunsmoke_angle -96 state spawn_gunsmoke set gunsmoke_angle 96 state spawn_gunsmoke }
		ife KICKBACKPIC 2 { ifand SANG_UPGRADE 4 sound SUP_TMP else sound 495 }
		ife KICKBACKPIC 2 { set GUN_RECOIL 6 add GUN_SPREAD 12 }
	}
	else
	{
	set WEAPON3_RELOAD 35
	set GUN_HANDS 1
	set WEAPON3_SHOTSPERBURST 1
		ife KICKBACKPIC 1 { set gunsmoke_angle 0 state spawn_gunsmoke }
		ife KICKBACKPIC 2 { set GUN_RECOIL 3 add GUN_SPREAD 6 }
	}
	
		ife KICKBACKPIC 11 { sound 496 ife MGUNMAG 0 spawn 3737 }
		
		ife KICKBACKPIC 23 
			{
			sound 497
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			ifand GUNFIREMODE 1024 divvar MGUNMAG 2
			}
			
		ife KICKBACKPIC 36 { sound 496 spawn 3737 }
		ife KICKBACKPIC 48 
			{
			sound 497
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}	
		
		
   ifl MGUNMAG 1
   ife player[].weapon_pos 0
    ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 7
			}
		}
	}
}

// RPG
// Hellfire Staff
set WEAPON4_TILE 6333
set W4_AMMO_TILE 6315
setarray AMMO_AMOUNT[4] 5

set WEAPON4_FIRESOUND SPELL4FIRE
set WEAPON4_SHOOTS SPELL4
set WEAPON4_RELOAD 30
set WEAPON4_FIREDELAY 4
set WEAPON4_TOTALTIME 14
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 2

ife CURWEAP 4
	{ 
	set WEAPON_TYPE 4
	set GUN_HANDS 2
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0 
	set GUN_SIZE 2
	set GUN_VOLUME 40 
	set GUNMAG -1

	ifg KICKBACKPIC_2 0
		{
		setp[].kickback_pic 0
		add KICKBACKPIC_2 1
		ife KICKBACKPIC_2 2 sound GUARDIAN_FLAME
		ife KICKBACKPIC_2 4
			{
			sound BRUISER_FLAME
			shoot 22536 shoot 22536 shoot 22536 shoot 22536
			shoot 22536 shoot 22536 shoot 22536				
			}
		ifg KICKBACKPIC_2 14 set KICKBACKPIC_2 0
		}
	
	
	}

// PIPEBOMB
set WEAPON5_TILE 6332
set W5_AMMO_TILE 6331
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 1

ife CURWEAP 5
	{
	set WEAPON_TYPE 6
	set GUN_HANDS 2
	set GUN_SIZE 0
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// SHRINKER
set WEAPON6_TILE 6329
set W6_AMMO_TILE 6313
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 3

set WEAPON6_SHOOTS SPELL14
set WEAPON6_FIREDELAY 5
set WEAPON6_TOTALTIME 12
set WEAPON6_FIRESOUND 0
set WEAPON6_INITIALSOUND 666
set WEAPON6_SHOTSPERBURST 0
set WEAPON6_FLAGS 2
set WEAPON6_SPAWNTIME -1
set WEAPON6_SPAWN 0
set WEAPON6_SOUND2TIME -1
set WEAPON6_SOUND2SOUND 4
set WEAPON6_RELOADSOUND1 4
set WEAPON6_RELOADSOUND2 4

ife CURWEAP 6
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_SIZE 0
	set GUN_VOLUME 50
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// DEVISTATOR
ife SPECIALIST_EQUIPMENT[80] 2 // Sacred Manacle?
{
set WEAPON7_TILE 22603
set W7_AMMO_TILE 6314
setarray AMMO_AMOUNT[7] 5
setarray WEAPON_SPECIAL[7] 0
smaxammo 7 50

set WEAPON7_FIREDELAY 9
set WEAPON7_TOTALTIME 14
set WEAPON7_INITIALSOUND 0
set WEAPON7_FIRESOUND 4
set WEAPON7_FLAGS 0

	ife CURWEAP 7
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_HANDS 1
	set GUN_SIZE 1
	set GUN_VOLUME 15
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	ife KICKBACKPIC 1 sound MANACLE_CHARGE
	ife KICKBACKPIC 9 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MANACLE_FIRE }
	ife KICKBACKPIC 10 set GUN_RECOIL 20
	
	
	ifand GUNFIREMODE 16384
		{
		set WEAPON7_SHOOTS 20834
		set WEAPON7_SHOTSPERBURST 1
		}
		else
		{
		set WEAPON7_SHOOTS 22610
		set WEAPON7_SHOTSPERBURST 8
		}
	
	}
}
else // Seraph shotgun
ife SPECIALIST_EQUIPMENT[86] 2
{
set WEAPON7_TILE 23870
set W7_AMMO_TILE 22600
smaxammo 7 90
setarray AMMO_AMOUNT[7] 10
setarray WEAPON_SPECIAL[7] 0

set WEAPON7_FIREDELAY 2
set WEAPON7_TOTALTIME 8
set WEAPON7_FLAGS 0
set WEAPON7_SHOTSPERBURST 14
set WEAPON7_SHOOTS SILVERAMMOSHOT
set WEAPON7_FIRESOUND 4
set WEAPON7_INITIALSOUND 4

ife CURWEAP 7
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 70
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 1
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 96
	set GUN_AMMO_TYPES 0
	
	    ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SERAPH_SG add GUN_RECOIL 16 set gunsmoke_angle 64 add GUN_SPREAD 10 state spawn_gunsmoke shoot 3761 }
		ife KICKBACKPIC 5 sound RIOTGUN_COCK
	
	}
}
else
{
set WEAPON7_TILE 6330
set W7_AMMO_TILE 6314
setarray AMMO_AMOUNT[7] 50
setarray WEAPON_SPECIAL[7] 0
smaxammo 7 200

set WEAPON7_FIREDELAY 1
set WEAPON7_TOTALTIME 3
set WEAPON7_INITIALSOUND 0
set WEAPON7_SHOOTS SPELL7
set WEAPON7_FIRESOUND 4
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_FLAGS 14


	ife CURWEAP 7
	{
	set WEAPON_TYPE 9
	set GUNMAG -1
	set GUN_HANDS 1
	set GUN_SIZE 1
	set GUN_VOLUME 15
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 1 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 583 }
	}
}


// TRIPBOMB
set WEAPON8_TILE 6310
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS 0
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// FREEZER
ife SPECIALIST_EQUIPMENT[57] 2 // Nemesis staff
{
smaxammo 9 60
set WEAPON9_TILE 18077
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 6320
setarray AMMO_AMOUNT[9] 12

set WEAPON9_SHOOTS SPELL8
set WEAPON9_FIREDELAY 12
set WEAPON9_TOTALTIME 25
set WEAPON9_HOLDDELAY 0 
set WEAPON9_FIRESOUND 542
set WEAPON9_INITIALSOUND SPELL8CHARGE
set WEAPON9_FLAGS 2

	
	ife CURWEAP 9 
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG -1
	set GUN_VOLUME 80
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}
}
else // Oblivion staff
{
smaxammo 9 20
set WEAPON9_TILE 6334
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 6320
setarray AMMO_AMOUNT[9] 4

set WEAPON9_SHOOTS SPELL8
set WEAPON9_FIREDELAY 12
set WEAPON9_TOTALTIME 25
set WEAPON9_HOLDDELAY 0 
set WEAPON9_FIRESOUND 542
set WEAPON9_INITIALSOUND SPELL8CHARGE
set WEAPON9_FLAGS 2

	
	ife CURWEAP 9 
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG -1
	set GUN_VOLUME 80
	set GUN_ACCURACY 2 
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	
		ife KICKBACKPIC 12
			{
			eshoot SPELL8
			geta[RETURN].ang TEMP
			sub TEMP 48
			seta[RETURN].ang TEMP	
			eshoot SPELL8
			geta[RETURN].ang TEMP
			add TEMP 48
			seta[RETURN].ang TEMP	
			}
	}
}

// EXPANDER
set W11_AMMO_TILE 6313
setarray AMMO_AMOUNT[11] 2

set WEAPON11_SHOOTS 0
set WEAPON11_FIREDELAY 5
set WEAPON11_TOTALTIME 12
set WEAPON11_FIRESOUND 0
set WEAPON11_INITIALSOUND 666
set WEAPON11_SHOTSPERBURST 0
set WEAPON11_FLAGS 2
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SOUND2TIME -1
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

ife CURWEAP 11
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUN_HANDS 2
	set GUNMAG -1
	set GUN_VOLUME 50
	set GUN_MAX_SPREAD 0
	set GUN_ACCURACY 2 
	set GUN_AMMO_TYPES 0
	ife KICKBACKPIC 5 spawn 9771
	}

ife SHOOTDYNAMITE THISACTOR { shoot DYNAMITEBUNDLE set SHOOTDYNAMITE -1 }

}
ends

defstate RUSTY_REVOLVER_STUFF
	ifand GUNFIREMODE 64 // two of them?
		{
		ifand GUNFIREMODE_2 16 xorvar GUNFIREMODE_2 16
		set GUN_HANDS 2
		set GUN_VOLUME 40
		set GUN_ACCURACY 8
		set WEAPON1_SHOTSPERBURST 2
		set WEAPON1_RELOAD 48
		set GUN_MAX_SPREAD 48
		set MAXPISTOLMAG 12
		}
	else
		{
		set GUN_VOLUME 20
		set GUN_ACCURACY 4
		set WEAPON1_SHOTSPERBURST 0
		set WEAPON1_RELOAD 30
		set GUN_MAX_SPREAD 64
		set MAXPISTOLMAG 6
		
		// fan the hammer
		ifand GUNFIREMODE_2 16
			{
			set GUN_HANDS 2
			set WEAPON1_FLAGS 0
			}
		else
			{
			set GUN_HANDS 1
			set WEAPON1_FLAGS 16448
			}
		}
						
	ifg KICKBACKPIC 1
	 ifl KICKBACKPIC 9
		{
		ifand GUNFIREMODE_2 16 
			{
			ife KICKBACKPIC 8 sound R_HAMMER 
			}
		else
			{
			ifand BITS_PRESS 4 ifg PISTOLMAG 0 setplayer[].kickback_pic 1
			}
		}
ends

defstate PS_RUSTY
{
ife on_tripwire 1 action RNSTAND
ifaction ZERO action RNSTAND
ife FIRE_SUIT 1 ifaction RNSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction RNSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction RNSTAND action SS_STAND
ifl SLIDE_KICK 27 action RNDUCKING

qputs 3 Coffee Thermos

qputs 6 Heavy duty boots
qputs 75 Heavy duty boots on

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision shades
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Night vision shades
	qputs 106 Night vision shades on
	qputs 107 Night vision shades off
	}

qputs 90 Turbo Caffeine Pills
qputs 12 Used Turbo Caffeine Pills

qputs 89 Scuba Gear

qputs 47 Throwing Star Belt activated
qputs 48 
qputs 49 Throwing Star Belt not found yet!
qputs 51 Throwing Star Belt
qputs 91 Throwing Star Belt

qputs 88 Hoverwatch
qputs 50 Hoverwatch not found yet!
qputs 52 Hoverwatch on
qputs 53 Hoverwatch off

qputs 102 We're gonna fry your ass, Rusty!

state mind_shield_state

setp[].knuckle_incs 0

getp[].holoduke_on TEMP
ifn TEMP -1
{
stopsound TELEPORTER
sound THROWING_STARBELT
shoot 3790
eshoot 3790 geta[RETURN].ang TEMP add TEMP 128 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 256 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 384 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 512 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 640 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 768 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 896 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1024 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1152 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1280 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1408 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1536 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1664 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1792 seta[RETURN].ang TEMP
eshoot 3790 geta[RETURN].ang TEMP add TEMP 1920 seta[RETURN].ang TEMP
getp[].holoduke_amount TEMP
ife TEMP 2399 setp[].holoduke_amount 1600
else ife TEMP 1599 setp[].holoduke_amount 800
else ife TEMP 799 { setp[].holoduke_amount 0 setp[].inven_icon 0 }
setp[].holoduke_on -1
}

smaxammo 1 200
smaxammo 2 100
smaxammo 3 300
smaxammo 4 80
smaxammo 6 50
smaxammo 7 300
smaxammo 9 300
smaxammo 11 10

ife on_tripwire 1 set CKNEE 6821 else
ifl ROUNDHOUSE_KICK 27 set CKNEE 6755 else
ifl SPIN_KICK 20 set CKNEE 6755 else
ifl FLYING_KICK 27 set CKNEE 6755 else
ifl TWIRL_KICK 20 set CKNEE 6755 else
set CKNEE 6821


set CKEYCARDTILE 6888
set CKEYCARDTILE2 6891
set CKEYCARDTILE3 6892
set CTRIPBOMB 6890
set CDETON 2570
set CTIP 2578
set CHOLDING 9431
set CHOLDING_2 9431
set CHOLDING_3 12265

set C_ARM_1 15968
set C_ARM_2 12180

set C_PISTOL_1 8987
set C_PISTOL_2 8987

set C_HAND_1 7895
set C_HAND_2 7896

set CMEDIKIT 6869
set CSTEROIDS 6864
set CHOLODUKE 6871
set CJETPACK 6865

set CHEAT 6877
set CNVG 6870

state DISP_nvg

set CSCUBA 6872
set CBOOTS 6866
set C_ARMOUR 6868
set C_HEAVY_ARMOUR 6867

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 70
else
	{
	ife PERSONEL_RESEARCH[25] 2 set PMAX_STAMINA 130 // improved shoes?
	else set PMAX_STAMINA 100
	}

set CPIPEBOMB 6828

set CIICON 5894

ife SHOOTDYNAMITE THISACTOR { ife ARTIFACTS_LOADOUT[5] 5 shoot 3622 else shoot DYNAMITESTICK set SHOOTDYNAMITE -1 }

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set GUNMAG -1
	set GUN_HANDS 1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}


// PISTOL
ife SPECIALIST_EQUIPMENT[29] 2 // using the microuzi?
{
smaxammo 1 400
set WEAPON1_TILE 13423
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5221
setarray AMMO_AMOUNT[1] 25

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 38
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS 0
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 3

set WEAPON1_FLAGS 4


	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 10
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 25
	ife KICKBACKPIC 1 
			{
			shoot NINEMM_CALIBRE
			shoot 13772 
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
		ife KICKBACKPIC 2 
			{ 
			espawn 2520 
			state SPAWN_IN_PLAYER_FRONT 
			setactorvar[RETURN].TEMP MICRO_UZI_F 
			add GUN_SPREAD 6 
			set GUN_RECOIL 5 
			ifvarl GUNMAG 6 sound MAG_LOW
			}	
		ife KICKBACKPIC 13 { sound MICROU_MAGOUT ife PISTOLMAG 0 spawn 3737 }

		ife KICKBACKPIC 28 
			{
			sound MICROU_MAGIN
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}

		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
		{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
		}

	}
}
else
ife SPECIALIST_EQUIPMENT[24] 2 // Remington 1858 pistols?
	{
	smaxammo 1 240
	set WEAPON1_TILE 13376
	ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
	set W1_AMMO_TILE 6847
	setarray AMMO_AMOUNT[1] 12

	set WEAPON1_CLIP 0
	set WEAPON1_FIREDELAY 2
	set WEAPON1_FLAGS 16448
	set WEAPON1_TOTALTIME 9
	set WEAPON1_RELOAD 30
	set WEAPON1_HOLDDELAY 0
	set WEAPON1_SHOOTS SILVERAMMOSHOT
	set WEAPON1_SPAWNTIME 2
	set WEAPON1_SPAWN 0
	set WEAPON1_INITIALSOUND 0
	set WEAPON1_FIRESOUND 4
	set WEAPON1_SOUND2TIME 0
	set WEAPON1_SOUND2SOUND 0
	set WEAPON1_RELOADSOUND1 4
	set WEAPON1_RELOADSOUND2 4

		ife CURWEAP 1
		{
		set WEAPON_TYPE 0
			set GUN_AMMO_TYPES 0
			set GUN_SIZE 0

			state RUSTY_REVOLVER_STUFF
				
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP REVOLVER2FIRE }			
		   
			set GUNMAG PISTOLMAG
			
			ife KICKBACKPIC 2 { ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1 }
			ife KICKBACKPIC 3 { add GUN_SPREAD 24 getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP }
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP 
			set gunsmoke_angle 64 state spawn_gunsmoke ifand GUNFIREMODE 64 { set gunsmoke_angle -64 state spawn_gunsmoke  } }
			ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 12 setp[].horiz TEMP }
			
			ife KICKBACKPIC 14 
				{
				state revolver_silver_eject
				sub PISTOLMAG TEMP4
				}
			ife KICKBACKPIC 16
				{
			   ifl CUR_AMMO 6 set PISTOLMAG CUR_AMMO else set PISTOLMAG 6
				}
					
			ife KICKBACKPIC 32 state revolver_silver2_eject
			ife KICKBACKPIC 34
				{
			    ifl CUR_AMMO 12 set PISTOLMAG CUR_AMMO 
				else set PISTOLMAG 12
				}

		  ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 10
			   }
		   }

		}
	}
else ife SPECIALIST_EQUIPMENT[41] 2 // Golden revolvers?
	{
	smaxammo 1 120
	set WEAPON1_TILE 14626
	ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
	set W1_AMMO_TILE 6851
	setarray AMMO_AMOUNT[1] 6

	set WEAPON1_CLIP 0
	set WEAPON1_FIREDELAY 2
	set WEAPON1_FLAGS 16448
	set WEAPON1_TOTALTIME 9
	set WEAPON1_RELOAD 30
	set WEAPON1_HOLDDELAY 0
	set WEAPON1_SHOOTS GOLDEN_SHOT_HIGH
	set WEAPON1_SPAWNTIME 2
	set WEAPON1_SPAWN 0
	set WEAPON1_INITIALSOUND 0
	set WEAPON1_FIRESOUND 4
	set WEAPON1_SOUND2TIME 0
	set WEAPON1_SOUND2SOUND 0
	set WEAPON1_RELOADSOUND1 4
	set WEAPON1_RELOADSOUND2 4

	ife CURWEAP 1
	{
	set WEAPON_TYPE 3
		set GUN_AMMO_TYPES 0
		set GUN_SIZE 0

		state RUSTY_REVOLVER_STUFF
		
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP REVOLVERFIRE }
	   
		set GUNMAG PISTOLMAG
		ife KICKBACKPIC 2 { ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1 }
		ife KICKBACKPIC 3 { add GUN_SPREAD 24 getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP 
		set gunsmoke_angle 64 state spawn_gunsmoke ifand GUNFIREMODE 64 { set gunsmoke_angle -64 state spawn_gunsmoke  } }
		ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 12 setp[].horiz TEMP }
		
			ife KICKBACKPIC 14 
				{
				state revolver_eject
				sub PISTOLMAG TEMP4
				}
			ife KICKBACKPIC 16
				{
			   ifl CUR_AMMO 6 set PISTOLMAG CUR_AMMO else set PISTOLMAG 6
				}
					
			ife KICKBACKPIC 32 state revolver_2_eject
			ife KICKBACKPIC 34
				{
			    ifl CUR_AMMO 12 set PISTOLMAG CUR_AMMO 
				else set PISTOLMAG 12
				}


	  ifl PISTOLMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
	   ifn CUR_AMMO 0
		   {
		   setp[].reloading 1
		   setp[].kickback_pic 10
		   }
	   }

	}
}
else // default revolver?
	{
	smaxammo 1 120
	set WEAPON1_TILE 6839
	ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0
	set W1_AMMO_TILE 6847
	setarray AMMO_AMOUNT[1] 6

	set WEAPON1_CLIP 0
	set WEAPON1_FIREDELAY 2
	set WEAPON1_RELOAD 30
	set WEAPON1_HOLDDELAY 9
	set WEAPON1_SHOOTS RMAXREVOLVERSHOT
	set WEAPON1_SPAWNTIME 2
	set WEAPON1_SPAWN 0
	set WEAPON1_INITIALSOUND 0
	set WEAPON1_FIRESOUND 4
	set WEAPON1_SOUND2TIME 0
	set WEAPON1_SOUND2SOUND 0
	set WEAPON1_RELOADSOUND1 4
	set WEAPON1_RELOADSOUND2 4

	set WEAPON1_TOTALTIME 9

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
		set GUN_AMMO_TYPES 0
		set GUN_SIZE 0

		state RUSTY_REVOLVER_STUFF
					
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP REVOLVERFIRE }

		set GUNMAG PISTOLMAG
		ife KICKBACKPIC 2 { ifand GUNFIREMODE 64 sub PISTOLMAG 2 else sub PISTOLMAG 1 }
		ife KICKBACKPIC 3 { ifand RUSTY_UPGRADE 4 add GUN_SPREAD 12 else add GUN_SPREAD 24 getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP 
		set gunsmoke_angle 64 state spawn_gunsmoke ifand GUNFIREMODE 64 { set gunsmoke_angle -64 state spawn_gunsmoke  } }
		ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 12 setp[].horiz TEMP }
		
			ife KICKBACKPIC 14 
				{
				state revolver_eject
				sub PISTOLMAG TEMP4
				}
			ife KICKBACKPIC 16
				{
			   ifl CUR_AMMO 6 set PISTOLMAG CUR_AMMO else set PISTOLMAG 6
				}
					
			ife KICKBACKPIC 32 state revolver_2_eject
			ife KICKBACKPIC 34
				{
			    ifl CUR_AMMO 12 set PISTOLMAG CUR_AMMO 
				else set PISTOLMAG 12
				}

			  ifl PISTOLMAG 1
			   ife player[].weapon_pos 0
				ife KICKBACKPIC 0
			   {
			   ifn CUR_AMMO 0
				   {
				   setp[].reloading 1
				   setp[].kickback_pic 10
				   }
			   }

	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[83] 2 // player using automatic shotgun?
{
set WEAPON2_TILE 22671
set W2_AMMO_TILE 22676
setarray AMMO_AMOUNT[2] 8
setarray WEAPON_SPECIAL[2] 4

set WEAPON2_CLIP 0
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 5
set WEAPON2_RELOAD 40
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 0
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 0
set WEAPON2_RELOADSOUND1 0
set WEAPON2_RELOADSOUND2 0

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
		set GUNMAG SHOTGUNBOXMAG 
		set MAX_SHOTGUNBOXMAG 7
		set GUN_VOLUME 50
		set GUN_HANDS 2
		set GUN_ACCURACY 24
		set GUN_MAX_SPREAD 24
		set GUN_SIZE 2
		set GUN_AMMO_TYPES 0
		
		ife KICKBACKPIC 2 
			{
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			sub SHOTGUNBOXMAG 1
			}
			
	ifand BITS_PRESS 4
	 ife player[].weapon_pos 0
		  ifg SHOTGUNBOXMAG 0 
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
			
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP RN_AUTOSHOTGUN }

	
	ife KICKBACKPIC 3
	{
	add GUN_SPREAD 20
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	}

		ife KICKBACKPIC 3 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -64
		state gun_pushback
		
		set gunsmoke_angle 64 state spawn_gunsmoke 
		set gunsmoke_angle 48 state spawn_gunsmoke 
		
		shoot 3761
		
		}

		ife KICKBACKPIC 4  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}

	  ifl SHOTGUNBOXMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
	   ifn CUR_AMMO 0
		   {
		   setp[].reloading 1
		   setp[].kickback_pic 6
		   
		   }
		}		
		ife KICKBACKPIC 12 { soundonce RN_AUTOS_REL ife SHOTGUNBOXMAG 0 spawn 6781 }
		
		ife KICKBACKPIC 32 
			{

			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 SHOTGUNBOXMAG
			
				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
				else
					{
					getp[].ammo_amount 2 TEMP4 sub TEMP4 TEMP6 setp[].ammo_amount 2 TEMP4
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
			}
	}
}
else
ife SPECIALIST_EQUIPMENT[3] 2 // player using overunder?
{
set WEAPON2_TILE 11100
set W2_AMMO_TILE 6848
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 4

set WEAPON2_CLIP 0
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 7
set WEAPON2_RELOAD 30
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 17408
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 0
set WEAPON2_RELOADSOUND1 0
set WEAPON2_RELOADSOUND2 0

	ife CURWEAP 2
	{
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 1
	
	ifand AMMO_TYPES[CURWEAP] 1
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 9361
	set WEAPON2_FIRESOUND EXPL_SHELL_FIRE
	ife explosive_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	ifand AMMO_TYPES[CURWEAP] 4  
	{
	set WEAPON_TYPE 9
	ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
	set WEAPON2_SHOOTS 6826
	set WEAPON2_FIRESOUND FLECH_SHELL_FIRE
	ife flechete_shells 0 ife SHOTGUNBOXMAG 0  { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	{
	set WEAPON_TYPE 2
	set WEAPON2_SHOOTS 2613
	set WEAPON2_FIRESOUND 4
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP OVERUNDER_FIRE }
	}
	
		set GUNMAG SHOTGUNBOXMAG 
		set MAX_SHOTGUNBOXMAG 2
		set GUN_VOLUME 60
		
	ifand BITS_PRESS 4
	 ife player[].weapon_pos 0
		  ifg SHOTGUNBOXMAG 0 
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}

	
	ife KICKBACKPIC 3
	{
	add GUN_SPREAD 32
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	}
		
		ife KICKBACKPIC 2 
			{
			sub SHOTGUNBOXMAG 1
			set NEEDS_PUMP 1
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			}

		ife KICKBACKPIC 3 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -64
		state gun_pushback
		
		set gunsmoke_angle 64 state spawn_gunsmoke 
		set gunsmoke_angle 48 state spawn_gunsmoke 
		
		}

		ife KICKBACKPIC 5  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 20
			{
			set TEMP5 SHOTGUNBOXMAG
			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 TEMP5

ifand AMMO_TYPES[CURWEAP] 1
				{
				ifg TEMP6 explosive_shells
					{
					add SHOTGUNBOXMAG explosive_shells
					set explosive_shells 0
					}
					else
					{
					sub explosive_shells TEMP6
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
				}
	else
	ifand AMMO_TYPES[CURWEAP] 4  
				{
				ifg TEMP6 flechete_shells
					{
					add SHOTGUNBOXMAG flechete_shells
					set flechete_shells 0
					}
					else
					{
					sub flechete_shells TEMP6
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
				}
	else
				{
				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 TEMP4 sub TEMP4 TEMP6 setp[].ammo_amount 2 TEMP4
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
				}
				
			}

	  ifl SHOTGUNBOXMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
	   ifn CUR_AMMO 0
		   {
		   setp[].reloading 1
		   setp[].kickback_pic 6
		   }
		}
		
		
		ife KICKBACKPIC 8 soundonce OVERUNDER_LOAD

		ife KICKBACKPIC 12
		 ife NEEDS_PUMP 1
		{
		ifand AMMO_TYPES[CURWEAP] 1
			{
			ife SHOTGUNBOXMAG 0 shoot EXSHELL
			eshoot EXSHELL
			}
			else
		ifand AMMO_TYPES[CURWEAP] 4
			{
			ife SHOTGUNBOXMAG 0 shoot FL_SHELL
			eshoot FL_SHELL
			}
			else
			{
			ife SHOTGUNBOXMAG 0 shoot 3761 
			eshoot 3761 
			}
		geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
		set NEEDS_PUMP 0
		}
		
		
	}

}
else // player using gold lever-action?
ife SPECIALIST_EQUIPMENT[66] 2
{
set WEAPON2_TILE 19812
set W2_AMMO_TILE 6848
setarray AMMO_AMOUNT[2] 6
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 24
set WEAPON2_RELOAD 40
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND RUS_GOLD_SHOTGUN
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 0
set WEAPON2_RELOADSOUND1 0
set WEAPON2_RELOADSOUND2 0

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
		set GUNMAG -1
		set GUN_VOLUME 60
		set GUN_HANDS 2
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 64
		set GUN_SIZE 2
		set GUN_AMMO_TYPES 0

		
		ife KICKBACKPIC 3 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		add GUN_SPREAD 32
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -32
		state gun_pushback
		
		set gunsmoke_angle 32 state spawn_gunsmoke 
		}

		ife KICKBACKPIC 4  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 5
		{
		ife CUR_AMMO 0 setp[].kickback_pic 0
		}

		ife KICKBACKPIC 10 sound LEVER_ACTION
		ife KICKBACKPIC 12 { setprojectile[3761].pal 40 eshoot 3761 setprojectile[3761].pal 0 }
	}
}
else // player using autoshotgun?
{
ifand RUSTY_UPGRADE 64 set WEAPON2_TILE 6806
else set WEAPON2_TILE 6840
set W2_AMMO_TILE 6848
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 4

set WEAPON2_CLIP 0
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 8
set WEAPON2_RELOAD 40
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 16384
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 0
set WEAPON2_RELOADSOUND1 0
set WEAPON2_RELOADSOUND2 0

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
		set GUNMAG SHOTGUNBOXMAG 
		ifand RUSTY_UPGRADE 64 set MAX_SHOTGUNBOXMAG 16
		else set MAX_SHOTGUNBOXMAG 8
		set GUN_VOLUME 50
		set GUN_HANDS 2
		set GUN_ACCURACY 24
		set GUN_MAX_SPREAD 24
		set GUN_SIZE 2
		set GUN_AMMO_TYPES 0
		
		ife KICKBACKPIC 2 
			{
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			sub SHOTGUNBOXMAG 1
			}
			
	ife KICKBACKPIC 0
	ifand BITS_PRESS 4
	 ifg SHOTGUNBOXMAG 0 
	  ife NEED_TO_FIRE 0
	   ife player[].weapon_pos 0
		  {
		   ife player[].ammo_amount 2 0
				{ 
				getp[].ammo_amount 2 TEMP2
				add TEMP2 1
				setp[].ammo_amount 2 TEMP2 
				set NEED_TO_FIRE 1
				setp[].kickback_pic 1
				}
			else
				setp[].kickback_pic 1		   
		   }
			
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AUTOSHOT_FIRE }
	
	ife KICKBACKPIC 3
	{
	add GUN_SPREAD 20
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	}

		ife KICKBACKPIC 3 // IF THE SHOTGUN ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -64
		state gun_pushback
		
		set gunsmoke_angle 64 state spawn_gunsmoke 
		set gunsmoke_angle 48 state spawn_gunsmoke 
		
		shoot 3761
		
		}

		ife KICKBACKPIC 4  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}

	  ifl SHOTGUNBOXMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
	   ifn CUR_AMMO 0
		   {
		   setp[].reloading 1
		   setp[].kickback_pic 6
		   }
		}		
		ife KICKBACKPIC 12 { soundonce AUTOSHOT_OPEN ife SHOTGUNBOXMAG 0 { ifand RUSTY_UPGRADE 64 spawn 7111 else spawn 6781 } }
		
		ife KICKBACKPIC 26 
			{
			soundonce AUTOSHOT_CLOSE

			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 SHOTGUNBOXMAG
			
				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
				else
					{
					getp[].ammo_amount 2 TEMP4 sub TEMP4 TEMP6 setp[].ammo_amount 2 TEMP4
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
			}
	}
}

// MACHINEGUN
ife SPECIALIST_EQUIPMENT[9] 2 // using the M41C?
{
set WEAPON3_TILE 11865
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 6849
setarray AMMO_AMOUNT[3] 35

set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_RELOAD 41
set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_FLAGS 68
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT

ife CURWEAP 3
	{
	set WEAPON_TYPE 1
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 48
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 2
	set GUN_SIZE 2
	set GUNMAG MGUNMAG
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	ife GL_COUNTDOWN 40
		{
		stopsound FLAMETH_FIRE
		soundonce FLAMETH_STOP
		}
	ifg GL_COUNTDOWN 42 
		{ 
			espawn 3296 // flame sprite
			geta[].x TEMP
			geta[].y TEMP2
			set TEMP3 TEMP
			add TEMP3 256
			geta[].ang TEMP4
			add TEMP4 192
			randvar TEMP5 8
			ifrnd 128 add TEMP4 TEMP5 else sub TEMP4 TEMP5
			rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6
			seta[RETURN].x TEMP5 
			seta[RETURN].y TEMP6
		espawn 2520 // sound sprite
		state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLAMETH_FIRE 
		}
	ifg GL_COUNTDOWN 44
		{
		sub WEAPSWAYX 2
		sub WEAPSWAYY 2
		}
	ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke }
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AUTOTURRET_FIRE }

	ife RUSTY_BAYONET 0
		{
		set GUN_VOLUME 10
		set MAXMGUNMAG 99
			ife KICKBACKPIC 1 { set gunsmoke_angle 32 state spawn_gunsmoke getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
			ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
			ife KICKBACKPIC 3 add GUN_SPREAD 8
			
			ife KICKBACKPIC 9 sound FG42_MAGOUT 
			ife KICKBACKPIC 10 ife MGUNMAG 0 spawn 3756 // spawn magazine
			
			ife KICKBACKPIC 26 
				{
				sound FG42_MAGIN
				ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
				}

	  ifl MGUNMAG 1
	   ife player[].weapon_pos 0
	    ife KICKBACKPIC 0
		   {
		   	ifn CUR_AMMO 0
		   		{
		   		setp[].reloading 1
		   		setp[].kickback_pic 6
				}
			}
		}
		
	}

}
else
ife SPECIALIST_EQUIPMENT[27] 2 // using the AK74?
	{
	set WEAPON3_TILE 13412
	setarray WEAPON_SPECIAL[3] 8
	set W3_AMMO_TILE 5219
	setarray AMMO_AMOUNT[3] 30


	set WEAPON3_HOLDDELAY 1
	set WEAPON3_SPAWN 0
	
	set WEAPON3_INITIALSOUND 4
	set WEAPON3_CLIP 0
	set WEAPON3_RELOADSOUND1 4
	set WEAPON3_RELOADSOUND2 4
	set WEAPON3_SHOTSPERBURST 1

	ife CURWEAP 3
	{
	set WEAPON_TYPE 2
	set GUN_SIZE 2
	set GUN_HANDS 2
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	set GUN_VOLUME 18
	
	ifand GUNFIREMODE 32768 // If GL is selected
		set GUN_AMMO_TYPES 4096 // set ammo types to gp25/30 compatible
		else
		set GUN_AMMO_TYPES 64 // set firing menu to switching to gl
	
	state check_caseless_grenades_avail
			
				set WEAPON3_FLAGS 68
				set WEAPON3_FIREDELAY 2
				set WEAPON3_TOTALTIME 4
				set WEAPON3_FIRESOUND 4
				set WEAPON3_SHOOTS HOLLOW_POINT_SHOT

				ife KICKBACKPIC 2 { set GUN_RECOIL 10 espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AK74_FIRE }
				ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke }
				
				ife KICKBACKPIC 7 sound AUG_MOVEMENT
				
				ife KICKBACKPIC 21 sound AUG_MOVEMENT

				ife KICKBACKPIC 15 state JMOVESOUND2
			
				ife KICKBACKPIC 45 state JMOVESOUND2
				ife KICKBACKPIC 46 soundonce AK104_BOLT
				
				ife KICKBACKPIC 54 sound AUG_MOVEMENT
					
				ifand GUNFIREMODE 32768
					{
					ifand GUNFIREMODE 16384 xorvar GUNFIREMODE 16384
					}

					set GUNMAG MGUNMAG
						
						set MAXMGUNMAG 30
						ife KICKBACKPIC 12 { sound AK104_RELOAD ife MGUNMAG 0 spawn 3756 }
						

						ife KICKBACKPIC 33
							{
							ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
							}
			
			
				ifand GUNFIREMODE 16384 
					{
					set GUN_ACCURACY 4
					set GUN_MAX_SPREAD 24
					ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
					
					ife KICKBACKPIC 2 
						{
						set gunsmoke_angle 0
						state spawn_gunsmoke
						}
					ife KICKBACKPIC 3 add GUN_SPREAD 6
						
					ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0  xorvar GUNFIREMODE 16384 }
					
					}
					else
					{
					set GUN_ACCURACY 12
					set GUN_MAX_SPREAD 32
					ife KICKBACKPIC 2 
						{
						set gunsmoke_angle 72
						state spawn_gunsmoke
						}
					ife KICKBACKPIC 3 add GUN_SPREAD 8
					}	
					
				ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
				getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
				ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
				
				ife GL_COUNTDOWN 40 sound AUG_MOVEMENT
				ife GL_COUNTDOWN 18 soundonce GL_RELOAD

							
						ifg GL_COUNTDOWN 44
							{
							sub WEAPSWAYX 5
							sub WEAPSWAYY 5
							}

					  ifl MGUNMAG 1
					   ife player[].weapon_pos 0
						ife KICKBACKPIC 0
					   {
						ifn CUR_AMMO 0
							{
							set WEAPON3_RELOAD 58
							setp[].reloading 1
							setp[].kickback_pic 6
							}
						}
		}
	}
else // Using the FG-42?
{
set WEAPON3_TILE 6841
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 6873
setarray AMMO_AMOUNT[3] 20

set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4

ifand RUSTY_UPGRADE 2
set WEAPON3_RELOAD 12

ife RUSTY_BAYONET 1
{
set WEAPON3_FIREDELAY 7
set WEAPON3_TOTALTIME 15
set WEAPON3_HOLDDELAY 0
set WEAPON3_FLAGS 256
set WEAPON3_FIRESOUND BAYONET
set WEAPON3_SHOOTS 0
}
else
{
	ifand RUSTY_UPGRADE 8
	{
	set WEAPON3_FIREDELAY 3
	set WEAPON3_TOTALTIME 4
	}
	else
	{
	set WEAPON3_FIREDELAY 4
	set WEAPON3_TOTALTIME 5
	}
set WEAPON3_HOLDDELAY 1
set WEAPON3_FLAGS 76
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS RMAXREVOLVERSHOT
}

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 2
	ife KICKBACKPIC 50 sound FG42_COCK
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FG42_FIRE }
	
		ifand RUSTY_UPGRADE 1
		{
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 16
		ife player[].weapon_pos 0
			{
			state spawn_lasersite
			seta[RETURN].x hitx
			seta[RETURN].y hity
			seta[RETURN].z hitz
			}
		}
		else
		{
		set GUN_ACCURACY 16
		set GUN_MAX_SPREAD 24
		}
		set GUN_SIZE 2
		ifand RUSTY_UPGRADE 2 set GUNMAG -1 else set GUNMAG MGUNMAG
	ife RUSTY_BAYONET 0
		{
		set GUN_VOLUME 20
		ifand RUSTY_UPGRADE 2 set MAXMGUNMAG 300 else set MAXMGUNMAG 20
			ife KICKBACKPIC 2 set GUN_RECOIL 10
			ife KICKBACKPIC 3 { add GUN_SPREAD 12 set gunsmoke_angle 32 state spawn_gunsmoke }
			
			ife KICKBACKPIC 9 sound FG42_MAGOUT 
			ife KICKBACKPIC 10 ife MGUNMAG 0 spawn 3756 // spawn magazine
			
			ife KICKBACKPIC 30 
				{
				sound FG42_MAGIN
				ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
				}

	  ifl MGUNMAG 1
	   ife player[].weapon_pos 0
	    ife KICKBACKPIC 0
		   {
		   ifand RUSTY_UPGRADE 2 set MGUNMAG CUR_AMMO else
		   	ifn CUR_AMMO 0
		   		{
				set WEAPON3_RELOAD 61
		   		setp[].reloading 1
		   		setp[].kickback_pic 6
				}
			}
		}	
	ife RUSTY_BAYONET 1 
		{
		set GUN_VOLUME 0
		ife KICKBACKPIC 0 set RUSTY_BAYONET 0
		ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { set gun_pushback_power 16 state gun_pushback }
		ife KICKBACKPIC 7 
			{
			ife SPECIALIST_EQUIPMENT[1] 1 shoot 6875 // If the player is using a silver bayonett
			else shoot 6874 // otherwise use the standard one
			}
		}
					ifand BITS_PRESS 4194304
					 ife KICKBACKPIC 0
					  ifg SPRINTING 40
					 	ifg SPIN_KICK 19
						 ifg TWIRL_KICK 19
						  ifg ROUNDHOUSE_KICK 26
						   ifg SLIDE_KICK 26
						    ifg FLYING_KICK 26
						{
						set RUSTY_BAYONET 1
						setp[].kickback_pic 4
						setp[].quick_kick 0
						sub SPRINTING 40
						set KNIFE_ATTACK 26
						set QUICKK 13
						}	
	
	ife RUSTY_BAYONET 1
	 ifand BITS_PRESS 4
		set RUSTY_BAYONET 0
		
	}
}

// RPG
set WEAPON4_TILE 6842 
set W4_AMMO_TILE 6850
setarray AMMO_AMOUNT[4] 5

set WEAPON4_FIRESOUND TRI_FIRE
set WEAPON4_SHOOTS RPG
set WEAPON4_RELOAD 30
set WEAPON4_FIREDELAY 2
set WEAPON4_TOTALTIME 22
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0
	
	ife CURWEAP 4 
		{
		set WEAPON_TYPE 4
		set GUN_VOLUME 25
		set GUNMAG -1
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_HANDS 2
		set GUN_SIZE 2
		set GUN_AMMO_TYPES 0
		
			ife KICKBACKPIC 3 // IF THE ANIMATION IS ON IT'S 4TH FRAME MOVE THE PLAYERS SCREEN UP...
			{  
			getp[].horiz TEMP
			add TEMP 10
			setp[].horiz TEMP
			
			set gun_pushback_power -64
			state gun_pushback
			
			set gunsmoke_angle 64 state spawn_gunsmoke 
			set gunsmoke_angle 48 state spawn_gunsmoke 
			
			}

			ife KICKBACKPIC 4  // AND UP AGAIN...
			{
			getp[].horiz TEMP
			add TEMP 10
			setp[].horiz TEMP
			}

			ife KICKBACKPIC 5  // NOW LOWER IT...
			{
			getp[].horiz TEMP
			sub TEMP 10
			setp[].horiz TEMP
			}

			ife KICKBACKPIC 6 // ...BACK TO NORMAL
			{
			getp[].horiz TEMP
			sub TEMP 10
			setp[].horiz TEMP
			}
		
		
		ife KICKBACKPIC 5 sound TRI_INSERT
		}

// PIPEBOMB
set WEAPON5_TILE 6846
set W5_AMMO_TILE 6331
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 21
set WEAPON5_HOLDDELAY 20
set PIPEBOMB_CONTROL 0

	ife CURWEAP 5 
		{
		set WEAPON_TYPE 6
		set GUN_SIZE 0
		set GUNMAG -1
		set GUN_VOLUME 0
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		}


// SHRINKER
set WEAPON6_TILE 6843
set W6_AMMO_TILE 6854
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 10

set WEAPON6_FIREDELAY 3
set WEAPON6_SHOOTS MINE_DART
set WEAPON6_TOTALTIME 12
set WEAPON6_FIRESOUND DL_FIRE
set WEAPON6_INITIALSOUND 0
set WEAPON6_SHOTSPERBURST 0
set WEAPON6_FLAGS 2
set WEAPON6_SPAWNTIME -1
set WEAPON6_SPAWN 0
set WEAPON6_SOUND2TIME -1
set WEAPON6_SOUND2SOUND 4
set WEAPON6_RELOADSOUND1 4
set WEAPON6_RELOADSOUND2 4

ife CURWEAP 6 
{
	set WEAPON_TYPE 8
	set GUN_VOLUME 5
	set GUNMAG -1
	set GUN_HANDS 1
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_AMMO_TYPES 0

ifg RUSTY_MINE_GUN 0 sub RUSTY_MINE_GUN 1
}

// DEVISTATOR
set WEAPON7_TILE 6844
set W7_AMMO_TILE 6852
setarray AMMO_AMOUNT[7] 30
setarray WEAPON_SPECIAL[7] 0

set WEAPON7_SHOOTS 6857
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_FIREDELAY 2
set WEAPON7_TOTALTIME 3
set WEAPON7_HOLDDELAY 0 
set WEAPON7_FIRESOUND 4
set WEAPON7_INITIALSOUND 0
set WEAPON7_FLAGS 6

	ife CURWEAP 7 
		{ 
		set WEAPON_TYPE 8
		set GUN_VOLUME 8 
		set GUNMAG -1 
		set GUN_HANDS 2
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_SIZE 2
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP PULSE_FIRE }
		}
	
// TRIPBOMB
set WEAPON8_TILE 12024
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328

	ife CURWEAP 8 
		{ 
		set WEAPON_TYPE 6
		set GUN_SIZE 0
		set GUN_VOLUME 0 
		set GUNMAG -1 
		set GUN_HANDS 1
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_AMMO_TYPES 0
		}

// FREEZER
set WEAPON9_TILE 6845
setarray WEAPON_SPECIAL[9] 2
set W9_AMMO_TILE 6853
setarray AMMO_AMOUNT[9] 50

ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON9_SHOOTS 6816 else
set WEAPON9_SHOOTS 6826
set WEAPON9_FIREDELAY 2
set WEAPON9_TOTALTIME 4
set WEAPON9_HOLDDELAY 0 
set WEAPON9_RELOAD 50
set WEAPON9_FIRESOUND 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_FLAGS 22

	ife CURWEAP 9 
				{
				set WEAPON_TYPE 9
				ifand RUSTY_UPGRADE 32 set MAXRIFLEMAG 100 else set MAXRIFLEMAG 40
				set GUN_VOLUME 6
				set GUN_SIZE 2
				set GUN_HANDS 2
				 set GUNMAG RIFLEMAG 
				 
				state check_cased_grenades_avail
				 
				set GUN_ACCURACY 8
				set GUN_MAX_SPREAD 0
				
				ifand GUNFIREMODE 32768
				set GUN_AMMO_TYPES 2048
				else
				set GUN_AMMO_TYPES 32
				 
				ife KICKBACKPIC 1 { sub RIFLEMAG 1 getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
				ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
				ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP NAILGUN_FIRE }
					
					ife GL_COUNTDOWN 34 soundonce GL_OPEN
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE
					
				ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
		
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}
					
				ife KICKBACKPIC 8 sound JMOVE8
				
				ifand RUSTY_UPGRADE 32
				{
				ife KICKBACKPIC 22 soundonce AUTOSHOT_OPEN
				ife KICKBACKPIC 23 ife RIFLEMAG 0 spawn 6781
				ife KICKBACKPIC 34 soundonce AUTOSHOT_CLOSE 
				}
				else
				{
				ife KICKBACKPIC 22 soundonce NAILGUN_MAG_OUT
				ife KICKBACKPIC 23 ife RIFLEMAG 0 spawn 3737
				ife KICKBACKPIC 34 soundonce NAILGUN_MAG_IN
				}
				
				ife KICKBACKPIC 34
					{
					ifl CUR_AMMO MAXRIFLEMAG set RIFLEMAG CUR_AMMO else set RIFLEMAG MAXRIFLEMAG
					}
				ife KICKBACKPIC 39 sound JMOVE8
			
				  ifl RIFLEMAG 1
				   ife player[].weapon_pos 0
					ife KICKBACKPIC 0
				   {
					ifn CUR_AMMO 0
						{
						setp[].reloading 1
						setp[].kickback_pic 6
						}
					}
			
					ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
					getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
					ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
					
					
					ifand GUNFIREMODE 16384
					{
					ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
					}

				
				}

// EXPANDER
set W11_AMMO_TILE 6855
setarray AMMO_AMOUNT[11] 3

set WEAPON11_CLIP 0
set WEAPON11_RELOAD 0
set WEAPON11_FIREDELAY 3
set WEAPON11_TOTALTIME 12
set WEAPON11_HOLDDELAY 0
set WEAPON11_FLAGS 2
set WEAPON11_SHOOTS IN_MINE_DART
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_INITIALSOUND 0
set WEAPON11_FIRESOUND DL_FIRE
set WEAPON11_SOUND2TIME 0
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

ife CURWEAP 11  
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUN_VOLUME 5
	set GUNMAG -1
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	
	ifg RUSTY_MINE_GUN 0 sub RUSTY_MINE_GUN 1
	
	}

}
ends

defstate PS_GEOFFREY
{
ife on_tripwire 1 action GSTAND
ifaction ZERO action GSTAND
ife FIRE_SUIT 1 ifaction GSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction GSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction GSTAND action SS_STAND

setp[].knuckle_incs 0

qputs 3 Health Canister

qputs 6 Boots
qputs 75 Protective boots on

qputs 90 Vitamin X!
qputs 12 Used Vitamin X!

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision glasses
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Night vision glasses
	qputs 106 Night vision on
	qputs 107 Night vision off
	}

qputs 89 Diving gear

qputs 47 Infinite ammo bandanna on
qputs 48 Infinite ammo bandanna off
qputs 49 Infinite ammo bandanna not found yet!
qputs 51 Infinite ammo bandanna
qputs 91 Infinite ammo bandanna

qputs 88 Jetboots
qputs 50 Jetboots not found yet!
qputs 52 Jetboots on
qputs 53 Jetboots off

qputs 102 We're gonna fry your ass, Geoffrey!

smaxammo 1 200
smaxammo 2 60
smaxammo 4 50
smaxammo 6 50

smaxammo 9 200
smaxammo 11 10

set CKEYCARDTILE 6570
set CKEYCARDTILE2 6572
set CKEYCARDTILE3 6573
set CTRIPBOMB 6571
set CDETON 2570
set CTIP 6625
set CHOLDING 9435
set CHOLDING_2 9435
set CHOLDING_3 12113

	ife on_tripwire 1 set CKNEE 6508 else
	ifl ROUNDHOUSE_KICK 27 set CKNEE 6472 else
	ifl SPIN_KICK 20 set CKNEE 6472 else
	ifl FLYING_KICK 27 set CKNEE 6472 else
	ifl TWIRL_KICK 20 set CKNEE 6472 else
	set CKNEE 6508

set CMEDIKIT 6565
set CSTEROIDS 6567
set CHOLODUKE 6562
set CJETPACK 6564

set CHEAT 6631
set CNVG 6563

state DISP_nvg

set CSCUBA 6566
set CBOOTS 6629
set C_ARMOUR 6637
set C_HEAVY_ARMOUR 6636

set C_ARM_1 15971
set C_ARM_2 12187

set C_PISTOL_1 8989
set C_PISTOL_2 8989

set C_HAND_1 6579
set C_HAND_2 6580

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 70 else
set PMAX_STAMINA 100

set CIICON 6544

ifn player[].holoduke_on -1
{
getplayer[].holoduke_on TEMP
seta[TEMP].cstat 32768
seta[TEMP].xrepeat 1
seta[TEMP].yrepeat 1
ifsound TELEPORTER { soundonce PUT_ON_EQUIP stopsound TELEPORTER }
set PS_ITEM 2
}
else
ife PS_ITEM 2 set PS_ITEM 0


// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set GUN_HANDS 1
	set GUNMAG -1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}


// PISTOL
ife SPECIALIST_EQUIPMENT[42] 2 // Gold Pistol
{
set WEAPON1_TILE 14601
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 6635
setarray AMMO_AMOUNT[1] 25

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 7
set WEAPON1_HOLDDELAY 0
set WEAPON1_FLAGS 6
set WEAPON1_SPAWNTIME -1
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4

set WEAPON1_FIRESOUND 4
set WEAPON1_SHOOTS GOLDEN_SHOT_MED

ife CURWEAP 1
	{
	set WEAPON_TYPE 3
	ifg GEO_MEGA_SHOT[0] 0 
		{
		set TEMP GEO_MEGA_SHOT[0]
		sub TEMP 1
		setarray GEO_MEGA_SHOT[0] TEMP
		}
	set GUNMAG -1
	set GUN_VOLUME 14
	set GUN_ACCURACY 4
	set GUN_MAX_SPREAD 64
	set GUN_SIZE 0
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 1

	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GEF_GR_FIRE }
	
	ife KICKBACKPIC 3 
		{ 
		add GUN_SPREAD 20
		shoot 13772 
		ifn GEO_MEGA_SHOT[0] 0 set GUN_RECOIL 15 else set GUN_RECOIL 7
		}

		ife KICKBACKPIC 4
		{ 
		set gunsmoke_angle 144 state spawn_gunsmoke 
		}	
	}
}
else
{
set WEAPON1_TILE 6648
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 6640
setarray AMMO_AMOUNT[1] 25

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 5
set WEAPON1_HOLDDELAY 0
set WEAPON1_FLAGS 6
set WEAPON1_SPAWNTIME -1
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4


ife CURWEAP 1
	{
	ifg GEO_MEGA_SHOT[0] 0 
		{
		ife GEO_MEGA_SHOT[0] 30 sound MAGSHOT_CHARGE
		set TEMP GEO_MEGA_SHOT[0]
		sub TEMP 1
		setarray GEO_MEGA_SHOT[0] TEMP
		}
	ifand GEOFFREY_UPGRADE 1
		{
		set WEAPON_TYPE 1
		set WEAPON1_FIRESOUND 4
		set WEAPON1_SHOOTS REDLASERSHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP LASERGUN_FIRE3 }
		}
	else
		{
		set WEAPON_TYPE 0
		set WEAPON1_FIRESOUND 4
		set WEAPON1_SHOOTS NINEMM_CALIBRE
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GEO_PISTOL }
		}
		
	set GUNMAG -1
	set GUN_VOLUME 14
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 0
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 1

	ife KICKBACKPIC 3 
		{ 
		shoot 13772 
		ifn GEO_MEGA_SHOT[0] 0 set GUN_RECOIL 15 else set GUN_RECOIL 7
		}

		ife KICKBACKPIC 4
		{ 
		set gunsmoke_angle 144 state spawn_gunsmoke 
		}	
	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[20] 2 // Plasma shotgun
{
	set WEAPON2_TILE 6518
	set W2_AMMO_TILE 12909
	setarray WEAPON_SPECIAL[2] 0
	setarray AMMO_AMOUNT[2] 8

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 24
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS 5374
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 3
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND 4
	set WEAPON2_SOUND2TIME -1
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 4

	ife CURWEAP 2
	{
	set WEAPON_TYPE 8
	set GUN_VOLUME 70
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 2
	set GUN_HANDS 2

	set GUNMAG -1
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP PLAS_SHOTGUN }
		ife KICKBACKPIC 3
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC 4
			{
			set gunsmoke_angle 76 state spawn_gunsmoke 
			}
		ife KICKBACKPIC 5
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC 7
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
		ife KICKBACKPIC 9
			{ 
			sound PLAS_CHARGE
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	


	}

}
else
ife SPECIALIST_EQUIPMENT[67] 2 // golden shotgun
{
	set WEAPON2_TILE 19808
	set W2_AMMO_TILE 6639
	setarray AMMO_AMOUNT[2] 6
	setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 24
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 7
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND 4
	set WEAPON2_SOUND2TIME -1
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 4

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 90
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 2
	set GUN_HANDS 2

	set GUNMAG -1
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GEO_GOLD_SHOTGUN }
	ife KICKBACKPIC 3
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
	ife KICKBACKPIC 4
			{
			set gunsmoke_angle 76 state spawn_gunsmoke 
			}
	ife KICKBACKPIC 5
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
	ife KICKBACKPIC 7
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
	ife KICKBACKPIC 9
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
			ife KICKBACKPIC 9 sound ZAX_GOLDS_PUMP
			ife KICKBACKPIC 16 { setprojectile[3761].pal 40 eshoot 3761 setprojectile[3761].pal 0 }
			
			
			
	}
}
else // default shotgun
{
	ifand GEOFFREY_UPGRADE 16 set WEAPON2_TILE 6624
	else set WEAPON2_TILE 6649
	set W2_AMMO_TILE 6641
	setarray AMMO_AMOUNT[2] 8
	setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 24
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 10
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_SOUND2TIME -1
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 4

	ife CURWEAP 2
	{
	set GUN_VOLUME 90
	ifand GEOFFREY_UPGRADE 16 set GUN_ACCURACY 16
	else set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 48
	set GUN_AMMO_TYPES 5
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG -1
	
	ife KICKBACKPIC 2 add GUN_SPREAD 32
	
		ife KICKBACKPIC 4
		 ife NEED_TO_FIRE 1
			{
			setp[].ammo_amount 2 0
			set NEED_TO_FIRE 0
			}
	
	
	ifand AMMO_TYPES[CURWEAP] 1 // Explosive shells
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 9361
		set WEAPON2_FIRESOUND EXPL_SHELL_FIRE
		ife KICKBACKPIC 0
			{
			ife explosive_shells 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
			 ifand BITS_PRESS 4
				{
				getp[].ammo_amount 2 HOLD_AMMO_TEMP 
				ife HOLD_AMMO_TEMP 0
					{
					setp[].ammo_amount 2 1 
					set NEED_TO_FIRE 1
					}
				}
			
			}
		}
	else
	ifand AMMO_TYPES[CURWEAP] 4 // flechette shells
		{
		set WEAPON_TYPE 9
		ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
		set WEAPON2_SHOOTS 6826
		set WEAPON2_FIRESOUND FLECH_SHELL_FIRE
		ife KICKBACKPIC 0
			{
			ife flechete_shells 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
			 ifand BITS_PRESS 4
				{
				getp[].ammo_amount 2 HOLD_AMMO_TEMP 
				ife HOLD_AMMO_TEMP 0
					{
					setp[].ammo_amount 2 1 
					set NEED_TO_FIRE 1
					}
				}
			
			}
		}
	else
	ifand AMMO_TYPES[CURWEAP] 64 // magnum shells
		{
		set WEAPON_TYPE 0
		set WEAPON2_SHOOTS RMAXREVOLVERSHOT
		set WEAPON2_FIRESOUND MAGNUM_SHOTGUN
		ife KICKBACKPIC 0
			{
			ife magnum_shells 0 { xorvar AMMO_TYPE 64 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
			 ifand BITS_PRESS 4
				{
				getp[].ammo_amount 2 HOLD_AMMO_TEMP 
				ife HOLD_AMMO_TEMP 0
					{
					setp[].ammo_amount 2 1 
					set NEED_TO_FIRE 1
					}
				}
			
			}
		}
	else
	ifand AMMO_TYPES[CURWEAP] 1024 // flame shells
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 22536
		set WEAPON2_FIRESOUND DRAGONS_BR_FIRE
		ife KICKBACKPIC 0
			{
			ife dragon_shells 0 { xorvar AMMO_TYPE 1024 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
			 ifand BITS_PRESS 4
				{
				getp[].ammo_amount 2 HOLD_AMMO_TEMP 
				ife HOLD_AMMO_TEMP 0
					{
					setp[].ammo_amount 2 1 
					set NEED_TO_FIRE 1
					}
				}
			}

		}
	else // buckshot
		{
		set WEAPON_TYPE 2
		set WEAPON2_SHOOTS SHOTGUN
		set WEAPON2_FIRESOUND GEO_SHOTGUN
		}
	
	
	ifand GEOFFREY_UPGRADE 16
	 ifand BITS_PRESS 64
	  ife KICKBACKPIC 0
	  ife KICKBACKPIC_2 0
	   ife player[].weapon_pos 0
	   ifg tesla_ammo 4
		{
		set KICKBACKPIC_2 1
		}
		
	ifg KICKBACKPIC_2 0 // alternate fire mode used?
		{
		add KICKBACKPIC_2 1
		
		ife KICKBACKPIC_2 2
			{
			   sound 482
			   sound RIOTGUN_TESLAF
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 8 seta[RETURN].ang ALT_TEMP2
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 16 seta[RETURN].ang ALT_TEMP2
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -8 seta[RETURN].ang ALT_TEMP2
			   eshoot 6198
			   geta[RETURN].ang ALT_TEMP2 sub ALT_TEMP2 -16 seta[RETURN].ang ALT_TEMP2
			   shoot 6198
			   sub tesla_ammo 5
			}
		ife KICKBACKPIC_2 3
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC_2 4
			{
			set gunsmoke_angle 76 state spawn_gunsmoke 
			}
		ife KICKBACKPIC_2 5
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC_2 7
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
		ife KICKBACKPIC_2 9
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
		ifg KICKBACKPIC_2 25 set KICKBACKPIC_2 0
		}
		
		ife KICKBACKPIC 2
			{
			ifand AMMO_TYPES[CURWEAP] 1 { set LAST_SHELL_FIRED 1 sub explosive_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 4 { set LAST_SHELL_FIRED 4 sub flechete_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 64 { set LAST_SHELL_FIRED 64 sub magnum_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 1024 { set LAST_SHELL_FIRED 1024 sub dragon_shells 1 }
			else set LAST_SHELL_FIRED 0
			}
	
		ife KICKBACKPIC 3
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC 4
			{
			set gunsmoke_angle 76 state spawn_gunsmoke 
			}
		ife KICKBACKPIC 5
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC 7
			{ 
			sound GEO_SHOTG_PUMP
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
		ife KICKBACKPIC 9
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
			ife KICKBACKPIC 16 state SHOTGUN_SHELL 
	}
}


// MACHINEGUN
ife SPECIALIST_EQUIPMENT[81] 2 // GP-63 Assault Rifle
{
smaxammo 3 200
set WEAPON3_TILE 22617
setarray WEAPON_SPECIAL[3] 128
set W3_AMMO_TILE 16563
setarray AMMO_AMOUNT[3] 25
set WEAPON3_HOLDDELAY 1
set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_FIREDELAY 2
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 22
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS MSCORP_SHOT

ife CURWEAP 3
{
	set WEAPON_TYPE 0
	set GUNMAG -1
	set MGUNMAG -1
	set GUN_VOLUME 15
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 1024
	set WEAPON3_FLAGS 4
	

	set GUN_ACCURACY 8
	
		ifg GUN_HEAT[CURWEAP] 150
			{
			setp[].reloading 1
			soundonce AR73_OVERHEAT
			setp[].kickback_pic 5
			}
		ifg GUN_HEAT[CURWEAP] 50
			{
			ifg KICKBACKPIC 10 { set gunsmoke_z 9444 set gunsmoke_angle 98 } 
			else { set gunsmoke_z 9144 set gunsmoke_angle 64 } 
			state spawn_gunsmoke_z
			}

		ifg GUN_HEAT[CURWEAP] 75
			{
			soundonce AR73_BEEP
			set WEAPON3_FIREDELAY 2
			set WEAPON3_TOTALTIME 3
			}
			else
		ifg GUN_HEAT[CURWEAP] 25
			{
			set WEAPON3_FIREDELAY 2
			set WEAPON3_TOTALTIME 4
			}
			else
			{
			set WEAPON3_FIREDELAY 2
			set WEAPON3_TOTALTIME 5
			}
	

		ife KICKBACKPIC 2
			{ 
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GP-63_FIRE 
			set GUN_RECOIL 7
			set gunsmoke_angle 64 state spawn_gunsmoke 
			}	
			
		ife KICKBACKPIC 14 
			{ 
			set TEMP9 GUN_HEAT[CURWEAP]
			sub TEMP9 2
			setarray GUN_HEAT[CURWEAP] TEMP9
			ifl GUN_HEAT[CURWEAP] 20
				{
				stopsound STEAM_HISSING soundonce MDF_READY setarray GUN_HEAT[CURWEAP] 0
				}
			}
			
			ife KICKBACKPIC 15 
				{
				ifg GUN_HEAT[CURWEAP] 20 setp[].kickback_pic 14
				ifg HEAT_SINKS 0
				 ifg GUN_HEAT[CURWEAP] 100
				 ifand BITS_PRESS 128 { soundonce HEAT_SINK_EJECT shoot HEAT_SINK sub HEAT_SINKS 1 setarray GUN_HEAT[CURWEAP] 25 }
				}
			ife KICKBACKPIC 17 soundonce MDF_READY


	}
}
else
ife SPECIALIST_EQUIPMENT[12] 2 // AP SMG?
{
smaxammo 3 400
set WEAPON3_TILE 6549
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 6655
setarray AMMO_AMOUNT[3] 80

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_FLAGS 68
set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 4
set WEAPON3_RELOAD 40
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT


	ife CURWEAP 3
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 60
	set MAXMGUNMAG 80
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 96
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUNMAG MGUNMAG

	ife KICKBACKPIC 2
			{ 
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GEO_AP_FIRE
			add GUN_SPREAD 12
			set GUN_RECOIL 7
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
	ife KICKBACKPIC 13
			{
			ife MGUNMAG 0 spawn 3756
			soundonce MSRIFLE_MAGOUT
			}	
	ife KICKBACKPIC 24
			{
			soundonce MSRIFLE_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}

	 ifl MGUNMAG 1
	  ife KICKBACKPIC 0
		   ife player[].weapon_pos 0
			{
			ifn CUR_AMMO 0
				{
				ifl CUR_AMMO 0 setplayer[].ammo_amount 3 0
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
	}
}
else // Geoffrey's normal SMG
{
smaxammo 3 500
set WEAPON3_TILE 6650
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 6642
setarray AMMO_AMOUNT[3] 60

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_FLAGS 4
set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 51
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS ZRIFLESHOTU


ife CURWEAP 3
{
	set WEAPON_TYPE 0
	set GUN_VOLUME 9
	set GUN_ACCURACY 6
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 1
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	ifand GEOFFREY_UPGRADE 8 set MAXMGUNMAG 60 else set MAXMGUNMAG 40
	set GUNMAG MGUNMAG

		ife KICKBACKPIC 2
			{ 
			add GUN_SPREAD 7
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GEO_SMGFIRE
			set GUN_RECOIL 7
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
			
		ife KICKBACKPIC 13 state JMOVESOUND2

		ife KICKBACKPIC 23
			{
			ife MGUNMAG 0 spawn 3756
			soundonce MSRIFLE_MAGOUT
			}
			
		ife KICKBACKPIC 37
			{
			soundonce MSRIFLE_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}


	 ifl MGUNMAG 1
	  ife KICKBACKPIC 0
		   ife player[].weapon_pos 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}

	}
}


// RPG
ifand GEOFFREY_UPGRADE 4 set WEAPON4_TILE 6477 else
set WEAPON4_TILE 6651
set W4_AMMO_TILE 6643
setarray AMMO_AMOUNT[5] 6

set WEAPON4_FIRESOUND GEO_GLAUNCHER
set WEAPON4_SHOOTS 5375

set WEAPON4_FIREDELAY 2

set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0

ife CURWEAP 4
	{
	set WEAPON_TYPE 4
	ifg GEO_CALCULATE_TRAJ 0 sub GEO_CALCULATE_TRAJ 1
	set GUN_VOLUME 40
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 0

	ifand GEOFFREY_UPGRADE 4
	{
	set WEAPON4_TOTALTIME 16
	set WEAPON4_RELOAD 30
	}
	else
	{
	set WEAPON4_TOTALTIME 20
	set WEAPON4_RELOAD 30
	}

		ife KICKBACKPIC 3
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC 5
			{
		getp[].horiz TEMP 
		add TEMP 15 
		setp[].horiz TEMP 
			}
		ife KICKBACKPIC 6
			{
			set gunsmoke_angle 64 state spawn_gunsmoke 
			}
		ife KICKBACKPIC 7
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
		ife KICKBACKPIC 9
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP 
			}	
		ife KICKBACKPIC 13 soundonce ROTATEBARREL

	}

// PIPEBOMB
set WEAPON5_TILE 6487
set W5_AMMO_TILE 6645
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 2
	
ife CURWEAP 5
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUNMAG -1
	set GUN_HANDS 1
	set GUN_VOLUME 0
	set GUN_MAX_SPREAD 0
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	}
	
	ife SHOOTDISCBOMB THISACTOR { shoot DISCBOMB set SHOOTDISCBOMB -1 }

// SHRINKER
set WEAPON6_TILE 6652
set W6_AMMO_TILE 6647
setarray WEAPON_SPECIAL[6] 512
setarray AMMO_AMOUNT[6] 5

set WEAPON6_SHOOTS RAILGUN
set WEAPON6_FIREDELAY 12
set WEAPON6_TOTALTIME 16
set WEAPON6_FIRESOUND RAILGUN_FIRE
set WEAPON6_INITIALSOUND 4
set WEAPON6_SHOTSPERBURST 0
set WEAPON6_FLAGS 2
set WEAPON6_SPAWNTIME -1
set WEAPON6_SPAWN 0
set WEAPON6_SOUND2TIME -1
set WEAPON6_SOUND2SOUND 4
set WEAPON6_RELOADSOUND1 4
set WEAPON6_RELOADSOUND2 4

ife CURWEAP 6
	{
	setplayer[THISACTOR].gotweapon 11 0
	set WEAPON_TYPE 1
	set GUNMAG -1
	set GUN_VOLUME 45
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	ife camerasprite -1 soundonce RAILGUN_AMB

	ife KICKBACKPIC 1 { sound RAILGUN_CHARGE getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
	ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
	ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 4 setp[].horiz TEMP }
	ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 4 setp[].horiz TEMP }
	ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 6 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 6 setp[].horiz TEMP }
	ife KICKBACKPIC 7 { getp[].horiz TEMP add TEMP 8 setp[].horiz TEMP }
	ife KICKBACKPIC 8 { getp[].horiz TEMP sub TEMP 8 setp[].horiz TEMP }
	ife KICKBACKPIC 12 { set gun_pushback_power -96 state gun_pushback }
	ife KICKBACKPIC 13 { getp[].horiz TEMP add TEMP 8 setp[].horiz TEMP }
	ife KICKBACKPIC 14 { getp[].horiz TEMP sub TEMP 4 setp[].horiz TEMP }
	ife KICKBACKPIC 15 { getp[].horiz TEMP sub TEMP 4 setp[].horiz TEMP }

	}

// DEVISTATOR
ife SPECIALIST_EQUIPMENT[79] 2 // Auto-shotgun?
{
set WEAPON7_TILE 22595
set W7_AMMO_TILE 22600
smaxammo 7 90
setarray AMMO_AMOUNT[7] 20
setarray WEAPON_SPECIAL[7] 0

set WEAPON7_FIREDELAY 2
set WEAPON7_TOTALTIME 8
set WEAPON7_FLAGS 0
set WEAPON7_SHOTSPERBURST 7
set WEAPON7_SHOOTS SHOTGUN
set WEAPON7_FIRESOUND 4
set WEAPON7_INITIALSOUND 4

ife CURWEAP 7
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 70
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 1
	set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 96
	set GUN_AMMO_TYPES 0
	
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GEO_AUTOS_FIRE }
	    ife KICKBACKPIC 3 { add GUN_RECOIL 16 set gunsmoke_angle 64 add GUN_SPREAD 10 state spawn_gunsmoke shoot 3761 }
		ife KICKBACKPIC 5 sound RIOTGUN_COCK
	
	}
}
else
{
set WEAPON7_TILE 6653
set W7_AMMO_TILE 6644
smaxammo 7 200
setarray AMMO_AMOUNT[7] 50
setarray WEAPON_SPECIAL[7] 0

set WEAPON7_FIREDELAY 2
set WEAPON7_TOTALTIME 3
set WEAPON7_FLAGS 12
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_SHOOTS MELTA_BEAM
set WEAPON7_FIRESOUND -1
set WEAPON7_INITIALSOUND MELTA_START

ife CURWEAP 7
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 5
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	ifg KICKBACKPIC 0
		{
		 soundonce MELTA_FIRE
		}
		else
		ife KICKBACKPIC 0 ifsound MELTA_FIRE { stopsound MELTA_FIRE soundonce MELTA_STOP }
	
	    ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	
	}
}

// TRIPBOMB
set WEAPON8_TILE 6494
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS 0
set WEAPON8_FIREDELAY 6
set WEAPON8_FLAGS 258

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_HANDS 1
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// FREEZER
set WEAPON9_TILE 6654
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 6646
setarray AMMO_AMOUNT[9] 30

set WEAPON9_HOLDDELAY 0 
set WEAPON9_INITIALSOUND 0
set WEAPON9_FLAGS 80

ife CURWEAP 9
{
set GUNMAG -1
set GUN_ACCURACY 2
set GUN_MAX_SPREAD 0
set GUN_SIZE 2
set GUN_HANDS 2
set GUN_AMMO_TYPES 0
getp[].ammo_amount 9 TEMP
ifg TEMP 0 ife camerasprite -1 soundonce SHOCKGUN_IDLE
ifl TEMP 3 ifand GUNFIREMODE 16384 xorvar GUNFIREMODE 16384

		ifand GUNFIREMODE 16384
			{
			set GUN_VOLUME 30
			set WEAPON_TYPE 7
			set WEAPON9_FIRESOUND SHOCKGUN_SNIPE
			set WEAPON9_FIREDELAY 2
			set WEAPON9_TOTALTIME 20
			set WEAPON9_SHOOTS 0
			set WEAPON9_SHOTSPERBURST 3
						
			ife KICKBACKPIC 2 { shoot GREENLASERSHOT set gun_pushback_power -32 state gun_pushback }
			ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 7 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 11 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 13 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
			ife KICKBACKPIC 15 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
			}
		else
			{
			set GUN_VOLUME 12
			set WEAPON_TYPE 9
			set WEAPON9_FIRESOUND 4
			set WEAPON9_FIREDELAY 2
			set WEAPON9_TOTALTIME 3
			set WEAPON9_SHOOTS 6627
			set WEAPON9_SHOTSPERBURST 1
			
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SHOCKGUN_FIRE }
			ife KICKBACKPIC 1 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
			ife KICKBACKPIC 2 { getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
			}


}

// EXPANDER
set W11_AMMO_TILE 6647
setarray AMMO_AMOUNT[11] 2

set WEAPON11_SHOOTS 4
set WEAPON11_FIREDELAY 12
set WEAPON11_TOTALTIME 16
set WEAPON11_FIRESOUND HRAILGUN_FIRE
set WEAPON11_INITIALSOUND 4
set WEAPON11_SHOTSPERBURST 0
set WEAPON11_FLAGS 2
set WEAPON11_SPAWNTIME -1
set WEAPON11_SPAWN 0
set WEAPON11_SOUND2TIME -1
set WEAPON11_SOUND2SOUND 4
set WEAPON11_RELOADSOUND1 4
set WEAPON11_RELOADSOUND2 4

ife CURWEAP 11
	{
	set WEAPON_TYPE 1
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 80
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}
}

ifp pboosted
	{
	set GUN_MAX_SPREAD 2
	set GUN_ACCURACY 2
	}

ends

defstate PS_MIKKO
{
ife on_tripwire 1 action MSTAND
ifaction ZERO action MSTAND
ife FIRE_SUIT 1 ifaction MSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction MSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction MSTAND action SS_STAND
ifaction MSTAND set MOVESOUND 0

setp[].knuckle_incs 0

qputs 3 Medikit

qputs 90 MS-Corp Mech
qputs 12 Summoned MS-Corp Mech!

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat sensor
	qputs 106 Heat sensor on
	qputs 107 Heat sensor off
	}
else
	{
	qputs 101 Night sensor
	qputs 106 Night sensor on
	qputs 107 Night sensor off
	}

qputs 6 Protective suit!
qputs 75 Protective suit on

qputs 89 Aqualung

qputs 47 Ammo Backpack
qputs 48 Ammo Backpack
qputs 49 Ammo Backpack not found yet!
qputs 51 Ammo Backpack
qputs 91 Ammo Backpack

qputs 88 Jetfuel
qputs 50 Jetfuel not found yet!
qputs 52 Jetfuel on
qputs 53 Jetfuel off

qputs 102 We're gonna fry your ass, Sandt!

smaxammo 4 50

smaxammo 7 10
smaxammo 9 300

set CKNEE 6986
set CKEYCARDTILE 6969
set CKEYCARDTILE2 6968
set CKEYCARDTILE3 6967
set CTRIPBOMB 6966
set CDETON 2570
set CTIP 6964
set CHOLDING 9429
set CHOLDING_2 9429
set CHOLDING_3 12111

set C_ARM_1 15970
set C_ARM_2 12184

set C_PISTOL_1 8989
set C_PISTOL_2 8989

set CMEDIKIT 7085
set CSTEROIDS 7166
set CHOLODUKE 7091
set CJETPACK 7083

set CHEAT 7086
set CNVG 7088

state DISP_nvg

set CSCUBA 7090
set CBOOTS 7087
set C_ARMOUR 7084
set C_HEAVY_ARMOUR 7089

set C_HAND_1 7901
set C_HAND_2 7902

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 100 else
set PMAX_STAMINA 140

set CIICON 6962

set CPIPEBOMB 7115

getp[].holoduke_on TEMP
ifn TEMP -1
{
stopsound TELEPORTER
soundonce EQUIPMENT_OFF
spawn SHOTGUNAMMO
spawn SHOTGUNAMMO
spawn AMMO
spawn AMMO
spawn AMMO
spawn BATTERYAMMO
spawn BATTERYAMMO
spawn RPGAMMO
spawn CRYSTALAMMO
spawn DEVISTATORAMMO
spawn FREEZEAMMO
spawn GROWAMMO
spawn TRIPBOMBSPRITE
spawn TRIPBOMBSPRITE
spawn TRIPBOMBSPRITE
setp[].holoduke_amount 0
}

getp[].steroids_amount TEMP
ife TEMP 398
{
sound SOMETHINGHITFORCE
spawn TRANSPORTERBEAM
spawn MS_CORP_MECH
}

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set WEAPON_TYPE 0
	set GUNMAG -1
	set GUN_HANDS 1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}


// PISTOL
ife SPECIALIST_EQUIPMENT[43] 2 // Using the gold rose?
{
smaxammo 1 120
set WEAPON1_TILE 13483
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 7076
setarray AMMO_AMOUNT[1] 7

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 43
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS GOLDEN_SHOT_HIGH
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 9
set WEAPON1_FLAGS 16384


ife CURWEAP 1
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 40
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 7
	ife KICKBACKPIC 2 
			{
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP GOLD_R_FIRE
			shoot 13772 
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
			
		ifg KICKBACKPIC 2
		 ifl KICKBACKPIC 10
			{
			ifand BITS_PRESS 4 
				{
				ifg PISTOLMAG 0 setplayer[].kickback_pic 1 else sound DRY_FIRE 
				}
			}
			
		ife KICKBACKPIC 3
			{
			set GUN_RECOIL 10
			add GUN_SPREAD 20
			}
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			
			
		ife KICKBACKPIC 13 { sound SILVER_T_RELOAD ife PISTOLMAG 0 spawn 7103 }
				
		ife KICKBACKPIC 28 
		{
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		
		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
	}
	
}
else
ife SPECIALIST_EQUIPMENT[4] 2 // Using the MDF magnum?
{
// PISTOL
smaxammo 1 160
set WEAPON1_TILE 11101
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 7076
setarray AMMO_AMOUNT[1] 8

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 43
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS RMAXREVOLVERSHOT
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 13772
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_FIRESOUND 4
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 9
set WEAPON1_FLAGS 16384


ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 40
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 8
	ife KICKBACKPIC 2 
			{
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SILVER_T_FIRE
			shoot 13772 
			sub PISTOLMAG 1
			set gunsmoke_angle 64 state spawn_gunsmoke
			}
	ife KICKBACKPIC 3
		{
		set GUN_RECOIL 20
		add GUN_SPREAD 20
		}
		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
		ifg KICKBACKPIC 2
		 ifl KICKBACKPIC 10
			{
			ifand BITS_PRESS 4 
				{
				ifg PISTOLMAG 0 setplayer[].kickback_pic 1 else sound DRY_FIRE 
				}
			}
		
		ife KICKBACKPIC 13 { sound SILVER_T_RELOAD ife PISTOLMAG 0 spawn 7103 }
			
		ife KICKBACKPIC 28 
		{
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		
		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
		{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
		}

	}
	
	}
else // Default MS CORP pistol
{
smaxammo 1 300
ifand MIKKO_UPGRADE 4 set WEAPON1_TILE 7133
else set WEAPON1_TILE 7067
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 7076
setarray AMMO_AMOUNT[1] 25

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 43
set WEAPON1_HOLDDELAY 0
set WEAPON1_TOTALTIME 4
set WEAPON1_FIREDELAY 2
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FLAGS 16386
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_FIRESOUND 4
set WEAPON1_SHOOTS ARMOUR_PIERCING_SHOT

	ife CURWEAP 1
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 16
	set GUN_ACCURACY 4
	set GUN_SIZE 0
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	ifand MIKKO_UPGRADE 2 set GUN_MAX_SPREAD 32 else
	set GUN_MAX_SPREAD 64
		
		ifg KICKBACKPIC 2
		 ifl KICKBACKPIC 10
			{
			ifand BITS_PRESS 4 ifg PISTOLMAG 0 setplayer[].kickback_pic 1
			}
	
		ifand MIKKO_UPGRADE 4
		{
		ifg KICKBACKPIC 2
		 ifl KICKBACKPIC 6
			{
			ifand BITS_PRESS 64 ifg PISTOLMAG 0 
				{
				add GUN_SPREAD 4
				setplayer[].kickback_pic 1
				}
			}			
		}
		else
		{
		ifg KICKBACKPIC 3
		 ifl KICKBACKPIC 6
			{
			ifand BITS_PRESS 64 ifg PISTOLMAG 0 
				{
				add GUN_SPREAD 8
				setplayer[].kickback_pic 1
				}
			}			
		}
	set GUNMAG PISTOLMAG
	ifand MIKKO_UPGRADE 1 set MAXPISTOLMAG 40 else set MAXPISTOLMAG 20
		ife KICKBACKPIC 2 
			{ shoot 13772 set gunsmoke_angle 96  state spawn_gunsmoke 
			sub PISTOLMAG 1
			add GUN_SPREAD 8
			set GUN_RECOIL 10
			espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MSPISTOL_FIRE }
			ife KICKBACKPIC 3 ifvarl GUNMAG 6 sound MAG_LOW
			
		ife KICKBACKPIC 16 { sound MSPISTOL_MAGOUT ife PISTOLMAG 0 { ifand MIKKO_UPGRADE 1 spawn 3720 else spawn 7103 } }
		
		
	ifl KICKBACKPIC 7
	 ife player[].weapon_pos 0
		{
		state spawn_lasersite
		seta[RETURN].x hitx
		seta[RETURN].y hity
		seta[RETURN].z hitz
		ifand SPECIALIST_CUSTOM[4] 1073741824 seta[RETURN].pal 1
		else ifand SPECIALIST_CUSTOM[4] 2147483648 seta[RETURN].pal 8
		else seta[RETURN].pal 0
		}

  	ifl PISTOLMAG 1
     ife player[].weapon_pos 0
   	  ife KICKBACKPIC 0
		{
		getp[].ammo_amount 1 CUR_AMMO
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
		
	ife KICKBACKPIC 24 sound GRAB_MAG
	
	ife KICKBACKPIC 35
		{
		sound MSPISTOL_MAGIN
		ifn CUR_AMMO 0
			{
			ife PISTOLMAG 0 set RELOAD_TYPE 1 else set RELOAD_TYPE 0
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}
		}
	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[30] 2 // Using the MS-Corp assault shotgun?
{
set WEAPON2_TILE 13424
set W2_AMMO_TILE 7077
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 4
smaxammo 2 100

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 63
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 7
set WEAPON2_HOLDDELAY 32
set WEAPON2_FLAGS 0
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 5
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 70
	set GUN_ACCURACY 32
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUNMAG SHOTGUNBOXMAG
	set MAX_SHOTGUNBOXMAG 10
	
	ife KICKBACKPIC 0
	ifand BITS_PRESS 4
		  ifg SHOTGUNBOXMAG 0 
		   ife player[].ammo_amount 2 0
		   ifn NEED_TO_FIRE 1
			{ 
			getp[].ammo_amount 2 TEMP2
			add TEMP2 1
			setp[].ammo_amount 2 TEMP2 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MS_AS_FIRE }
	ife KICKBACKPIC 3
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	
			ife KICKBACKPIC 2 
				{
				set LAST_SHELL_FIRED 0
				sub SHOTGUNBOXMAG 1 
				getp[].ammo_amount 2 TEMP2
				add TEMP2 1
				setp[].ammo_amount 2 TEMP2 
				set gunsmoke_angle 96
				state spawn_gunsmoke
				}
			ife KICKBACKPIC 3 state SHOTGUN_SHELL
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 10 state JMOVESOUND2

			ife KICKBACKPIC 23 { sound JACKH_MAGOUT ife SHOTGUNBOXMAG 0 spawn 7111 }
					
			ife KICKBACKPIC 43 
			{
			sound JACKH_MAGIN
			set TEMP5 SHOTGUNBOXMAG
			set TEMP6 MAX_SHOTGUNBOXMAG
			sub TEMP6 TEMP5
				ifg TEMP6 CUR_AMMO
					{
					add SHOTGUNBOXMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 TEMP4 sub TEMP4 TEMP6 setp[].ammo_amount 2 TEMP4
					set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
					}
			}
			
		ifl SHOTGUNBOXMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
			}
			
	}
}
else // USING THE MSC-12?
ife SPECIALIST_EQUIPMENT[85] 2
{
smaxammo 2 100
set WEAPON2_TILE 22692
set W2_AMMO_TILE 7077
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 36
set WEAPON2_FIREDELAY 2
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 12
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 
set WEAPON2_TOTALTIME 18
set WEAPON2_FIRESOUND 4

ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 80
	set GUN_AMMO_TYPES 5
	set GUN_ACCURACY 18
	set GUN_MAX_SPREAD 42
	set GUN_SIZE 2
	set GUN_HANDS 2
		set GUNMAG SHOTGUNMAG
		
	ifl SHOTGUNMAG 0 set SHOTGUNMAG 0
	ifl SHOTGUNBOXMAG 0 set SHOTGUNBOXMAG 0
		
	ife KICKBACKPIC 3 add GUN_SPREAD 24
	
		ife player[].weapon_pos 0
		 ifl KICKBACKPIC 19
				{
				state spawn_lasersite
				seta[RETURN].x hitx
				seta[RETURN].y hity
				seta[RETURN].z hitz		
				ifand SPECIALIST_CUSTOM[6] 1073741824 seta[RETURN].pal 1
				else ifand SPECIALIST_CUSTOM[6] 2147483648 seta[RETURN].pal 8
				else seta[RETURN].pal 0
				}
		
	ifand GUNFIREMODE_2 8 // Using MSC-12's second tube?
		{
		ifand AMMO_TYPES[15] 1
			{
			set WEAPON_TYPE 8
			set WEAPON2_SHOOTS 9361
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE }
			ife explosive_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 1 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
			}
		else
		ifand AMMO_TYPES[15] 4  
			{
			set WEAPON_TYPE 9
			ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
			set WEAPON2_SHOOTS 6826
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE }
			ife flechete_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 4 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
			}
		else
		ifand AMMO_TYPES[15] 64  
			{
			set WEAPON_TYPE 0
			set WEAPON2_SHOOTS RMAXREVOLVERSHOT
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MAGNUM_SHOTGUN }
			ife magnum_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 64 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
			}
		else
		ifand AMMO_TYPES[15] 1024 
			{
			set WEAPON_TYPE 8
			set WEAPON2_SHOOTS 22536
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP DRAGONS_BR_FIRE }
			ife dragon_shells 0 ife SHOTGUNBOXMAG 0 { xorvar AMMO_TYPE_2 1024 setarray AMMO_TYPES[15] AMMO_TYPE_2 }
			}
		else
			{
			set WEAPON_TYPE 2
			set WEAPON2_SHOOTS 2613
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MSC12_FIRE }
			}
		
		ife KICKBACKPIC 0
		{
		ifand BITS_PRESS 4
			{
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			clamp HOLD_AMMO_TEMP 0 100
			  ifg SHOTGUNBOXMAG 0 
			   ifl HOLD_AMMO_TEMP 1
				{ 
				add HOLD_AMMO_TEMP 1
				setp[].ammo_amount 2 HOLD_AMMO_TEMP 
				set NEED_TO_FIRE 1
				}
			}
		}

		ife KICKBACKPIC 5
		 ife NEED_TO_FIRE 1
			{
			getp[].ammo_amount 2 HOLD_AMMO_TEMP 
			sub HOLD_AMMO_TEMP 1
			clamp HOLD_AMMO_TEMP 0 100
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			set NEED_TO_FIRE 0
			}
		
		ife NEEDS_PUMP 1 set MAX_SHOTGUNBOXMAG 7 else set MAX_SHOTGUNBOXMAG 8
		ifg SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG set SHOTGUNBOXMAG MAX_SHOTGUNBOXMAG
		ife SHOTGUNBOXMAG 0 ife KICKBACKPIC 0 set NEEDS_PUMP 1
		ife player[].reloading 1
			{
			ife KICKBACKPIC 22 
				{ 
				sound KSG_12_INSERT 
				add SHOTGUNBOXMAG 1 
				
				ifand AMMO_TYPES[15] 1
					{
					set LAST_SHELL_FIRED_2 1
					sub explosive_shells 1
					}
				else
				ifand AMMO_TYPES[15] 4  
					{
					set LAST_SHELL_FIRED_2 4
					sub flechete_shells 1
					}
				else
				ifand AMMO_TYPES[15] 64  
				    {
					set LAST_SHELL_FIRED_2 64
					sub magnum_shells 1
					}
				else
				ifand AMMO_TYPES[15] 1024  
				    {
					set LAST_SHELL_FIRED_2 1024
					sub dragon_shells 1
					}
				else
					{
					set LAST_SHELL_FIRED_2 0
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					sub HOLD_AMMO_TEMP 1 
					clamp HOLD_AMMO_TEMP 0 100
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
			}
		else ife player[].reloading 0
			{
			ife KICKBACKPIC 9 sound MSC12_PUMP
			ife KICKBACKPIC 0 ifg SHOTGUNBOXMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 6 
			}
		
			ife KICKBACKPIC 2 				
				{
				sub SHOTGUNBOXMAG 1 
					ife AMMO_TYPES[15] 0
					{
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					clamp HOLD_AMMO_TEMP 0 100
					add HOLD_AMMO_TEMP 1 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
			ife KICKBACKPIC 3
				{
				ifand GUNFIREMODE_2 8
					{
					ifand AMMO_TYPES[15] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				else
					{
					ifand AMMO_TYPES[15] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				}
			ife KICKBACKPIC 4 { set gunsmoke_angle 96 state spawn_gunsmoke }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 16 
			 ife player[].reloading 0 
				{
				ife NEEDS_PUMP 1 set NEEDS_PUMP 0
				else // If it didn't need pumping, eject a shell
					state SHOTGUN_SHELL2
				}
		}
	else // using first tube
		{
		ifand AMMO_TYPES[CURWEAP] 1
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 9361
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE }
		ife explosive_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		ifand AMMO_TYPES[CURWEAP] 4  
		{
		set WEAPON_TYPE 9
		ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
		set WEAPON2_SHOOTS 6826
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE }
		ife flechete_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		ifand AMMO_TYPES[CURWEAP] 64  
		{
		set WEAPON_TYPE 0
		set WEAPON2_SHOOTS RMAXREVOLVERSHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MAGNUM_SHOTGUN } 
		ife magnum_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 64 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		ifand AMMO_TYPES[CURWEAP] 1024  
		{
		set WEAPON_TYPE 8
		set WEAPON2_SHOOTS 22536
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP DRAGONS_BR_FIRE } 
		ife dragon_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1024 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
		}
		else
		{
		set WEAPON_TYPE 2
		set WEAPON2_SHOOTS 2613
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MSC12_FIRE } 
		}
		
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP  
		clamp HOLD_AMMO_TEMP 0 100
		  ifg SHOTGUNMAG 0 
		   ife HOLD_AMMO_TEMP 0
			{ 
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			set NEED_TO_FIRE 1
			setp[].kickback_pic 1
			}
		}
	}

	ife KICKBACKPIC 5
	ife NEED_TO_FIRE 1
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP 
		sub HOLD_AMMO_TEMP 1
		clamp HOLD_AMMO_TEMP 0 100
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 0
		}

		ife NEEDS_PUMP 1 set MAX_SHOTGUNMAG 7 else set MAX_SHOTGUNMAG 8
		ifg SHOTGUNMAG MAX_SHOTGUNMAG set SHOTGUNMAG MAX_SHOTGUNMAG
		ife SHOTGUNMAG 0 ife KICKBACKPIC 0 set NEEDS_PUMP 1
		ife player[].reloading 1
			{
			ife KICKBACKPIC 22 
				{ 
				sound KSG_12_INSERT
				add SHOTGUNMAG 1 
				
				ifand AMMO_TYPES[2] 1
					{
					set LAST_SHELL_FIRED 1
					sub explosive_shells 1
					}
				else
				ifand AMMO_TYPES[2] 4  
					{
					set LAST_SHELL_FIRED 4
					sub flechete_shells 1
					}
				else
				ifand AMMO_TYPES[2] 64  
					{
					set LAST_SHELL_FIRED 64
					sub magnum_shells 1
					}
				else
				ifand AMMO_TYPES[2] 1024  
					{
					set LAST_SHELL_FIRED 1024
					sub dragon_shells 1
					}
				else
					{
					set LAST_SHELL_FIRED 0
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					clamp HOLD_AMMO_TEMP 0 100
					sub HOLD_AMMO_TEMP 1 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
			}
		else ife player[].reloading 0
			{
			ife KICKBACKPIC 9 sound MSC12_PUMP
			ife KICKBACKPIC 0 ifg SHOTGUNMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 6 
			}
			ife KICKBACKPIC 2 				
				{
				sub SHOTGUNMAG 1 
				
				ifand AMMO_TYPES[2] 1 set LAST_SHELL_FIRED 1
				else
				ifand AMMO_TYPES[2] 4 set LAST_SHELL_FIRED 4
				else
				ifand AMMO_TYPES[2] 64 set LAST_SHELL_FIRED 64
				else
				ifand AMMO_TYPES[2] 1024 set LAST_SHELL_FIRED 1024
				else set LAST_SHELL_FIRED 0
				
								ife AMMO_TYPE 0
									{
									getp[].ammo_amount 2 HOLD_AMMO_TEMP
									add HOLD_AMMO_TEMP 1 
									setp[].ammo_amount 2 HOLD_AMMO_TEMP
									}
				}
			ife KICKBACKPIC 3
				{
				ifand GUNFIREMODE_2 8
					{
					ifand AMMO_TYPES[15] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				else
					{
					ifand AMMO_TYPES[CURWEAP] 64 { set gun_pushback_power -128 state gun_pushback }
					else set gun_pushback_power -32 state gun_pushback 
					}
				}
			ife KICKBACKPIC 4 { set gunsmoke_angle 96 state spawn_gunsmoke }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
			ife KICKBACKPIC 16 
			 ife player[].reloading 0 
				{
				ife NEEDS_PUMP 1 set NEEDS_PUMP 0
				else // If it didn't need pumping, eject a shell
				state SHOTGUN_SHELL
				}
			}
		}
}
else 
ife SPECIALIST_EQUIPMENT[68] 2 // Using Gold semi-shotgun?
{
set WEAPON2_TILE 19821
set W2_AMMO_TILE 7077
setarray AMMO_AMOUNT[2] 6
setarray WEAPON_SPECIAL[2] 0
smaxammo 2 80

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 28
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 5
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 17408
set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

ife CURWEAP 2
	{
	set WEAPON_TYPE 3
		set MAX_SHOTGUNMAG 8
		clamp SHOTGUNMAG 0 MAX_SHOTGUNMAG
		set GUNMAG SHOTGUNMAG
		set GUN_VOLUME 70
		set GUN_SIZE 1
		set GUN_HANDS 2
		set GUN_ACCURACY 16
		set GUN_MAX_SPREAD 48
		set GUN_AMMO_TYPES 0
		
		set WEAPON2_SHOOTS GOLDEN_SHOT_LOW
		set WEAPON2_FIRESOUND 4
		
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MIK_GOLD_SHOTGUN }
		
		ife KICKBACKPIC 0
		{
		ifand BITS_PRESS 4
			  ifg SHOTGUNMAG 0 
			   ife player[].ammo_amount 2 0
				{ 
				getp[].ammo_amount 2 HOLD_AMMO_TEMP
				add HOLD_AMMO_TEMP 1
				clamp HOLD_AMMO_TEMP 0 100
				setp[].ammo_amount 2 HOLD_AMMO_TEMP
				set NEED_TO_FIRE 1
				setp[].kickback_pic 1
				}
		}
		ife KICKBACKPIC 4
		{
		add GUN_SPREAD 16
		ife NEED_TO_FIRE 1
			{
			getp[].ammo_amount 2 HOLD_AMMO_TEMP 
			sub HOLD_AMMO_TEMP 1
			clamp HOLD_AMMO_TEMP 0 100
			setp[].ammo_amount 2 HOLD_AMMO_TEMP
			set NEED_TO_FIRE 0
			}
		}
		ife player[].reloading 1
			{
			ife KICKBACKPIC 20 
				{ 
				sound MSSHOTGUN_INS 
				add SHOTGUNMAG 1 
				getp[].ammo_amount 2 HOLD_AMMO_TEMP
				sub HOLD_AMMO_TEMP 1 
				clamp HOLD_AMMO_TEMP 0 100
				setp[].ammo_amount 2 HOLD_AMMO_TEMP
				}
			}
			else
			{
			ife KICKBACKPIC 0 ifg SHOTGUNMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 8 
			ife KICKBACKPIC 2 
				{
				sub SHOTGUNMAG 1
				ife AMMO_TYPES[CURWEAP] 0
					{
					getp[].ammo_amount 2 HOLD_AMMO_TEMP
					add HOLD_AMMO_TEMP 1 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					}
				}
		ife KICKBACKPIC 3 
		{ set gunsmoke_angle 64 state spawn_gunsmoke setprojectile[3761].pal 40 eshoot 3761 setprojectile[3761].pal 0 }
		ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		   }	   
	}
}
else // Using MS-Corp standard shotgun?
{
ifand MIKKO_UPGRADE 32 set WEAPON2_TILE 6977 else set WEAPON2_TILE 7068

set W2_AMMO_TILE 7077
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0
smaxammo 2 80

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 28
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND MSSHOTGUN_PUMP
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

ife CURWEAP 2
	{
	ife NEEDS_PUMP 1 set MAX_SHOTGUNMAG 10 else set MAX_SHOTGUNMAG 11
	set GUNMAG SHOTGUNMAG
	set GUN_VOLUME 70
	set GUN_SIZE 1
	set GUN_HANDS 2
	ifand GUNFIREMODE 256 
	{
	ifand MIKKO_UPGRADE 32 set GUN_ACCURACY 16 else
	set GUN_ACCURACY 64
	}
	else
	set GUN_ACCURACY 16
	set GUN_AMMO_TYPES 5
	
	ifand AMMO_TYPES[CURWEAP] 1
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 9361
	set WEAPON2_FIRESOUND EXPL_SHELL_FIRE
	ife explosive_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	ifand AMMO_TYPES[CURWEAP] 4  
	{
	set WEAPON_TYPE 9
	ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON2_SHOOTS 6816 else
	set WEAPON2_SHOOTS 6826
	set WEAPON2_FIRESOUND FLECH_SHELL_FIRE
	ife flechete_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	ifand AMMO_TYPES[CURWEAP] 64
	{
	set WEAPON_TYPE 0
	set WEAPON2_SHOOTS RMAXREVOLVERSHOT
	set WEAPON2_FIRESOUND MAGNUM_SHOTGUN
	ife magnum_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 64 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	ifand AMMO_TYPES[CURWEAP] 1024
	{
	set WEAPON_TYPE 8
	set WEAPON2_SHOOTS 22536
	set WEAPON2_FIRESOUND DRAGONS_BR_FIRE
	ife dragon_shells 0 ife SHOTGUNMAG 0 { xorvar AMMO_TYPE 1024 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
	}
	else
	{
	set WEAPON_TYPE 2
	setarray AMMO_TYPES[CURWEAP] 0
	set WEAPON2_SHOOTS 2613
	set WEAPON2_FIRESOUND MSSHOTGUN_FIRE
	}
	
	ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 4
		  ifg SHOTGUNMAG 0 
		   ife player[].ammo_amount 2 0
			{ 
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			clamp HOLD_AMMO_TEMP 0 100
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			set NEED_TO_FIRE 1
			setp[].kickback_pic 1
			}
	}
	ife KICKBACKPIC 5
	ife NEED_TO_FIRE 1
		{
		getp[].ammo_amount 2 HOLD_AMMO_TEMP 
		sub HOLD_AMMO_TEMP 1
		clamp HOLD_AMMO_TEMP 0 100
		setp[].ammo_amount 2 HOLD_AMMO_TEMP 
		set NEED_TO_FIRE 0
		}
	ife SHOTGUNMAG 0 ife KICKBACKPIC 0 set NEEDS_PUMP 1
	ife player[].reloading 1
		{
		ife KICKBACKPIC 20 
			{ 
			sound MSSHOTGUN_INS 
			add SHOTGUNMAG 1 
			ifand AMMO_TYPES[CURWEAP] 1 { set LAST_SHELL_FIRED 1 sub explosive_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 4 { set LAST_SHELL_FIRED 4 sub flechete_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 64 { set LAST_SHELL_FIRED 64 sub magnum_shells 1 }
			else ifand AMMO_TYPES[CURWEAP] 1024 { set LAST_SHELL_FIRED 1024 sub dragon_shells 1 }
			else
				{
				set LAST_SHELL_FIRED 0
				getp[].ammo_amount 2 HOLD_AMMO_TEMP
				sub HOLD_AMMO_TEMP 1 
				clamp HOLD_AMMO_TEMP 0 100
				setp[].ammo_amount 2 HOLD_AMMO_TEMP
				}
			}
		}
		else
		{
		ife KICKBACKPIC 0 ifg SHOTGUNMAG 0 ife NEEDS_PUMP 1 setp[].kickback_pic 8 
		ife KICKBACKPIC 2 
			{
			sub SHOTGUNMAG 1
			ife AMMO_TYPES[CURWEAP] 0
				{
				getp[].ammo_amount 2 HOLD_AMMO_TEMP
				add HOLD_AMMO_TEMP 1 
				setp[].ammo_amount 2 HOLD_AMMO_TEMP
				}
			}
	    ife KICKBACKPIC 3 
		{ ifand GUNFIREMODE 256 { state SHOTGUN_SHELL setp[].kickback_pic 1  xorvar GUNFIREMODE 256 } set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 24 
			{
			ife NEEDS_PUMP 1 set NEEDS_PUMP 0
			else // If it didn't need pumping, eject a shell
			state SHOTGUN_SHELL	
			}
	   }
	}
}

// MACHINEGUN
ife SPECIALIST_EQUIPMENT[21] 2 // MS-CORP suppressed SMG
{
set WEAPON3_TILE 13354
set W3_AMMO_TILE 6642
setarray WEAPON_SPECIAL[3] 0
setarray AMMO_AMOUNT[3] 60
smaxammo 3 400

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 40
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT


ife CURWEAP 3
{
	set GUN_VOLUME 2
	set WEAPON_TYPE 1
	set GUN_SIZE 1
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set MAXMGUNMAG 50
	set GUNMAG MGUNMAG
	set GUN_MAX_SPREAD 32
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MS_AP_SMG }
	
	ifand GUNFIREMODE 16384
		{
		ifg KICKBACKPIC 6 xorvar GUNFIREMODE 16384
		set GUN_ACCURACY 8
		set WEAPON3_FLAGS 0
		
		ife KICKBACKPIC 1 set GUN_RECOIL 5
		
		ife KICKBACKPIC 2
			{ 
			add GUN_SPREAD 4
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
		
		}
		else
		{
		set GUN_ACCURACY 32
		set WEAPON3_FLAGS 68
		
		ife KICKBACKPIC 1 set GUN_RECOIL 5
		ife KICKBACKPIC 2
			{ 
			add GUN_SPREAD 5
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
		
		}
		ife KICKBACKPIC 13 state JMOVESOUND2
		ife KICKBACKPIC 18
			{
			ife MGUNMAG 0 spawn 3756
			soundonce MSRIFLE_MAGOUT
			}
		ife KICKBACKPIC 32
			{
			soundonce MSRIFLE_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}


	 ifl MGUNMAG 1
	  ife KICKBACKPIC 0
		   ife player[].weapon_pos 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}

	}
}
else 
ife SPECIALIST_EQUIPMENT[47] 2 // MDF Battle rifle
{
set WEAPON3_TILE 15913
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 7078
setarray AMMO_AMOUNT[3] 20
smaxammo 3 200

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 5
set WEAPON3_HOLDDELAY 1

set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 42
set WEAPON3_CLIP 0
set WEAPON3_SPAWN 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_INITIALSOUND 4

set WEAPON3_SHOOTS RMAXREVOLVERSHOT
set WEAPON3_FIRESOUND 4

	ife CURWEAP 3
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 22
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUNMAG MGUNMAG
	set MAXMGUNMAG 20
	set GUN_MAX_SPREAD 48
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MS_BRIFLE_FIRE }
	
	ifand GUNFIREMODE 16384
		{
		set WEAPON3_FLAGS 16384
		ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
		set GUN_ACCURACY 4
		ife KICKBACKPIC 2 add GUN_SPREAD 10
		ife KICKBACKPIC 3
			{ 
			set GUN_RECOIL 8
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
		ife KICKBACKPIC 4
			{ 
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}
		}
		else
		{
		set WEAPON3_FLAGS 0
		set GUN_ACCURACY 8
		ife KICKBACKPIC 2 add GUN_SPREAD 20
		ife KICKBACKPIC 3 set GUN_RECOIL 14
		ife KICKBACKPIC 4
			{ 
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
		}
		ife KICKBACKPIC 10 
			{ 
			sound MS_BRIFLE_REL ife MGUNMAG 0 spawn 6781
			}				
		ife KICKBACKPIC 28 
			{
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
  ifl MGUNMAG 1
   ife KICKBACKPIC 0
	   ife player[].weapon_pos 0
		{
   		ifn CUR_AMMO 0
   			{
   			setp[].reloading 1
   			setp[].kickback_pic 6
			}
		}
   }
}
else // MS CORP RIFLE
{
set WEAPON3_TILE 7069
setarray WEAPON_SPECIAL[3] 64
set W3_AMMO_TILE 7078
setarray AMMO_AMOUNT[3] 40
smaxammo 3 300

set WEAPON3_FIREDELAY 3
set WEAPON3_TOTALTIME 4
set WEAPON3_HOLDDELAY 1

set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 36
set WEAPON3_CLIP 0
set WEAPON3_SPAWN 0
set WEAPON3_FLAGS 76
set WEAPON3_RELOADSOUND1 4
set WEAPON3_FIRESOUND 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_INITIALSOUND 4

	ife CURWEAP 3
	{
	set GUN_VOLUME 9
	set GUN_ACCURACY 16
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUN_MAX_SPREAD 24
	set GUNMAG MGUNMAG
	ifand MIKKO_UPGRADE 8 set MAXMGUNMAG 60 else set MAXMGUNMAG 25
	
	ife SHOOT_MODE 1
		{
		set WEAPON_TYPE 1
		set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MSRIFLE_AP }
		}
	else
	ife SHOOT_MODE 2
		{
		ifand MIKKO_UPGRADE 16 nullop else set SHOOT_MODE 0 // failsafe in case upgrade gets taken away
		set WEAPON_TYPE 2
		set WEAPON3_SHOOTS HOLLOW_POINT_SHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MSRIFLE_HP }
		}
	else
		{
		set WEAPON_TYPE 0
		set WEAPON3_SHOOTS MSCORP_SHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 647 }
		}
	
		ife KICKBACKPIC 2 
			{ 
			add GUN_SPREAD 8
			set gunsmoke_angle 64 
			state spawn_gunsmoke 
			set GUN_RECOIL 8 
			}
		ife KICKBACKPIC 10 
			{ 
			sound MSRIFLE_MAGOUT
			ife MGUNMAG 0
				{
				ifand MIKKO_UPGRADE 8 spawn 7111 else spawn 6781
				}
			}
					
		ife KICKBACKPIC 24 
			{
			sound MSRIFLE_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}

  ifl MGUNMAG 1
   ife KICKBACKPIC 0
	   ife player[].weapon_pos 0
		{
   		ifn CUR_AMMO 0
   			{
   			setp[].reloading 1
   			setp[].kickback_pic 6
			}
		}
   }
}
   
// RPG
set WEAPON4_TILE 7070
set W4_AMMO_TILE 7079
setarray AMMO_AMOUNT[4] 6

set WEAPON4_FIRESOUND FIREBALL_FIRE
set WEAPON4_SHOOTS 7047
set WEAPON4_RELOAD 30
set WEAPON4_FIREDELAY 4
set WEAPON4_TOTALTIME 10
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0

ife CURWEAP 4 
	{ 
	set WEAPON_TYPE 4
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 30 
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	set GUNMAG -1
	}

// PIPEBOMB
set WEAPON5_TILE 7075
set W5_AMMO_TILE 7074
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 18
set WEAPON5_TOTALTIME 29
set WEAPON5_HOLDDELAY 22
set PIPEBOMB_CONTROL 2

ife CURWEAP 5 
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	}

ife SHOOTGRENADE THISACTOR { shoot GRENADE set SHOOTGRENADE -1 }

// SHRINKER
ife SPECIALIST_EQUIPMENT[59] 2 // AWMS-Corp sniper
{
smaxammo 6 40
set WEAPON6_TILE 18011
set W6_AMMO_TILE 18010
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 8

set WEAPON6_FIREDELAY 2
set WEAPON6_TOTALTIME 36
set WEAPON6_INITIALSOUND 4
set WEAPON6_SHOOTS RIFLESHOT
set WEAPON6_FIRESOUND AWMS_FIRE1
set WEAPON6_SHOTSPERBURST 1
set WEAPON6_FLAGS 0

ife CURWEAP 6
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 80
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	ife SCOPE 1 set GUN_ACCURACY 2
	else set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 64
	set GUN_AMMO_TYPES 0
	
		ife KICKBACKPIC 3 
		{ set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { add GUN_SPREAD 32 getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 10 { ife SCOPE 1 { set NEEDS_PUMP 1 set SCOPE 0 } sound AUG_MOVEMENT }
		ife KICKBACKPIC 15 sound AWMS_COCK
		ife KICKBACKPIC 34 { ife NEEDS_PUMP 1 { set SCOPE 1 set NEEDS_PUMP 0  } sound AUG_MOVEMENT }
	
	}
}
else // materia gun
{
smaxammo 6 50
set WEAPON6_TILE 7071
set W6_AMMO_TILE 7080
setarray WEAPON_SPECIAL[6] 512
setarray AMMO_AMOUNT[6] 5

set WEAPON6_FIREDELAY 16
set WEAPON6_TOTALTIME 22
set WEAPON6_INITIALSOUND 4
set WEAPON6_SHOOTS 7163
set WEAPON6_FIRESOUND GREMGUN_FIRE
set WEAPON6_SHOTSPERBURST 1
set WEAPON6_FLAGS 0
setplayer[THISACTOR].gotweapon 11 0

ife CURWEAP 6
	{
	set WEAPON_TYPE 8
	set GUN_VOLUME 40
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	ife KICKBACKPIC 1 sound GREMGUN_CHARGE
	
	ifand BITS_PRESS 64
	 ife KICKBACKPIC_2 0
	  ife player_in_vehicle 0
	  ifg player[].ammo_amount 6 1
		{
		set KICKBACKPIC_2 1
		sound GREMGUN_CHARGE
		}
		
	ifg KICKBACKPIC_2 0
		{
		add KICKBACKPIC_2 1
		ife KICKBACKPIC_2 14 
			{
			setplayer[].kickback_pic 15
			set WEAPON6_SHOOTS 7159
			set WEAPON6_FIRESOUND GREMGUN_ICE
			}
		ifg KICKBACKPIC_2 22 
			{
			set WEAPON6_SHOOTS 7163
			set WEAPON6_FIRESOUND GREMGUN_FIRE			
			set KICKBACKPIC_2 0
			}
		}
	
	}
}

// DEVISTATOR
set WEAPON7_TILE 7072
set W7_AMMO_TILE 7081
setarray AMMO_AMOUNT[7] 2

set WEAPON7_FIREDELAY 70
set WEAPON7_TOTALTIME 90
set WEAPON7_INITIALSOUND 978
set WEAPON7_SHOOTS REDM_BLAST
set WEAPON7_FIRESOUND 979
set WEAPON7_SHOTSPERBURST 1
set WEAPON7_FLAGS 2

ife CURWEAP 7
	{
	set WEAPON_TYPE 8
	set GUN_VOLUME 90
	set GUN_SIZE 2
	setarray WEAPON_SPECIAL[7] 0
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	ifand MIKKO_UPGRADE 64
	{
	ifg KICKBACKPIC 60
	 ifl KICKBACKPIC 69 
	  {
	  ifand BITS_PRESS 64
		{
		soundonce MAGIC_FIELD_DOWN
		setp[].kickback_pic 80
		}
	  else
	  ifand BITS_PRESS 4
		{
		soundonce REDMGUN_HOLD
		setp[].kickback_pic 66
		}
	  }
	}
    ife KICKBACKPIC 71
		{
		set gun_pushback_power -128
		state gun_pushback
		}
	}
	
// TRIPBOMB
set WEAPON8_TILE 27
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328

ife CURWEAP 8 
	{
	set WEAPON_TYPE 6
	set GUN_SIZE 0
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	}

// FREEZER
ife SPECIALIST_EQUIPMENT[33] 2 // Using the nailgun?
	{
	set WEAPON9_TILE 13439
	setarray WEAPON_SPECIAL[9] 0
	set W9_AMMO_TILE 6853
	setarray AMMO_AMOUNT[9] 50
	ife ARTIFACTS_LOADOUT[CHAR] 7 set WEAPON9_SHOOTS 6816 else
	set WEAPON9_SHOOTS 6826
	set WEAPON9_FIREDELAY 2
	set WEAPON9_TOTALTIME 4
	set WEAPON9_HOLDDELAY 0 
	set WEAPON9_FIRESOUND 4
	set WEAPON9_INITIALSOUND 0
	set WEAPON9_FLAGS 22

	ife CURWEAP 9 
		{
		set WEAPON_TYPE 9
		set GUN_VOLUME 24
		set GUN_ACCURACY 16
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP NAILGUN2_FIRE }
		set GUN_SIZE 1
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		set GUNMAG -1 
		}
		
	}
	else
ife SPECIALIST_EQUIPMENT[19] 2 // Using the MDF plasma gun?
	{
	set WEAPON9_TILE 7037
	set W9_AMMO_TILE 7082
	setarray WEAPON_SPECIAL[9] 0
	setarray AMMO_AMOUNT[9] 50

	set WEAPON9_SHOOTS MDF_PLASMA
	set WEAPON9_FIREDELAY 2
	set WEAPON9_TOTALTIME 3
	set WEAPON9_RELOAD 26
	set WEAPON9_FIRESOUND 4
	set WEAPON9_INITIALSOUND 0
	set WEAPON9_FLAGS 4

	ife CURWEAP 9
		{
		set WEAPON_TYPE 8
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MDF_FIRE }
		ifg GUN_HEAT[CURWEAP] 120
			{
			setp[].reloading 1
			soundonce AR73_OVERHEAT
			soundonce MDF_COOL_D
			setp[].kickback_pic 5
			}
		ifg GUN_HEAT[CURWEAP] 40
			{
			
			ifg KICKBACKPIC 10 { set gunsmoke_z 9144 set gunsmoke_angle 74 } 
			else { set gunsmoke_z 8644 set gunsmoke_angle 64 } 
			state spawn_gunsmoke_z
			}
		ife KICKBACKPIC 14 
			{ 
			set TEMP9 GUN_HEAT[CURWEAP]
			sub TEMP9 3
			setarray GUN_HEAT[CURWEAP] TEMP9
			ifl GUN_HEAT[CURWEAP] 20
				{
				stopsound AR73_OVERHEAT soundonce MDF_READY setarray GUN_HEAT[CURWEAP] 0
				}
			}
			ife KICKBACKPIC 15 
			{
			ifg GUN_HEAT[CURWEAP] 20 setp[].kickback_pic 14			
			}
			ife KICKBACKPIC 17 soundonce MDF_READY
		set GUN_SIZE 1
		set GUN_HANDS 2
		set GUN_VOLUME 8
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 1024
		set GUNMAG -1
		getp[].ammo_amount 9 TEMP
		ifg TEMP 0 soundonce MPLASMA_IDLE
		}
	}

else
	{
	set WEAPON9_TILE 7073
	set W9_AMMO_TILE 7082
	setarray WEAPON_SPECIAL[9] 0
	setarray AMMO_AMOUNT[9] 50

	set WEAPON9_SHOOTS MPLASMA
	set WEAPON9_FIREDELAY 2
	set WEAPON9_TOTALTIME 3
	set WEAPON9_HOLDDELAY 0 
	set WEAPON9_FIRESOUND 4
	set WEAPON9_INITIALSOUND 0
	set WEAPON9_FLAGS 4

	ife CURWEAP 9
		{
		set WEAPON_TYPE 8
		set GUN_SIZE 1
		set GUN_VOLUME 8
		set GUN_HANDS 2
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUNMAG -1
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MPLASMA_FIRE }
		getp[].ammo_amount 9 TEMP
		ifg TEMP 0 soundonce MPLASMA_IDLE
		}
	}

// EXPANDER
ife SPECIALIST_EQUIPMENT[59] 2 // AWMS sniper rifle
{
smaxammo 11 15
set W11_AMMO_TILE 18009
setarray AMMO_AMOUNT[11] 3

set WEAPON11_FIREDELAY 2
set WEAPON11_TOTALTIME 36
set WEAPON11_INITIALSOUND 4
set WEAPON11_SHOOTS BIGRIFLESHOT
set WEAPON11_FIRESOUND AWMS_FIRE2
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_FLAGS 0

ife CURWEAP 11
	{
	set WEAPON_TYPE 1
	set GUN_VOLUME 160
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	ife SCOPE 1 set GUN_ACCURACY 2
	else set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 64
	set GUN_AMMO_TYPES 0
	
		ife KICKBACKPIC 3 
		{ set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 15 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { add GUN_SPREAD 64 getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP }
		ife KICKBACKPIC 10 { ife SCOPE 1 { set NEEDS_PUMP 1 set SCOPE 0 } sound AUG_MOVEMENT }
		ife KICKBACKPIC 15 sound AWMS_COCK
		ife KICKBACKPIC 34 { ife NEEDS_PUMP 1 { set SCOPE 1 set NEEDS_PUMP 0  } sound AUG_MOVEMENT }
	}
}
else
{
smaxammo 11 50
set W11_AMMO_TILE 7080
setarray AMMO_AMOUNT[11] 8

set WEAPON11_FIREDELAY 16
set WEAPON11_TOTALTIME 22
set WEAPON11_INITIALSOUND 4
set WEAPON11_SHOOTS 7159
set WEAPON11_FIRESOUND GREMGUN_ICE
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_FLAGS 0

ife CURWEAP 11
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 40
	set GUNMAG -1
	set GUN_ACCURACY 2
	set GUN_AMMO_TYPES 0
	ife KICKBACKPIC 1 sound GREMGUN_CHARGE
	}
}


}
ends

defstate PS_CULTIST
{
ife on_tripwire 1 action PCSTAND
ifaction ZERO action PCSTAND
ife FIRE_SUIT 1 ifaction PCSTAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction PCSTAND action JG_STAND
ife SPACE_SUIT 1 ifaction PCSTAND action SS_STAND

qputs 3 Medical Bag

qputs 6 Boots of Safety
qputs 75 Boots of Safety on

qputs 90 Blood Potion
qputs 12 Used Blood Potion!

qputs 101 Heat seeking Eye Glass 
qputs 106 Eye Glass on
qputs 107 Eye Glass off

qputs 89 Egyptian Breathing Mask

qputs 47 Mirror orb on
qputs 48 Mirror orb off
qputs 49 Mirror orb not found yet
qputs 51 Mirror orb
qputs 91 Mirror orb

qputs 88 Flying Pitchfork!
qputs 50 Flying Pitchfork not found yet!
qputs 52 Flying Pitchfork activated
qputs 53 Flying Pitchfork deactivated

qputs 102 We're gonna fry your ass, vile cultist!

ifp pboosted
	{
	getp[].steroids_amount TEMP ife TEMP 398 soundonce DRINKELIXER
	}
	
setp[].gotweapon 4 0
setp[].gotweapon 6 0
setp[].gotweapon 11 0

setp[].knuckle_incs 0

set C_ARM_1 15968
set C_ARM_2 12180

set CKNEE 7926
set CKEYCARDTILE 6888
set CKEYCARDTILE2 6891
set CKEYCARDTILE3 6892
set CTRIPBOMB 6890
set CDETON 2570
set CTIP 2578
set CPIPEBOMB 6828
set CHOLDING 9431
set CHOLDING_2 9431
set CHOLDING_3 12265

set CMEDIKIT 6377
set CSTEROIDS 6372
set CHOLODUKE 6373
set CJETPACK 6371

set CNVG 6387
set DISP_NVG 6387

set CSCUBA 6376
set CBOOTS 6375

set C_ARMOUR 115
set C_HEAVY_ARMOUR 115

set C_HAND_1 7895
set C_HAND_2 7896

set C_PISTOL_1 8987
set C_PISTOL_2 8987

set PMAX_STAMINA 100

set CIICON 6176

smaxammo 1 200
smaxammo 2 50
smaxammo 3 400
smaxammo 4 0
smaxammo 7 50
smaxammo 9 200
smaxammo 11 50

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set WEAPON_TYPE 0
	set GUNMAG -1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}


// PISTOL
set WEAPON1_TILE 22586
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 6847
setarray AMMO_AMOUNT[1] 20

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 30
set WEAPON1_HOLDDELAY 6
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_FIREDELAY 2
set WEAPON1_TOTALTIME 9
set WEAPON1_FLAGS 16448
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_FIRESOUND 4
set WEAPON1_SHOOTS ZRIFLESHOTU

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 6
	set GUN_ACCURACY 2
	set GUN_HANDS 1
	set GUN_MAX_SPREAD 64
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	set MAXPISTOLMAG 8
	ifg PISTOLMAG MAXPISTOLMAG set PISTOLMAG MAXPISTOLMAG
	set GUNMAG PISTOLMAG
		ife KICKBACKPIC 2 { set gunsmoke_angle 90 state spawn_gunsmoke }
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SAA_FIRE }
		ife KICKBACKPIC 3 { sub PISTOLMAG 1 add GUN_SPREAD 30 getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		
		ifg KICKBACKPIC 3
		 ifl KICKBACKPIC 10
			{
			ifand BITS_PRESS 4 ifg PISTOLMAG 0 setplayer[].kickback_pic 1
			}
		ife KICKBACKPIC 4 { sound R_HAMMER getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP  }
		ife KICKBACKPIC 5 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
		ife KICKBACKPIC 12 sound R_ROUT
		ife KICKBACKPIC 14 state revolver_eject
		ife KICKBACKPIC 18 
			{
			ifl CUR_AMMO MAXPISTOLMAG set PISTOLMAG CUR_AMMO else set PISTOLMAG MAXPISTOLMAG
			sound R_RIN
			}
		ife KICKBACKPIC 28 sound R_HAMMER
		
		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 10
			   	}
		   }

}

// SHOTGUN
set WEAPON2_TILE 7884
set W2_AMMO_TILE 6848
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_TOTALTIME 8
set WEAPON2_RELOAD 32
set WEAPON2_HOLDDELAY 0
set WEAPON2_FIREDELAY 2
set WEAPON2_INITIALSOUND 4
set WEAPON2_FLAGS 1088	
set WEAPON2_FIRESOUND 4
set WEAPON2_SHOOTS 0
set WEAPON2_SOUND2SOUND 4

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUNMAG SHOTGUNMAG
	set GUN_ACCURACY 64
	set GUN_AMMO_TYPES 1
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_MAX_SPREAD 0
	
	ife SHOTGUNMAG 0
	 ife KICKBACKPIC 0
		{
		setp[].reloading 1
		setp[].kickback_pic 6
		}
		
		ifand AMMO_TYPES[CURWEAP] 1
			{
			set WEAPON_TYPE 8
			set WEAPON2_SHOOTS 9361 
			ife KICKBACKPIC 14 ife explosive_shells 0 { xorvar AMMO_TYPE 1 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
			}
		else
		ifand AMMO_TYPES[CURWEAP] 4
			{
			set WEAPON_TYPE 9
			set WEAPON2_SHOOTS 6826
			ife KICKBACKPIC 14 ife flechete_shells 0 { xorvar AMMO_TYPE 4 setarray AMMO_TYPES[CURWEAP] AMMO_TYPE }
			}
		else
		    {
			set WEAPON_TYPE 2
			set WEAPON2_SHOOTS SHOTGUN
			}
		
			
	ifand GUNFIREMODE 256 
		{
		set WEAPON2_SHOTSPERBURST 2 
		set GUN_VOLUME 100
		ife KICKBACKPIC 3 
			{ getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP 
			ifand AMMO_TYPES[CURWEAP] 1 set gun_pushback_power -256 else set gun_pushback_power -96
			state gun_pushback
			}

		ife KICKBACKPIC 4 
			{ getp[].horiz TEMP add TEMP 20 setp[].horiz TEMP
		set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 5 
			{ getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
		ife KICKBACKPIC 6 
			{ getp[].horiz TEMP sub TEMP 20 setp[].horiz TEMP }
		
		}
		else 
		{
		set WEAPON2_SHOTSPERBURST 1
		set GUN_VOLUME 50
		ife KICKBACKPIC 3 
			{ getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP 
			ifand AMMO_TYPES[CURWEAP] 1 set gun_pushback_power -128 else set gun_pushback_power -48
			state gun_pushback
			}

		ife KICKBACKPIC 4 
			{ getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP
		set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 5 
			{ getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 
			{ getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
		}
	
	ife KICKBACKPIC 2
		{
		ifand AMMO_TYPES[CURWEAP] 1
			{
			ifand GUNFIREMODE 256
				{
				set GUN_VOLUME 140
				sub SHOTGUNMAG 2
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE
				shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361
				shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361
				}
				else
				{
				set GUN_VOLUME 70
				sub SHOTGUNMAG 1
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP EXPL_SHELL_FIRE
				shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361 shoot 9361
				}
			}
			else
		ifand AMMO_TYPES[CURWEAP] 4
			{
			ifand GUNFIREMODE 256
				{
				set GUN_VOLUME 140
				sub SHOTGUNMAG 2
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE
				shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826
				shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826
				}
				else
				{
				set GUN_VOLUME 70
				sub SHOTGUNMAG 1
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FLECH_SHELL_FIRE
				shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826 shoot 6826
				}
			}
			else
			{
			ifand GUNFIREMODE 256
				{
				set GUN_VOLUME 140
				sub SHOTGUNMAG 2
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SAWNOFF_FIRE
				shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN
				shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN
				}
				else
				{
				set GUN_VOLUME 70
				sub SHOTGUNMAG 1
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SAWNOFF_FIRE1
				shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN
				}
			}
		}
		
	ife KICKBACKPIC 12
		{
		ifand AMMO_TYPES[CURWEAP] 1
			{
			shoot EXSHELL
			ife SHOTGUNMAG 0 eshoot EXSHELL
			}
			else
		ifand AMMO_TYPES[CURWEAP] 4
			{
			shoot FL_SHELL
			ife SHOTGUNMAG 0 eshoot FL_SHELL
			}
			else
			{
			shoot 3761 
			ife SHOTGUNMAG 0 eshoot 3761 
			}
		ifand GUNFIREMODE 256 xorvar GUNFIREMODE 256 // If they fired a double shot reset to normal mode
		geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP
		}
		
	ife KICKBACKPIC 16 
		{ 
		ifand AMMO_TYPES[CURWEAP] 1 
			{
			ifg explosive_shells 1 { sub explosive_shells 2 set SHOTGUNMAG 2 }
			else { set explosive_shells 0 set SHOTGUNMAG 1 }
			}
		else ifand AMMO_TYPES[CURWEAP] 4
			{
			ifg flechete_shells 1 { sub flechete_shells 2 set SHOTGUNMAG 2 }
			else { set flechete_shells 0 set SHOTGUNMAG 1 }
			}
		else
			{
			getp[].ammo_amount 2 TEMP
			ifg TEMP 1 set SHOTGUNMAG 2 
			else set SHOTGUNMAG 1
			}
		sound SAWNOFF_LOAD 
		}
	ife KICKBACKPIC 12 sound SAWNOFF_COCK
} 	

// MACHINEGUN
set WEAPON3_TILE 7908
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 6849
setarray AMMO_AMOUNT[3] 100

set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 3
set WEAPON3_FIREDELAY 2
set WEAPON3_FIRESOUND 4
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_FLAGS 4
	

ife CURWEAP 3
	{
	set WEAPON_TYPE 2
	set GUNMAG -1
	set GUN_VOLUME 12
	set GUN_ACCURACY 24
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 2
	set GUN_MAX_SPREAD 0
	
		ifand AMMO_TYPES[CURWEAP] 2
		{
		set WEAPON_TYPE 7
		set WEAPON3_SHOOTS SILVERAMMOSHOT
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP TOMMYG_SFIRE }
		}
		else
		{
		set WEAPON_TYPE 2
		set WEAPON3_SHOOTS F45_CALIBRE
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP TOMMYG_FIRE }
		}
		
		ife KICKBACKPIC 2 
			{ 
			set GUN_RECOIL 10
			set gunsmoke_angle 64 state spawn_gunsmoke
			}	
	}

// RPG
set WEAPON4_TILE 3625
set W4_AMMO_TILE 3625
setarray AMMO_AMOUNT[4] 0

// PIPEBOMB
set WEAPON5_TILE 6331
set W5_AMMO_TILE 6331
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 21
set WEAPON5_HOLDDELAY 20
set PIPEBOMB_CONTROL 0

ife CURWEAP 5 
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	}

ife SHOOTDYNAMITE THISACTOR { shoot DYNAMITESTICK set SHOOTDYNAMITE -1 }

// SHRINKER
set WEAPON6_TILE 3625
set W6_AMMO_TILE 3625
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 0

// DEVISTATOR 
set WEAPON7_TILE 9406
set W7_AMMO_TILE 5984
setarray AMMO_AMOUNT[7] 5

	set WEAPON7_WORKSLIKE 7
	set WEAPON7_TOTALTIME 16
	set WEAPON7_HOLDDELAY 16
	set WEAPON7_FIREDELAY 5
	set WEAPON7_FIRESOUND 4
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_SHOOTS MISSILE
	set WEAPON7_FLAGS 4

	ife CURWEAP 7
		{
		set WEAPON_TYPE 4
		set GUNMAG -1
		set GUN_HANDS 2
		set GUN_VOLUME 60
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_SIZE 2
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 2 globalsound MISSILE_LAUNCH
		}
		
// TRIPBOMB
set WEAPON8_TILE 27
setarray AMMO_AMOUNT[8] 1

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_SIZE 0
	set GUN_HANDS 0
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}
		
// FREEZER
set WEAPON9_TILE 12094
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 5219
setarray AMMO_AMOUNT[9] 30
		
	set WEAPON9_FIREDELAY 2
	set WEAPON9_TOTALTIME 4
	set WEAPON9_HOLDDELAY 1
	set WEAPON9_FIRESOUND 4
	set WEAPON9_FLAGS 8276
	set WEAPON9_SPAWN 0
	set WEAPON9_SHOOTS RMAXREVOLVERSHOT
	set WEAPON9_INITIALSOUND 4
	set WEAPON9_SHOTSPERBURST 1
	set WEAPON9_CLIP 0
	set WEAPON9_RELOADSOUND1 4
	set WEAPON9_RELOADSOUND2 4

	ife CURWEAP 9
		{
		set WEAPON_TYPE 0
		set GUN_VOLUME 15
		set GUN_ACCURACY 8
		set GUN_MAX_SPREAD 48
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		set GUNMAG MGUNMAG
		set MAXMGUNMAG 25
		
		ifand GUNFIREMODE 16384 ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
		
		
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP FNFAL_FIRE }
		
		ife KICKBACKPIC 3 { add GUN_SPREAD 16 set GUN_RECOIL 6 set gunsmoke_angle 32 state spawn_gunsmoke }
		
		
		ife KICKBACKPIC 10 { sound FNFAL_RELOAD ife MGUNMAG 0 spawn 3756 }
		ife KICKBACKPIC 26 
			{
			set GUN_RECOIL_COUNT 0
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		ife KICKBACKPIC 35 sound AUG_MOVEMENT
		ife KICKBACKPIC 46 sound BOLT_CATCH
		ife KICKBACKPIC 55 sound AUG_MOVEMENT
		
	  ifl MGUNMAG 1
	   ife player[].weapon_pos 0
	    ife KICKBACKPIC 0
			{
		   	ifn CUR_AMMO 0
		   		{
				set WEAPON9_RELOAD 56
		   		setp[].reloading 1
		   		setp[].kickback_pic 6
				}
			}
		}

}
ends

defstate PS_BOMBSHELL
{
setp[].last_pissed_time 5270
ife on_tripwire 1 action EAF_STAND
ifaction ZERO action EAF_STAND
ife FIRE_SUIT 1 ifaction EAF_STAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction EAF_STAND action JG_STAND
ife SPACE_SUIT 1 ifaction EAF_STAND action SS_STAND
ifaction EAF_STAND set MOVESOUND 0

qputs 90 Vitamin X!
qputs 12 Used Vitamin X!

qputs 101 Night vision goggles
qputs 106 Night vision on
qputs 107 Nigh vision off

qputs 6 GiroTek Protective Boots
qputs 75 Protective boots on

qputs 3 Portable Medikit

qputs 89 Airtank

qputs 47 Portable forcefield on
qputs 48 Portable forcefield off
qputs 49 Portable forcefield not found yet!
qputs 51 Portable forcefield
qputs 91 Portable forcefield

qputs 88 Jetpack
qputs 50 Jetpack not found yet!
qputs 52 Jetpack on
qputs 53 Jetpack off

qputs 102 We're gonna fry your ass, Bombshell!

setp[].knuckle_incs 0

set CKNEE 10438
set CKEYCARDTILE 10445
set CKEYCARDTILE2 10447
set CKEYCARDTILE3 10448
set CTRIPBOMB 10446
set CDETON 2570
set CTIP 14642
set CPIPEBOMB 10466
set CHOLDING 9432
set CHOLDING_2 9432
set CHOLDING_3 12076

set C_ARM_1 15972
set C_ARM_2 12181

set C_PISTOL_1 8990
set C_PISTOL_2 8990

set CMEDIKIT 53
set CSTEROIDS 55
set CJETPACK 57

set CHEAT 68
set CNVG 59

state DISP_nvg

set CSCUBA 56
set CBOOTS 61
set C_HEAVY_ARMOUR 5410


set CHOLODUKE 5228

set DISP_NVG 59

set PMAX_STAMINA 100

set C_ARMOUR 14590
set C_HEAVY_ARMOUR 5236

set C_HAND_1 14583
set C_HAND_2 14584

set CIICON 10460

smaxammo 1 200
smaxammo 2 50
smaxammo 3 400
smaxammo 4 40
smaxammo 6 100
smaxammo 7 50
smaxammo 9 200
smaxammo 11 50

ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1

getp[].holoduke_on TEMP
ifn TEMP -1
{
seta[TEMP].cstat 32768
seta[TEMP].xrepeat 1
seta[TEMP].yrepeat 1
ife PS_ITEM 0
	{
	stopsound TELEPORTER
	soundonce PFIELD
	espawn 5208
	seta[RETURN].pal 3
	set TEMP4 RETURN
	espawn 5208
	seta[RETURN].pal 18
	setactorvar[RETURN].TEMP8 TEMP4
	set PS_ITEM 1
	}
}
else
ife TEMP -1
ife PS_ITEM 1
{
soundonce BOS4_ATTACK
setactorsoundpitch THISACTOR BOS4_ATTACK 1024
set PS_ITEM 0
}


// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set GUNMAG -1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}


// DEAGLE
set WEAPON1_TILE 10454
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 14581
setarray AMMO_AMOUNT[1] 7

set WEAPON1_HOLDDELAY 0
set WEAPON1_SPAWNTIME 2
set WEAPON1_SPAWN 0
set WEAPON1_INITIALSOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
set WEAPON1_CLIP 0
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_RELOAD 29
set WEAPON1_SHOOTS RMAXREVOLVERSHOT
set WEAPON1_FIRESOUND 4

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 2
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUN_MAX_SPREAD 48
	set GUN_SIZE 0
	set GUN_ACCURACY 4
	set WEAPON1_FLAGS 16706
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 5
	ife player[].weapon_pos 0
		{
		state spawn_lasersite
		seta[RETURN].x hitx
		seta[RETURN].y hity
		seta[RETURN].z hitz
		}
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 7
	
		ife KICKBACKPIC 2 
			{ 
			shoot 13772
			set GUN_RECOIL 5
			espawn 2520 
			state SPAWN_IN_PLAYER_FRONT 
			setactorvar[RETURN].TEMP DEAGLE_FIRE 
			}
		ife KICKBACKPIC 3
			{ 
			sub PISTOLMAG 1	
			add GUN_SPREAD 12
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}	
		ife KICKBACKPIC 10 sound DEAGLE_RELOAD
		ife KICKBACKPIC 15 ife PISTOLMAG 0 spawn 7103
					
		ife KICKBACKPIC 20 
			{
			ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
			}
			
		ife KICKBACKPIC 26
			{
			ife RELOAD_TYPE 1
				{
				sound DEAGLE_SLIDE
				set RELOAD_TYPE 0
				}
			}
			
		ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
		  ife KICKBACKPIC 0
			{
			ifn CUR_AMMO 0
				{
				set RELOAD_TYPE 1
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
		
				
	}
	
// SHOTGUN
set WEAPON2_TILE 13312
set W2_AMMO_TILE 13321
setarray WEAPON_SPECIAL[2] 0
setarray AMMO_AMOUNT[2] 10

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 52
set WEAPON2_FIREDELAY 2
set WEAPON2_HOLDDELAY 0
set WEAPON2_SHOOTS 2613
set WEAPON2_SPAWNTIME -1
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 4

ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUN_VOLUME 60
	set GUNMAG AUTOSHOTMAG
	set GUN_ACCURACY 24
	set GUN_MAX_SPREAD 48
	set GUN_HANDS 2
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 0
	ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP
	set gun_pushback_power -4 state gun_pushback shoot 3761 }
	ife KICKBACKPIC 3 { add GUN_SPREAD 16 getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	
	ife KICKBACKPIC 36 state JMOVESOUND2
	ife KICKBACKPIC 56 state JMOVESOUND2
	
	ife KICKBACKPIC 21 sound AA12_RELOAD
	ife KICKBACKPIC 28 ife AUTOSHOTMAG 0 spawn 7111

	set WEAPON2_FLAGS 0

	ifand BITS_PRESS 4
		  ifg AUTOSHOTMAG 0 
		   ife KICKBACKPIC 0
		   ife player[].ammo_amount 2 0
		   ife NEED_TO_FIRE 0
			{ 
			
			getp[].ammo_amount 2 HOLD_AMMO_TEMP
			add HOLD_AMMO_TEMP 1
			setp[].ammo_amount 2 HOLD_AMMO_TEMP 
			setp[].kickback_pic 1
			set NEED_TO_FIRE 1
			}
			
	ife NEED_TO_FIRE 1 set WEAPON2_TOTALTIME 5
	else set WEAPON2_TOTALTIME 4
			

	
	ife KICKBACKPIC 3
	ife NEED_TO_FIRE 1
		{
		setp[].ammo_amount 2 0 
		set NEED_TO_FIRE 0
		}
	
			ife KICKBACKPIC 2 
				{
				sub AUTOSHOTMAG 1 
				getp[].ammo_amount 2 HOLD_AMMO_TEMP
				add HOLD_AMMO_TEMP 1
				setp[].ammo_amount 2 HOLD_AMMO_TEMP 
				set gunsmoke_angle 96
				state spawn_gunsmoke
				espawn 2520 state SPAWN_IN_PLAYER_FRONT 
				ifrnd 128 setactorvar[RETURN].TEMP AA12_FIRE
				else setactorvar[RETURN].TEMP AA12_FIRE2
				}
			
			ife KICKBACKPIC 42 
			{
			set TEMP5 AUTOSHOTMAG
			set TEMP6 20
			sub TEMP6 TEMP5

				ifg TEMP6 CUR_AMMO
					{
					add AUTOSHOTMAG CUR_AMMO
					setp[].ammo_amount 2 0
					}
					else
					{
					getp[].ammo_amount 2 HOLD_AMMO_TEMP 
					sub HOLD_AMMO_TEMP TEMP6 
					setp[].ammo_amount 2 HOLD_AMMO_TEMP
					set AUTOSHOTMAG 20
					}
			}
			
		ifl AUTOSHOTMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
			}	

	}

// M4A1
set WEAPON3_TILE 10464
setarray WEAPON_SPECIAL[3] 2
set W3_AMMO_TILE 10474
setarray AMMO_AMOUNT[3] 60

set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_HOLDDELAY 1
set WEAPON3_FIRESOUND 4
set WEAPON3_FLAGS 68
set WEAPON3_SPAWN 0
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4

ife CURWEAP 3
{
	set WEAPON_TYPE 1
	set GUN_VOLUME 12
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 16
	
	ifand GUNFIREMODE 32768 // If GL is selected
	set GUN_AMMO_TYPES 2048 // set ammo types to m203 compatible
	else
	set GUN_AMMO_TYPES 32 // set firing menu to switching to gl
	
	state check_cased_grenades_avail
	
	set GUNMAG MGUNMAG
	set GUN_SIZE 2
	set GUN_HANDS 2
	set MAXMGUNMAG 40
		ife KICKBACKPIC 2 
		{ 
		set GUN_RECOIL 10
		sub MGUNMAG 1 
			set gunsmoke_angle 32 
			add GUN_SPREAD 4
		state spawn_gunsmoke 
		espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP M4A1_FIRE
		}
		
				
		ife KICKBACKPIC 10 { sound M16OUT ife MGUNMAG 0 spawn 3756 }
		ife KICKBACKPIC 25 
			{ 
			sound M16IN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
		
		ifand GUNFIREMODE 16384 ifg KICKBACKPIC 6 { set HIDE_CROSSHAIR 0 xorvar GUNFIREMODE 16384 }
		
		ife KICKBACKPIC 15 state JMOVESOUND2
		
		ife KICKBACKPIC 46 state JMOVESOUND2
		ife KICKBACKPIC 52 soundonce BOLT_CATCH
		
		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
						ife GL_COUNTDOWN 34 soundonce GL_OPEN
						ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}

	  ifl MGUNMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	    {
		ifn CUR_AMMO 0
			{
			set WEAPON3_RELOAD 61
			setp[].reloading 1
			setp[].kickback_pic 6
			}
		}
	
}

// RPG
set WEAPON4_TILE 10459
set W4_AMMO_TILE 10449
setarray AMMO_AMOUNT[4] 5
smaxammo 4 50

ife CURWEAP 4 // XM25
	{
set WEAPON4_FIRESOUND XM25_FIRE
set WEAPON4_SHOOTS 2698
set WEAPON4_RELOAD 50
set WEAPON4_FIREDELAY 2
set WEAPON4_TOTALTIME 8
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0

	set WEAPON_TYPE 4
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_VOLUME 25
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUNMAG ROCKETMAG
	set gunsmoke_angle 96
	ife KICKBACKPIC 5 state spawn_gunsmoke
	ife KICKBACKPIC 2
		{
		sub ROCKETMAG 1
		sub WEAPSWAYX 10
		sub WEAPSWAYY 10
		}
		
		ife KICKBACKPIC 3 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 4 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		
		
		ife KICKBACKPIC 13 state JMOVESOUND2

		ife KICKBACKPIC 23
			{
			ife ROCKETMAG 0 spawn 3756
			sound AUTOSHOT_OPEN
			}		
		ife KICKBACKPIC 37
			{
			sound AUTOSHOT_CLOSE
			ifl CUR_AMMO 5 set ROCKETMAG CUR_AMMO else set ROCKETMAG 5
			}
	 ifl ROCKETMAG 1
	  ife KICKBACKPIC 0
		   ife player[].weapon_pos 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}
		
	  ifl ROCKETMAG 1
	   ife player[].weapon_pos 0
		ife KICKBACKPIC 0
	   {
		ifn CUR_AMMO 0
			{
			setp[].reloading 1
			setp[].kickback_pic 13
			}
		}

	}

// PIPEBOMB
set WEAPON5_TILE 7075
set W5_AMMO_TILE 7074
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 18
set WEAPON5_TOTALTIME 29
set WEAPON5_HOLDDELAY 22
set PIPEBOMB_CONTROL 2

	ife CURWEAP 5 
		{
		set WEAPON_TYPE 6
		set GUNMAG -1
		set GUN_SIZE 0
		set GUN_HANDS 2
		set GUN_VOLUME 0
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_AMMO_TYPES 0
		}

ife SHOOTGRENADE THISACTOR { shoot GRENADE set SHOOTGRENADE -1 }

// SHRINKER
set WEAPON6_TILE MINISHRINKERSPRITE
set W6_AMMO_TILE 46
setarray AMMO_AMOUNT[6] 10
	
	set WEAPON6_WORKSLIKE 6
	set WEAPON6_TOTALTIME 17
	set WEAPON6_HOLDDELAY 17
	set WEAPON6_FIREDELAY 7
	set WEAPON6_FIRESOUND SHRINKER_FIRE
	set WEAPON6_INITIALSOUND 4
	set WEAPON6_SHOTSPERBURST 1
	set WEAPON6_SHOOTS SHRINKER
	set WEAPON6_FLAGS 38
	setarray WEAPON_SPECIAL[6] 0
	
ife CURWEAP 6
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_VOLUME 30
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	}
	
	
// DEVISTATOR 
set WEAPON7_TILE 15078
set W7_AMMO_TILE 15079
setarray AMMO_AMOUNT[7] 8

	set WEAPON7_WORKSLIKE 7
	set WEAPON7_TOTALTIME 20
	set WEAPON7_HOLDDELAY 20
	set WEAPON7_FIREDELAY 3
	set WEAPON7_FIRESOUND 4
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_SHOOTS BIGRIFLESHOT
	set WEAPON7_FLAGS 4

ife CURWEAP 7
	{
	set WEAPON_TYPE 1
	set GUNMAG -1
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_VOLUME 90
	setarray WEAPON_SPECIAL[7] 0
	ife SCOPE 1 set GUN_ACCURACY 2
	else set GUN_ACCURACY 16
	set GUN_MAX_SPREAD 128
	set GUN_AMMO_TYPES 0
	ife KICKBACKPIC 2 globalsound M99_FIRE
	ife KICKBACKPIC 3 { ifp pducking add GUN_SPREAD 32 else add GUN_SPREAD 64 set gunsmoke_angle 64 state spawn_gunsmoke }
	ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
	ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
	ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	ife KICKBACKPIC 10 sound AWMS_COCK
	ife KICKBACKPIC 14 shoot RIFLESHELL
	}
		
// TRIPBOMB
set WEAPON8_TILE 27

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328
setarray AMMO_AMOUNT[8] 1

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_VOLUME 0
	set GUN_HANDS 2
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	}

// FREEZER
set WEAPON9_TILE 12106
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 12107
setarray AMMO_AMOUNT[9] 50

set WEAPON9_FIREDELAY 3
set WEAPON9_TOTALTIME 4
set WEAPON9_HOLDDELAY 0 
set WEAPON9_FIRESOUND 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_FLAGS 22

ife CURWEAP 9 
	{ 
	set WEAPON_TYPE 8
	set GUN_VOLUME 10 
	set WEAPON9_SHOOTS 5372
	set GUN_SIZE 2
	set GUNMAG -1 
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	soundonce PLASMAAMB
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP 535 }
	}
	
// EXPANDER
set W11_AMMO_TILE 45
setarray AMMO_AMOUNT[11] 20

	set WEAPON11_WORKSLIKE 11
	set WEAPON11_FIREDELAY 2
	set WEAPON11_TOTALTIME 5
	set WEAPON11_HOLDDELAY 5
	set WEAPON11_FIRESOUND EXPANDERSHOOT
	set WEAPON11_INITIALSOUND 4
	set WEAPON11_SHOTSPERBURST 1
	set WEAPON11_SHOOTS GROWSPARK
	set WEAPON11_FLAGS 2
	setarray WEAPON_SPECIAL[11] 0
	
ife CURWEAP 11
	{
	set WEAPON_TYPE 8
	set GUNMAG -1
	set GUN_VOLUME 30
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_SIZE 1
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	}
}
ends

defstate PS_MAARTEN
{
setp[].knuckle_incs 0
ife on_tripwire 1 action M2STAND
ife FIRE_SUIT 1 ifaction M2STAND action ES_STAND
ife JUGGERN_SUIT 1 ifaction M2STAND action JG_STAND
ife SPACE_SUIT 1 ifaction M2STAND action SS_STAND

qputs 3 Healing Elixir

qputs 90 Power Bracers
qputs 12 Used Power Bracers

qputs 6 Ring of elements
qputs 75 Ring of elements on

qputs 101 Knight vision goggles
qputs 106 Knight vision on
qputs 107 Knight vision off

qputs 89 Diving Helmet!

qputs 47 Book of Conjuration
qputs 48 Book of Conjuration
qputs 49 -
qputs 51 Book of Conjuration
qputs 91 Book of Conjuration

qputs 88 Boots of flying!
qputs 50 Boots of flying not found yet!
qputs 52 Boots of flying on
qputs 53 Boots of flying off

qputs 102 We're gonna fry your ass, Maarten!

smaxammo 1 1
smaxammo 2 50
smaxammo 3 200
smaxammo 4 0
smaxammo 6 0
smaxammo 7 0
smaxammo 9 0
smaxammo 11 50

set CKNEE 6365
set CKEYCARDTILE 3837
set CKEYCARDTILE2 3836
set CKEYCARDTILE3 3835
set CTRIPBOMB 3834
set CDETON 2570
set CTIP 10265

set C_ARM_1 15973
set C_ARM_2 12186

set C_PISTOL_1 8992
set C_PISTOL_2 8992

set CMEDIKIT 4977
set CSTEROIDS 5030
set CHOLODUKE 12006
set CJETPACK 7918
set CNVG 5031
set DISP_NVG 5031
set CSCUBA 4967
set CBOOTS 4968

set C_HAND_1 7897
set C_HAND_2 7898

set C_ARMOUR 6638
set C_HEAVY_ARMOUR 6638

set CPIPEBOMB 5041
set CHOLDING 9428
set CHOLDING_2 9428
set CHOLDING_3 12115

set PMAX_STAMINA 120

set CIICON 3822

getp[].holoduke_on TEMP
ifn TEMP -1
{
stopsound TELEPORTER
soundonce TRANSFORM
palfrom 20 0 0 20
ifrnd 16 { quote 150 spawn MEGASPHERE } else
ifrnd 32 { quote 245 spawn SUPER_ARMOUR } else
ifrnd 48 { quote 195 spawn SPIRIT_ARMOUR } else
ifrnd 48 { quote 244 spawn FIRE_ARMOUR } else
ifrnd 64 { quote 138 spawn HEAVYARMOUR  } else
ifrnd 96 { quote 38 spawn SHIELD } else
ifrnd 128 { quote 19 spawn AMULET } else
{ quote 153 spawn HFLASK }

shoot SPELL5
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 128 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 256 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 384 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 512 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 640 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 768 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 896 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 1024 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 1152 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 1280 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 1408 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 1536 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 1664 seta[RETURN].ang TEMP
eshoot SPELL5 geta[RETURN].ang TEMP add TEMP 1792 seta[RETURN].ang TEMP
eshoot SPELL14 geta[RETURN].ang TEMP add TEMP 1920 seta[RETURN].ang TEMP

setp[].holoduke_amount 0

}


ifp pboosted
{
stopsound DUKE_HARTBEAT
soundonce M_BRACER

getp[].jumping_counter TEMP
ifg TEMP 0 { setp[].poszv -6536 }

iffloordistl 32 { getp[].falling_counter TEMP ifl TEMP 61 setp[].falling_counter 8 }

}


setp[].gotweapon 4 0
setp[].gotweapon 6 0
setp[].gotweapon 7 0
setp[].gotweapon 9 0
setp[].gotweapon 11 0


// MELEE
ife CURWEAP 0
{
	ife temp_weapon 0
	{
	set WEAPON_TYPE 0
	set WEAPON0_FIRESOUND 532
	set WEAPON0_TOTALTIME 12
	set WEAPON0_HOLDDELAY 12
	set WEAPON0_FIREDELAY 7
	set WEAPON0_SHOOTS KNEE
	set GUN_HANDS 2
	}
state UPPERCUT_STUFF
}

// PISTOL
set WEAPON1_TILE 11995
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 3625
setarray AMMO_AMOUNT[1] 0

set WEAPON1_CLIP 0
set WEAPON1_RELOAD 0
set WEAPON1_HOLDDELAY 0
set WEAPON1_SHOOTS 4961
set WEAPON1_SPAWNTIME -0
set WEAPON1_SPAWN 0
set WEAPON1_SHOTSPERBURST 0
set WEAPON1_INITIALSOUND MORNSTAR_SW
set WEAPON1_FIRESOUND 0
set WEAPON1_SOUND2TIME 0
set WEAPON1_SOUND2SOUND 0
set WEAPON1_RELOADSOUND1 0
set WEAPON1_RELOADSOUND2 0
set WEAPON1_FIREDELAY 10
set WEAPON1_TOTALTIME 30
set WEAPON1_FLAGS 256

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_SIZE 1
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
		setp[].ammo_amount 1 1
		
		ife KICKBACKPIC 16 sound MORNSTAR_SW
		ife KICKBACKPIC 22 
			{
			shoot 4961
			}
		
	}

// SHOTGUN
	set WEAPON2_TILE 9380
	set W2_AMMO_TILE 12004
	setarray AMMO_AMOUNT[2] 10
	setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_TOTALTIME 24
	set WEAPON2_HOLDDELAY 3
	set WEAPON2_FIREDELAY 2
	set WEAPON2_INITIALSOUND 4
	set WEAPON2_SHOTSPERBURST 1
	set WEAPON2_FLAGS 1280
	set WEAPON2_SPAWN 0
	set WEAPON2_FIRESOUND CROSSBOW
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 4
	
	
	ife CURWEAP 2
	{
	set WEAPON_TYPE 5
	set GUN_SIZE 1
	set GUN_VOLUME 5
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 16
	
		ifand AMMO_TYPES[CURWEAP] 16 // silver bolts
		{
		set WEAPON2_SHOOTS 12232
		}
		else
		{
		set WEAPON2_SHOOTS 5011
		}
	
	ife KICKBACKPIC 3 
		{ 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP
		}
	ife KICKBACKPIC 4 
		{ getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP
		}
	ife KICKBACKPIC 5 
		{ getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	ife KICKBACKPIC 6 
		{ getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		

		
	}
	

// MACHINEGUN
set WEAPON3_TILE 12016
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 12017
setarray AMMO_AMOUNT[3] 30

set WEAPON3_SHOOTS PRIEST_BLAST
set WEAPON3_FIREDELAY 1
set WEAPON3_TOTALTIME 4
set WEAPON3_HOLDDELAY 0 
set WEAPON3_SPAWN 0
set WEAPON3_FIRESOUND SUNSTAFF_FIRE
set WEAPON3_INITIALSOUND 0
set WEAPON3_FLAGS 22

ife CURWEAP 3 
	{
	set WEAPON_TYPE 8
	set GUN_SIZE 2
	set GUNMAG -1
	set GUN_HANDS 2
	set GUN_VOLUME 14
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// RPG
set WEAPON4_TILE 3625
set W4_AMMO_TILE 3625

// PIPEBOMB
set WEAPON5_TILE 5045
set W5_AMMO_TILE 5050
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 2

ife CURWEAP 5
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}


ife SHOOTHOLYG THISACTOR { shoot HOLYHANDG set SHOOTHOLYG -1 }

// SHRINKER
set WEAPON6_TILE 3625
set W6_AMMO_TILE 3625
setarray WEAPON_SPECIAL[6] 0

ife CURWEAP 6
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// DEVISTATOR
set WEAPON7_TILE 3625
set W7_AMMO_TILE 3625

ife CURWEAP 7
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// TRIPBOMB
set WEAPON8_TILE 11022

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328
setarray AMMO_AMOUNT[8] 1

ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

// FREEZER
set WEAPON9_TILE 3625
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 3625

ife CURWEAP 9
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}
	
// EXPANDER
set W11_AMMO_TILE 3625

ife CURWEAP 11
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_VOLUME 0
	set GUN_ACCURACY 2
	set GUN_MAX_SPREAD 0
	set GUN_AMMO_TYPES 0
	}

}
ends

defstate PS_ANONYMOUS
{
set CKNEE 1406
setp[].knuckle_incs 0
set MISSIONUP 0
set IN_DREAM 1
}
ends

defstate PS_JANE
{
setp[].last_pissed_time 5270
ifaction ZERO action LSTAND
ife on_tripwire 1 action LSTAND

qputs 90 EDF Injection
qputs 12 Used EDF Injection

qputs 101 Night vision 
qputs 106 Night vision on
qputs 107 Night vision off

qputs 6 Enviro-Protection 
qputs 75 Enviro-Protection on

qputs 3 Medi-Gel

qputs 89 Oxygen Capsules

qputs 47 Mega Cluster Charge
qputs 48 Mega Cluster Charge
qputs 49 Mega Cluster Charge
qputs 51 Mega Cluster Charge
qputs 91 Mega Cluster Charge

qputs 88 BlastPak
qputs 50 BlastPak not found yet!
qputs 52 BlastPak on
qputs 53 BlastPak off

qputs 102 We're gonna fry your ass, Ashford!

ife CHARSELECT 0
{
ife player[].palookup 0 setp[].palookup 3
}

ifn player[].holoduke_on -1
{
stopsound TELEPORTER
spawn 12969
setp[].holoduke_amount 0

}


smaxammo 1 200
smaxammo 2 50
smaxammo 3 300
smaxammo 4 0
smaxammo 7 50
smaxammo 9 300
smaxammo 11 50

ife SHOOTCLUSTER THISACTOR { shoot CLUSTER_PROJ set SHOOTCLUSTER -1 }

setp[].knuckle_incs 0


set CKNEE 12877

set CKEYCARDTILE 12882
set CKEYCARDTILE2 12880
set CKEYCARDTILE3 12881
set CTRIPBOMB 12879
set CDETON 12903
set CTIP 12929
set CPIPEBOMB 12903
set CHOLDING 9436
set CHOLDING_2 9436
set CHOLDING_3 12111

set C_ARM_1 16053
set C_ARM_2 12189

set C_PISTOL_1 8990
set C_PISTOL_2 8990

set CMEDIKIT 12923
set CSTEROIDS 12926
set CHOLODUKE 12928
set CJETPACK 12924
set CNVG 12927
set DISP_NVG 12927
set CSCUBA 12922
set CBOOTS 12925

set C_ARMOUR 12901
set C_HEAVY_ARMOUR 12901

set C_HAND_1 12891
set C_HAND_2 12892

set PMAX_STAMINA 120

set CIICON 12934

setp[].gotweapon 4 0
setp[].gotweapon 6 0
setp[].gotweapon 11 0

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set WEAPON_TYPE 0
	set GUNMAG -1
	set GUN_HANDS 1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}



// PISTOL
set WEAPON1_TILE 12906
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 12905
setarray AMMO_AMOUNT[1] 20

set WEAPON1_TOTALTIME 7
set WEAPON1_HOLDDELAY 7
set WEAPON1_FIREDELAY 3
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_SHOOTS BLUELASERSHOT
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0
set WEAPON1_FLAGS 4

ifand GUNFIREMODE 32768
{
set WEAPON_TYPE 1
set WEAPON1_FIRESOUND LASERGUN_FIRE3
set WEAPON1_SHOOTS REDLASERSHOT
}
else
{
set WEAPON_TYPE 7
set WEAPON1_FIRESOUND LASERGUN_FIRE
set WEAPON1_SHOOTS BLUELASERSHOT
}


ife CURWEAP 1
{
set GUNMAG -1
set GUN_VOLUME 10
set GUN_ACCURACY 4
set GUN_MAX_SPREAD 0
set GUN_AMMO_TYPES 0
set GUN_SIZE 0
set GUN_HANDS 1
}

// SHOTGUN
set WEAPON2_TILE 12907
set W2_AMMO_TILE 12909
setarray AMMO_AMOUNT[2] 10
setarray WEAPON_SPECIAL[2] 0

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 26
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SHOOTS 6198
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 1658
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND LG_CHARGE
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

ife CURWEAP 2
{
set WEAPON_TYPE 8
set GUNMAG -1
set GUN_VOLUME 40
set GUN_ACCURACY 2
set GUN_MAX_SPREAD 0
set GUN_SIZE 1
set GUN_AMMO_TYPES 0
set GUN_HANDS 1

		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
}

// MACHINEGUN
set WEAPON3_TILE 12908
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 12107
setarray AMMO_AMOUNT[3] 50

set WEAPON3_SHOOTS 5372
set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 4
set WEAPON3_HOLDDELAY 0 
set WEAPON3_FIRESOUND 535
set WEAPON3_INITIALSOUND 0
set WEAPON3_FLAGS 22
set WEAPON3_SPAWN 0

	ife CURWEAP 3 
		{ 
		set WEAPON_TYPE 8
		set GUNMAG -1 
		set GUN_ACCURACY 2
		set GUN_HANDS 1
		set GUN_AMMO_TYPES 0
		set GUN_MAX_SPREAD 0
		set GUN_VOLUME 10 
		set GUN_SIZE 1
		soundonce PLASMAAMB
		}
	
// RPG
set WEAPON4_TILE 3625
set W4_AMMO_TILE 3625

// PIPEBOMB
set WEAPON5_TILE 12963
set W5_AMMO_TILE 12937
setarray AMMO_AMOUNT[5] 6

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 0

	ife CURWEAP 5 
		{ 
		set WEAPON_TYPE 6
		set GUNMAG -1 
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_MAX_SPREAD 0
		set GUN_SIZE 0
		set GUN_VOLUME 10 
		}

// SHRINKER
set WEAPON6_TILE 3625
set W6_AMMO_TILE 12905
setarray WEAPON_SPECIAL[6] 0

	ife CURWEAP 6 
		{ 
		set GUNMAG -1 
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_MAX_SPREAD 0
		set GUN_SIZE 0
		set GUN_VOLUME 10 
		}

// DEVISTATOR 
set WEAPON7_TILE 9406
set W7_AMMO_TILE 5984
setarray AMMO_AMOUNT[7] 5

	set WEAPON7_WORKSLIKE 7
	set WEAPON7_TOTALTIME 16
	set WEAPON7_HOLDDELAY 16
	set WEAPON7_FIREDELAY 5
	set WEAPON7_FIRESOUND 4
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_SHOOTS MISSILE
	set WEAPON7_FLAGS 4

	ife CURWEAP 7
		{
		set WEAPON_TYPE 4
		set GUNMAG -1 
		set GUN_VOLUME 60 
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 2 globalsound MISSILE_LAUNCH
		}
		
// TRIPBOMB
set WEAPON8_TILE 27

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328
setarray AMMO_AMOUNT[8] 1

	ife CURWEAP 8
		{
		set WEAPON_TYPE 6
		set GUN_SIZE 0
		set GUNMAG -1 
		set GUN_VOLUME 60 
		set GUN_MAX_SPREAD 0
		set GUN_HANDS 2
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		}

// FREEZER
set WEAPON9_TILE 12914
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 12915
setarray AMMO_AMOUNT[9] 50

set WEAPON9_FIREDELAY 2
set WEAPON9_TOTALTIME 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_SHOOTS RMAXREVOLVERSHOT
set WEAPON9_FIRESOUND 575
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 12

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 16
	set GUNMAG -1
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 16
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 2
	set GUN_HANDS 2
	ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { add GUN_SPREAD 6 getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
		ifg KICKBACKPIC 0 { set gun_pushback_power -6 state gun_pushback }
	}
	

}
ends

defstate PS_MICKY
{
ifaction ZERO action MC_STAND
ife on_tripwire 1 action MC_STAND
ifl SLIDE_KICK 27 action MC_DUCKING


ife TIMEZONE 2 setvar screen_pal 0

qputs 90 Energy Absorber
qputs 12 Used Energy Absorber

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat-vision goggles
	qputs 106 Heat-vision on
	qputs 107 Heat-vision off
	}
else
	{
	qputs 101 Night-vision goggles
	qputs 106 Night-vision on
	qputs 107 Night-vision off
	}

qputs 6 Enviro-Boots
qputs 75 Enviro-Boots on

qputs 3 Medi-Gel

qputs 89 Oxygen-tank

qputs 47 Mini-Turret
qputs 48 Mini-Turret
qputs 49 Mini-Turret
qputs 51 Mini-Turret
qputs 91 Mini-Turret

qputs 88 Jet-Pack
qputs 50 Jet-Pack not found yet!
qputs 52 Jet-Pack on
qputs 53 Jet-Pack off

qputs 102 We're gonna fry your ass, Micky!

ife CHARSELECT 0
{
getuserdef[].color TEMP
ife TEMP 0 setp[].palookup 3
}

ife SHOOTGRENADE THISACTOR { shoot MC_GRENADE set SHOOTGRENADE -1 }

getp[].holoduke_on TEMP
ifn TEMP -1
{
stopsound TELEPORTER
sound TOOLBOXUSE
ifrnd 96 set PLAYER_VOICEOVER 45
spawn 22677
setp[].holoduke_amount 0
}


smaxammo 1 200
smaxammo 2 80
smaxammo 3 300
smaxammo 4 50
smaxammo 6 300
smaxammo 7 50
smaxammo 9 300
smaxammo 11 200

ife SHOOTCLUSTER THISACTOR { shoot CLUSTER_PROJ set SHOOTCLUSTER -1 }

setp[].knuckle_incs 0


set CKNEE 16438

set CKEYCARDTILE 16436
set CKEYCARDTILE2 16435
set CKEYCARDTILE3 16434
set CTRIPBOMB 16433
set CDETON 16538
set CTIP 16431
set CPIPEBOMB 16534
set CHOLDING 16440
set CHOLDING_2 16440
set CHOLDING_3 12112

set C_ARM_1 15969
set C_ARM_2 16443

set C_PISTOL_1 8990
set C_PISTOL_2 8990

set CMEDIKIT 16637
set CSTEROIDS 12926
set CHOLODUKE 16552
set CJETPACK 16627

set CHEAT 16564
set CNVG 16636

state DISP_nvg

set CSCUBA 16626
set CBOOTS 16625

set C_ARMOUR 16638
set C_HEAVY_ARMOUR 16639

set C_HAND_1 7901
set C_HAND_2 7902

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 90 else
set PMAX_STAMINA 120

set CIICON 12934

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set GUNMAG -1
	set GUN_HANDS 1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}

// PISTOL
ife SPECIALIST_EQUIPMENT[73] 2 // Using Tec-SMG?
{
set WEAPON1_TILE 19878
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 30
smaxammo 1 300

set WEAPON1_TOTALTIME 3
set WEAPON1_HOLDDELAY 4
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_FIRESOUND 4
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0
set WEAPON1_FLAGS 4
set WEAPON1_RELOAD 35
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4 

	ife CURWEAP 1
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 3
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	set GUN_ACCURACY 4
	set GUN_MAX_SPREAD 48
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 3
	
		set WEAPON1_SHOOTS NINEMM_CALIBRE
	
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 30
	
		ife KICKBACKPIC 2 
			{ 
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP TEC_PISTOL
				ifvarl GUNMAG 6 sound MAG_LOW	
				shoot 13772
				sub PISTOLMAG 1
				set GUN_RECOIL 5
				add GUN_SPREAD 6
				set gunsmoke_angle 64
				state spawn_gunsmoke
			}
			
		ifg KICKBACKPIC 6 ifand GUNFIREMODE 16384 xorvar GUNFIREMODE 16384
			

		ife KICKBACKPIC 13 { sound KASHTAN_MAGOUT ife PISTOLMAG 0 { set RELOAD_TYPE 1 spawn 3720 } }
		ife KICKBACKPIC 15 state JMOVESOUND2
		ife KICKBACKPIC 22 
		{
		sound KASHTAN_MAGIN
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		
		  ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
			 ifn CHARSELECT 1
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
		   }
				
	}
}
else
ife SPECIALIST_EQUIPMENT[60] 2 // Using Longslide pistol?
{
set WEAPON1_TILE 17982
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 5220
setarray AMMO_AMOUNT[1] 14
smaxammo 1 150

set WEAPON1_FIREDELAY 2
set WEAPON1_HOLDDELAY 6
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_FIRESOUND 4
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0

set WEAPON1_RELOAD 43
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4 

	ife CURWEAP 1
	{
	set GUN_VOLUME 8
	set GUN_HANDS 1
	set GUN_MAX_SPREAD 32
	set GUN_AMMO_TYPES 2
	set GUN_SIZE 0
	
	ifand GUNFIREMODE 2048 // laser-sight activated = semi-auto mode
		{
		set GUN_ACCURACY 6
		set WEAPON1_FLAGS 16448
		set WEAPON1_TOTALTIME 9
		ifg KICKBACKPIC 1
		 ifl KICKBACKPIC 9
			{
			ifand BITS_PRESS 4 ifg PISTOLMAG 0 setplayer[].kickback_pic 1
			}
		}
	else // laser-sight off = auto mode
		{
		set WEAPON1_TOTALTIME 5
		set GUN_ACCURACY 12
		set WEAPON1_FLAGS 0
		}
	
		ifand AMMO_TYPES[CURWEAP] 2 // using silver ammo
			{
			set WEAPON_TYPE 7
			set WEAPON1_SHOOTS SILVERAMMOSHOT
			ife CURWEAP 1 ife KICKBACKPIC 2 sound TOMMYG_SFIRE
			}
		else
			{
			set WEAPON_TYPE 2
			set WEAPON1_SHOOTS F45_CALIBRE
			}
	
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 8
	
	ife player[].weapon_pos 0
	 ifand GUNFIREMODE 2048
				{
				state spawn_lasersite
				seta[RETURN].x hitx
				seta[RETURN].y hity
				seta[RETURN].z hitz		
				ifand SPECIALIST_CUSTOM[5] 1073741824 seta[RETURN].pal 1
				else ifand SPECIALIST_CUSTOM[5] 2147483648 seta[RETURN].pal 8
				else seta[RETURN].pal 0
				}
	
		ife KICKBACKPIC 2 
			{ 
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP LONGSLIDE_SHOOT
				ifand AMMO_TYPES[CURWEAP] 2 shoot SRIFLESHELL else shoot 13772
				getp[].horiz TEMP 
				add TEMP 5
				setp[].horiz TEMP 
			}
			
		ife KICKBACKPIC 3
			{ 
			sub PISTOLMAG 1
			getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP
			add GUN_SPREAD 12
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}	
			

		ife KICKBACKPIC 13 { sound S1911_RELOAD ife PISTOLMAG 0 { set RELOAD_TYPE 1 spawn 3720 } }
		ife KICKBACKPIC 15 state JMOVESOUND2
		ife KICKBACKPIC 35 
		{
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		
		  ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
			 ifn CHARSELECT 1
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
		   }
				
	}
}
else
ife SPECIALIST_EQUIPMENT[46] 2 // Using golden metal storm pistol?
{
set WEAPON1_TILE 16553
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 16631
setarray AMMO_AMOUNT[1] 16
smaxammo 1 200

set WEAPON1_TOTALTIME 7
set WEAPON1_HOLDDELAY 7
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_SHOOTS GOLDEN_SHOT_LOW
set WEAPON1_FIRESOUND 4
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0
set WEAPON1_FLAGS 0
set WEAPON1_RELOAD 43
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4 

	ife CURWEAP 1
	{
	set WEAPON_TYPE 3
	set GUN_VOLUME 10
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	ifg GEO_MEGA_SHOT[0] 0
		{
		set TEMP GEO_MEGA_SHOT[0]
		sub TEMP 1
		setarray GEO_MEGA_SHOT[0] TEMP
		set GUN_ACCURACY 32
		}
	else
	set GUN_ACCURACY 8
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 5
	
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 8
	
		ife KICKBACKPIC 2 
			{ 
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MC_PISTOL_F
				shoot 13772
				getp[].horiz TEMP 
				add TEMP 5
				setp[].horiz TEMP 
			}
			
		ife KICKBACKPIC 3
			{ 
			sub PISTOLMAG 1
			getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP
			
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}	
			

		ife KICKBACKPIC 16 { sound MC_PISTOL_REL ife PISTOLMAG 0 spawn 3720 }
		ife KICKBACKPIC 15 state JMOVESOUND2
		ife KICKBACKPIC 24 sound GRAB_MAG
		ife KICKBACKPIC 35 
		{
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		
		  ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
			 ifn CHARSELECT 1
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
		   }
				
	}
}
else
{
ifand MICKY_UPGRADE 1 set WEAPON1_TILE 16559
else set WEAPON1_TILE 16477
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 16631
setarray AMMO_AMOUNT[1] 16
smaxammo 1 200

set WEAPON1_TOTALTIME 7
set WEAPON1_HOLDDELAY 7
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_FIRESOUND 4
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0
set WEAPON1_FLAGS 0
set WEAPON1_RELOAD 43
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4 

	ife CURWEAP 1
	{
	ifand MICKY_UPGRADE 1 
		{
		set WEAPON_TYPE 1
		set WEAPON1_SHOOTS ARMOUR_PIERCING_SHOT
		}
	else 
		{
		set WEAPON_TYPE 0
		set WEAPON1_SHOOTS ZRIFLESHOT
		}
	set GUN_VOLUME 10
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	ifg GEO_MEGA_SHOT[0] 0
		{
		set TEMP GEO_MEGA_SHOT[0]
		sub TEMP 1
		setarray GEO_MEGA_SHOT[0] TEMP
		ifand MICKY_UPGRADE 16 set GUN_ACCURACY 8 else set GUN_ACCURACY 32
		}
	else
	{
	ifand MICKY_UPGRADE 16 set GUN_ACCURACY 4
	else set GUN_ACCURACY 8
	}
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 5
	
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 8
	
		ife KICKBACKPIC 2 
			{ 
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MC_PISTOL_F
				shoot 13772
				getp[].horiz TEMP 
				add TEMP 5
				setp[].horiz TEMP 
			}
			
		ife KICKBACKPIC 3
			{ 
			sub PISTOLMAG 1
			getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}	
		ife KICKBACKPIC 16 { sound MC_PISTOL_REL ife PISTOLMAG 0 spawn 3720 }
		ife KICKBACKPIC 15 state JMOVESOUND2
		ife KICKBACKPIC 35 
		{
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		ife KICKBACKPIC 24 sound GRAB_MAG
		
		  ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
			 ifn CHARSELECT 1
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
		   }			
	}
}

// SHOTGUN
ife SPECIALIST_EQUIPMENT[58] 2 // Whiplash-shotguns
{
	set WEAPON2_TILE 18029
	set W2_AMMO_TILE 18019
	setarray AMMO_AMOUNT[2] 8

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 21
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS SHOTGUN
	set WEAPON2_SHOTSPERBURST 7
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND WHIPLASH_FIRE
	set WEAPON2_SOUND2TIME 15
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUNMAG -1
	set GUN_SIZE 1
	set GUN_AMMO_TYPES 0
	set GUN_VOLUME 70
	
	ifand GUNSAKIMBO 8 setarray WEAPON_SPECIAL[2] 1 else setarray WEAPON_SPECIAL[2] 0
	
	ifand GUNFIREMODE_2 64 // using 2 shotguns?
	{
	set GUN_ACCURACY 64
	set GUN_HANDS 2
	}
	else
	{
	set GUN_ACCURACY 32
	set GUN_HANDS 1
	}	
	

	ifand GUNFIREMODE_2 64
	ifand BITS_PRESS 64
	 ife KICKBACKPIC_2 0
	  ife player_in_vehicle 0
	  ifg player[].ammo_amount 2 1
		{
		set KICKBACKPIC_2 1
		}
		
	ifg KICKBACKPIC_2 0
		{
		add KICKBACKPIC_2 1
		ifg KICKBACKPIC_2 21 set KICKBACKPIC_2 0
		}
		
		
		ife KICKBACKPIC 2
			{ 
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP sound WHIPLASH_LOAD1 }
			ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 10 shoot 3761
			ife KICKBACKPIC 16 sound WHIPLASH_LOAD2
		
		ife KICKBACKPIC_2 2
			{
			flash sound WHIPLASH_FIRE
			}
		ife KICKBACKPIC_2 3
			{ 
			set gunsmoke_angle 104 state spawn_gunsmoke 
			shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN
			getp[].ammo_amount 2 TEMP sub TEMP 1 setp[].ammo_amount 2 TEMP
			}	
			ife KICKBACKPIC_2 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC_2 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC_2 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP sound WHIPLASH_LOAD1 }
			ife KICKBACKPIC_2 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC_2 10 { eshoot 3761 geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP }
			ife KICKBACKPIC_2 16 sound WHIPLASH_LOAD2
			
	}
}
else
ife SPECIALIST_EQUIPMENT[69] 2 // gold energy shotgun
{
	set WEAPON2_TILE 19830
	set W2_AMMO_TILE 16633
	setarray AMMO_AMOUNT[2] 6
	setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 32
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS 19807
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 6
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND MC_GOLD_SHOTG
	set WEAPON2_SOUND2TIME 15
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 3
	set GUNMAG -1
	set GUN_VOLUME 60
	set GUN_ACCURACY 16
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 2
		
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 15 sound MC_PULSERIFLE_C
			ife KICKBACKPIC 21 sound MC_PULSERIFLE_C
	}
}
else // default pulse rifle
{
	set WEAPON2_TILE 16467
	set W2_AMMO_TILE 16633
	setarray AMMO_AMOUNT[2] 6
	setarray WEAPON_SPECIAL[2] 0

	set WEAPON2_CLIP 0
	set WEAPON2_RELOAD 13
	set WEAPON2_FIREDELAY 2
	set WEAPON2_TOTALTIME 32
	set WEAPON2_HOLDDELAY 0
	set WEAPON2_FLAGS 1024
	set WEAPON2_SHOOTS GREENLASERSHOT
	set WEAPON2_SPAWNTIME 24
	set WEAPON2_SPAWN 0
	set WEAPON2_SHOTSPERBURST 2
	set WEAPON2_INITIALSOUND 0
	set WEAPON2_FIRESOUND MC_PULSERIFLE_F
	set WEAPON2_SOUND2TIME 15
	set WEAPON2_SOUND2SOUND 4
	set WEAPON2_RELOADSOUND1 4
	set WEAPON2_RELOADSOUND2 5 

	ife CURWEAP 2
	{
	set WEAPON_TYPE 2
	set GUNMAG -1
	set GUN_VOLUME 70
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 32
	set GUN_SIZE 2
	set GUN_AMMO_TYPES 0
	set GUN_HANDS 2
		
			ife SCOPE 1 
				{
				set GUN_ACCURACY 1
				ifg KICKBACKPIC 6 set SCOPE 0
				}
			ife KICKBACKPIC 3 add GUN_SPREAD 16
			ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
			ife KICKBACKPIC 15 sound MC_PULSERIFLE_C
			ife KICKBACKPIC 21 sound MC_PULSERIFLE_C
	}
}

// ASSAULT RIFLE
ife SPECIALIST_EQUIPMENT[48] 2 // AR-73 Rifle
{
smaxammo 3 300
set WEAPON3_TILE 16565
setarray WEAPON_SPECIAL[3] 128
set W3_AMMO_TILE 16563
setarray AMMO_AMOUNT[3] 30
set WEAPON3_HOLDDELAY 1
set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_FIREDELAY 2
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_RELOAD 22
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS MSCORP_SHOT

ife CURWEAP 3
{
	set WEAPON_TYPE 0
	set GUNMAG -1
	set MGUNMAG -1
	set GUN_VOLUME 15
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 1024
	set WEAPON3_FLAGS 8276
	
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP AR73_FIRE }
	
		ifg GUN_HEAT[CURWEAP] 75
			{
			soundonce AR73_BEEP
			set WEAPON3_FIREDELAY 2
			set WEAPON3_TOTALTIME 4
			}
			else
		ifg GUN_HEAT[CURWEAP] 25
			{
			set WEAPON3_FIREDELAY 2
			set WEAPON3_TOTALTIME 5
			}
			else
			{
			set WEAPON3_FIREDELAY 2
			set WEAPON3_TOTALTIME 6
			}
	
		ifg GUN_HEAT[CURWEAP] 150
			{
			setp[].reloading 1
			soundonce AR73_OVERHEAT
			setp[].kickback_pic 5
			}
	
	ifand GUNFIREMODE 16384
		{
		set HIDE_CROSSHAIR 1
		set GUN_ACCURACY 8
		ifg GUN_HEAT[CURWEAP] 50
			{
			ifg KICKBACKPIC 10 { set gunsmoke_z 9444 set gunsmoke_angle 98 } 
			else { set gunsmoke_z 9144 set gunsmoke_angle 0 } 
			state spawn_gunsmoke_z
			}
		ifg KICKBACKPIC 6 xorvar GUNFIREMODE 16384
		ife KICKBACKPIC 2
			{ 
			set GUN_RECOIL 4
			set gunsmoke_angle 0 state spawn_gunsmoke 
			}	
		}
		else
		{
		set HIDE_CROSSHAIR 0
		set GUN_ACCURACY 16
		ifg GUN_HEAT[CURWEAP] 50
			{
			ifg KICKBACKPIC 10 { set gunsmoke_z 9444 set gunsmoke_angle 98 } 
			else { set gunsmoke_z 9144 set gunsmoke_angle 64 } 
			state spawn_gunsmoke_z
			}
		
		ife KICKBACKPIC 2
			{ 
			set GUN_RECOIL 7
			set gunsmoke_angle 64 state spawn_gunsmoke 
			}	
		}
			
		ife KICKBACKPIC 14 
			{ 
			set TEMP9 GUN_HEAT[CURWEAP]
			sub TEMP9 2
			setarray GUN_HEAT[CURWEAP] TEMP9
			ifl GUN_HEAT[CURWEAP] 20
				{
				stopsound STEAM_HISSING soundonce MDF_READY setarray GUN_HEAT[CURWEAP] 0
				}
			}
			ife KICKBACKPIC 15 
			{
			ifg GUN_HEAT[CURWEAP] 20 setp[].kickback_pic 14
			
			ifg HEAT_SINKS 0
			 ifg GUN_HEAT[CURWEAP] 100
			 ifand BITS_PRESS 128 { soundonce HEAT_SINK_EJECT shoot HEAT_SINK sub HEAT_SINKS 1 setarray GUN_HEAT[CURWEAP] 25 }
			}
			ife KICKBACKPIC 17 soundonce MDF_READY


	}
}
else // default AP AR
{
set WEAPON3_TILE 16488
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 16635
setarray AMMO_AMOUNT[3] 30

set WEAPON3_FIREDELAY 2
set WEAPON3_HOLDDELAY 1
set WEAPON3_SPAWN 0
set WEAPON3_INITIALSOUND 4
set WEAPON3_SHOTSPERBURST 1
set WEAPON3_CLIP 0
set WEAPON3_RELOADSOUND1 4
set WEAPON3_RELOADSOUND2 4
set WEAPON3_FIRESOUND 4
set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT


ife CURWEAP 3
{
	set WEAPON_TYPE 1
	set GUN_VOLUME 9
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_MAX_SPREAD 32

	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MC_AP_AR }
	
	ifand MICKY_UPGRADE 4 set MAXMGUNMAG 80
	else set MAXMGUNMAG 30
	
	set GUNMAG MGUNMAG
	
	ifg GL_COUNTDOWN 0 sub GL_COUNTDOWN 1
	
	ifand GUNFIREMODE 32768
	set GUN_AMMO_TYPES 2048
	else
	set GUN_AMMO_TYPES 32
	
	state check_cased_grenades_avail
	
		ife GL_COUNTDOWN 45 { set gunsmoke_angle 32 state spawn_gunsmoke 
		getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife GL_COUNTDOWN 44 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		
					ife GL_COUNTDOWN 34 soundonce GL_OPEN2
					ife GL_COUNTDOWN 30 state shoot_empty_40mmshell
					ife GL_COUNTDOWN 16 soundonce GL_INSERT2
					ife GL_COUNTDOWN 8 soundonce GL_CLOSE2
					
				ifg GL_COUNTDOWN 44
					{
					sub WEAPSWAYX 5
					sub WEAPSWAYY 5
					}

	
	ifand GUNFIREMODE 16384
		{
		ifand GUNFIREMODE 32768 xorvar GUNFIREMODE 32768
		ifg KICKBACKPIC 6 xorvar GUNFIREMODE 16384
		ifand MICKY_UPGRADE 8 set GUN_ACCURACY 8
		else set GUN_ACCURACY 16
		set WEAPON3_TOTALTIME 4
		set WEAPON3_FLAGS 8276
		
		ife KICKBACKPIC 1 set GUN_RECOIL 5 
		
		ife KICKBACKPIC 2
			{ 
			add GUN_SPREAD 4
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
		
		}
		else // normal fire
		{
		set WEAPON3_TOTALTIME 3
		ifand MICKY_UPGRADE 8 set GUN_ACCURACY 16
		else set GUN_ACCURACY 32
		set WEAPON3_FLAGS 4
		

		ife KICKBACKPIC 2
			{ 
			add GUN_SPREAD 5
			set GUN_RECOIL 5
			set gunsmoke_angle 104 state spawn_gunsmoke 
			}	
		
		}
			
			
		ife KICKBACKPIC 13 state JMOVESOUND2
		ife KICKBACKPIC 23
			{
			ife MGUNMAG 0 { ifand MICKY_UPGRADE 4 spawn 3756 else spawn 6781 }
			soundonce MSRIFLE_MAGOUT
			}
		ife KICKBACKPIC 37
			{
			soundonce MSRIFLE_MAGIN
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
			
		ife KICKBACKPIC 52 sound AUG_MOVEMENT
		ife KICKBACKPIC 60 sound BOLT_CATCH
		ife KICKBACKPIC 64 sound AUG_MOVEMENT


	 ifl MGUNMAG 1
	  ife KICKBACKPIC 0
		   ife player[].weapon_pos 0
			{
			ifn CUR_AMMO 0
				{
				set WEAPON3_RELOAD 61
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}

	}
}
	
// RPG
set WEAPON4_TILE 16496
set W4_AMMO_TILE 16634
setarray AMMO_AMOUNT[4] 5

set WEAPON4_FIRESOUND MC_ROCKETL_FIRE
set WEAPON4_SHOOTS RPG
set WEAPON4_RELOAD 30
set WEAPON4_FIREDELAY 4
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0
	
	ife CURWEAP 4
	{
	set WEAPON_TYPE 4
	set GUN_VOLUME 80
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_HANDS 2
	set GUN_SIZE 2
	set GUNMAG -1
	
	ifand GUNFIREMODE 2048 set WEAPON4_TOTALTIME 35 else set WEAPON4_TOTALTIME 8
	
	ife player[].weapon_pos 0
	 ifand GUNFIREMODE 2048
				{
				state spawn_lasersite
				set tracker RETURN
				set p_hitx hitx
				set p_hity hity
				seta[RETURN].x hitx
				seta[RETURN].y hity
				seta[RETURN].z hitz		
				seta[RETURN].pal 0
				}
				else ifn tracker -1 set tracker -1
	

	ife KICKBACKPIC 2 // IF THE ANIMATION IS ON IT'S 2nd FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		set gun_pushback_power -128
		state gun_pushback
		}
	ife KICKBACKPIC 3  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
	ife KICKBACKPIC 4
		{
		set gunsmoke_angle 32 state spawn_gunsmoke  
		}
	ife KICKBACKPIC 27 sound GL_INSERT2
	
	}

// PIPEBOMB
set WEAPON5_TILE 16530
set W5_AMMO_TILE 16524
setarray AMMO_AMOUNT[5] 5

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 1

	ife CURWEAP 5 
		{ 
		set WEAPON_TYPE 6
		set GUNMAG -1
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_SIZE 0
		set GUN_HANDS 2
		set GUN_VOLUME 10 
		ife KICKBACKPIC 4 sound MC_GREN_PRIME
		}
		
	ife CURWEAP 10 
		{ 
		set WEAPON_TYPE 6
		set GUNMAG -1
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_SIZE 0
		set GUN_HANDS 2
		set GUN_VOLUME 10 
		}


// SHRINKER
set WEAPON6_TILE 16519
set W6_AMMO_TILE 16629
setarray WEAPON_SPECIAL[6] 512
setarray AMMO_AMOUNT[6] 50

set WEAPON6_FIREDELAY 27
set WEAPON6_TOTALTIME 50
set WEAPON6_HOLDDELAY 57
set WEAPON6_SHOOTS 6627
set WEAPON6_SHOTSPERBURST 1
set WEAPON6_INITIALSOUND 0
set WEAPON6_FIRESOUND 4
set WEAPON6_FLAGS 6

	ife CURWEAP 6 
		{ 
		setplayer[THISACTOR].gotweapon 11 0
		set WEAPON_TYPE 8
		set GUNMAG -1
		set GUN_VOLUME 15		
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_SIZE 1
		set GUN_HANDS 2
		set GUN_VOLUME 10 
		
		ife player[].ammo_amount 6 0 stopsound MC_PULSEG_FIRE
		
		// auto-spin stuff
		ifn player[].weapon_pos 0 setp[].kickback_pic 0
		ifand GUNFIREMODE_2 16
			{
			ife KICKBACKPIC 0 setp[].kickback_pic 1
			ife KICKBACKPIC 25
				{
				ifand BITS_PRESS 4 setp[].kickback_pic 26
				else { soundonce MINIGUN_SPIN setactorsoundpitch THISACTOR MINIGUN_SPIN 256 setp[].kickback_pic 30 }
				}
			ife player[].ammo_amount 6 0 { setp[].kickback_pic 30 stopsound MC_PULSEG_FIRE sound MC_PULSEG_STOP xorvar GUNFIREMODE_2 16 }
			ife KICKBACKPIC 31 setp[].kickback_pic 24
			}
			
		
		ife KICKBACKPIC 3 sound MINIGUN_START
		ife KICKBACKPIC 29 { stopsound MC_PULSEG_FIRE sound MC_PULSEG_STOP }
		ife KICKBACKPIC 27
			{
			soundonce MC_PULSEG_FIRE
			set gunsmoke_angle 64 state spawn_gunsmoke 
			set gun_pushback_power -16 state gun_pushback
			getp[].horiz TEMP
			add TEMP 2
			setp[].horiz TEMP
			}
		ife KICKBACKPIC 28 
			{ 
			getp[].horiz TEMP
			sub TEMP 2
			setp[].horiz TEMP
			getp[].ammo_amount 6 TEMP2
			ifand BITS_PRESS 4 ifg TEMP2 0 setp[].kickback_pic 26 
			}
		
		
		}

// DEVISTATOR 
ife SPECIALIST_EQUIPMENT[54] 2 // Meson cannon?
{
set WEAPON7_TILE 16573
set W7_AMMO_TILE 16572
setarray WEAPON_SPECIAL[7] 0
setarray AMMO_AMOUNT[7] 3

	set WEAPON7_WORKSLIKE 7
	set WEAPON7_TOTALTIME 31
	set WEAPON7_HOLDDELAY 20
	set WEAPON7_FIREDELAY 2
	set WEAPON7_FIRESOUND MC_MESONC_FIRE
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 4
	set WEAPON7_SHOOTS RUBYBLAST
	set WEAPON7_FLAGS 4

	ife CURWEAP 7
		{
		set WEAPON_TYPE 9
		set GUNMAG -1 
		set GUN_VOLUME 80 
		set GUN_ACCURACY 8
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		
		ife KICKBACKPIC 3 
			{ 
				getp[].horiz TEMP 
				add TEMP 5
				setp[].horiz TEMP 
			}
			
		ife KICKBACKPIC 4
			{ 
			getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}
			
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 5 setp[].horiz TEMP }
			
		ife KICKBACKPIC 14 sound MC_EX_PUMP
		ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 8 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
		ife KICKBACKPIC 9 { getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP }
			
		}
}
else
{
set WEAPON7_TILE 16502
set W7_AMMO_TILE 16628
setarray WEAPON_SPECIAL[7] 0
setarray AMMO_AMOUNT[7] 5

	set WEAPON7_WORKSLIKE 7
	set WEAPON7_TOTALTIME 26
	set WEAPON7_HOLDDELAY 20
	set WEAPON7_FIREDELAY 2
	set WEAPON7_FIRESOUND MC_EX_SHOTGUN_F
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 8
	set WEAPON7_SHOOTS 9361
	set WEAPON7_FLAGS 4

	ife CURWEAP 7
		{
		set WEAPON_TYPE 8
		set GUNMAG -1 
		set GUN_VOLUME 60 
		set GUN_ACCURACY 2
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		
		ife KICKBACKPIC 3 
			{ 
				getp[].horiz TEMP 
				add TEMP 15
				setp[].horiz TEMP 
			}
			
		ife KICKBACKPIC 4
			{ 
			getp[].horiz TEMP sub TEMP 15 setp[].horiz TEMP
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}
			
		ife KICKBACKPIC 6  sound MC_EX_PUMP
		ife KICKBACKPIC 10 shoot EXSHELL
			
		}
}
		
// TRIPBOMB
set WEAPON8_TILE 16513
setarray AMMO_AMOUNT[8] 1

set WEAPON8_SHOOTS 0
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3330


ife CURWEAP 8
	{
	set WEAPON_TYPE 6
	set GUN_HANDS 1
	set GUN_SIZE 0
	set GUN_VOLUME 0
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	}

// FREEZER
ife SPECIALIST_EQUIPMENT[76] 2 // using Particle beam?
{
set WEAPON9_TILE 22528
setarray WEAPON_SPECIAL[9] 128
set W9_AMMO_TILE 22534
setarray AMMO_AMOUNT[9] 75

set WEAPON9_WORKSLIKE 9
set WEAPON9_TOTALTIME 3
set WEAPON9_RELOAD 22
set WEAPON9_HOLDDELAY 3
set WEAPON9_FIREDELAY 2
set WEAPON9_FIRESOUND 4
set WEAPON9_INITIALSOUND MELTA_START
set WEAPON9_SHOOTS BLUELASERSHOT
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 260
	
	ife CURWEAP 9
		{
		
		ifg KICKBACKPIC 0
		 ifl KICKBACKPIC 5
			{
			 soundonce PBEAM_FIRE
			}
			else
			ife KICKBACKPIC 0 ifsound PBEAM_FIRE { stopsound PBEAM_FIRE soundonce MELTA_STOP }
			
			
		ifg GUN_HEAT[CURWEAP] 120
			{
			setp[].reloading 1
			ifsound PBEAM_FIRE { stopsound PBEAM_FIRE soundonce MELTA_STOP }
			soundonce AR73_OVERHEAT
			soundonce MDF_COOL_D
			setp[].kickback_pic 5
			}
		ifg GUN_HEAT[CURWEAP] 40
			{
			ifg KICKBACKPIC 10 { set gunsmoke_z 9144 set gunsmoke_angle 64 } 
			else { set gunsmoke_z 8644 set gunsmoke_angle 32 } 
			state spawn_gunsmoke_z
			}
		ife KICKBACKPIC 14 
			{ 
			set TEMP9 GUN_HEAT[CURWEAP]
			sub TEMP9 3
			setarray GUN_HEAT[CURWEAP] TEMP9
			ifl GUN_HEAT[CURWEAP] 20
				{
				stopsound AR73_OVERHEAT soundonce MDF_READY setarray GUN_HEAT[CURWEAP] 0
				}
			}
			ife KICKBACKPIC 15 
			{
			ifg GUN_HEAT[CURWEAP] 20 setp[].kickback_pic 14			
			}
			
		
		set WEAPON_TYPE 0
		set GUNMAG -1
		set GUN_VOLUME 16
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		}
}
else // flamethrower
{
set WEAPON9_TILE 16542
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 16624
setarray AMMO_AMOUNT[9] 40

set WEAPON9_WORKSLIKE 9
set WEAPON9_TOTALTIME 3
set WEAPON9_HOLDDELAY 3
set WEAPON9_FIREDELAY 2
set WEAPON9_FIRESOUND 4
set WEAPON9_INITIALSOUND FLAMETH_START
set WEAPON9_SHOOTS 0
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 260
	
	ife CURWEAP 9
		{
		ifvarl player[].ammo_amount 9 2 { soundonce FLAMETH_STOP stopsound FLAMETH_FIRE }
		set WEAPON_TYPE 6
		set GUNMAG -1
		set GUN_VOLUME 16
		set GUN_SIZE 2
		set GUN_HANDS 1
		set GUN_ACCURACY 32
		set GUN_AMMO_TYPES 0
		ife KICKBACKPIC 0
			{
			ifactorsound THISACTOR FLAMETH_FIRE
				{
				stopsound FLAMETH_FIRE
				soundonce FLAMETH_STOP
				}
			}
		ife KICKBACKPIC 2 
			{
			ifand BITS_PRESS 4 
				{
				ifactorsound THISACTOR FLAMETH_START nullop else
				soundonce FLAMETH_FIRE
				}
			espawn 3296
			geta[].x TEMP
			geta[].y TEMP2
			set TEMP3 TEMP
			add TEMP3 256
			geta[].ang TEMP4
			add TEMP4 192
			randvar TEMP5 8
			ifrnd 128 add TEMP4 TEMP5 else sub TEMP4 TEMP5
			rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6
			seta[RETURN].x TEMP5 
			seta[RETURN].y TEMP6
			setactorvar[RETURN].TEMP5 1
			}
		}
}

// EXPANDER
set W11_AMMO_TILE 16629
setarray AMMO_AMOUNT[11] 50

set WEAPON11_FIREDELAY 27
set WEAPON11_TOTALTIME 50
set WEAPON1_HOLDDELAY 57
set WEAPON11_SHOOTS REDLASERSHOT
set WEAPON11_SHOTSPERBURST 1
set WEAPON11_INITIALSOUND 0
set WEAPON11_FIRESOUND 4
set WEAPON11_FLAGS 6

}
ends

defstate PS_MICKY_NOSUIT
qputs 90 EDF Injection
qputs 12 Used EDF Injection

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat-vision goggles
	qputs 106 Heat-vision on
	qputs 107 Heat-vision off
	}
else
	{
	qputs 101 Night-vision goggles
	qputs 106 Night-vision on
	qputs 107 Night-vision off
	}
	
		ife player[].jumping_counter 721 
		{
			setp[].jumping_counter 0 
		}

qputs 6 Enviro-Boots
qputs 75 Enviro-Boots on

qputs 3 Medi-Gel

qputs 89 Oxygen-tank

qputs 47 Mega Cluster Charge
qputs 48 Mega Cluster Charge
qputs 49 Mega Cluster Charge
qputs 51 Mega Cluster Charge
qputs 91 Mega Cluster Charge

qputs 88 Jet-Pack
qputs 50 Jet-Pack not found yet!
qputs 52 Jet-Pack on
qputs 53 Jet-Pack off

qputs 102 We're gonna fry your ass, Micky!

ife CHARSELECT 0
{
getuserdef[].color TEMP
ife TEMP 0 setp[].palookup 3
}

ife SHOOTGRENADE THISACTOR { shoot MC_GRENADE set SHOOTGRENADE -1 }

getp[].holoduke_on TEMP
ifn TEMP -1
{
stopsound TELEPORTER
spawn 12969
setp[].holoduke_amount 0

}


smaxammo 1 200
smaxammo 2 80
smaxammo 3 300
smaxammo 4 50
smaxammo 6 300
smaxammo 7 50
smaxammo 9 300
smaxammo 11 200

ife SHOOTCLUSTER THISACTOR { shoot CLUSTER_PROJ set SHOOTCLUSTER -1 }

setp[].knuckle_incs 0

set CKNEE 16438

set CKEYCARDTILE 6888
set CKEYCARDTILE2 6891
set CKEYCARDTILE3 6892
set CTRIPBOMB 6890
set CDETON 2570
set CTIP 2578
set CHOLDING 9431
set CHOLDING_2 9431
set CHOLDING_3 12265

set C_PISTOL_1 8987
set C_PISTOL_2 8987

set C_ARM_1 15968
set C_ARM_2 12180

set C_HAND_1 7895
set C_HAND_2 7896

set CMEDIKIT 16637
set CSTEROIDS 12926
set CHOLODUKE 12928
set CJETPACK 16627

set CHEAT 16564
set CNVG 16636

state DISP_nvg

set CSCUBA 16626
set CBOOTS 16625

set C_ARMOUR 16638
set C_HEAVY_ARMOUR 16639

set PMAX_STAMINA 70

set CIICON 12934

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set GUNMAG -1
	set GUN_HANDS 1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}



// PISTOL
set WEAPON1_TILE 16477
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 16631
setarray AMMO_AMOUNT[1] 16
smaxammo 1 200

set WEAPON1_TOTALTIME 7
set WEAPON1_HOLDDELAY 7
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOTSPERBURST 1
set WEAPON1_FIRESOUND 4
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0
set WEAPON1_FLAGS 0
set WEAPON1_RELOAD 35
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4 

	ife CURWEAP 1
	{
	ifand MICKY_UPGRADE 1 
		{
		set WEAPON_TYPE 1
		set WEAPON1_SHOOTS ARMOUR_PIERCING_SHOT
		}
	else 
		{
		set WEAPON_TYPE 0
		set WEAPON1_SHOOTS ZRIFLESHOT
		}
	set GUN_VOLUME 10
	set GUN_HANDS 1
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 0
	ifg GEO_MEGA_SHOT[0] 0
		{
		set TEMP GEO_MEGA_SHOT[0]
		sub TEMP 1
		setarray GEO_MEGA_SHOT[0] TEMP
		ifand MICKY_UPGRADE 16 set GUN_ACCURACY 8 else set GUN_ACCURACY 32
		}
	else
	{
	ifand MICKY_UPGRADE 16 set GUN_ACCURACY 4
	else set GUN_ACCURACY 8
	}
	set WEAPON1_FIREDELAY 2
	set WEAPON1_TOTALTIME 5
	
	set GUNMAG PISTOLMAG
	set MAXPISTOLMAG 8
	
		ife KICKBACKPIC 2 
			{ 
				espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP MC_PISTOL_F
				shoot 13772
				getp[].horiz TEMP 
				add TEMP 5
				setp[].horiz TEMP 
			}
			
		ife KICKBACKPIC 3
			{ 
			sub PISTOLMAG 1
			getp[].horiz TEMP sub TEMP 5 setp[].horiz TEMP
			set gunsmoke_angle 64
			state spawn_gunsmoke
			}	
		ife KICKBACKPIC 13 { sound MC_PISTOL_REL ife PISTOLMAG 0 spawn 3720 }
		ife KICKBACKPIC 15 state JMOVESOUND2
		ife KICKBACKPIC 22 
		{
		ifl CUR_AMMO MAXPISTOLMAG { set PISTOLMAG CUR_AMMO } else set PISTOLMAG MAXPISTOLMAG
		}
		
		  ifl PISTOLMAG 1
		   ife player[].weapon_pos 0
			ife KICKBACKPIC 0
			 ifn CHARSELECT 1
		   {
		   ifn CUR_AMMO 0
			   {
			   setp[].reloading 1
			   setp[].kickback_pic 6
			   }
		   }			
	}
ends

defstate PS_SNOWFALL
{
ife on_tripwire 1 action SF_STAND
ifaction ZERO action SF_STAND
ife CHARSELECT 0 set P_HAS_SHIELD 1

qputs 90 Immuno-booster
qputs 12 Used Immuno-booster

ife HELMET_LOADOUT[CHAR] 4 
	{
	qputs 101 Ghost vision goggles
	qputs 106 Ghost vision on
	qputs 107 Ghost vision off
	}
else
ife HELMET_LOADOUT[CHAR] 2 
	{
	qputs 101 Heat vision visor
	qputs 106 Heat vision on
	qputs 107 Heat vision off
	}
else
	{
	qputs 101 Night vision visor
	qputs 106 Night vision on
	qputs 107 Night vision off
	}

qputs 6 Enviro-Protection 
qputs 75 Enviro-Protection on

qputs 3 Medi-kit

qputs 89 Oxygen Capsules

ifand BEAT_EPISODES[3] 131072
	{
	qputs 47 Vajra device on
	qputs 48 Vajra device off
	qputs 49 Vajra device
	qputs 51 Vajra device
	qputs 91 Vajra device
	}
else
	{
	qputs 47 Psionic-Shield on
	qputs 48 Psionic-Shield off
	qputs 49 Psionic-Shield
	qputs 51 Psionic-Shield
	qputs 91 Psionic-Shield
	}

qputs 88 Jetpack
qputs 50 Jetpack not found yet!
qputs 52 Jetpack on
qputs 53 Jetpack off

qputs 102 We're gonna fry your ass, Snowfall!
	
ife SHOOTGRENADE THISACTOR { shoot SF_GRENADE set SHOOTGRENADE -1 }

getp[].holoduke_on TEMP
ifn TEMP -1
{
ife PS_ITEM 0 
	{
	soundonce PSI_SHIELD_ON
	set PS_ITEM 3
	}
soundonce PSI_SHIELD_AMB
seta[TEMP].cstat 32768
seta[TEMP].xrepeat 1
seta[TEMP].yrepeat 1
}
else
ife TEMP -1
ife PS_ITEM 3 
	{
	soundonce PSI_SHIELD_ON
	stopsound PSI_SHIELD_AMB
	set PS_ITEM 0
	}

smaxammo 1 200
smaxammo 3 300
smaxammo 4 30
smaxammo 6 50
smaxammo 7 50
smaxammo 9 500
smaxammo 11 50

ife SHOOTCLUSTER THISACTOR { shoot CLUSTER_PROJ set SHOOTCLUSTER -1 }

setp[].knuckle_incs 0

ife CHAR 14 
	{
	ife TIMEZONE 6 set CKNEE 6821 else
	set CKNEE 20971
	}
	
set CKEYCARDTILE 20973
set CKEYCARDTILE2 20975
set CKEYCARDTILE3 20976
set CTRIPBOMB 20974
set CDETON 12903
set CTIP 12929
set CPIPEBOMB 20949
set CHOLDING 20977
set CHOLDING_2 20977

set CHOLDING_3 20948

set C_ARM_1 20970
set C_ARM_2 20969

set C_PISTOL_1 8991
set C_PISTOL_2 8991

set CMEDIKIT 20988
set CSTEROIDS 20985
set CHOLODUKE 20982
set CJETPACK 20986

set CHEAT 20980
set CNVG 20987
state DISP_nvg

set CSCUBA 20983
set CBOOTS 20990

set C_ARMOUR 16638
set C_HEAVY_ARMOUR 16639

set C_HAND_1 20965
set C_HAND_2 20966

ifg AGENT_FATIGUE[CHAR] 5000 ifg SKILL_LEVEL 2 set PMAX_STAMINA 110 else
set PMAX_STAMINA 160

set CIICON 12934

// MELEE
ife temp_weapon 0
{
	set WEAPON0_TOTALTIME 17
	set WEAPON0_HOLDDELAY 17
	set WEAPON0_FIREDELAY 7
	set WEAPON0_FIRESOUND 532
	set WEAPON0_SHOOTS KNEE

ife CURWEAP 0
	{
	set WEAPON_TYPE 0
	set GUNMAG -1
	set GUN_HANDS 1
	ife KICKBACKPIC 15 { sound PUNCH shoot KNEE }
	state UPPERCUT_STUFF
	}
}



// PISTOL
set WEAPON1_TILE 20799
setarray WEAPON_SPECIAL[1] 0
set W1_AMMO_TILE 20798
setarray AMMO_AMOUNT[1] 20
ifand GUNSAKIMBO 4 setarray WEAPON_SPECIAL[1] 1 else setarray WEAPON_SPECIAL[1] 0

set WEAPON1_TOTALTIME 7
set WEAPON1_HOLDDELAY 7
set WEAPON1_FIREDELAY 2
set WEAPON1_INITIALSOUND 4
set WEAPON1_SHOOTS BLUELASERSHOT
set WEAPON1_SPAWN 0
set WEAPON1_CLIP 0

ife CURWEAP 1
{
set WEAPON_TYPE 7
set GUNMAG -1
set GUN_VOLUME 10
set GUN_MAX_SPREAD 0
set GUN_AMMO_TYPES 0
set GUN_SIZE 0

ifand GUNFIREMODE 64
	{
	set GUN_ACCURACY 16
	set GUN_HANDS 2
	}
	else
	{
	ifg GUN_CHARGE 0
		{
		set TEMP7 GUN_CHARGE
		div TEMP7 2
		set GUN_ACCURACY TEMP7
		}
	else
	set GUN_ACCURACY 4
	set GUN_HANDS 1
	}

ife GUN_CHARGE 0
	{
	set WEAPON1_SHOTSPERBURST 1
	set WEAPON1_FLAGS 6
	}
else
ifg GUN_CHARGE 0
{
ife KICKBACKPIC 0
	{
	ifand BITS_PRESS 64 
		{
		ifactorsound THISACTOR WEAP_CHARGE nullop else
		sound WEAP_CHARGE
		set TEMP6 GUN_CHARGE
		mul TEMP6 4
		setactorsoundpitch THISACTOR WEAP_CHARGE TEMP6
		}
		else
		{
		sound SF_BLAST_CH
		set TEMP8 360
		set TEMP6 GUN_CHARGE
		mul TEMP6 8
		sub TEMP8 TEMP6
		setactorsoundpitch THISACTOR SF_BLAST_CH TEMP8
		
		stopsound WEAP_CHARGE
		set TEMP6 GUN_CHARGE
		divvar TEMP6 10
		set WEAPON1_FLAGS 70
		set WEAPON1_SHOTSPERBURST TEMP6
		setplayer[].kickback_pic 1
		set GUN_CHARGE 0
		}
	}
}

ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SF_BLASTER }

	set WEAPON1_FIRESOUND 4
	set WEAPON1_SHOOTS BLUELASERSHOT


ife KICKBACKPIC 2
	{
	set GUN_RECOIL 5
	set gunsmoke_angle 64
	state spawn_gunsmoke
	}
		
	ifg KICKBACKPIC_2 0
		{
		add KICKBACKPIC_2 1
		ifg KICKBACKPIC_2 7 set KICKBACKPIC_2 0
		}
		
	ife KICKBACKPIC_2 2
		{
		shoot 20797
		sound SF_BLASTER
		set GUN_RECOIL 5
		set gunsmoke_angle -64
		state spawn_gunsmoke
		getp[].ammo_amount 1 TEMP
		ifg TEMP 0 sub TEMP 1 
		setp[].ammo_amount 1 TEMP
		}
}

// SHOTGUN
ifand SNOWFALL_UPGRADE 16 set WEAPON2_TILE 20821
else set WEAPON2_TILE 20816
set W2_AMMO_TILE 20815
setarray AMMO_AMOUNT[2] 8

set WEAPON2_CLIP 0
set WEAPON2_RELOAD 13
set WEAPON2_FIREDELAY 2
set WEAPON2_TOTALTIME 8
set WEAPON2_HOLDDELAY 0
set WEAPON2_FLAGS 1024
set WEAPON2_SHOOTS SHOTGUN
set WEAPON2_SPAWNTIME 24
set WEAPON2_SPAWN 0
set WEAPON2_SHOTSPERBURST 7
set WEAPON2_INITIALSOUND 0
set WEAPON2_FIRESOUND 4
set WEAPON2_SOUND2TIME 15
set WEAPON2_SOUND2SOUND 4
set WEAPON2_RELOADSOUND1 4
set WEAPON2_RELOADSOUND2 5 

ife CURWEAP 2
{
set WEAPON_TYPE 2
set GUNMAG -1
set GUN_VOLUME 40
ifand SNOWFALL_UPGRADE 8 set GUN_MAX_SPREAD 16 else
set GUN_MAX_SPREAD 64

set GUN_AMMO_TYPES 0

ifand SNOWFALL_UPGRADE 16 smaxammo 2 80 else smaxammo 2 40

ifand GUNSAKIMBO 8 setarray WEAPON_SPECIAL[2] 1 else setarray WEAPON_SPECIAL[2] 0
	
	ifand GUNFIREMODE_2 64 // using 2 shotguns?
	{
	set GUN_SIZE 3
	set GUN_ACCURACY 64
	set GUN_HANDS 2
	}
	else
	{
	set GUN_SIZE 2
	set GUN_ACCURACY 32
	set GUN_HANDS 1
	}	
		ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SF_SHOTGUN }
		ife KICKBACKPIC 3 { add GUN_SPREAD 16 shoot 3761 set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
				
	ifg KICKBACKPIC_2 0
		{
		add KICKBACKPIC_2 1
		ifg KICKBACKPIC_2 8 set KICKBACKPIC_2 0
		}
		
	ife KICKBACKPIC_2 2
		{
		shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN shoot SHOTGUN
		sound SF_SHOTGUN
		set gunsmoke_angle -64
		state spawn_gunsmoke
		getp[].ammo_amount 2 TEMP
		ifg TEMP 0 sub TEMP 1 
		setp[].ammo_amount 2 TEMP
		}
		
	ife KICKBACKPIC_2 3 { add GUN_SPREAD 16 eshoot 3761 geta[RETURN].ang TEMP sub TEMP 1024 seta[RETURN].ang TEMP }
	
		ife KICKBACKPIC_2 4 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC_2 5 { getp[].horiz TEMP add TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC_2 6 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
		ife KICKBACKPIC_2 7 { getp[].horiz TEMP sub TEMP 10 setp[].horiz TEMP }
	
		
}

// MACHINEGUN
set WEAPON3_TILE 20822
setarray WEAPON_SPECIAL[3] 0
set W3_AMMO_TILE 20805
setarray AMMO_AMOUNT[3] 50

set WEAPON3_SHOOTS ARMOUR_PIERCING_SHOT
set WEAPON3_FIREDELAY 2
set WEAPON3_TOTALTIME 3
set WEAPON3_RELOAD 51
set WEAPON3_HOLDDELAY 0 
set WEAPON3_FIRESOUND 4
set WEAPON3_INITIALSOUND 0
set WEAPON3_FLAGS 12
set WEAPON3_SPAWN 0

ife CURWEAP 3
{
	set WEAPON_TYPE 1
	set GUN_VOLUME 9
	
	ifand SNOWFALL_UPGRADE 2 set GUN_MAX_SPREAD 8
	else set GUN_MAX_SPREAD 32
	
	ife SCOPE 1
		{
		ifand SNOWFALL_UPGRADE 4 set GUN_ACCURACY 4
		else set GUN_ACCURACY 8
		set WEAPON3_FIREDELAY 2
		set WEAPON3_TOTALTIME 4
		}
	else
		{
		ifand SNOWFALL_UPGRADE 4 set GUN_ACCURACY 6
		else set GUN_ACCURACY 12
		set WEAPON3_FIREDELAY 2
		set WEAPON3_TOTALTIME 3
		}
	set GUN_SIZE 2
	set GUN_HANDS 2
	set GUN_AMMO_TYPES 0
	ifand SNOWFALL_UPGRADE 1 set MAXMGUNMAG 80 else
	set MAXMGUNMAG 40
	set GUNMAG MGUNMAG

		ife KICKBACKPIC 2
			{ 
			add GUN_SPREAD 12
			set GUN_RECOIL 10
			ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SF_ASSAULTR }
			set gunsmoke_angle 64 state spawn_gunsmoke 
			}	

		ife KICKBACKPIC 13 state JMOVESOUND2

		ife KICKBACKPIC 23
			{
			ife MGUNMAG 0 spawn 3756
			sound SF_AR_MAGOUT
			}		
		ife KICKBACKPIC 37
			{
			ifl CUR_AMMO MAXMGUNMAG set MGUNMAG CUR_AMMO else set MGUNMAG MAXMGUNMAG
			}
	 ifl MGUNMAG 1
	  ife KICKBACKPIC 0
		   ife player[].weapon_pos 0
			{
			ifn CUR_AMMO 0
				{
				setp[].reloading 1
				setp[].kickback_pic 6
				}
			}

	}
	
// RPG
set WEAPON4_TILE 20831
set W4_AMMO_TILE 20842
setarray AMMO_AMOUNT[4] 5

set WEAPON4_FIRESOUND SF_RPG
set WEAPON4_SHOOTS RPG
set WEAPON4_RELOAD 0
set WEAPON4_FIREDELAY 2
set WEAPON4_TOTALTIME 15
set WEAPON4_HOLDDELAY 0
set WEAPON4_FLAGS 0
	
	ife CURWEAP 4
	{
	set WEAPON_TYPE 4
	set GUN_VOLUME 80
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 2
	set GUN_HANDS 2
	set GUN_SIZE 2
	set GUNMAG -1
	

		ife KICKBACKPIC 2 // IF THE ANIMATION IS ON IT'S 2nd FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -128
		state gun_pushback
		
		}
		
		ife KICKBACKPIC 3  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
	
	ife KICKBACKPIC 4
		{
		set gunsmoke_angle 32 state spawn_gunsmoke  
		}
	
	}

// PIPEBOMB
set WEAPON5_TILE 20961
set W5_AMMO_TILE 20959
setarray AMMO_AMOUNT[5] 6

set WEAPON5_FIREDELAY 6
set WEAPON5_TOTALTIME 19
set WEAPON5_HOLDDELAY 12
set PIPEBOMB_CONTROL 0

ife CURWEAP 5 
	{
	set WEAPON_TYPE 6
	set GUNMAG -1
	set GUN_AMMO_TYPES 0
	set GUN_ACCURACY 32
	set GUN_MAX_SPREAD 0
	set GUN_VOLUME 0
	set GUN_HANDS 1
	set GUN_SIZE 0
	ife KICKBACKPIC 2 sound JG_FLIP
	}

// SHRINKER
set WEAPON6_TILE 20846
set W6_AMMO_TILE 20845
setarray WEAPON_SPECIAL[6] 0
setarray AMMO_AMOUNT[6] 5

	set WEAPON6_WORKSLIKE 6
	set WEAPON6_TOTALTIME 28
	set WEAPON6_HOLDDELAY 28
	set WEAPON6_FIREDELAY 3
	set WEAPON6_FIRESOUND SF_CANNON_FIRE
	set WEAPON6_INITIALSOUND 4
	set WEAPON6_SHOTSPERBURST 1
	set WEAPON6_SHOOTS 16004
	set WEAPON6_FLAGS 4

	ife CURWEAP 6 
		{ 
		set WEAPON_TYPE 8
		set GUNMAG -1 
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_MAX_SPREAD 0
		set GUN_HANDS 2
		set GUN_SIZE 2
		set GUN_VOLUME 70 
		
		ife KICKBACKPIC 5 // IF THE ANIMATION IS ON IT'S 2nd FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -128
		state gun_pushback
		
		}
		
		ife KICKBACKPIC 6  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 7  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 8  // NOW LOWER IT...
		{
		sound SF_CANNON_LOAD
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		shoot 13531
		}
		
		ife KICKBACKPIC 20 sound SF_CANNON_COCK
		
		}

// DEVISTATOR 
set WEAPON7_TILE 20835
set W7_AMMO_TILE 20843
setarray AMMO_AMOUNT[7] 6

	set WEAPON7_WORKSLIKE 7
	set WEAPON7_TOTALTIME 16
	set WEAPON7_HOLDDELAY 16
	set WEAPON7_FIREDELAY 4
	set WEAPON7_FIRESOUND SF_LIGHTNINGG
	set WEAPON7_INITIALSOUND 4
	set WEAPON7_SHOTSPERBURST 1
	set WEAPON7_SHOOTS 20834
	set WEAPON7_FLAGS 4

	ife CURWEAP 7
		{
		set WEAPON_TYPE 7
		set GUNMAG -1 
		set GUN_VOLUME 60 
		set GUN_ACCURACY 2
		set GUN_MAX_SPREAD 0
		setarray WEAPON_SPECIAL[7] 0
		set GUN_SIZE 2
		set GUN_HANDS 2
		set GUN_AMMO_TYPES 0
		soundonce SF_LG_HUM
		
		ife KICKBACKPIC 5 // IF THE ANIMATION IS ON IT'S 2nd FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -128
		state gun_pushback
		
		}
		
		ife KICKBACKPIC 6  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
		
		}
		
// TRIPBOMB
set WEAPON8_TILE 27

set WEAPON8_SHOOTS HANDHOLDINGLASER
set WEAPON8_FIREDELAY 3
set WEAPON8_FLAGS 3328
setarray AMMO_AMOUNT[8] 1

	ife CURWEAP 8
		{
		set WEAPON_TYPE 6
		set GUN_SIZE 0
		set GUNMAG -1 
		set GUN_VOLUME 0 
		set GUN_MAX_SPREAD 0
		set GUN_HANDS 2
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		}

// FREEZER
set WEAPON9_TILE 20839
setarray WEAPON_SPECIAL[9] 0
set W9_AMMO_TILE 20838
setarray AMMO_AMOUNT[9] 25

set WEAPON9_FIREDELAY 2
set WEAPON9_TOTALTIME 4
set WEAPON9_INITIALSOUND 0
set WEAPON9_SHOOTS RMAXREVOLVERSHOT
set WEAPON9_FIRESOUND 4
set WEAPON9_SHOTSPERBURST 1
set WEAPON9_FLAGS 4

	ife CURWEAP 9
	{
	set WEAPON_TYPE 0
	set GUN_VOLUME 16
	set GUNMAG -1
	set GUN_ACCURACY 8
	set GUN_MAX_SPREAD 48
	set GUN_AMMO_TYPES 0
	set GUN_SIZE 3
	set GUN_HANDS 2
	ife KICKBACKPIC 2 { espawn 2520 state SPAWN_IN_PLAYER_FRONT setactorvar[RETURN].TEMP SF_HMG }
	ife KICKBACKPIC 3 { set gunsmoke_angle 64 state spawn_gunsmoke }
		ife KICKBACKPIC 2 { getp[].horiz TEMP add TEMP 2 setp[].horiz TEMP }
		ife KICKBACKPIC 3 { add GUN_SPREAD 6 getp[].horiz TEMP sub TEMP 2 setp[].horiz TEMP }
		ifg KICKBACKPIC 0 { set gun_pushback_power -6 state gun_pushback }
	}

// EXPANDER
set W11_AMMO_TILE 20844
setarray AMMO_AMOUNT[11] 6

	set WEAPON11_WORKSLIKE 11
	set WEAPON11_TOTALTIME 28
	set WEAPON11_HOLDDELAY 28
	set WEAPON11_FIREDELAY 3
	set WEAPON11_FIRESOUND SF_HAVOK_FIRE
	set WEAPON11_INITIALSOUND 4
	set WEAPON11_SHOTSPERBURST 7
	set WEAPON11_SHOOTS 5374
	set WEAPON11_FLAGS 4

	ife CURWEAP 11 
	{ 
		set WEAPON_TYPE 8
		set GUNMAG -1 
		set GUN_ACCURACY 2
		set GUN_AMMO_TYPES 0
		set GUN_MAX_SPREAD 0
		set GUN_HANDS 2
		set GUN_SIZE 2
		set GUN_VOLUME 70 
		
		ife KICKBACKPIC 5 // IF THE ANIMATION IS ON IT'S 2nd FRAME MOVE THE PLAYERS SCREEN UP...
		{  
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		
		set gun_pushback_power -128
		state gun_pushback
		
		}
		
		ife KICKBACKPIC 6  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		add TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 7  // NOW LOWER IT...
		{
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		}
		
		ife KICKBACKPIC 8  // NOW LOWER IT...
		{
		sound SF_CANNON_LOAD
		getp[].horiz TEMP
		sub TEMP 10
		setp[].horiz TEMP
		 setprojectile[13531].pal 1 shoot 13531 setprojectile[13531].pal 0
		}
		ife KICKBACKPIC 20 sound SF_CANNON_COCK
	}
}
ends


defstate PLAYERSTATS

state CHAR_APP_STUFF

ife CHAR -1
{
set WEAPON1_RELOADSOUND1 4
set WEAPON1_RELOADSOUND2 4
setp[].knuckle_incs 0
setp[].weapon_pos 10
setp[].reloading 0
}
else
// **************************************J A M E S    S T A N F I E L D******************************************************
ife CHAR 0 // JAMES
    state PS_JAMES
// **************************************Z A X T O R******************************************************
else ife CHAR 1
    state PS_ZAXTOR
// **************************************M E R L I J N      O O S T R U M******************************************************
else ife CHAR 2 // MERLIJN
    state PS_MERLIJN
// **************************************H I G H W I R E******************************************************
else ife CHAR 3
    state PS_HIGHWIRE
// **************************************S A N G L U S S   W A R L O C K******************************************************
else ife CHAR 4
    state PS_SANGLUSS
// **************************************R U S T Y    N A I L S******************************************************
else ife CHAR 5
    state PS_RUSTY
// **************************************G E O F F R E Y******************************************************
else ife CHAR 6
    state PS_GEOFFREY
// **************************************M I K K O******************************************************
else ife CHAR 7
    state PS_MIKKO
else
// **************************************C U L T I S T******************************************************
ife CHAR 9 // CULTIST
    state PS_CULTIST
else
// **************************************B O M B S H E L L******************************************************
ife CHAR 10 // BOMBSHELL
    state PS_BOMBSHELL
// **************************************M A A R T E N    O O S T R U M******************************************************
else 
ife CHAR 11 // MAARTEN
    state PS_MAARTEN
else
// **************************************J A N E  A S H F O R D*****************************************************
ife CHAR 12
    state PS_JANE
else
// **************************************M I C K Y*****************************************************
ife CHAR 13
    state PS_MICKY
else
// **************************************S N O W F A L L*****************************************************
ife CHAR 14
    state PS_SNOWFALL
else
// **************************************M I C K Y  NO SUIT*****************************************************
ife CHAR 15
    state PS_MICKY_NOSUIT
else
// ==========================================CUTSCENE CHAR==========================
ife CHAR 20
	state PS_ANONYMOUS
	

ife CURWEAP 5
 ifn THROWING -1
	{
	ifand EXTBITS_PRESS 64
		{
		ifg player[].kickback_pic 5
		ifl player[].kickback_pic 8
		setp[].kickback_pic 6
		 ifl bomb_throw_power 256 add bomb_throw_power 4
		}
			
	ife KICKBACKPIC 0
		{
		setplayer[].curr_weapon THROWING
		set THROWING -1
		}
	}
	
ife SPACE_SUIT 1 
 ifn CHAR 12
  ifn CHAR 13
   ifn CHAR 14
	{
	set C_ARM_1 20970
	set C_ARM_2 23089
	}
	

ifg RIOTSHIELD 0 
{
ife CHAR 2 set MSHIELDUP 0
	ifg SHIELDUP 0
	  set HANDS_DRAW 1

ifg player_in_vehicle 0 set SHIELDUP 0	  
else ife GUN_HANDS 1 { ife SHIELDUP 1 sound RIOTSHIELD_UP ifl SHIELDUP 10 add SHIELDUP 1 }
else ife GUN_HANDS 2 { ife SHIELDUP 9 sound RIOTSHIELD_UP ifg SHIELDUP 0 sub SHIELDUP 1  } 

}

ends

// BLANK CHAR==================================================================================================================

// SPAWNPOINT ACTOR============================================================================================================


useractor notenemy 3712
fall

ifaction 0
{
cstat 32768
set CHARSTART 1
ifspritepal 0 setarray PLAYER_SPAWNPOINT[0] THISACTOR
ifspritepal 1 setarray PLAYER_SPAWNPOINT[1] THISACTOR
ifspritepal 2 setarray PLAYER_SPAWNPOINT[2] THISACTOR
ifspritepal 3 setarray PLAYER_SPAWNPOINT[3] THISACTOR
ifspritepal 4 setarray PLAYER_SPAWNPOINT[4] THISACTOR
ifspritepal 5 setarray PLAYER_SPAWNPOINT[5] THISACTOR
ifspritepal 6 setarray PLAYER_SPAWNPOINT[6] THISACTOR
ifspritepal 7 setarray PLAYER_SPAWNPOINT[7] THISACTOR
ifspritepal 10 setarray PLAYER_SPAWNPOINT[10] THISACTOR
ifspritepal 13 setarray PLAYER_SPAWNPOINT[13] THISACTOR
ifspritepal 14 setarray PLAYER_SPAWNPOINT[14] THISACTOR
action ZERO
}

ife CHAR 7 ifinwater ifpdistl 2048 { setp[].airleft 390 }

enda

// SANG'S BAT===============================================================================================================

move BATS_FLY 160 10
move BATS_FLY_FAST 240 10

useractor notenemy 6204
ifaction 0
	{
	sizeat 20 20
	spritepal 2
	spawn FRAMEEFFECT1
	move BATS_FLY_FAST geth faceplayerslow
	ifcount 150 killit
	ifnotmoving killit
	ifpdistl 512
		{
		set CUS_WACK 10
		palfrom 10 64 0 0
		addphealth -2
		killit
		sound RIPPER_SCRATCH
		}
	}
enda

useractor notenemy 6200

ifspawnedby TRENTON_SOLARI
{
sizeat 20 20
	spritepal 2
	move BATS_FLY getv geth
	ifnotmoving killit
}
else
{
sizeat 16 16
	ifspawnedby APLAYER
	{
	getp[].posx TEMP
	getp[].posy TEMP2
	getp[].posz TEMP8
	sub TEMP8 1754
	seta[].z TEMP8
	ifand CHAR_APP 2 { spawn SKULLEXPLOSION killit }
	ifn CHAR 4 killit
	}
	else
	ifspawnedby 1404
	{
	geta[myowner].x TEMP
	geta[myowner].y TEMP2
	geta[myowner].z TEMP8
	sub TEMP8 11313
	seta[].z TEMP8
	ifand CHAR_APP 2 { spawn SKULLEXPLOSION killit }
	ife HITAGSAVED 1 { ifn camerasprite -1 cstat 0 else cstat 32768 }
	}
	else
	ifspawnedby 13207
	{
	geta[myowner].x TEMP
	geta[myowner].y TEMP2
	geta[myowner].z TEMP8
	ifand sprite[myowner].cstat 8
	{ cstator 8 add TEMP8 6096 } else
	sub TEMP8 11813
	seta[].z TEMP8
	ifand CHAR_APP 2 { spawn SKULLEXPLOSION killit }
	ife HITAGSAVED 1 { ifn camerasprite -1 cstat 0 else cstat 32768 }
	}
	else
	ifspawnedby FORCE_CHARACTER
	{
	getp[].posx TEMP
	getp[].posy TEMP2
	getp[].posz TEMP8
	sub TEMP8 1754
	seta[].z TEMP8
	ifn CHAR 4 killit
	}

	set TEMP3 TEMP
	add TEMP3 256

	rotatepoint TEMP TEMP2 TEMP3 TEMP2 TEMP4 TEMP5 TEMP6

	ifg TEMP4 2048 sub TEMP4 2048

	seta[].x TEMP5 
	seta[].y TEMP6


	ifcount 1 { add TEMP4 32 resetcount }
}

enda

// MAP LOCATION==========================================================================================================

useractor notenemy 3831 cstat 32768

ifn HITAGSAVED 0
{
	checkactivatormotion HITAGSAVED
	ife RETURN 1
		{
		set LOCATION LOTAGSAVED
		}
	}


 enda

// FORCE PLAYER==========================================================================================================
// LOADOUT STUFF
defstate getplayerhealth
getp[].i TEMP
geta[TEMP].extra TEMP2
ends

defstate give_assigned_weapon
ifn CHAR -1
	{
		readarrayfromfile MELEE_WEAPON_LOADOUT 4010
		set GOT_KNIFE MELEE_WEAPON_LOADOUT[CHAR]
		
		readarrayfromfile EQUIPMENT_LOADOUT 4012
		readarrayfromfile CHEST_LOADOUT 4054
		readarrayfromfile BELT_LOADOUT 4055
		readarrayfromfile HELMET_LOADOUT 4056
		readarrayfromfile BOOTS_LOADOUT 4070
		
		ife CHAR 14 nullop else set P_HAS_SHIELD 0
		
		ife CHEST_LOADOUT[CHAR] 1 setp[].shield_amount 100
		else ife CHEST_LOADOUT[CHAR] 4 set P_SPIRIT_ARMOUR 100
		else ife CHEST_LOADOUT[CHAR] 5 set P_HAS_SHIELD 1
		
		ife EQUIPMENT_LOADOUT[CHAR] 2 setp[].firstaid_amount 100
		ife EQUIPMENT_LOADOUT[CHAR] 3 set RIOTSHIELD 150
		ife CHAR 1 ife EQUIPMENT_LOADOUT[1] 5 setp[].holoduke_amount 2400 // Zaxtor's hologram
		ife CHAR 2 ife EQUIPMENT_LOADOUT[2] 4 setp[].holoduke_amount 2400 // Merlijn's heavy shield
		ife CHAR 3 ife EQUIPMENT_LOADOUT[3] 6 setp[].holoduke_amount 2400 // Highwire's radio
		ife CHAR 4 ife EQUIPMENT_LOADOUT[4] 7 setp[].holoduke_amount 600 // Sang's mirror orb
		ife CHAR 7 ife EQUIPMENT_LOADOUT[7] 8 setp[].holoduke_amount 2400 // Mikko's backpack
		ife CHAR 13 ife EQUIPMENT_LOADOUT[13] 9 setp[].holoduke_amount 2400 // Micky's turret
		ife CHAR 14 ife EQUIPMENT_LOADOUT[14] 10 setp[].holoduke_amount 2400 // Snowfall's Vajra device
		
		ife CHAR 6 ife HELMET_LOADOUT[6] 6 setp[].holoduke_amount 300 // Geoffrey's bandana
		ife HELMET_LOADOUT[CHAR] 2 setp[].heat_amount HEAT_AMOUNT
		ife HELMET_LOADOUT[CHAR] 3 setp[].heat_amount HEAT_AMOUNT
		ife HELMET_LOADOUT[CHAR] 4 setp[].heat_amount HEAT_AMOUNT
		
		ife BOOTS_LOADOUT[CHAR] 1 setp[].boot_amount BOOT_AMOUNT
		ife BOOTS_LOADOUT[CHAR] 2 set GOT_FLIPPER 1
		
		ife CHAR 5 ife BELT_LOADOUT[5] 1 setp[].holoduke_amount 2400 // Rusty's throwing star belt
		ife CHAR 0 ife BELT_LOADOUT[0] 2 setp[].holoduke_amount 900 // James' forcefield belt
		
		readarrayfromfile ARTIFACTS_LOADOUT 4014
		
		readarrayfromfile SPECIALIST_EQUIPMENT 4016
		
		readarrayfromfile AMMO_LOADOUT 4015
		ife AMMO_LOADOUT[CHAR] 1 set explosive_shells 10
		else ife AMMO_LOADOUT[CHAR] 2 set flechete_shells 10
		else ife AMMO_LOADOUT[CHAR] 3 set silver_ammo 100
		else ife AMMO_LOADOUT[CHAR] 4 set tesla_ammo 75
		else ife AMMO_LOADOUT[CHAR] 5 set silver_bolts 10
		else ife AMMO_LOADOUT[CHAR] 6 set micro_torpedo 10
		else ife AMMO_LOADOUT[CHAR] 7 set magnum_shells 10
		else ife AMMO_LOADOUT[CHAR] 8 { ife PERSONEL_RESEARCH[15] 2 set heat_seek_card 10 else set heat_seek_card 5 }
		else ife AMMO_LOADOUT[CHAR] 9 set atomic_bomb 1
		else ife AMMO_LOADOUT[CHAR] 10 set DUP_missile_ammo 5
		else ife AMMO_LOADOUT[CHAR] 11 set fortymm_grenades 5
		else ife AMMO_LOADOUT[CHAR] 12 set fortymm_caseless 5
		else ife AMMO_LOADOUT[CHAR] 13 set fortymm_shells 5
		else ife AMMO_LOADOUT[CHAR] 14 set fortymm_MIA_shells 5
		else ife AMMO_LOADOUT[CHAR] 15 set fortymm_plasma 5
		else ife AMMO_LOADOUT[CHAR] 16 set fortymm_slug 5
		else ife AMMO_LOADOUT[CHAR] 19 set HEAT_SINKS 6
		else ife AMMO_LOADOUT[CHAR] 20 set dragon_shells 10
		else ife AMMO_LOADOUT[CHAR] 21 set fortymm_electro 5
		else ife AMMO_LOADOUT[CHAR] 22 set fortymm_cryo 5
	
		readarrayfromfile TEMP_WEAPON_LOADOUT 4008
		set temp_weapon TEMP_WEAPON_LOADOUT[CHAR]
		ife TEMP_WEAPON_LOADOUT[CHAR] 1 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 2 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 3 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 4 setp[].ammo_amount 0 75
		else ife TEMP_WEAPON_LOADOUT[CHAR] 5 setp[].ammo_amount 0 200
		else ife TEMP_WEAPON_LOADOUT[CHAR] 6 setp[].ammo_amount 0 25
		else ife TEMP_WEAPON_LOADOUT[CHAR] 7 setp[].ammo_amount 0 40
		else ife TEMP_WEAPON_LOADOUT[CHAR] 8 setp[].ammo_amount 0 30
		else ife TEMP_WEAPON_LOADOUT[CHAR] 9 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 10 setp[].ammo_amount 0 20
		else ife TEMP_WEAPON_LOADOUT[CHAR] 11 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 12 setp[].ammo_amount 0 24
		else ife TEMP_WEAPON_LOADOUT[CHAR] 13 setp[].ammo_amount 0 20
		else ife TEMP_WEAPON_LOADOUT[CHAR] 14 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 15 setp[].ammo_amount 0 20
		else ife TEMP_WEAPON_LOADOUT[CHAR] 16 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 17 setp[].ammo_amount 0 1
		else ife TEMP_WEAPON_LOADOUT[CHAR] 18 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 19 setp[].ammo_amount 0 1
		else ife TEMP_WEAPON_LOADOUT[CHAR] 21 setp[].ammo_amount 0 80
		else ife TEMP_WEAPON_LOADOUT[CHAR] 22 setp[].ammo_amount 0 200
		else ife TEMP_WEAPON_LOADOUT[CHAR] 23 setp[].ammo_amount 0 80
		else ife TEMP_WEAPON_LOADOUT[CHAR] 24 setp[].ammo_amount 0 200
		else ife TEMP_WEAPON_LOADOUT[CHAR] 25 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 26 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 27 setp[].ammo_amount 0 300
		else ife TEMP_WEAPON_LOADOUT[CHAR] 28 setp[].ammo_amount 0 100
		else ife TEMP_WEAPON_LOADOUT[CHAR] 29 setp[].ammo_amount 0 16
		else ife TEMP_WEAPON_LOADOUT[CHAR] 30 setp[].ammo_amount 0 100
		else ife TEMP_WEAPON_LOADOUT[CHAR] 31 setp[].ammo_amount 0 100
		else ife TEMP_WEAPON_LOADOUT[CHAR] 32 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 34 setp[].ammo_amount 0 300
		else ife TEMP_WEAPON_LOADOUT[CHAR] 35 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 37 setp[].ammo_amount 0 1
		else ife TEMP_WEAPON_LOADOUT[CHAR] 38 setp[].ammo_amount 0 1
		else ife TEMP_WEAPON_LOADOUT[CHAR] 39 setp[].ammo_amount 0 150
		else ife TEMP_WEAPON_LOADOUT[CHAR] 40 setp[].ammo_amount 0 10
		else ife TEMP_WEAPON_LOADOUT[CHAR] 41 setp[].ammo_amount 0 150
		
		
		ife CHAR 0
			{
			readgamevar JAMES_1911
			readgamevar JAMES_JACKH
			}
			
		readarrayfromfile EQUIPMENT_LOADOUT_COST 4040
		readarrayfromfile MELEE_LOADOUT_COST 4041
		readarrayfromfile TEMP_WEAPON_LOADOUT_COST 4042
		readarrayfromfile AMMO_LOADOUT_COST 4043
		readarrayfromfile SPECIALIST_LOADOUT_COST 4044
		readarrayfromfile CHEST_LOADOUT_COST 4057
		readarrayfromfile BELT_LOADOUT_COST 4058
		readarrayfromfile HELMET_LOADOUT_COST 4059
		readarrayfromfile BOOT_LOADOUT_COST 4071
		add LOADOUT_COST EQUIPMENT_LOADOUT_COST[CHAR]
		add LOADOUT_COST MELEE_LOADOUT_COST[CHAR]
		add LOADOUT_COST TEMP_WEAPON_LOADOUT_COST[CHAR]
		add LOADOUT_COST AMMO_LOADOUT_COST[CHAR]
		add LOADOUT_COST SPECIALIST_LOADOUT_COST[CHAR]
		add LOADOUT_COST CHEST_LOADOUT_COST[CHAR]
		add LOADOUT_COST BELT_LOADOUT_COST[CHAR]
		add LOADOUT_COST HELMET_LOADOUT_COST[CHAR]
		add LOADOUT_COST BOOT_LOADOUT_COST[CHAR]
		
		ife BASE_RESEARCH[6] 1 // player built workshop?
		{
		set TEMP2 LOADOUT_COST
		mulvar TEMP2 10
		divvar TEMP2 12
		set LOADOUT_COST TEMP2
		mulvar LOADOUT_COST 10
		divvar LOADOUT_COST 12
		}
		
		ife player[].gotweapon 1 0
			{
			setp[].gotweapon 1 1
			setp[].ammo_amount 1 48
			}

	}
ends

// force character

defstate spawn_bat
ifand CHAR_APP 2 nullop else espawn 6200 // Sang's bat will no longer spawn after Le Sang is killed
ends

defstate force_char
set just_changed 1
set jib_quote_track 0
getp[].i TEMP 
set SHIELDUP 0

setp[].curr_weapon 0
set pickup_quote_track 0
setp[].kickback_pic 30

		readarrayfromfile SPECIALIST_EQUIPMENT 4016
		readarrayfromfile PERSONEL_RESEARCH 4002

			ifspritepal 0 
			{ set CHAR 0 setp[].max_player_health 100 seta[TEMP].extra 100 }
				ifspritepal 1 
			{ set CHAR 1 setp[].max_player_health 255 seta[TEMP].extra 255 }
				ifspritepal 2 
			{ set CHAR 2 setp[].max_player_health 200 seta[TEMP].extra 200 }
				ifspritepal 3 
			{ set CHAR 3 setp[].max_player_health 100 seta[TEMP].extra 100 }
				ifspritepal 4 
				{
				set CHAR 4 
				ife PERSONEL_RESEARCH[10] 2 
					{ 
					setp[].max_player_health 100 
					seta[TEMP].extra 100 
					} 
				else
					{ 
					setp[].max_player_health 75 
					seta[TEMP].extra 75 
					}
				state spawn_bat 
				}
				ifspritepal 5 
			{ set CHAR 5 ife PERSONEL_RESEARCH[6] 2 { setp[].max_player_health 140 seta[TEMP].extra 140 }
					else { setp[].max_player_health 120 seta[TEMP].extra 120 } }
				ifspritepal 6 
			{ set CHAR 6 setp[].max_player_health 120 seta[TEMP].extra 120 }

	ifspritepal 7 // Mikko
	{ 
set CHAR 7 
			ife PERSONEL_RESEARCH[6] 2 // Both
			 ife PERSONEL_RESEARCH[9] 2 
			 {
			 setp[].max_player_health 200
			seta[TEMP].extra 200
			 }
			 else 
			 ifn PERSONEL_RESEARCH[9] 2
			ife PERSONEL_RESEARCH[6] 2 // Cybertour sheathing
			{
				setp[].max_player_health 170 
				seta[TEMP].extra 170
			}
			else 
			ifn PERSONEL_RESEARCH[6] 2
			ife PERSONEL_RESEARCH[9] 2 // MS Corp ceramic plating		
			{
				setp[].max_player_health 180
				seta[TEMP].extra 180
			}
			else 
			 {
			setp[].max_player_health 150 
			seta[TEMP].extra 150
			} 
	}


	ifspritepal 8 
{ set CHAR -1 }
	ifspritepal 9 // Cultist
{ set CHAR 9 setp[].max_player_health 100 seta[TEMP].extra 100 set P_HAS_SHIELD 0 }
	ifspritepal 10 // Bombshell
{ set CHAR 10 setp[].max_player_health 100 seta[TEMP].extra 100 set P_HAS_SHIELD 0 }
	ifspritepal 11 // Maarten
{ set CHAR 11 setp[].max_player_health 150 seta[TEMP].extra 150 set P_HAS_SHIELD 0 }
	ifspritepal 12 // Jane
{ set CHAR 12 setp[].max_player_health 100 seta[TEMP].extra 100 set P_HAS_SHIELD 0 }
	ifspritepal 13 // Micky
{ set CHAR 13 setp[].max_player_health 100 seta[TEMP].extra 100 }
	ifspritepal 14 // Snowfall
{ set CHAR 14 set P_HAS_SHIELD 1 ife PERSONEL_RESEARCH[10] 2 { setp[].max_player_health 75 seta[TEMP].extra 85 } 
else { setp[].max_player_health 50 seta[TEMP].extra 50 } }
	ifspritepal 15 // Suitless Micky
{ set CHAR 15 setp[].max_player_health 75 seta[TEMP].extra 75 }
	ifspritepal 16 // Skyhv
{ set CHAR 16 setp[].max_player_health 255 seta[TEMP].extra 255 }
	ifspritepal 8 ifn CHAR 2 { setp[].ammo_amount 1 48 }
	ifspritepal 20 // Cassandra
{ set CHAR 20 setp[].max_player_health 200 seta[TEMP].extra 200 }	

	getp[].max_player_health PMAXHEALTH
	ifn CHAR -1
	ife ARTIFACTS_LOADOUT[CHAR] 11
		{
		add PMAXHEALTH 20
		seta[].extra PMAXHEALTH
		setp[].max_player_health PMAXHEALTH
		}

	ifspritepal 30
		{
		set CHAR -1
		set CHARSELECT 1
		}
	else set CHARSELECT 0 
	
	
ifn LOTAGSAVED 0
{
set just_changed 1
		ife CHAR 0
		{
		set temp_weapon James_equip[43]
		setp[].ammo_amount 0 James_equip[1]
		setp[].gotweapon 1 James_equip[2]
		setp[].ammo_amount 1 James_equip[3]
		setp[].gotweapon 2 James_equip[4]
		setp[].ammo_amount 2 James_equip[5]
		setp[].gotweapon 3 James_equip[6] 
		setp[].ammo_amount 3 James_equip[7] 
		setp[].gotweapon 4 James_equip[8] // RPG
		setp[].ammo_amount 4 James_equip[9]
		setp[].ammo_amount 5 James_equip[10] // Pipebomb
		setp[].gotweapon 6 James_equip[11] // Shrinker
		setp[].ammo_amount 6 James_equip[12]
		setp[].gotweapon 7 James_equip[13] // Devistator
		setp[].ammo_amount 7 James_equip[14]
		setp[].ammo_amount 8 James_equip[15] // Tripbomb
		setp[].gotweapon 9 James_equip[16] // Freezer
		setp[].ammo_amount 9 James_equip[17]
		setp[].gotweapon 11 James_equip[18] // Expander
		setp[].ammo_amount 11 James_equip[19]

		getp[].i TEMP7
		ife James_equip[20] 0 setarray James_equip[20] 100
		seta[TEMP7].extra James_equip[20]
		ife James_equip[21] 0 setarray James_equip[21] 100
		setp[].max_player_health James_equip[21]
		setp[].shield_amount James_equip[22]
		set P_SPIRIT_ARMOUR James_equip[23] 
		set P_FIRE_ARMOUR James_equip[53] 
		set JAMES_UPGRADE James_equip[24]
		set GUNFIREMODE James_equip[25]
		set GUNSAKIMBO James_equip[26]
		set GOT_EXPLOSIVE James_equip[27]
		set AIR_FILTER James_equip[28] 
		set PISTOLMAG James_equip[29]
		set MGUNMAG James_equip[30]
		set RUNEKEYS James_equip[31]
		set ACCESSKEY2 James_equip[32]
		set PLUGKEY James_equip[33]
		set HELLGKEYS James_equip[34]
		set OLDKEYS James_equip[35]
		set GENERIC_KEYS James_equip[45]
		setp[].got_access James_equip[44]
		setp[].boot_amount James_equip[36]
		setp[].heat_amount James_equip[37]
		setp[].holoduke_amount James_equip[38]
		setp[].jetpack_amount James_equip[39]
		setp[].scuba_amount James_equip[40]
		setp[].firstaid_amount James_equip[41]
		setp[].steroids_amount James_equip[42]
		set silver_ammo James_equip[46]
		set explosive_shells James_equip[47]
		set FIRE_SUIT James_equip[48]
		set GAS_MASK James_equip[49]
		set tesla_ammo James_equip[50]
		set SCARABKEYS James_equip[51]
		set COGS James_equip[52]
		set TOOLBOX James_equip[54]
		set flechete_shells James_equip[55]
		set silver_bolts James_equip[56]
		set NORMAL_KEYS James_equip[57]
		set micro_torpedo James_equip[58]
		set magnum_shells James_equip[59]
		set heat_seek_card James_equip[60]
		set atomic_bomb James_equip[61]
		set DUP_missile_ammo James_equip[62]
		set SW_KEYS James_equip[63]
		set fortymm_grenades James_equip[64]
		set fortymm_shells James_equip[65]
		set fortymm_MIA_shells James_equip[66]
		set fortymm_plasma James_equip[67]
		set fortymm_caseless James_equip[68]
		set fortymm_electro James_equip[69]
		set fortymm_slug James_equip[70]
		set fortymm_cryo James_equip[71]
		set ROPE James_equip[72]
		set dragon_shells James_equip[75]
		set GOT_KNIFE James_equip[76]
		set RIOTSHIELD James_equip[77]
		}
	ife CHAR 1
		{
		set temp_weapon Zaxtor_equip[43]
		setp[].ammo_amount 0 Zaxtor_equip[1]
		setp[].gotweapon 1 Zaxtor_equip[2]
		setp[].ammo_amount 1 Zaxtor_equip[3]
		setp[].gotweapon 2 Zaxtor_equip[4]
		setp[].ammo_amount 2 Zaxtor_equip[5]
		setp[].gotweapon 3 Zaxtor_equip[6] 
		setp[].ammo_amount 3 Zaxtor_equip[7] 
		setp[].gotweapon 4 Zaxtor_equip[8] // RPG
		setp[].ammo_amount 4 Zaxtor_equip[9]
		setp[].ammo_amount 5 Zaxtor_equip[10] // Pipebomb
		setp[].gotweapon 6 Zaxtor_equip[11] // Shrinker
		setp[].ammo_amount 6 Zaxtor_equip[12]
		setp[].gotweapon 7 Zaxtor_equip[13] // Devistator
		setp[].ammo_amount 7 Zaxtor_equip[14]
		setp[].ammo_amount 8 Zaxtor_equip[15] // Tripbomb
		setp[].gotweapon 9 Zaxtor_equip[16] // Freezer
		setp[].ammo_amount 9 Zaxtor_equip[17]
		setp[].gotweapon 11 Zaxtor_equip[18] // Expander
		setp[].ammo_amount 11 Zaxtor_equip[19]
		
		getp[].i TEMP7
		ife Zaxtor_equip[20] 0 setarray Zaxtor_equip[20] 255
		seta[TEMP7].extra Zaxtor_equip[20]
		ife Zaxtor_equip[21] 0 setarray Zaxtor_equip[21] 255
		setp[].max_player_health Zaxtor_equip[21]
		
		setp[].shield_amount Zaxtor_equip[22]
		set P_SPIRIT_ARMOUR Zaxtor_equip[23] 
		set P_FIRE_ARMOUR Zaxtor_equip[53]
		set ZAXTOR_UPGRADE Zaxtor_equip[24]
		set GUNFIREMODE Zaxtor_equip[25]
		set GUNSAKIMBO Zaxtor_equip[26]
		set GOT_EXPLOSIVE Zaxtor_equip[27]
		set AIR_FILTER Zaxtor_equip[28] 
		set PISTOLMAG Zaxtor_equip[29]
		set MGUNMAG Zaxtor_equip[30]
		set RUNEKEYS Zaxtor_equip[31]
		set ACCESSKEY2 Zaxtor_equip[32]
		set PLUGKEY Zaxtor_equip[33]
		set HELLGKEYS Zaxtor_equip[34]
		set OLDKEYS Zaxtor_equip[35]
		set GENERIC_KEYS Zaxtor_equip[45]
		setp[].got_access Zaxtor_equip[44]
		setp[].boot_amount Zaxtor_equip[36]
		setp[].heat_amount Zaxtor_equip[37]
		setp[].holoduke_amount Zaxtor_equip[38]
		setp[].jetpack_amount Zaxtor_equip[39]
		setp[].scuba_amount Zaxtor_equip[40]
		setp[].firstaid_amount Zaxtor_equip[41]
		setp[].steroids_amount Zaxtor_equip[42]
		set silver_ammo Zaxtor_equip[46]
		set explosive_shells Zaxtor_equip[47]
		set flechete_shells Zaxtor_equip[55]
		set FIRE_SUIT Zaxtor_equip[48]
		set GAS_MASK Zaxtor_equip[49]
		set tesla_ammo Zaxtor_equip[50]
		set SCARABKEYS Zaxtor_equip[51]
		set COGS Zaxtor_equip[52]
		set TOOLBOX Zaxtor_equip[54]
		set silver_bolts Zaxtor_equip[56]
		set NORMAL_KEYS Zaxtor_equip[57]
		set micro_torpedo Zaxtor_equip[58]
		set magnum_shells Zaxtor_equip[59]
		set heat_seek_card Zaxtor_equip[60]
		set atomic_bomb Zaxtor_equip[61]
		set DUP_missile_ammo Zaxtor_equip[62]
		set SW_KEYS Zaxtor_equip[63]
		set fortymm_grenades Zaxtor_equip[64]
		set fortymm_shells Zaxtor_equip[65]
		set fortymm_MIA_shells Zaxtor_equip[66]
		set fortymm_plasma Zaxtor_equip[67]
		set fortymm_caseless Zaxtor_equip[68]
		set fortymm_electro Zaxtor_equip[69]
		set fortymm_slug Zaxtor_equip[70]
		set fortymm_cryo Zaxtor_equip[71]
		set ROPE Zaxtor_equip[72]
		set dragon_shells Zaxtor_equip[75]
		set GOT_KNIFE Zaxtor_equip[76]
		set RIOTSHIELD Zaxtor_equip[77]
		}
	ife CHAR 2
		{
		set temp_weapon Merlijn_equip[43]
		setp[].ammo_amount 0 Merlijn_equip[1]
		setp[].gotweapon 1 Merlijn_equip[2]
		setp[].ammo_amount 1 Merlijn_equip[3]
		setp[].gotweapon 2 Merlijn_equip[4]
		setp[].ammo_amount 2 Merlijn_equip[5]
		setp[].gotweapon 3 Merlijn_equip[6] 
		setp[].ammo_amount 3 Merlijn_equip[7] 
		setp[].gotweapon 4 Merlijn_equip[8] // RPG
		setp[].ammo_amount 4 Merlijn_equip[9]
		setp[].ammo_amount 5 Merlijn_equip[10] // Pipebomb
		setp[].gotweapon 6 Merlijn_equip[11] // Shrinker
		setp[].ammo_amount 6 Merlijn_equip[12]
		setp[].gotweapon 7 Merlijn_equip[13] // Devistator
		setp[].ammo_amount 7 Merlijn_equip[14]
		setp[].ammo_amount 8 Merlijn_equip[15] // Tripbomb
		setp[].gotweapon 9 Merlijn_equip[16] // Freezer
		setp[].ammo_amount 9 Merlijn_equip[17]
		setp[].gotweapon 11 Merlijn_equip[18] // Expander
		setp[].ammo_amount 11 Merlijn_equip[19]
		
		getp[].i TEMP7
		ife Merlijn_equip[20] 0 setarray Merlijn_equip[20] 200
		seta[TEMP7].extra Merlijn_equip[20]
		ife Merlijn_equip[21] 0 setarray Merlijn_equip[21] 200
		setp[].max_player_health Merlijn_equip[21]
		
		setp[].shield_amount Merlijn_equip[22]
		set P_SPIRIT_ARMOUR Merlijn_equip[23] 
		set P_FIRE_ARMOUR Merlijn_equip[53]
		set MERLIJN_UPGRADE Merlijn_equip[24]
		set GUNFIREMODE Merlijn_equip[25]
		set GUNSAKIMBO Merlijn_equip[26]
		set GOT_EXPLOSIVE Merlijn_equip[27]
		set AIR_FILTER Merlijn_equip[28] 
		set PISTOLMAG Merlijn_equip[29]
		set MGUNMAG Merlijn_equip[30]
		set RUNEKEYS Merlijn_equip[31]
		set ACCESSKEY2 Merlijn_equip[32]
		set PLUGKEY Merlijn_equip[33]
		set HELLGKEYS Merlijn_equip[34]
		set OLDKEYS Merlijn_equip[35]
		set GENERIC_KEYS Merlijn_equip[45]
		setp[].got_access Merlijn_equip[44]
		setp[].boot_amount Merlijn_equip[36]
		setp[].heat_amount Merlijn_equip[37]
		setp[].holoduke_amount Merlijn_equip[38]
		setp[].jetpack_amount Merlijn_equip[39]
		setp[].scuba_amount Merlijn_equip[40]
		setp[].firstaid_amount Merlijn_equip[41]
		setp[].steroids_amount Merlijn_equip[42]
		set silver_ammo Merlijn_equip[46]
		set explosive_shells Merlijn_equip[47]
		set FIRE_SUIT Merlijn_equip[48]
		set GAS_MASK Merlijn_equip[49]
		set tesla_ammo Merlijn_equip[50]
		set SCARABKEYS Merlijn_equip[51]
		set COGS Merlijn_equip[52]
		set TOOLBOX Merlijn_equip[54]
		set flechete_shells Merlijn_equip[55]
		set silver_bolts Merlijn_equip[56]
		set NORMAL_KEYS Merlijn_equip[57]
		set micro_torpedo Merlijn_equip[58]
		set magnum_shells Merlijn_equip[59]
		set heat_seek_card Merlijn_equip[60]
		set atomic_bomb Merlijn_equip[61]
		set DUP_missile_ammo Merlijn_equip[62]
		set SW_KEYS Merlijn_equip[63]
		set fortymm_grenades Merlijn_equip[64]
		set fortymm_shells Merlijn_equip[65]
		set fortymm_MIA_shells Merlijn_equip[66]
		set fortymm_plasma Merlijn_equip[67]
		set fortymm_caseless Merlijn_equip[68]
		set fortymm_electro Merlijn_equip[69]
		set fortymm_slug Merlijn_equip[70]
		set fortymm_cryo Merlijn_equip[71]
		set ROPE Merlijn_equip[72]
		set dragon_shells Merlijn_equip[75]
		set GOT_KNIFE Merlijn_equip[76]
		set RIOTSHIELD Merlijn_equip[77]
		}
	ife CHAR 3
		{
		set temp_weapon Highwire_equip[43]
		setp[].ammo_amount 0 Highwire_equip[1]
		setp[].gotweapon 1 Highwire_equip[2]
		setp[].ammo_amount 1 Highwire_equip[3]
		setp[].gotweapon 2 Highwire_equip[4]
		setp[].ammo_amount 2 Highwire_equip[5]
		setp[].gotweapon 3 Highwire_equip[6] 
		setp[].ammo_amount 3 Highwire_equip[7] 
		setp[].gotweapon 4 Highwire_equip[8] // RPG
		setp[].ammo_amount 4 Highwire_equip[9]
		setp[].ammo_amount 5 Highwire_equip[10] // Pipebomb
		setp[].gotweapon 6 Highwire_equip[11] // Shrinker
		setp[].ammo_amount 6 Highwire_equip[12]
		setp[].gotweapon 7 Highwire_equip[13] // Devistator
		setp[].ammo_amount 7 Highwire_equip[14]
		setp[].ammo_amount 8 Highwire_equip[15] // Tripbomb
		setp[].gotweapon 9 Highwire_equip[16] // Freezer
		setp[].ammo_amount 9 Highwire_equip[17]
		setp[].gotweapon 11 Highwire_equip[18] // Expander
		setp[].ammo_amount 11 Highwire_equip[19]
		
		getp[].i TEMP7
		ife Highwire_equip[20] 0 setarray Highwire_equip[20] 100
		seta[TEMP7].extra Highwire_equip[20]
		ife Highwire_equip[21] 0 setarray Highwire_equip[21] 100
		setp[].max_player_health Highwire_equip[21]
		
		setp[].shield_amount Highwire_equip[22]
		set P_SPIRIT_ARMOUR Highwire_equip[23] 
		set P_FIRE_ARMOUR Highwire_equip[53]
		set HIGHWIRE_UPGRADE Highwire_equip[24]
		set GUNFIREMODE Highwire_equip[25]
		set GUNSAKIMBO Highwire_equip[26]
		set GOT_EXPLOSIVE Highwire_equip[27]
		set AIR_FILTER Highwire_equip[28] 
		set PISTOLMAG Highwire_equip[29]
		set MGUNMAG Highwire_equip[30]
		set RUNEKEYS Highwire_equip[31]
		set ACCESSKEY2 Highwire_equip[32]
		set PLUGKEY Highwire_equip[33]
		set HELLGKEYS Highwire_equip[34]
		set OLDKEYS Highwire_equip[35]
		set GENERIC_KEYS Highwire_equip[45]
		setp[].got_access Highwire_equip[44]
		setp[].boot_amount Highwire_equip[36]
		setp[].heat_amount Highwire_equip[37]
		setp[].holoduke_amount Highwire_equip[38]
		setp[].jetpack_amount Highwire_equip[39]
		setp[].scuba_amount Highwire_equip[40]
		setp[].firstaid_amount Highwire_equip[41]
		setp[].steroids_amount Highwire_equip[42]
		set silver_ammo Highwire_equip[46]
		set explosive_shells Highwire_equip[47]
		set FIRE_SUIT Highwire_equip[48]
		set GAS_MASK Highwire_equip[49]
		set tesla_ammo Highwire_equip[50]
		set SCARABKEYS Highwire_equip[51]
		set COGS Highwire_equip[52]
		set TOOLBOX Highwire_equip[54]
		set flechete_shells Highwire_equip[55]
		set silver_bolts Highwire_equip[56]
		set NORMAL_KEYS Highwire_equip[57]
		set micro_torpedo Highwire_equip[58]
		set magnum_shells Highwire_equip[59]
		set heat_seek_card Highwire_equip[60]
		set atomic_bomb Highwire_equip[61]
		set DUP_missile_ammo Highwire_equip[62]
		set SW_KEYS Highwire_equip[63]
		set fortymm_grenades Highwire_equip[64]
		set fortymm_shells Highwire_equip[65]
		set fortymm_MIA_shells Highwire_equip[66]
		set fortymm_plasma Highwire_equip[67]
		set fortymm_caseless Highwire_equip[68]
		set fortymm_electro Highwire_equip[69]
		set fortymm_slug Highwire_equip[70]
		set fortymm_cryo Highwire_equip[71]
		set ROPE Highwire_equip[72]
		set dragon_shells Highwire_equip[75]
		set GOT_KNIFE Highwire_equip[76]
		set RIOTSHIELD Highwire_equip[77]
		}
	ife CHAR 4
		{
		set temp_weapon Sang_equip[43]
		setp[].ammo_amount 0 Sang_equip[1]
		setp[].gotweapon 1 Sang_equip[2]
		setp[].ammo_amount 1 Sang_equip[3]
		setp[].gotweapon 2 Sang_equip[4]
		setp[].ammo_amount 2 Sang_equip[5]
		setp[].gotweapon 3 Sang_equip[6] 
		setp[].ammo_amount 3 Sang_equip[7] 
		setp[].gotweapon 4 Sang_equip[8] // RPG
		setp[].ammo_amount 4 Sang_equip[9]
		setp[].ammo_amount 5 Sang_equip[10] // Pipebomb
		setp[].gotweapon 6 Sang_equip[11] // Shrinker
		setp[].ammo_amount 6 Sang_equip[12]
		setp[].gotweapon 7 Sang_equip[13] // Devistator
		setp[].ammo_amount 7 Sang_equip[14]
		setp[].ammo_amount 8 Sang_equip[15] // Tripbomb
		setp[].gotweapon 9 Sang_equip[16] // Freezer
		setp[].ammo_amount 9 Sang_equip[17]
		setp[].gotweapon 11 Sang_equip[18] // Expander
		setp[].ammo_amount 11 Sang_equip[19]
		
		getp[].i TEMP7
		ife Sang_equip[20] 0 setarray Sang_equip[20] 75
		seta[TEMP7].extra Sang_equip[20]
		ife Sang_equip[21] 0 setarray Sang_equip[21] 75
		setp[].max_player_health Sang_equip[21]
		
		setp[].shield_amount Sang_equip[22]
		set P_SPIRIT_ARMOUR Sang_equip[23] 
		set P_FIRE_ARMOUR Sang_equip[53]
		set SANG_UPGRADE Sang_equip[24]
		set GUNFIREMODE Sang_equip[25]
		set GUNSAKIMBO Sang_equip[26]
		set GOT_EXPLOSIVE Sang_equip[27]
		set AIR_FILTER Sang_equip[28] 
		set PISTOLMAG Sang_equip[29]
		set MGUNMAG Sang_equip[30]
		set RUNEKEYS Sang_equip[31]
		set ACCESSKEY2 Sang_equip[32]
		set PLUGKEY Sang_equip[33]
		set HELLGKEYS Sang_equip[34]
		set OLDKEYS Sang_equip[35]
		set GENERIC_KEYS Sang_equip[45]
		setp[].got_access Sang_equip[44]
		setp[].boot_amount Sang_equip[36]
		setp[].heat_amount Sang_equip[37]
		setp[].holoduke_amount Sang_equip[38]
		setp[].jetpack_amount Sang_equip[39]
		setp[].scuba_amount Sang_equip[40]
		setp[].firstaid_amount Sang_equip[41]
		setp[].steroids_amount Sang_equip[42]
		set silver_ammo Sang_equip[46]
		set explosive_shells Sang_equip[47]
		set FIRE_SUIT Sang_equip[48]
		set GAS_MASK Sang_equip[49]
		set tesla_ammo Sang_equip[50]
		set SCARABKEYS Sang_equip[51]
		set COGS Sang_equip[52]
		set TOOLBOX Sang_equip[54]
		set flechete_shells Sang_equip[55]
		set silver_bolts Sang_equip[56]
		set NORMAL_KEYS Sang_equip[57]
		set micro_torpedo Sang_equip[58]
		set magnum_shells Sang_equip[59]
		set heat_seek_card Sang_equip[60]
		set atomic_bomb Sang_equip[61]
		set DUP_missile_ammo Sang_equip[62]
		set SW_KEYS Sang_equip[63]
		set fortymm_grenades Sang_equip[64]
		set fortymm_shells Sang_equip[65]
		set fortymm_MIA_shells Sang_equip[66]
		set fortymm_plasma Sang_equip[67]
		set fortymm_caseless Sang_equip[68]
		set fortymm_electro Sang_equip[69]
		set fortymm_slug Sang_equip[70]
		set fortymm_cryo Sang_equip[71]
		set ROPE Sang_equip[72]
		set dragon_shells Sang_equip[75]
		set GOT_KNIFE Sang_equip[76]
		set RIOTSHIELD Sang_equip[77]
		}
	ife CHAR 5
		{
		set temp_weapon Rusty_equip[43]
		setp[].ammo_amount 0 Rusty_equip[1]
		setp[].gotweapon 1 Rusty_equip[2]
		setp[].ammo_amount 1 Rusty_equip[3]
		setp[].gotweapon 2 Rusty_equip[4]
		setp[].ammo_amount 2 Rusty_equip[5]
		setp[].gotweapon 3 Rusty_equip[6] 
		setp[].ammo_amount 3 Rusty_equip[7] 
		setp[].gotweapon 4 Rusty_equip[8] // RPG
		setp[].ammo_amount 4 Rusty_equip[9]
		setp[].ammo_amount 5 Rusty_equip[10] // Pipebomb
		setp[].gotweapon 6 Rusty_equip[11] // Shrinker
		setp[].ammo_amount 6 Rusty_equip[12]
		setp[].gotweapon 7 Rusty_equip[13] // Devistator
		setp[].ammo_amount 7 Rusty_equip[14]
		setp[].ammo_amount 8 Rusty_equip[15] // Tripbomb
		setp[].gotweapon 9 Rusty_equip[16] // Freezer
		setp[].ammo_amount 9 Rusty_equip[17]
		setp[].gotweapon 11 Rusty_equip[18] // Expander
		setp[].ammo_amount 11 Rusty_equip[19]
		
		getp[].i TEMP7
		ife Rusty_equip[20] 0 setarray Rusty_equip[20] 125
		seta[TEMP7].extra Rusty_equip[20]
		ife Rusty_equip[21] 0 setarray Rusty_equip[21] 125
		setp[].max_player_health Rusty_equip[21]
		
		setp[].shield_amount Rusty_equip[22]
		set P_SPIRIT_ARMOUR Rusty_equip[23] 
		set P_FIRE_ARMOUR Rusty_equip[53]
		set RUSTY_UPGRADE Rusty_equip[24]
		set GUNFIREMODE Rusty_equip[25]
		set GUNSAKIMBO Rusty_equip[26]
		set GOT_EXPLOSIVE Rusty_equip[27]
		set AIR_FILTER Rusty_equip[28] 
		set PISTOLMAG Rusty_equip[29]
		set MGUNMAG Rusty_equip[30]
		set RUNEKEYS Rusty_equip[31]
		set ACCESSKEY2 Rusty_equip[32]
		set PLUGKEY Rusty_equip[33]
		set HELLGKEYS Rusty_equip[34]
		set OLDKEYS Rusty_equip[35]
		set GENERIC_KEYS Rusty_equip[45]
		setp[].got_access Rusty_equip[44]
		setp[].boot_amount Rusty_equip[36]
		setp[].heat_amount Rusty_equip[37]
		setp[].holoduke_amount Rusty_equip[38]
		setp[].jetpack_amount Rusty_equip[39]
		setp[].scuba_amount Rusty_equip[40]
		setp[].firstaid_amount Rusty_equip[41]
		setp[].steroids_amount Rusty_equip[42]
		set silver_ammo Rusty_equip[46]
		set explosive_shells Rusty_equip[47]
		set FIRE_SUIT Rusty_equip[48]
		set GAS_MASK Rusty_equip[49]
		set tesla_ammo Rusty_equip[50]
		set SCARABKEYS Rusty_equip[51]
		set COGS Rusty_equip[52]
		set TOOLBOX Rusty_equip[54]
		set flechete_shells Rusty_equip[55]
		set silver_bolts Rusty_equip[56]
		set NORMAL_KEYS Rusty_equip[57]
		set micro_torpedo Rusty_equip[58]
		set magnum_shells Rusty_equip[59]
		set heat_seek_card Rusty_equip[60]
		set atomic_bomb Rusty_equip[61]
		set DUP_missile_ammo Rusty_equip[62]
		set SW_KEYS Rusty_equip[63]
		set fortymm_grenades Rusty_equip[64]
		set fortymm_shells Rusty_equip[65]
		set fortymm_MIA_shells Rusty_equip[66]
		set fortymm_plasma Rusty_equip[67]
		set fortymm_caseless Rusty_equip[68]
		set fortymm_electro Rusty_equip[69]
		set fortymm_slug Rusty_equip[70]
		set fortymm_cryo Rusty_equip[71]
		set ROPE Rusty_equip[72]
		set dragon_shells Rusty_equip[75]
		set GOT_KNIFE Rusty_equip[76]
		set RIOTSHIELD Rusty_equip[77]
		}
	ife CHAR 6
		{
		set temp_weapon Geoffrey_equip[43]
		setp[].ammo_amount 0 Geoffrey_equip[1]
		setp[].gotweapon 1 Geoffrey_equip[2]
		setp[].ammo_amount 1 Geoffrey_equip[3]
		setp[].gotweapon 2 Geoffrey_equip[4]
		setp[].ammo_amount 2 Geoffrey_equip[5]
		setp[].gotweapon 3 Geoffrey_equip[6] 
		setp[].ammo_amount 3 Geoffrey_equip[7] 
		setp[].gotweapon 4 Geoffrey_equip[8] // RPG
		setp[].ammo_amount 4 Geoffrey_equip[9]
		setp[].ammo_amount 5 Geoffrey_equip[10] // Pipebomb
		setp[].gotweapon 6 Geoffrey_equip[11] // Shrinker
		setp[].ammo_amount 6 Geoffrey_equip[12]
		setp[].gotweapon 7 Geoffrey_equip[13] // Devistator
		setp[].ammo_amount 7 Geoffrey_equip[14]
		setp[].ammo_amount 8 Geoffrey_equip[15] // Tripbomb
		setp[].gotweapon 9 Geoffrey_equip[16] // Freezer
		setp[].ammo_amount 9 Geoffrey_equip[17]
		setp[].gotweapon 11 Geoffrey_equip[18] // Expander
		setp[].ammo_amount 11 Geoffrey_equip[19]
		
		getp[].i TEMP7
		ife Geoffrey_equip[20] 0 setarray Geoffrey_equip[20] 125
		seta[TEMP7].extra Geoffrey_equip[20]
		ife Geoffrey_equip[21] 0 setarray Geoffrey_equip[21] 125
		setp[].max_player_health Geoffrey_equip[21]
		
		setp[].shield_amount Geoffrey_equip[22]
		set P_SPIRIT_ARMOUR Geoffrey_equip[23] 
		set P_FIRE_ARMOUR Geoffrey_equip[53]
		set GEOFFREY_UPGRADE Geoffrey_equip[24]
		set GUNFIREMODE Geoffrey_equip[25]
		set GUNSAKIMBO Geoffrey_equip[26]
		set GOT_EXPLOSIVE Geoffrey_equip[27]
		set AIR_FILTER Geoffrey_equip[28] 
		set PISTOLMAG Geoffrey_equip[29]
		set MGUNMAG Geoffrey_equip[30]
		set RUNEKEYS Geoffrey_equip[31]
		set ACCESSKEY2 Geoffrey_equip[32]
		set PLUGKEY Geoffrey_equip[33]
		set HELLGKEYS Geoffrey_equip[34]
		set OLDKEYS Geoffrey_equip[35]
		set GENERIC_KEYS Geoffrey_equip[45]
		setp[].got_access Geoffrey_equip[44]
		setp[].boot_amount Geoffrey_equip[36]
		setp[].heat_amount Geoffrey_equip[37]
		setp[].holoduke_amount Geoffrey_equip[38]
		setp[].jetpack_amount Geoffrey_equip[39]
		setp[].scuba_amount Geoffrey_equip[40]
		setp[].firstaid_amount Geoffrey_equip[41]
		setp[].steroids_amount Geoffrey_equip[42]
		set silver_ammo Geoffrey_equip[46]
		set explosive_shells Geoffrey_equip[47]
		set FIRE_SUIT Geoffrey_equip[48]
		set GAS_MASK Geoffrey_equip[49]
		set tesla_ammo Geoffrey_equip[50]
		set SCARABKEYS Geoffrey_equip[51]
		set COGS Geoffrey_equip[52]
		set TOOLBOX Geoffrey_equip[54]
		set flechete_shells Geoffrey_equip[55]
		set silver_bolts Geoffrey_equip[56]
		set NORMAL_KEYS Geoffrey_equip[57]
		set micro_torpedo Geoffrey_equip[58]
		set magnum_shells Geoffrey_equip[59]
		set heat_seek_card Geoffrey_equip[60]
		set atomic_bomb Geoffrey_equip[61]
		set DUP_missile_ammo Geoffrey_equip[62]
		set SW_KEYS Geoffrey_equip[63]
		set fortymm_grenades Geoffrey_equip[64]
		set fortymm_shells Geoffrey_equip[65]
		set fortymm_MIA_shells Geoffrey_equip[66]
		set fortymm_plasma Geoffrey_equip[67]
		set fortymm_caseless Geoffrey_equip[68]
		set fortymm_electro Geoffrey_equip[69]
		set fortymm_slug Geoffrey_equip[70]
		set fortymm_cryo Geoffrey_equip[71]
		set ROPE Geoffrey_equip[72]
		set dragon_shells Geoffrey_equip[75]
		set GOT_KNIFE Geoffrey_equip[76]
		set RIOTSHIELD Geoffrey_equip[77]
		}
	ife CHAR 7
		{
		set temp_weapon Mikko_equip[43]
		setp[].ammo_amount 0 Mikko_equip[1]
		setp[].gotweapon 1 Mikko_equip[2]
		setp[].ammo_amount 1 Mikko_equip[3]
		setp[].gotweapon 2 Mikko_equip[4]
		setp[].ammo_amount 2 Mikko_equip[5]
		setp[].gotweapon 3 Mikko_equip[6] 
		setp[].ammo_amount 3 Mikko_equip[7] 
		setp[].gotweapon 4 Mikko_equip[8] // RPG
		setp[].ammo_amount 4 Mikko_equip[9]
		setp[].ammo_amount 5 Mikko_equip[10] // Pipebomb
		setp[].gotweapon 6 Mikko_equip[11] // Shrinker
		setp[].ammo_amount 6 Mikko_equip[12]
		setp[].gotweapon 7 Mikko_equip[13] // Devistator
		setp[].ammo_amount 7 Mikko_equip[14]
		setp[].ammo_amount 8 Mikko_equip[15] // Tripbomb
		setp[].gotweapon 9 Mikko_equip[16] // Freezer
		setp[].ammo_amount 9 Mikko_equip[17]
		setp[].gotweapon 11 Mikko_equip[18] // Expander
		setp[].ammo_amount 11 Mikko_equip[19]
		
		getp[].i TEMP7
		ife Mikko_equip[20] 0 setarray Mikko_equip[20] 150
		seta[TEMP7].extra Mikko_equip[20]
		ife Mikko_equip[21] 0 setarray Mikko_equip[21] 150
		setp[].max_player_health Mikko_equip[21]
		
		setp[].shield_amount Mikko_equip[22]
		set P_SPIRIT_ARMOUR Mikko_equip[23] 
		set P_FIRE_ARMOUR Mikko_equip[53]
		set MIKKO_UPGRADE Mikko_equip[24]
		set GUNFIREMODE Mikko_equip[25]
		set GUNSAKIMBO Mikko_equip[26]
		set GOT_EXPLOSIVE Mikko_equip[27]
		set AIR_FILTER Mikko_equip[28] 
		set PISTOLMAG Mikko_equip[29]
		set MGUNMAG Mikko_equip[30]
		set RUNEKEYS Mikko_equip[31]
		set ACCESSKEY2 Mikko_equip[32]
		set PLUGKEY Mikko_equip[33]
		set HELLGKEYS Mikko_equip[34]
		set OLDKEYS Mikko_equip[35]
		set GENERIC_KEYS Mikko_equip[45]
		setp[].got_access Mikko_equip[44]
		setp[].boot_amount Mikko_equip[36]
		setp[].heat_amount Mikko_equip[37]
		setp[].holoduke_amount Mikko_equip[38]
		setp[].jetpack_amount Mikko_equip[39]
		setp[].scuba_amount Mikko_equip[40]
		setp[].firstaid_amount Mikko_equip[41]
		setp[].steroids_amount Mikko_equip[42]
		set silver_ammo Mikko_equip[46]
		set explosive_shells Mikko_equip[47]
		set FIRE_SUIT Mikko_equip[48]
		set GAS_MASK Mikko_equip[49]
		set tesla_ammo Mikko_equip[50]
		set SCARABKEYS Mikko_equip[51]
		set COGS Mikko_equip[52]
		set TOOLBOX Mikko_equip[54]
		set flechete_shells Mikko_equip[55]
		set silver_bolts Mikko_equip[56]
		set NORMAL_KEYS Mikko_equip[57]
		set micro_torpedo Mikko_equip[58]
		set magnum_shells Mikko_equip[59]
		set heat_seek_card Mikko_equip[60]
		set atomic_bomb Mikko_equip[61]
		set DUP_missile_ammo Mikko_equip[62]
		set SW_KEYS Mikko_equip[63]
		set fortymm_grenades Mikko_equip[64]
		set fortymm_shells Mikko_equip[65]
		set fortymm_MIA_shells Mikko_equip[66]
		set fortymm_plasma Mikko_equip[67]
		set fortymm_caseless Mikko_equip[68]
		set fortymm_electro Mikko_equip[69]
		set fortymm_slug Mikko_equip[70]
		set fortymm_cryo Mikko_equip[71]
		set ROPE Mikko_equip[72]
		set dragon_shells Mikko_equip[75]
		set GOT_KNIFE Mikko_equip[76]
		set RIOTSHIELD Mikko_equip[77]
		}
	ife CHAR 9 // Cultist
		{
		set temp_weapon 0
		setp[].ammo_amount 0 0
		setp[].gotweapon 1 1
		setp[].ammo_amount 1 96
		setp[].gotweapon 2 0
		setp[].ammo_amount 2 0
		setp[].gotweapon 3 0 
		setp[].ammo_amount 3 0 
		setp[].gotweapon 4 0 // RPG
		setp[].ammo_amount 4 0
		setp[].ammo_amount 5 5 // Pipebomb
		setp[].gotweapon 6 0 // Shrinker
		setp[].ammo_amount 6 0
		setp[].gotweapon 7 0 // Devistator
		setp[].ammo_amount 7 0
		setp[].ammo_amount 8 0 // Tripbomb
		setp[].gotweapon 9 0 // Freezer
		setp[].ammo_amount 9 0
		setp[].gotweapon 11 0 // Expander
		setp[].ammo_amount 11 0
		
		getp[].i TEMP7
		seta[TEMP7].extra 100
		setp[].max_player_health 200
		
		setp[].shield_amount 100
		set P_SPIRIT_ARMOUR 0
		set GUNFIREMODE 0
		set GUNFIREMODE_2 0
		set GUNSAKIMBO 0
		set GOT_EXPLOSIVE 0
		set AIR_FILTER 0
		set PISTOLMAG 0
		set MGUNMAG 0
		set RUNEKEYS 0
		set ACCESSKEY2 0
		set PLUGKEY 0
		set HELLGKEYS 0
		set OLDKEYS 0
		set GENERIC_KEYS 2
		setp[].got_access 0
		setp[].boot_amount 0
		setp[].heat_amount 0
		setp[].holoduke_amount 0
		setp[].jetpack_amount 0
		setp[].scuba_amount 0
		setp[].firstaid_amount 0
		setp[].steroids_amount 0
		set silver_ammo 0
		set explosive_shells 0
		set flechete_shells 0
		set FIRE_SUIT 0
		set GAS_MASK 0
		set tesla_ammo 0
		set SCARABKEYS 0
		set COGS 0
		set TOOLBOX 0
		set silver_bolts 0
		}
	ife CHAR 10 // Bombshell
		{
		set temp_weapon 0
		setp[].ammo_amount 0 0
		setp[].gotweapon 1 1
		setp[].ammo_amount 1 64
		setp[].gotweapon 2 0
		setp[].ammo_amount 2 0
		setp[].gotweapon 3 1 
		setp[].ammo_amount 3 250 
		setp[].gotweapon 4 0 // RPG
		setp[].ammo_amount 4 0
		setp[].ammo_amount 5 5 // Pipebomb
		setp[].gotweapon 6 1 // Shrinker
		setp[].ammo_amount 6 40
		setp[].gotweapon 7 0 // Devistator
		setp[].ammo_amount 7 0
		setp[].ammo_amount 8 0 // Tripbomb
		setp[].gotweapon 9 1 // Freezer
		setp[].ammo_amount 9 75
		setp[].gotweapon 11 1 // Expander
		setp[].ammo_amount 11 10
		
		getp[].i TEMP7
		seta[TEMP7].extra 100
		setp[].max_player_health 100
		
		setp[].shield_amount 100
		set P_SPIRIT_ARMOUR 0
		set GUNFIREMODE 0
		set GUNFIREMODE_2 0
		set GUNSAKIMBO 0
		set GOT_EXPLOSIVE 0
		set AIR_FILTER 0
		set PISTOLMAG 0
		set MGUNMAG 0
		set RUNEKEYS 0
		set ACCESSKEY2 0
		set PLUGKEY 0
		set HELLGKEYS 0
		set OLDKEYS 0
		set GENERIC_KEYS 0
		setp[].got_access 0
		setp[].boot_amount 0
		setp[].heat_amount 0
		setp[].holoduke_amount 0
		setp[].jetpack_amount 0
		setp[].scuba_amount 0
		setp[].firstaid_amount 100
		setp[].steroids_amount 0
		set silver_ammo 0
		set explosive_shells 0
		set flechete_shells 0
		set magnum_shells 0
		set silver_bolts 0
		set fortymm_grenades 3
		set FIRE_SUIT 0
		set GAS_MASK 1
		set tesla_ammo 0
		set SCARABKEYS 0
		set COGS 0
		set TOOLBOX 1
		set silver_bolts 0
		
	
		
		}
	ife CHAR 11 // Maartn
		{
		set temp_weapon 0
		setp[].ammo_amount 0 0
		setp[].gotweapon 1 1
		setp[].ammo_amount 1 1
		setp[].gotweapon 2 1
		setp[].ammo_amount 2 10
		setp[].gotweapon 3 0 
		setp[].ammo_amount 3 0 
		setp[].gotweapon 4 0 // RPG
		setp[].ammo_amount 4 0
		setp[].ammo_amount 5 5 // Pipebomb
		setp[].gotweapon 6 0 // Shrinker
		setp[].ammo_amount 6 0
		setp[].gotweapon 7 0 // Devistator
		setp[].ammo_amount 7 0
		setp[].ammo_amount 8 0 // Tripbomb
		setp[].gotweapon 9 0 // Freezer
		setp[].ammo_amount 9 0
		setp[].gotweapon 11 0 // Expander
		setp[].ammo_amount 11 0
		
		getp[].i TEMP7
		seta[TEMP7].extra 100
		setp[].max_player_health 200
		
		setp[].shield_amount 100
		set P_SPIRIT_ARMOUR 0
		set GUNFIREMODE 0
		set GUNFIREMODE_2 0
		set GUNSAKIMBO 0
		set GOT_EXPLOSIVE 0
		set AIR_FILTER 0
		set PISTOLMAG 0
		set MGUNMAG 0
		set RUNEKEYS 0
		set ACCESSKEY2 0
		set PLUGKEY 0
		set HELLGKEYS 0
		set OLDKEYS 0
		set GENERIC_KEYS 2
		setp[].got_access 0
		setp[].boot_amount 0
		setp[].heat_amount 0
		setp[].holoduke_amount 0
		setp[].jetpack_amount 0
		setp[].scuba_amount 0
		setp[].firstaid_amount 0
		setp[].steroids_amount 0
		set silver_ammo 0
		set explosive_shells 0
		set flechete_shells 0
		set FIRE_SUIT 0
		set GAS_MASK 0
		set tesla_ammo 0
		set SCARABKEYS 0
		set COGS 0
		set TOOLBOX 0
		set silver_bolts 0
		}
	ife CHAR 12 // JANE
		{
		set temp_weapon 0
		setp[].ammo_amount 0 0
		setp[].gotweapon 1 1
		setp[].ammo_amount 1 96
		setp[].gotweapon 2 0
		setp[].ammo_amount 2 0
		setp[].gotweapon 3 0 
		setp[].ammo_amount 3 0 
		setp[].gotweapon 4 0 // RPG
		setp[].ammo_amount 4 0
		setp[].ammo_amount 5 5 // Pipebomb
		setp[].gotweapon 6 0 // Shrinker
		setp[].ammo_amount 6 0
		setp[].gotweapon 7 0 // Devistator
		setp[].ammo_amount 7 0
		setp[].ammo_amount 8 0 // Tripbomb
		setp[].gotweapon 9 0 // Freezer
		setp[].ammo_amount 9 0
		setp[].gotweapon 11 0 // Expander
		setp[].ammo_amount 11 0
		
		getp[].i TEMP7
		seta[TEMP7].extra 200
		setp[].max_player_health 200
		
		setp[].shield_amount 100
		set P_SPIRIT_ARMOUR 0
		set GUNFIREMODE 0
		set GUNFIREMODE_2 0
		set GUNSAKIMBO 0
		set GOT_EXPLOSIVE 0
		set AIR_FILTER 0
		set PISTOLMAG 0
		set MGUNMAG 0
		set RUNEKEYS 0
		set ACCESSKEY2 0
		set PLUGKEY 0
		set HELLGKEYS 0
		set OLDKEYS 0
		set GENERIC_KEYS 0
		setp[].got_access 0
		setp[].boot_amount 0
		setp[].heat_amount 0
		setp[].holoduke_amount 0
		setp[].jetpack_amount 0
		setp[].scuba_amount 0
		setp[].firstaid_amount 0
		setp[].steroids_amount 0
		set silver_ammo 0
		set explosive_shells 0
		set flechete_shells 0
		set FIRE_SUIT 0
		set GAS_MASK 0
		set tesla_ammo 0
		set SCARABKEYS 0
		set COGS 0
		set TOOLBOX 0
		set silver_bolts 0
		}
	ife CHAR 13 // Micky
		{
		set temp_weapon Micky_equip[43]
		setp[].ammo_amount 0 Micky_equip[1]
		setp[].gotweapon 1 Micky_equip[2]
		setp[].ammo_amount 1 Micky_equip[3]
		setp[].gotweapon 2 Micky_equip[4]
		setp[].ammo_amount 2 Micky_equip[5]
		setp[].gotweapon 3 Micky_equip[6] 
		setp[].ammo_amount 3 Micky_equip[7] 
		setp[].gotweapon 4 Micky_equip[8] // RPG
		setp[].ammo_amount 4 Micky_equip[9]
		setp[].ammo_amount 5 Micky_equip[10] // Pipebomb
		setp[].gotweapon 6 Micky_equip[11] // Shrinker
		setp[].ammo_amount 6 Micky_equip[12]
		setp[].gotweapon 7 Micky_equip[13] // Devistator
		setp[].ammo_amount 7 Micky_equip[14]
		setp[].ammo_amount 8 Micky_equip[15] // Tripbomb
		setp[].gotweapon 9 Micky_equip[16] // Freezer
		setp[].ammo_amount 9 Micky_equip[17]
		setp[].gotweapon 11 Micky_equip[18] // Expander
		setp[].ammo_amount 11 Micky_equip[19]
		
		getp[].i TEMP7
		ife Micky_equip[20] 0 setarray Micky_equip[20] 100
		seta[TEMP7].extra Micky_equip[20]
		ife Micky_equip[21] 0 setarray Micky_equip[21] 100
		setp[].max_player_health Micky_equip[21]
		
		setp[].shield_amount Micky_equip[22]
		set P_SPIRIT_ARMOUR Micky_equip[23] 
		set P_FIRE_ARMOUR Micky_equip[53]
		set MICKY_UPGRADE Micky_equip[24]
		set GUNFIREMODE Micky_equip[25]
		set GUNSAKIMBO Micky_equip[26]
		set GOT_EXPLOSIVE Micky_equip[27]
		set AIR_FILTER Micky_equip[28] 
		set PISTOLMAG Micky_equip[29]
		set MGUNMAG Micky_equip[30]
		set RUNEKEYS Micky_equip[31]
		set ACCESSKEY2 Micky_equip[32]
		set PLUGKEY Micky_equip[33]
		set HELLGKEYS Micky_equip[34]
		set OLDKEYS Micky_equip[35]
		set GENERIC_KEYS Micky_equip[45]
		setp[].got_access Micky_equip[44]
		setp[].boot_amount Micky_equip[36]
		setp[].heat_amount Micky_equip[37]
		setp[].holoduke_amount Micky_equip[38]
		setp[].jetpack_amount Micky_equip[39]
		setp[].scuba_amount Micky_equip[40]
		setp[].firstaid_amount Micky_equip[41]
		setp[].steroids_amount Micky_equip[42]
		set silver_ammo Micky_equip[46]
		set explosive_shells Micky_equip[47]
		set FIRE_SUIT Micky_equip[48]
		set GAS_MASK Micky_equip[49]
		set tesla_ammo Micky_equip[50]
		set SCARABKEYS Micky_equip[51]
		set COGS Micky_equip[52]
		set TOOLBOX Micky_equip[54]
		set flechete_shells Micky_equip[55]
		set silver_bolts Micky_equip[56]
		set NORMAL_KEYS Micky_equip[57]
		set micro_torpedo Micky_equip[58]
		set magnum_shells Micky_equip[59]
		set heat_seek_card Micky_equip[60]
		set atomic_bomb Micky_equip[61]
		set DUP_missile_ammo Micky_equip[62]
		set SW_KEYS Micky_equip[63]
		set fortymm_grenades Micky_equip[64]
		set fortymm_shells Micky_equip[65]
		set fortymm_MIA_shells Micky_equip[66]
		set fortymm_plasma Micky_equip[67]
		set fortymm_caseless Micky_equip[68]
		set fortymm_electro Micky_equip[69]
		set fortymm_slug Micky_equip[70]
		set fortymm_cryo Micky_equip[71]
		set ROPE Micky_equip[72]
		set dragon_shells Micky_equip[75]
		set GOT_KNIFE Micky_equip[76]
		set RIOTSHIELD Micky_equip[77]
		}
	ife CHAR 14 // Snowfall
		{
		set temp_weapon Snowfall_equip[43]
		setp[].ammo_amount 0 Snowfall_equip[1]
		setp[].gotweapon 1 Snowfall_equip[2]
		setp[].ammo_amount 1 Snowfall_equip[3]
		setp[].gotweapon 2 Snowfall_equip[4]
		setp[].ammo_amount 2 Snowfall_equip[5]
		setp[].gotweapon 3 Snowfall_equip[6] 
		setp[].ammo_amount 3 Snowfall_equip[7] 
		setp[].gotweapon 4 Snowfall_equip[8] // RPG
		setp[].ammo_amount 4 Snowfall_equip[9]
		setp[].ammo_amount 5 Snowfall_equip[10] // Pipebomb
		setp[].gotweapon 6 Snowfall_equip[11] // Shrinker
		setp[].ammo_amount 6 Snowfall_equip[12]
		setp[].gotweapon 7 Snowfall_equip[13] // Devistator
		setp[].ammo_amount 7 Snowfall_equip[14]
		setp[].ammo_amount 8 Snowfall_equip[15] // Tripbomb
		setp[].gotweapon 9 Snowfall_equip[16] // Freezer
		setp[].ammo_amount 9 Snowfall_equip[17]
		setp[].gotweapon 11 Snowfall_equip[18] // Expander
		setp[].ammo_amount 11 Snowfall_equip[19]
		
		getp[].i TEMP7
		ife Snowfall_equip[20] 0 setarray Snowfall_equip[20] 50
		seta[TEMP7].extra Snowfall_equip[20]
		ife Snowfall_equip[21] 0 setarray Snowfall_equip[21] 50
		setp[].max_player_health Snowfall_equip[21]
		
		setp[].shield_amount Snowfall_equip[22]
		set P_SPIRIT_ARMOUR Snowfall_equip[23] 
		set P_FIRE_ARMOUR Snowfall_equip[53]
		set SNOWFALL_UPGRADE Snowfall_equip[24]
		set GUNFIREMODE Snowfall_equip[25]
		set GUNSAKIMBO Snowfall_equip[26]
		set GOT_EXPLOSIVE Snowfall_equip[27]
		set AIR_FILTER Snowfall_equip[28] 
		set PISTOLMAG Snowfall_equip[29]
		set MGUNMAG Snowfall_equip[30]
		set RUNEKEYS Snowfall_equip[31]
		set ACCESSKEY2 Snowfall_equip[32]
		set PLUGKEY Snowfall_equip[33]
		set HELLGKEYS Snowfall_equip[34]
		set OLDKEYS Snowfall_equip[35]
		set GENERIC_KEYS Snowfall_equip[45]
		setp[].got_access Snowfall_equip[44]
		setp[].boot_amount Snowfall_equip[36]
		setp[].heat_amount Snowfall_equip[37]
		setp[].holoduke_amount Snowfall_equip[38]
		setp[].jetpack_amount Snowfall_equip[39]
		setp[].scuba_amount Snowfall_equip[40]
		setp[].firstaid_amount Snowfall_equip[41]
		setp[].steroids_amount Snowfall_equip[42]
		set silver_ammo Snowfall_equip[46]
		set explosive_shells Snowfall_equip[47]
		set FIRE_SUIT Snowfall_equip[48]
		set GAS_MASK Snowfall_equip[49]
		set tesla_ammo Snowfall_equip[50]
		set SCARABKEYS Snowfall_equip[51]
		set COGS Snowfall_equip[52]
		set TOOLBOX Snowfall_equip[54]
		set flechete_shells Snowfall_equip[55]
		set silver_bolts Snowfall_equip[56]
		set NORMAL_KEYS Snowfall_equip[57]
		set micro_torpedo Snowfall_equip[58]
		set magnum_shells Snowfall_equip[59]
		set heat_seek_card Snowfall_equip[60]
		set atomic_bomb Snowfall_equip[61]
		set DUP_missile_ammo Snowfall_equip[62]
		set SW_KEYS Snowfall_equip[63]
		set fortymm_grenades Snowfall_equip[64]
		set fortymm_shells Snowfall_equip[65]
		set fortymm_MIA_shells Snowfall_equip[66]
		set fortymm_plasma Snowfall_equip[67]
		set fortymm_caseless Snowfall_equip[68]
		set fortymm_electro Snowfall_equip[69]
		set fortymm_slug Snowfall_equip[70]
		set fortymm_cryo Snowfall_equip[71]
		set ROPE Snowfall_equip[72]
		set dragon_shells Snowfall_equip[75]
		set GOT_KNIFE Snowfall_equip[76]
		set RIOTSHIELD Snowfall_equip[77]
		}
		
checkavailinven THISACTOR
checkavailweapon THISACTOR

}


ife EXTRASAVED 1 
 ifn CHAR -1 
		{
state give_assigned_weapon
		ifspritepal 0 
			{ setp[].max_player_health 100 seta[TEMP].extra 100 }
				ifspritepal 1 
			{ setp[].max_player_health 255 seta[TEMP].extra 255 }
				ifspritepal 2 
			{ setp[].max_player_health 200 seta[TEMP].extra 200 }
				ifspritepal 3 
			{ setp[].max_player_health 100 seta[TEMP].extra 100 }
				ifspritepal 4 
			{ ife PERSONEL_RESEARCH[10] 2 { setp[].max_player_health 100 seta[TEMP].extra 100 } else
					{ setp[].max_player_health 75 seta[TEMP].extra 75 } }
				ifspritepal 5 
			{ ife PERSONEL_RESEARCH[6] 2 { setp[].max_player_health 140 seta[TEMP].extra 140 }
					else { setp[].max_player_health 120 seta[TEMP].extra 120 } }
				ifspritepal 6 
			{ setp[].max_player_health 120 seta[TEMP].extra 120 }

	ifspritepal 7 
	{ 
			ife PERSONEL_RESEARCH[6] 2 // Both
			 ife PERSONEL_RESEARCH[9] 2 
			 {
			 setp[].max_player_health 200
			seta[TEMP].extra 200
			 }
			 else
	ife PERSONEL_RESEARCH[6] 2 // Adamantium sheathing
			{
				setp[].max_player_health 170 
				seta[TEMP].extra 170
			}
				else 
			ife PERSONEL_RESEARCH[9] 2 // MS Corp ceramic plating
			{
				setp[].max_player_health 180
				seta[TEMP].extra 180
			}
			 else 
			 {
			setp[].max_player_health 150 
			seta[TEMP].extra 150
			} 
	}

		ifspritepal 8 
	{ set CHAR -1 }
		ifspritepal 9 
	{ setp[].max_player_health 100 seta[TEMP].extra 100 }
		ifspritepal 10 
	{ setp[].max_player_health 100 seta[TEMP].extra 100 }
		ifspritepal 11 
	{  setp[].max_player_health 100 seta[TEMP].extra 100 }
		ifspritepal 12 
	{ setp[].max_player_health 200 seta[TEMP].extra 200 }
		ifspritepal 13 
	{ setp[].max_player_health 100 seta[TEMP].extra 100 }
	ifspritepal 14 
	{ set CHAR 14 ife PERSONEL_RESEARCH[10] 2 { setp[].max_player_health 75 seta[TEMP].extra 75 } 
	else { setp[].max_player_health 50 seta[TEMP].extra 50 } }
	set CHARSELECT 0 
		
	getp[].max_player_health PMAXHEALTH
	ife ARTIFACTS_LOADOUT[CHAR] 11
		{
		add PMAXHEALTH 20
		seta[].extra PMAXHEALTH
		setp[].max_player_health PMAXHEALTH
		}
		
}

killit
ends

useractor notenemy FORCE_CHARACTER
cstat 32768

ife LOTAGSAVED 0
{
set MOUSEUP 0
state force_char
}
else
{
checkactivatormotion LOTAGSAVED
ife RETURN 1
	{
	ifn OWNERSAVED -1 { palfrom 64 64 64 64 }
	ifn ALLYSLOT1 -1 { setactorvar[ALLYSLOT1].FOLLOW_PLAYER 0 set ALLYSLOT1 -1 }
	ifn ALLYSLOT2 -1 { setactorvar[ALLYSLOT2].FOLLOW_PLAYER 0 set ALLYSLOT2 -1 }
	ifn ALLYSLOT3 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT3 -1 }
	ifn ALLYSLOT4 -1 { setactorvar[ALLYSLOT4].FOLLOW_PLAYER 0 set ALLYSLOT4 -1 }
	ife CHAR 0
		{
		setarray James_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray James_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray James_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray James_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray James_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray James_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray James_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray James_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray James_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray James_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray James_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray James_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray James_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray James_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray James_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray James_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray James_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray James_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray James_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray James_equip[19] TEMP
		setarray James_equip[20] PHEALTH
		setarray James_equip[21] PMAXHEALTH
		setarray James_equip[22] PARMOUR
		setarray James_equip[23] P_SPIRIT_ARMOUR
		setarray James_equip[24] JAMES_UPGRADE
		setarray James_equip[25] GUNFIREMODE
		setarray James_equip[26] GUNSAKIMBO
		setarray James_equip[27] GOT_EXPLOSIVE
		setarray James_equip[28] AIR_FILTER
		setarray James_equip[29] PISTOLMAG
		setarray James_equip[30] MGUNMAG
		setarray James_equip[31] RUNEKEYS
		setarray James_equip[32] ACCESSKEY2
		setarray James_equip[33] PLUGKEY
		setarray James_equip[34] HELLGKEYS
		setarray James_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray James_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray James_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray James_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray James_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray James_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray James_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray James_equip[42] TEMP
		getp[].got_access TEMP
		setarray James_equip[44] TEMP
		setarray James_equip[45] GENERIC_KEYS
		setarray James_equip[46] silver_ammo
		setarray James_equip[47] explosive_shells
		setarray James_equip[48] FIRE_SUIT
		setarray James_equip[49] GAS_MASK
		setarray James_equip[50] tesla_ammo
		setarray James_equip[51] SCARABKEYS
		setarray James_equip[52] COGS
		setarray James_equip[53] P_FIRE_ARMOUR
		setarray James_equip[54] TOOLBOX
		setarray James_equip[55] flechete_shells
		setarray James_equip[56] silver_bolts
		setarray James_equip[57] NORMAL_KEYS
		setarray James_equip[58] micro_torpedo
		setarray James_equip[59] magnum_shells
		setarray James_equip[60] heat_seek_card
		setarray James_equip[61] atomic_bomb
		setarray James_equip[62] DUP_missile_ammo
		setarray James_equip[63] SW_KEYS
		setarray James_equip[64] fortymm_grenades
		setarray James_equip[65] fortymm_shells
		setarray James_equip[66] fortymm_MIA_shells
		setarray James_equip[67] fortymm_plasma
		setarray James_equip[68] fortymm_caseless
		setarray James_equip[69] fortymm_electro
		setarray James_equip[70] fortymm_slug
		setarray James_equip[71] fortymm_cryo
		setarray James_equip[72] ROPE
		setarray James_equip[75] dragon_shells 
		setarray James_equip[76] GOT_KNIFE
		setarray James_equip[77] RIOTSHIELD
		setarray James_equip[78] GUNFIREMODE_2
		}
	ife CHAR 1
		{
		setarray Zaxtor_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Zaxtor_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Zaxtor_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Zaxtor_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Zaxtor_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Zaxtor_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Zaxtor_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Zaxtor_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Zaxtor_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Zaxtor_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Zaxtor_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Zaxtor_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Zaxtor_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Zaxtor_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Zaxtor_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Zaxtor_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Zaxtor_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Zaxtor_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Zaxtor_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Zaxtor_equip[19] TEMP
		setarray Zaxtor_equip[20] PHEALTH
		setarray Zaxtor_equip[21] PMAXHEALTH
		setarray Zaxtor_equip[22] PARMOUR
		setarray Zaxtor_equip[23] P_SPIRIT_ARMOUR
		setarray Zaxtor_equip[24] ZAXTOR_UPGRADE
		setarray Zaxtor_equip[25] GUNFIREMODE
		setarray Zaxtor_equip[26] GUNSAKIMBO
		setarray Zaxtor_equip[27] GOT_EXPLOSIVE
		setarray Zaxtor_equip[28] AIR_FILTER
		setarray Zaxtor_equip[29] PISTOLMAG
		setarray Zaxtor_equip[30] MGUNMAG
		setarray Zaxtor_equip[31] RUNEKEYS
		setarray Zaxtor_equip[32] ACCESSKEY2
		setarray Zaxtor_equip[33] PLUGKEY
		setarray Zaxtor_equip[34] HELLGKEYS
		setarray Zaxtor_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Zaxtor_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Zaxtor_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Zaxtor_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Zaxtor_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Zaxtor_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Zaxtor_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Zaxtor_equip[42] TEMP
		getp[].got_access TEMP
		setarray Zaxtor_equip[44] TEMP
		setarray Zaxtor_equip[45] GENERIC_KEYS
		setarray Zaxtor_equip[46] silver_ammo
		setarray Zaxtor_equip[47] explosive_shells
		setarray Zaxtor_equip[48] FIRE_SUIT
		setarray Zaxtor_equip[49] GAS_MASK
		setarray Zaxtor_equip[50] tesla_ammo
		setarray Zaxtor_equip[51] SCARABKEYS
		setarray Zaxtor_equip[52] COGS
		setarray Zaxtor_equip[53] P_FIRE_ARMOUR
		setarray Zaxtor_equip[54] TOOLBOX
		setarray Zaxtor_equip[55] flechete_shells
		setarray Zaxtor_equip[56] silver_bolts
		setarray Zaxtor_equip[57] NORMAL_KEYS
		setarray Zaxtor_equip[58] micro_torpedo
		setarray Zaxtor_equip[59] magnum_shells
		setarray Zaxtor_equip[60] heat_seek_card
		setarray Zaxtor_equip[61] atomic_bomb
		setarray Zaxtor_equip[62] DUP_missile_ammo
		setarray Zaxtor_equip[63] SW_KEYS
		setarray Zaxtor_equip[64] fortymm_grenades
		setarray Zaxtor_equip[65] fortymm_shells
		setarray Zaxtor_equip[66] fortymm_MIA_shells
		setarray Zaxtor_equip[67] fortymm_plasma
		setarray Zaxtor_equip[68] fortymm_caseless
		setarray Zaxtor_equip[69] fortymm_electro
		setarray Zaxtor_equip[70] fortymm_slug
		setarray Zaxtor_equip[71] fortymm_cryo
		setarray Zaxtor_equip[72] ROPE
		setarray Zaxtor_equip[75] dragon_shells 
		setarray Zaxtor_equip[76] GOT_KNIFE
		setarray Zaxtor_equip[77] RIOTSHIELD
		setarray Zaxtor_equip[78] GUNFIREMODE_2
		}
	ife CHAR 2
		{
		setarray Merlijn_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Merlijn_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Merlijn_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Merlijn_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Merlijn_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Merlijn_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Merlijn_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Merlijn_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Merlijn_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Merlijn_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Merlijn_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Merlijn_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Merlijn_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Merlijn_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Merlijn_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Merlijn_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Merlijn_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Merlijn_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Merlijn_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Merlijn_equip[19] TEMP
		setarray Merlijn_equip[20] PHEALTH
		setarray Merlijn_equip[21] PMAXHEALTH
		setarray Merlijn_equip[22] PARMOUR
		setarray Merlijn_equip[23] P_SPIRIT_ARMOUR
		setarray Merlijn_equip[24] MERLIJN_UPGRADE
		setarray Merlijn_equip[25] GUNFIREMODE
		setarray Merlijn_equip[26] GUNSAKIMBO
		setarray Merlijn_equip[27] GOT_EXPLOSIVE
		setarray Merlijn_equip[28] AIR_FILTER
		setarray Merlijn_equip[29] PISTOLMAG
		setarray Merlijn_equip[30] MGUNMAG
		setarray Merlijn_equip[31] RUNEKEYS
		setarray Merlijn_equip[32] ACCESSKEY2
		setarray Merlijn_equip[33] PLUGKEY
		setarray Merlijn_equip[34] HELLGKEYS
		setarray Merlijn_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Merlijn_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Merlijn_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Merlijn_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Merlijn_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Merlijn_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Merlijn_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Merlijn_equip[42] TEMP
		getp[].got_access TEMP
		setarray Merlijn_equip[44] TEMP
		setarray Merlijn_equip[45] GENERIC_KEYS
		setarray Merlijn_equip[46] silver_ammo
		setarray Merlijn_equip[47] explosive_shells
		setarray Merlijn_equip[48] FIRE_SUIT
		setarray Merlijn_equip[49] GAS_MASK
		setarray Merlijn_equip[50] tesla_ammo
		setarray Merlijn_equip[51] SCARABKEYS
		setarray Merlijn_equip[52] COGS
		setarray Merlijn_equip[53] P_FIRE_ARMOUR
		setarray Merlijn_equip[54] TOOLBOX
		setarray Merlijn_equip[55] flechete_shells
		setarray Merlijn_equip[56] silver_bolts
		setarray Merlijn_equip[57] NORMAL_KEYS
		setarray Merlijn_equip[58] micro_torpedo
		setarray Merlijn_equip[59] magnum_shells
		setarray Merlijn_equip[60] heat_seek_card
		setarray Merlijn_equip[61] atomic_bomb
		setarray Merlijn_equip[62] DUP_missile_ammo
		setarray Merlijn_equip[63] SW_KEYS
		setarray Merlijn_equip[64] fortymm_grenades
		setarray Merlijn_equip[65] fortymm_shells
		setarray Merlijn_equip[66] fortymm_MIA_shells
		setarray Merlijn_equip[67] fortymm_plasma
		setarray Merlijn_equip[68] fortymm_caseless
		setarray Merlijn_equip[69] fortymm_electro
		setarray Merlijn_equip[70] fortymm_slug
		setarray Merlijn_equip[71] fortymm_cryo
		setarray Merlijn_equip[72] ROPE
		setarray Merlijn_equip[75] dragon_shells 
		setarray Merlijn_equip[76] GOT_KNIFE
		setarray Merlijn_equip[77] RIOTSHIELD
		setarray Merlijn_equip[78] GUNFIREMODE_2
		}
	ife CHAR 3
		{
		setarray Highwire_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Highwire_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Highwire_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Highwire_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Highwire_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Highwire_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Highwire_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Highwire_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Highwire_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Highwire_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Highwire_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Highwire_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Highwire_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Highwire_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Highwire_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Highwire_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Highwire_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Highwire_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Highwire_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Highwire_equip[19] TEMP
		setarray Highwire_equip[20] PHEALTH
		setarray Highwire_equip[21] PMAXHEALTH
		setarray Highwire_equip[22] PARMOUR
		setarray Highwire_equip[23] P_SPIRIT_ARMOUR
		setarray Highwire_equip[24] HIGHWIRE_UPGRADE
		setarray Highwire_equip[25] GUNFIREMODE
		setarray Highwire_equip[26] GUNSAKIMBO
		setarray Highwire_equip[27] GOT_EXPLOSIVE
		setarray Highwire_equip[28] AIR_FILTER
		setarray Highwire_equip[29] PISTOLMAG
		setarray Highwire_equip[30] MGUNMAG
		setarray Highwire_equip[31] RUNEKEYS
		setarray Highwire_equip[32] ACCESSKEY2
		setarray Highwire_equip[33] PLUGKEY
		setarray Highwire_equip[34] HELLGKEYS
		setarray Highwire_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Highwire_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Highwire_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Highwire_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Highwire_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Highwire_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Highwire_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Highwire_equip[42] TEMP
		getp[].got_access TEMP
		setarray Highwire_equip[44] TEMP
		setarray Highwire_equip[45] GENERIC_KEYS
		setarray Highwire_equip[46] silver_ammo
		setarray Highwire_equip[47] explosive_shells
		setarray Highwire_equip[48] FIRE_SUIT
		setarray Highwire_equip[49] GAS_MASK
		setarray Highwire_equip[50] tesla_ammo
		setarray Highwire_equip[51] SCARABKEYS
		setarray Highwire_equip[52] COGS
		setarray Highwire_equip[53] P_FIRE_ARMOUR
		setarray Highwire_equip[54] TOOLBOX
		setarray Highwire_equip[55] flechete_shells
		setarray Highwire_equip[56] silver_bolts
		setarray Highwire_equip[57] NORMAL_KEYS
		setarray Highwire_equip[58] micro_torpedo
		setarray Highwire_equip[59] magnum_shells
		setarray Highwire_equip[60] heat_seek_card
		setarray Highwire_equip[61] atomic_bomb
		setarray Highwire_equip[62] DUP_missile_ammo
		setarray Highwire_equip[63] SW_KEYS
		setarray Highwire_equip[64] fortymm_grenades
		setarray Highwire_equip[65] fortymm_shells
		setarray Highwire_equip[66] fortymm_MIA_shells
		setarray Highwire_equip[67] fortymm_plasma
		setarray Highwire_equip[68] fortymm_caseless
		setarray Highwire_equip[69] fortymm_electro
		setarray Highwire_equip[70] fortymm_slug
		setarray Highwire_equip[71] fortymm_cryo
		setarray Highwire_equip[72] ROPE
		setarray Highwire_equip[75] dragon_shells 
		setarray Highwire_equip[76] GOT_KNIFE
		setarray Highwire_equip[77] RIOTSHIELD
		setarray Highwire_equip[78] GUNFIREMODE_2
		}
	ife CHAR 4
		{
		setarray Sang_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Sang_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Sang_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Sang_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Sang_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Sang_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Sang_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Sang_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Sang_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Sang_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Sang_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Sang_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Sang_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Sang_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Sang_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Sang_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Sang_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Sang_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Sang_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Sang_equip[19] TEMP
		setarray Sang_equip[20] PHEALTH
		setarray Sang_equip[21] PMAXHEALTH
		setarray Sang_equip[22] PARMOUR
		setarray Sang_equip[23] P_SPIRIT_ARMOUR
		setarray Sang_equip[24] SANG_UPGRADE
		setarray Sang_equip[25] GUNFIREMODE
		setarray Sang_equip[26] GUNSAKIMBO
		setarray Sang_equip[27] GOT_EXPLOSIVE
		setarray Sang_equip[28] AIR_FILTER
		setarray Sang_equip[29] PISTOLMAG
		setarray Sang_equip[30] MGUNMAG
		setarray Sang_equip[31] RUNEKEYS
		setarray Sang_equip[32] ACCESSKEY2
		setarray Sang_equip[33] PLUGKEY
		setarray Sang_equip[34] HELLGKEYS
		setarray Sang_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Sang_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Sang_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Sang_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Sang_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Sang_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Sang_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Sang_equip[42] TEMP
		getp[].got_access TEMP
		setarray Sang_equip[44] TEMP
		setarray Sang_equip[45] GENERIC_KEYS
		setarray Sang_equip[46] silver_ammo
		setarray Sang_equip[47] explosive_shells
		setarray Sang_equip[48] FIRE_SUIT
		setarray Sang_equip[49] GAS_MASK
		setarray Sang_equip[50] tesla_ammo
		setarray Sang_equip[51] SCARABKEYS
		setarray Sang_equip[52] COGS
		setarray Sang_equip[53] P_FIRE_ARMOUR
		setarray Sang_equip[54] TOOLBOX
		setarray Sang_equip[55] flechete_shells
		setarray Sang_equip[56] silver_bolts
		setarray Sang_equip[57] NORMAL_KEYS
		setarray Sang_equip[58] micro_torpedo
		setarray Sang_equip[59] magnum_shells
		setarray Sang_equip[60] heat_seek_card
		setarray Sang_equip[61] atomic_bomb
		setarray Sang_equip[62] DUP_missile_ammo
		setarray Sang_equip[63] SW_KEYS
		setarray Sang_equip[64] fortymm_grenades
		setarray Sang_equip[65] fortymm_shells
		setarray Sang_equip[66] fortymm_MIA_shells
		setarray Sang_equip[67] fortymm_plasma
		setarray Sang_equip[68] fortymm_caseless
		setarray Sang_equip[69] fortymm_electro
		setarray Sang_equip[70] fortymm_slug
		setarray Sang_equip[71] fortymm_cryo
		setarray Sang_equip[72] ROPE
		setarray Sang_equip[75] dragon_shells 
		setarray Sang_equip[76] GOT_KNIFE
		setarray Sang_equip[77] RIOTSHIELD
		setarray Sang_equip[78] GUNFIREMODE_2
		}
	ife CHAR 5
		{
		setarray Rusty_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Rusty_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Rusty_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Rusty_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Rusty_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Rusty_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Rusty_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Rusty_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Rusty_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Rusty_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Rusty_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Rusty_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Rusty_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Rusty_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Rusty_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Rusty_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Rusty_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Rusty_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Rusty_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Rusty_equip[19] TEMP
		setarray Rusty_equip[20] PHEALTH
		setarray Rusty_equip[21] PMAXHEALTH
		setarray Rusty_equip[22] PARMOUR
		setarray Rusty_equip[23] P_SPIRIT_ARMOUR
		setarray Rusty_equip[24] RUSTY_UPGRADE
		setarray Rusty_equip[25] GUNFIREMODE
		setarray Rusty_equip[26] GUNSAKIMBO
		setarray Rusty_equip[27] GOT_EXPLOSIVE
		setarray Rusty_equip[28] AIR_FILTER
		setarray Rusty_equip[29] PISTOLMAG
		setarray Rusty_equip[30] MGUNMAG
		setarray Rusty_equip[31] RUNEKEYS
		setarray Rusty_equip[32] ACCESSKEY2
		setarray Rusty_equip[33] PLUGKEY
		setarray Rusty_equip[34] HELLGKEYS
		setarray Rusty_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Rusty_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Rusty_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Rusty_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Rusty_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Rusty_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Rusty_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Rusty_equip[42] TEMP
		getp[].got_access TEMP
		setarray Rusty_equip[44] TEMP
		setarray Rusty_equip[45] GENERIC_KEYS
		setarray Rusty_equip[46] silver_ammo
		setarray Rusty_equip[47] explosive_shells
		setarray Rusty_equip[48] FIRE_SUIT
		setarray Rusty_equip[49] GAS_MASK
		setarray Rusty_equip[50] tesla_ammo
		setarray Rusty_equip[51] SCARABKEYS
		setarray Rusty_equip[52] COGS
		setarray Rusty_equip[53] P_FIRE_ARMOUR
		setarray Rusty_equip[54] TOOLBOX
		setarray Rusty_equip[55] flechete_shells
		setarray Rusty_equip[56] silver_bolts
		setarray Rusty_equip[57] NORMAL_KEYS
		setarray Rusty_equip[58] micro_torpedo
		setarray Rusty_equip[59] magnum_shells
		setarray Rusty_equip[60] heat_seek_card
		setarray Rusty_equip[61] atomic_bomb
		setarray Rusty_equip[62] DUP_missile_ammo
		setarray Rusty_equip[63] SW_KEYS
		setarray Rusty_equip[64] fortymm_grenades
		setarray Rusty_equip[65] fortymm_shells
		setarray Rusty_equip[66] fortymm_MIA_shells
		setarray Rusty_equip[67] fortymm_plasma
		setarray Rusty_equip[68] fortymm_caseless
		setarray Rusty_equip[69] fortymm_electro
		setarray Rusty_equip[70] fortymm_slug
		setarray Rusty_equip[71] fortymm_cryo
		setarray Rusty_equip[72] ROPE
		setarray Rusty_equip[75] dragon_shells 
		setarray Rusty_equip[76] GOT_KNIFE
		setarray Rusty_equip[77] RIOTSHIELD
		setarray Rusty_equip[78] GUNFIREMODE_2
		}
	ife CHAR 6
		{
		setarray Geoffrey_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Geoffrey_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Geoffrey_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Geoffrey_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Geoffrey_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Geoffrey_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Geoffrey_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Geoffrey_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Geoffrey_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Geoffrey_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Geoffrey_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Geoffrey_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Geoffrey_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Geoffrey_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Geoffrey_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Geoffrey_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Geoffrey_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Geoffrey_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Geoffrey_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Geoffrey_equip[19] TEMP
		setarray Geoffrey_equip[20] PHEALTH
		setarray Geoffrey_equip[21] PMAXHEALTH
		setarray Geoffrey_equip[22] PARMOUR
		setarray Geoffrey_equip[23] P_SPIRIT_ARMOUR
		setarray Geoffrey_equip[24] GEOFFREY_UPGRADE
		setarray Geoffrey_equip[25] GUNFIREMODE
		setarray Geoffrey_equip[26] GUNSAKIMBO
		setarray Geoffrey_equip[27] GOT_EXPLOSIVE
		setarray Geoffrey_equip[28] AIR_FILTER
		setarray Geoffrey_equip[29] PISTOLMAG
		setarray Geoffrey_equip[30] MGUNMAG
		setarray Geoffrey_equip[31] RUNEKEYS
		setarray Geoffrey_equip[32] ACCESSKEY2
		setarray Geoffrey_equip[33] PLUGKEY
		setarray Geoffrey_equip[34] HELLGKEYS
		setarray Geoffrey_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Geoffrey_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Geoffrey_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Geoffrey_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Geoffrey_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Geoffrey_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Geoffrey_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Geoffrey_equip[42] TEMP
		getp[].got_access TEMP
		setarray Geoffrey_equip[44] TEMP
		setarray Geoffrey_equip[45] GENERIC_KEYS
		setarray Geoffrey_equip[46] silver_ammo
		setarray Geoffrey_equip[47] explosive_shells
		setarray Geoffrey_equip[48] FIRE_SUIT
		setarray Geoffrey_equip[49] GAS_MASK
		setarray Geoffrey_equip[50] tesla_ammo
		setarray Geoffrey_equip[51] SCARABKEYS
		setarray Geoffrey_equip[52] COGS
		setarray Geoffrey_equip[53] P_FIRE_ARMOUR
		setarray Geoffrey_equip[54] TOOLBOX
		setarray Geoffrey_equip[55] flechete_shells
		setarray Geoffrey_equip[56] silver_bolts
		setarray Geoffrey_equip[57] NORMAL_KEYS
		setarray Geoffrey_equip[58] micro_torpedo
		setarray Geoffrey_equip[59] magnum_shells
		setarray Geoffrey_equip[60] heat_seek_card
		setarray Geoffrey_equip[61] atomic_bomb
		setarray Geoffrey_equip[62] DUP_missile_ammo
		setarray Geoffrey_equip[63] SW_KEYS
		setarray Geoffrey_equip[64] fortymm_grenades
		setarray Geoffrey_equip[65] fortymm_shells
		setarray Geoffrey_equip[66] fortymm_MIA_shells
		setarray Geoffrey_equip[67] fortymm_plasma
		setarray Geoffrey_equip[68] fortymm_caseless
		setarray Geoffrey_equip[69] fortymm_electro
		setarray Geoffrey_equip[70] fortymm_slug
		setarray Geoffrey_equip[71] fortymm_cryo
		setarray Geoffrey_equip[72] ROPE
		setarray Geoffrey_equip[75] dragon_shells 
		setarray Geoffrey_equip[76] GOT_KNIFE
		setarray Geoffrey_equip[77] RIOTSHIELD
		setarray Geoffrey_equip[78] GUNFIREMODE_2
		}
	ife CHAR 7
		{
		setarray Mikko_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Mikko_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Mikko_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Mikko_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Mikko_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Mikko_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Mikko_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Mikko_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Mikko_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Mikko_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Mikko_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Mikko_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Mikko_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Mikko_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Mikko_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Mikko_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Mikko_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Mikko_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Mikko_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Mikko_equip[19] TEMP
		setarray Mikko_equip[20] PHEALTH
		setarray Mikko_equip[21] PMAXHEALTH
		setarray Mikko_equip[22] PARMOUR
		setarray Mikko_equip[23] P_SPIRIT_ARMOUR
		setarray Mikko_equip[24] MIKKO_UPGRADE
		setarray Mikko_equip[25] GUNFIREMODE
		setarray Mikko_equip[26] GUNSAKIMBO
		setarray Mikko_equip[27] GOT_EXPLOSIVE
		setarray Mikko_equip[28] AIR_FILTER
		setarray Mikko_equip[29] PISTOLMAG
		setarray Mikko_equip[30] MGUNMAG
		setarray Mikko_equip[31] RUNEKEYS
		setarray Mikko_equip[32] ACCESSKEY2
		setarray Mikko_equip[33] PLUGKEY
		setarray Mikko_equip[34] HELLGKEYS
		setarray Mikko_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Mikko_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Mikko_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Mikko_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Mikko_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Mikko_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Mikko_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Mikko_equip[42] TEMP
		getp[].got_access TEMP
		setarray Mikko_equip[44] TEMP
		setarray Mikko_equip[45] GENERIC_KEYS
		setarray Mikko_equip[46] silver_ammo
		setarray Mikko_equip[47] explosive_shells
		setarray Mikko_equip[48] FIRE_SUIT
		setarray Mikko_equip[49] GAS_MASK
		setarray Mikko_equip[50] tesla_ammo
		setarray Mikko_equip[51] SCARABKEYS
		setarray Mikko_equip[52] COGS
		setarray Mikko_equip[53] P_FIRE_ARMOUR
		setarray Mikko_equip[54] TOOLBOX
		setarray Mikko_equip[55] flechete_shells
		setarray Mikko_equip[56] silver_bolts
		setarray Mikko_equip[57] NORMAL_KEYS
		setarray Mikko_equip[58] micro_torpedo
		setarray Mikko_equip[59] magnum_shells
		setarray Mikko_equip[60] heat_seek_card
		setarray Mikko_equip[61] atomic_bomb
		setarray Mikko_equip[62] DUP_missile_ammo
		setarray Mikko_equip[63] SW_KEYS
		setarray Mikko_equip[64] fortymm_grenades
		setarray Mikko_equip[65] fortymm_shells
		setarray Mikko_equip[66] fortymm_MIA_shells
		setarray Mikko_equip[67] fortymm_plasma
		setarray Mikko_equip[68] fortymm_caseless
		setarray Mikko_equip[69] fortymm_electro
		setarray Mikko_equip[70] fortymm_slug
		setarray Mikko_equip[71] fortymm_cryo
		setarray Mikko_equip[72] ROPE
		setarray Mikko_equip[75] dragon_shells 
		setarray Mikko_equip[76] GOT_KNIFE
		setarray Mikko_equip[77] RIOTSHIELD
		setarray Mikko_equip[78] GUNFIREMODE_2
		}
ife CHAR 13
		{
		setarray Micky_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Micky_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Micky_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Micky_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Micky_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Micky_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Micky_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Micky_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Micky_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Micky_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Micky_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Micky_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Micky_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Micky_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Micky_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Micky_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Micky_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Micky_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Micky_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Micky_equip[19] TEMP
		setarray Micky_equip[20] PHEALTH
		setarray Micky_equip[21] PMAXHEALTH
		setarray Micky_equip[22] PARMOUR
		setarray Micky_equip[23] P_SPIRIT_ARMOUR
		setarray Micky_equip[24] MICKY_UPGRADE
		setarray Micky_equip[25] GUNFIREMODE
		setarray Micky_equip[26] GUNSAKIMBO
		setarray Micky_equip[27] GOT_EXPLOSIVE
		setarray Micky_equip[28] AIR_FILTER
		setarray Micky_equip[29] PISTOLMAG
		setarray Micky_equip[30] MGUNMAG
		setarray Micky_equip[31] RUNEKEYS
		setarray Micky_equip[32] ACCESSKEY2
		setarray Micky_equip[33] PLUGKEY
		setarray Micky_equip[34] HELLGKEYS
		setarray Micky_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Micky_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Micky_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Micky_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Micky_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Micky_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Micky_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Micky_equip[42] TEMP
		getp[].got_access TEMP
		setarray Micky_equip[44] TEMP
		setarray Micky_equip[45] GENERIC_KEYS
		setarray Micky_equip[46] silver_ammo
		setarray Micky_equip[47] explosive_shells
		setarray Micky_equip[48] FIRE_SUIT
		setarray Micky_equip[49] GAS_MASK
		setarray Micky_equip[50] tesla_ammo
		setarray Micky_equip[51] SCARABKEYS
		setarray Micky_equip[52] COGS
		setarray Micky_equip[53] P_FIRE_ARMOUR
		setarray Micky_equip[54] TOOLBOX
		setarray Micky_equip[55] flechete_shells
		setarray Micky_equip[56] silver_bolts
		setarray Micky_equip[57] NORMAL_KEYS
		setarray Micky_equip[58] micro_torpedo
		setarray Micky_equip[59] magnum_shells
		setarray Micky_equip[60] heat_seek_card
		setarray Micky_equip[61] atomic_bomb
		setarray Micky_equip[62] DUP_missile_ammo
		setarray Micky_equip[63] SW_KEYS
		setarray Micky_equip[64] fortymm_grenades
		setarray Micky_equip[65] fortymm_shells
		setarray Micky_equip[66] fortymm_MIA_shells
		setarray Micky_equip[67] fortymm_plasma
		setarray Micky_equip[68] fortymm_caseless
		setarray Micky_equip[69] fortymm_electro
		setarray Micky_equip[70] fortymm_slug
		setarray Micky_equip[71] fortymm_cryo
		setarray Micky_equip[72] ROPE
		setarray Micky_equip[75] dragon_shells 
		setarray Micky_equip[76] GOT_KNIFE
		setarray Micky_equip[77] RIOTSHIELD
		setarray Micky_equip[78] GUNFIREMODE_2
		}
ife CHAR 14
		{
		setarray Snowfall_equip[43] temp_weapon // Temp weapon
		getp[].ammo_amount 0 TEMP
		setarray Snowfall_equip[1] TEMP
		getp[].gotweapon 1 TEMP // Pistol
		setarray Snowfall_equip[2] TEMP
		getp[].ammo_amount 1 TEMP
		setarray Snowfall_equip[3] TEMP
		getp[].gotweapon 2 TEMP // Shotgun
		setarray Snowfall_equip[4] TEMP
		getp[].ammo_amount 2 TEMP
		setarray Snowfall_equip[5] TEMP
		getp[].gotweapon 3 TEMP // Shotgun
		setarray Snowfall_equip[6] TEMP
		getp[].ammo_amount 3 TEMP // Chaingun
		setarray Snowfall_equip[7] TEMP
		getp[].gotweapon 4 TEMP // RPG
		setarray Snowfall_equip[8] TEMP
		getp[].ammo_amount 4 TEMP
		setarray Snowfall_equip[9] TEMP
		getp[].ammo_amount 5 TEMP // Pipebomb
		setarray Snowfall_equip[10] TEMP
		getp[].gotweapon 6 TEMP // Shrinker
		setarray Snowfall_equip[11] TEMP
		getp[].ammo_amount 6 TEMP
		setarray Snowfall_equip[12] TEMP
		getp[].gotweapon 7 TEMP // Devistator
		setarray Snowfall_equip[13] TEMP
		getp[].ammo_amount 7 TEMP
		setarray Snowfall_equip[14] TEMP
		getp[].ammo_amount 8 TEMP // Tripbomb
		setarray Snowfall_equip[15] TEMP
		getp[].gotweapon 9 TEMP // Freezer
		setarray Snowfall_equip[16] TEMP
		getp[].ammo_amount 9 TEMP
		setarray Snowfall_equip[17] TEMP
		getp[].gotweapon 11 TEMP // Expander
		setarray Snowfall_equip[18] TEMP
		getp[].ammo_amount 11 TEMP
		setarray Snowfall_equip[19] TEMP
		setarray Snowfall_equip[20] PHEALTH
		setarray Snowfall_equip[21] PMAXHEALTH
		setarray Snowfall_equip[22] PARMOUR
		setarray Snowfall_equip[23] P_SPIRIT_ARMOUR
		setarray Snowfall_equip[24] SNOWFALL_UPGRADE
		setarray Snowfall_equip[25] GUNFIREMODE
		setarray Snowfall_equip[26] GUNSAKIMBO
		setarray Snowfall_equip[27] GOT_EXPLOSIVE
		setarray Snowfall_equip[28] AIR_FILTER
		setarray Snowfall_equip[29] PISTOLMAG
		setarray Snowfall_equip[30] MGUNMAG
		setarray Snowfall_equip[31] RUNEKEYS
		setarray Snowfall_equip[32] ACCESSKEY2
		setarray Snowfall_equip[33] PLUGKEY
		setarray Snowfall_equip[34] HELLGKEYS
		setarray Snowfall_equip[35] OLDKEYS
		getp[].boot_amount TEMP
		setarray Snowfall_equip[36] TEMP
		getp[].heat_amount TEMP
		setarray Snowfall_equip[37] TEMP
		getp[].holoduke_amount TEMP
		setarray Snowfall_equip[38] TEMP
		getp[].jetpack_amount TEMP
		setarray Snowfall_equip[39] TEMP
		getp[].scuba_amount TEMP
		setarray Snowfall_equip[40] TEMP
		getp[].firstaid_amount TEMP
		setarray Snowfall_equip[41] TEMP
		getp[].steroids_amount TEMP
		setarray Snowfall_equip[42] TEMP
		getp[].got_access TEMP
		setarray Snowfall_equip[44] TEMP
		setarray Snowfall_equip[45] GENERIC_KEYS
		setarray Snowfall_equip[46] silver_ammo
		setarray Snowfall_equip[47] explosive_shells
		setarray Snowfall_equip[48] FIRE_SUIT
		setarray Snowfall_equip[49] GAS_MASK
		setarray Snowfall_equip[50] tesla_ammo
		setarray Snowfall_equip[51] SCARABKEYS
		setarray Snowfall_equip[52] COGS
		setarray Snowfall_equip[53] P_FIRE_ARMOUR
		setarray Snowfall_equip[54] TOOLBOX
		setarray Snowfall_equip[55] flechete_shells
		setarray Snowfall_equip[56] silver_bolts
		setarray Snowfall_equip[57] NORMAL_KEYS
		setarray Snowfall_equip[58] micro_torpedo
		setarray Snowfall_equip[59] magnum_shells
		setarray Snowfall_equip[60] heat_seek_card
		setarray Snowfall_equip[61] atomic_bomb
		setarray Snowfall_equip[62] DUP_missile_ammo
		setarray Snowfall_equip[63] SW_KEYS
		setarray Snowfall_equip[64] fortymm_grenades
		setarray Snowfall_equip[65] fortymm_shells
		setarray Snowfall_equip[66] fortymm_MIA_shells
		setarray Snowfall_equip[67] fortymm_plasma
		setarray Snowfall_equip[68] fortymm_caseless
		setarray Snowfall_equip[69] fortymm_electro
		setarray Snowfall_equip[70] fortymm_slug
		setarray Snowfall_equip[71] fortymm_cryo
		setarray Snowfall_equip[72] ROPE
		setarray Snowfall_equip[75] dragon_shells 
		setarray Snowfall_equip[76] GOT_KNIFE
		setarray Snowfall_equip[77] RIOTSHIELD
		setarray Snowfall_equip[78] GUNFIREMODE_2
		}
	state force_char
	}
}

enda


// PLAYER DUPLICATE==========================================================================================================

action JSTAND2 3841 1 5 1 1
action J2STAND2 24236 1 5 1 1
action ZSTAND2 4097 1 5 1 1
action PSTAND2 4996 1 5 1 1
action RSTAND2 4609 1 5 1 1
action SSTAND2 4932 1 5 1 1
action S2STAND2 22562 1 5 1 1
action RNSTAND2 5252 1 5 1 1
action GSTAND2 5026 1 5 1 1
action MSTAND2 5528 1 5 1 1
action MC_STAND2 14985 1 5 1 1
action SF_STAND2 19332 1 5 1 1

action C_STAND2 6276 1 5 1 1
action MT_STAND2 24876 1 5 1 1
action JA_STAND2 11397 1 5 1 1
action BS_STAND2 8961 1 5 1 1

action JSTAND_F 3841 1 1 1 1
action J2STAND_F 24236 1 1 1 1
action ZSTAND_F 4097 1 1 1 1
action PSTAND_F 4996 1 1 1 1
action RSTAND_F 4609 1 1 1 1
action SSTAND_F 4932 1 1 1 1
action S2STAND2_F 22404 1 5 1 1
action RNSTAND_F 5252 1 1 1 1
action GSTAND_F 5026 1 1 1 1
action MSTAND_F 5528 1 1 1 1
action MC_STAND_F 14985 1 1 1 1
action SF_STAND_F 19332 1 1 1 1

action C_STAND_F 6276 1 5 1 1
action MT_STAND_F 24876 1 1 1 1
action JA_STAND_F 11397 1 1 1 1
action BS_STAND_F 8961 1 1 1 1

action JRUN2 3861 4 5 1 10
action J2RUN2 24241 4 5 1 10
action ZRUN2 4117 4 5 1 10
action PRUN2 4996 4 5 1 10
action RRUN2 4624 4 5 1 10
action SRUN2 4932 4 5 1 10
action S2RUN2 22404 4 5 1 10
action RNRUN2 5252 4 5 1 10
action GRUN2 5026 4 5 1 10
action MRUN2 5508 4 5 1 10
action MC_RUN2 14990 4 5 1 10
action SF_RUN2 19337 4 5 1 10

action C_RUN2 6276 5 5 1 10
action BS_RUN2 8499 4 5 1 10

move fake_player_run 120 0

useractor notenemy 1404 100 0

state spawn_cold_breathe
	
ife sprite[].cstat 80 nullop else
ifand ZVELSAVED 2 nullop else
{	
ifaction MSTAND2 sizeat 25 25 else
ifaction ZSTAND2 sizeat 22 22 else
ifaction JSTAND2 sizeat 23 23 else
ifaction J2STAND2 sizeat 23 23 else
ifaction RSTAND2 sizeat 21 21 else
ifaction GSTAND2 sizeat 21 21 else
ifaction SSTAND2 sizeat 24 24 else
ifaction S2STAND2 sizeat 22 22 else
ifaction MT_STAND2 sizeat 21 21 else
ifaction RNSTAND2 sizeat 23 23 else
ifaction JA_STAND2 sizeat 23 23 else
ifaction PSTAND2 sizeat 22 22 else
ifaction MC_STAND2 sizeat 23 23 else
ifaction SF_STAND2 sizeat 21 21 else
ifaction BS_STAND2 sizeat 26 26 else
ifaction C_STAND2 sizeat 28 28 else
ifaction MRUN2 sizeat 25 25 else
ifaction JRUN2 sizeat 23 23 else
ifaction J2RUN2 sizeat 23 23 else
ifaction ZRUN2 sizeat 22 22 else
ifaction RRUN2 sizeat 21 21 else
ifaction GRUN2 sizeat 21 21 else
ifaction SRUN2 sizeat 25 25 else
ifaction S2RUN2 sizeat 22 22 else
ifaction RNRUN2 sizeat 23 23 else
ifaction PRUN2 sizeat 22 22 else
ifaction MC_RUN2 sizeat 23 23 else
ifaction SF_RUN2 sizeat 21 21 else
ifaction BS_RUN2 sizeat 26 26 else
ifaction C_RUN2 sizeat 28 28 else
sizeat 34 34
}

ifand ZVELSAVED 1 
	{
	ifvarn ZPOS_SAVED 0 seta[].z ZPOS_SAVED
	}
	else fall

ifspawnedby APLAYER { set EXTRASAVED -1 ife PCAMERA 0 killit }

ifl EXTRASAVED -1 set EXTRASAVED -1

ife HITAGSAVED 1 { ifn camerasprite -1 cstat 0 else cstat 32768 }

ifspawnedby RESPAWN
	{
	ife HITAGSAVED 2
		{
		checkactivatormotion 811
			ife RETURN 1
				{
				killit
				}
		}
	}
	
ifn OWNERSAVED -1
	{
	checkactivatormotion OWNERSAVED
	ife RETURN 1
		{
        killit
		}
	}

ife EXTRASAVED -1
	{

		geta[].htflags TEMP
		xorvar TEMP 4
		seta[].htflags TEMP
		
	ifand sprite[].cstat 16
	{
		ife CHAR 0 { ifand CHAR_APP 1 action J2STAND_F else action JSTAND_F }  else
		ife CHAR 1 action ZSTAND_F else
		ife CHAR 2 { ifspritepal 0 spritepal 21 action PSTAND_F } else
		ife CHAR 3 { ifspritepal 0 spritepal 11 action RSTAND_F } else
		ife CHAR 4 { ifspritepal 0 spritepal 21 ifand CHAR_APP 2 action S2STAND2_F else action SSTAND_F } else
		ife CHAR 5 { ifspritepal 0 spritepal 12 action RNSTAND_F } else
		ife CHAR 6 { ifspritepal 0 spritepal 21 action GSTAND_F } else
		ife CHAR 7 { ifspritepal 0 spritepal 11 action MSTAND_F } else
		ife CHAR 9 action C_STAND_F else
		ife CHAR 10 action BS_STAND_F else
		ife CHAR 11 action MT_STAND_F else
		ife CHAR 12 { ifspritepal 0 spritepal 12 action JA_STAND_F } else
		ife CHAR 13 { ifspritepal 0 spritepal 3 action MC_STAND_F } else
		ife CHAR 14 { ifspritepal 0 spritepal 3 action SF_STAND_F }
	}
	else
		{
		ife CHAR 0 { ifand CHAR_APP 1 action J2STAND2 else action JSTAND2 } else
		ife CHAR 1 action ZSTAND2 else
		ife CHAR 2 { spritepal 21 action PSTAND2 } else
		ife CHAR 3 { spritepal 11 action RSTAND2 } else
		ife CHAR 4 { spritepal 21 ifand CHAR_APP 2 action S2STAND2 else action SSTAND2 } else
		ife CHAR 5 { spritepal 12 action RNSTAND2 } else
		ife CHAR 6 { spritepal 21 action GSTAND2 } else
		ife CHAR 7 { spritepal 11 action MSTAND2 } else
		ife CHAR 9 action C_STAND2 else
		ife CHAR 10 action BS_STAND2 else
		ife CHAR 11 action MT_STAND2 else
		ife CHAR 12 { spritepal 12 action JA_STAND2 } else
		ife CHAR 13 { spritepal 3 action MC_STAND2 } else
		ife CHAR 14 { spritepal 3 action SF_STAND2 }
		ife TEMP2 0 set TEMP2 1
		}
	}
else
	{
	ifaction 0
		{
		ifg EXTRASAVED 99 // sets character to which character beat chosen levels
		{
		readarrayfromfile BEATEN_LEVEL_CHAR 4051
		ife EXTRASAVED 100 set EXTRASAVED BEATEN_LEVEL_CHAR[0] // City under siege
		ife EXTRASAVED 101 set EXTRASAVED BEATEN_LEVEL_CHAR[1] // Chisland
		ife EXTRASAVED 102 set EXTRASAVED BEATEN_LEVEL_CHAR[2] // X64-2
		ife EXTRASAVED 103 set EXTRASAVED BEATEN_LEVEL_CHAR[3] // Egypt
		ife EXTRASAVED 104 set EXTRASAVED BEATEN_LEVEL_CHAR[4] // Base Invasion
		ife EXTRASAVED 200 // for chisland ending cutscene
			{
			ife CHARSELECT 0
				{
				ife CHAR 0 killit
				else ife CHAR 13 killit
				else set EXTRASAVED CHAR
				}
			}
		}
		else
			{
			ife EXTRASAVED 0 { ifand CHAR_APP 1 action J2STAND2 else action JSTAND2 }
			ife EXTRASAVED 1 action ZSTAND2
			ife EXTRASAVED 2 { ifspritepal 0 spritepal 21 action PSTAND2 }
			ife EXTRASAVED 3 { action RSTAND2 ifspritepal 0 spritepal 11 }
			ife EXTRASAVED 4 
			{ 
			ifspritepal 0 spritepal 21 state spawn_bat setactorvar[RETURN].HITAGSAVED HITAGSAVED 
			ifand CHAR_APP 2 action S2STAND2 else action SSTAND2 
			}
			ife EXTRASAVED 5 { ifspritepal 0 spritepal 12 action RNSTAND2 }
			ife EXTRASAVED 6 { ifspritepal 0 spritepal 21 action GSTAND2 }
			ife EXTRASAVED 7 { ifspritepal 0 spritepal 11 action MSTAND2 }
			ife EXTRASAVED 9 action C_STAND2
			ife EXTRASAVED 10 action BS_STAND2
			ife EXTRASAVED 11 action MT_STAND2
			ife EXTRASAVED 12 action JA_STAND2
			ife EXTRASAVED 13 { ifspritepal 0 spritepal 3 action MC_STAND2 }
			ife EXTRASAVED 14 { ifspritepal 0 spritepal 3 action SF_STAND2 }
			}
		set TEMP2 1
		}
	}
	
ife TEMP2 1 // 'Idle'
	{
	move STOP
	ifn LOTAGSAVED 0
		{
		checkactivatormotion LOTAGSAVED
			ife RETURN 1
				{
				ife EXTRASAVED -1 set EXTRASAVED CHAR
				ife EXTRASAVED 0 
					{
					ifand CHAR_APP 1 action J2RUN2 else
					action JRUN2
					}
				ife EXTRASAVED 1 action ZRUN2
				ife EXTRASAVED 2 action PRUN2
				ife EXTRASAVED 3 action RRUN2
				ife EXTRASAVED 4 
					{
					ifand CHAR_APP 2 action S2RUN2 else 
					action SRUN2
					}
				ife EXTRASAVED 5 action RNRUN2
				ife EXTRASAVED 6 action GRUN2
				ife EXTRASAVED 7 action MRUN2
				ife EXTRASAVED 9 action C_RUN2
				ife EXTRASAVED 10 action BS_RUN2
				ife EXTRASAVED 13 action MC_RUN2
				ife EXTRASAVED 14 action SF_RUN2
				set TEMP2 2
				}
		}
	}
		
ife TEMP2 2 // 'Running'
	{
	ifand ZVELSAVED 1 nullop else fall
	move fake_player_run geth
	randvar FOOTSTEPCOUNT 3
	add TEMP4 1
	ifg TEMP4 8 
		{
		ife FOOTSTEPCOUNT 0 globalsound STEP1 else
		ife FOOTSTEPCOUNT 1 globalsound STEP2 else
		ife FOOTSTEPCOUNT 2 globalsound STEP3 else
		ife FOOTSTEPCOUNT 3 globalsound STEP4 
		set TEMP4 0
		}
	sub YVELSAVED 1
	ifl YVELSAVED 1
		{
		move STOP
		ifn EXTRASAVED -1
			{
			ife EXTRASAVED 0 { ifand CHAR_APP 1 action J2STAND2 else action JSTAND2 }
			ife EXTRASAVED 1 action ZSTAND2
			ife EXTRASAVED 2 action PSTAND2
			ife EXTRASAVED 3 action RSTAND2
			ife EXTRASAVED 4 
				{
				ifand CHAR_APP 2 action S2STAND2 else 
				action SSTAND2
				}
			ife EXTRASAVED 5 action RNSTAND2
			ife EXTRASAVED 6 action GSTAND2
			ife EXTRASAVED 7 action MSTAND2
			ife EXTRASAVED 9 action C_STAND2
			ife EXTRASAVED 10 action BS_STAND2
			ife EXTRASAVED 11 action MT_STAND2
			ife EXTRASAVED 12 action JA_STAND2
			ife EXTRASAVED 13 action MC_STAND2
			ife EXTRASAVED 14 action SF_STAND2
			}
		else
			{
			ife CHAR 0 { ifand CHAR_APP 1 action J2STAND2 else action JSTAND2 } else
			ife CHAR 1 action ZSTAND2 else
			ife CHAR 2 action PSTAND2 else
			ife CHAR 3 action RSTAND2 else
			ife CHAR 4 { ifand CHAR_APP 2 action S2STAND2 else action SSTAND2 } else
			ife CHAR 5 action RNSTAND2 else
			ife CHAR 6 action GSTAND2 else
			ife CHAR 7 action MSTAND2 else
			ife CHAR 9 action C_STAND2 else
			ife CHAR 10 action BS_STAND2 else
			ife CHAR 11 action MT_STAND2 else
			ife CHAR 12 action JA_STAND2 else
			ife CHAR 13 action MC_STAND2 else
			ife CHAR 14 action SF_STAND2
			}
		set TEMP2 1
		}
	}
	
ifn TEMP9 0
	{
	fall
	ifvarvarn TEMP9 CONTROL_VR killit
	}

enda

action JS_D_PAIN 3840
action JS2_D_PAIN 24214
action Z_D_PAIN 4096
action MRL_D_PAIN 4909
action HIGH_D_PAIN 4608
action SANG_D_PAIN 4845
action SANG2_D_PAIN 22424
action RUSTY_D_PAIN 5185
action GEO_D_PAIN 4939
action MIKKO_D_PAIN 5431
action CULT_D_PAIN 6258
action MICKY_D_PAIN 14911
action EAF_D_PAIN 8418
action SNOWF_D_PAIN 19371

useractor notenemy 1511

	ifinwater
		{
		sleeptime 0
		spawn AIRBUBBLES
		fall
		}

ifaction 0
 ife CHARSELECT 0
	{
	ifspritepal 0
		{
		getp[].palookup TEMP
		seta[].pal TEMP
		}
	ife CHAR 0 { ifand CHAR_APP 1 action JS2_D_PAIN else action JS_D_PAIN } else
	ife CHAR 1 action Z_D_PAIN else
	ife CHAR 2 { ifspritepal 0 spritepal 21 action MRL_D_PAIN } else
	ife CHAR 3 { ifspritepal 0 spritepal 11 action HIGH_D_PAIN } else
	ife CHAR 4 
		{ ifspritepal 0 spritepal 21 
		ifand CHAR_APP 2 action SANG2_D_PAIN else action SANG_D_PAIN
		} 
		else
	ife CHAR 5 { ifspritepal 0 spritepal 12 action RUSTY_D_PAIN } else
	ife CHAR 6 { ifspritepal 0 spritepal 21 action GEO_D_PAIN } else
	ife CHAR 7 { ifspritepal 0 spritepal 11 action MIKKO_D_PAIN } else
	ife CHAR 9 action CULT_D_PAIN else
	ife CHAR 10 action EAF_D_PAIN else
	ife CHAR 13 { ifspritepal 0 spritepal 3 action MICKY_D_PAIN }
	ife CHAR 14 { ifspritepal 0 spritepal 3 action SNOWF_D_PAIN }
	}

ifaction JS_D_PAIN sizeat 23 23 else
ifaction JS2_D_PAIN sizeat 23 23 else
ifaction MIKKO_D_PAIN sizeat 25 25 else
ifaction GEO_D_PAIN sizeat 25 25 else
ifaction HIGH_D_PAIN sizeat 21 21 else
ifaction SANG_D_PAIN sizeat 25 25 else
ifaction SANG2_D_PAIN sizeat 25 25 else
ifaction RUSTY_D_PAIN sizeat 23 23 else
ifaction MRL_D_PAIN sizeat 22 22 else
ifaction MICKY_D_PAIN sizeat 23 23 else
ifaction SNOWF_D_PAIN sizeat 21 21 else
sizeat 34 34

enda

// TRIGGER ONLY IF CHAR==========================================================================================================

useractor notenemy TRIGGERONLYIFCHAR
cstat 32768

ifn HITAGSAVED 0
	{
	checkactivatormotion HITAGSAVED
	ifvare RETURN 1 set HITAGSAVED 0
	}
else
{
ife YVELSAVED 0 set YVELSAVED 1024

dist TEMP6 THISACTOR player[].i

ifl TEMP6 YVELSAVED
	{
	ifspritepal 0 ifn CHAR 0 break
	ifspritepal 1 ifn CHAR 1 break
	ifspritepal 2 ifn CHAR 2 break
	ifspritepal 3 ifn CHAR 3 break
	ifspritepal 4 ifn CHAR 4 break
	ifspritepal 5 ifn CHAR 5 break
	ifspritepal 6 ifn CHAR 6 break
	ifspritepal 7 ifn CHAR 7 break
	ifspritepal 9 ifn CHAR 9 break
	ifspritepal 10 ifn CHAR 10 break
	ifspritepal 11 ifn CHAR 11 break
	ifspritepal 12 ifn CHAR 12 break
	ifspritepal 13 ifn CHAR 13 break
	ifspritepal 14 ifn CHAR 14 break
	ifspritepal 15 ifn CHAR 15 break
	ifspritepal 16 ifn CHAR 16 break
	ifspritepal 40
		{
		findnearactor3dvar VLADMIR YVELSAVED TEMP4
		ife TEMP4 -1 { ife XVELSAVED 0 quote 266 break }
		}
	ifspritepal 41
		{
		findnearactor3dvar EDFSOLDIER_ACTIVE YVELSAVED TEMP4
		ife TEMP4 -1 { ife XVELSAVED 0 quote 247 break }
		}
	operateactivators LOTAGSAVED THISACTOR
	operaterespawns LOTAGSAVED 
	operatemasterswitches LOTAGSAVED
	killit
	}
}

enda

// MOVE PLAYER==========================================================================================================

useractor notenemy MOVEPLAYER
cstat 32768

checkactivatormotion HITAGSAVED
ife RETURN 1
{
updatesectorz sprite[].x sprite[].y sprite[].z TEMP5
setp[].cursectnum TEMP5
setp[].falling_counter 0
setp[].posx sprite[].x
setp[].posy sprite[].y
setp[].posz sprite[].z
stopsound WIND_FALL_RAPID
stopsound LAND_HEAVY
setp[].ang sprite[].ang
ifspritepal 1
	{
	globalsound TELEPORTER
	spawn TRANSPORTERBEAM
	palfrom 10 10 10 10
	}
ifspritepal 2
	{
	ifn ALLYSLOT1 -1 { setactorvar[ALLYSLOT1].FOLLOW_PLAYER 0 set ALLYSLOT1 -1 }
	ifn ALLYSLOT2 -1 { setactorvar[ALLYSLOT2].FOLLOW_PLAYER 0 set ALLYSLOT2 -1 }
	ifn ALLYSLOT3 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT3 -1 }
	ifn ALLYSLOT4 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT4 -1 }
	}
ifspritepal 3
	setgamepalette 1
ifspritepal 4
	{
	palfrom 64 64 64 64
	globalsound USE_TIMEPORTAL
	spawn 8433
	}
ifspritepal 5
	palfrom 64 0 0 0
ifspritepal 6
	{
	palfrom 64 0 64 0
	globalsound ACTOR_SHRINKING
	set PLAYER_VOICEOVER 30
	set FAKE_SHRUNK 1
	ifn ALLYSLOT1 -1 { setactorvar[ALLYSLOT1].FOLLOW_PLAYER 0 set ALLYSLOT1 -1 }
	ifn ALLYSLOT2 -1 { setactorvar[ALLYSLOT2].FOLLOW_PLAYER 0 set ALLYSLOT2 -1 }
	ifn ALLYSLOT3 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT3 -1 }
	ifn ALLYSLOT4 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT4 -1 }
	}
ifspritepal 7
	{
	palfrom 64 64 64 64
	globalsound ACTOR_UNSHRINK
	set FAKE_SHRUNK 0
	ifn ALLYSLOT1 -1 { setactorvar[ALLYSLOT1].FOLLOW_PLAYER 0 set ALLYSLOT1 -1 }
	ifn ALLYSLOT2 -1 { setactorvar[ALLYSLOT2].FOLLOW_PLAYER 0 set ALLYSLOT2 -1 }
	ifn ALLYSLOT3 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT3 -1 }
	ifn ALLYSLOT4 -1 { setactorvar[ALLYSLOT3].FOLLOW_PLAYER 0 set ALLYSLOT4 -1 }
	}
ifspritepal 8
	setgamepalette 0
ifspritepal 9
	{
	palfrom 64 64 64 64
	globalsound MIND_ATTACK
	}
ifspritepal 10
	{
	palfrom 64 64 64 64
	globalsound USE_PORTAL
	}
ifspritepal 11
	{
	palfrom 64 64 64 64
	}
	
set player_in_vehicle 0
set player_using_fighter -1
set player_using_hovercraft -1
killit
}

enda

// MISC==========================================================================================================

spriteshadow 5501


// **************************************PLAYER HUDS******************************************************

defstate water_driplets
	ifl water_screen 30
			{
			ifinwater nullop else
			set DISP_TEMP 70
			add DISP_TEMP water_screen
			rotatespritea 160 DISP_TEMP NNORMALSIZE 0 3644 water_screen pal 0 -255 0 0 xdim ydim
			div DISP_TEMP 2
			rotatespritea 160 DISP_TEMP NNORMALSIZE 0 3642 water_screen pal 0 -255 0 0 xdim ydim
			}
ends

defstate helmet_huds
ifg SHOW_HELMET 0
{
ife CHAR 12
	{
	ifp pdead 
		{
		ife M60FLASH 0 displayrandvar M60FLASH 2048
		rotatespritea 160 100 45000 M60FLASH 22783 shade pal 0 -255 0 0 xdim ydim
		}
	
	ife GLASS_EFFECTS YES
	 ifl player_shade_diff -5
		{
		set WEAP_DISP_TEMP3 player_shade_diff
		mulvar WEAP_DISP_TEMP3 2
		sub y 35
		rotatespritea 160 100 NORMALSIZE 0 22782 player_shade_diff wall_pal 33 WEAP_DISP_TEMP3 0 0 xdim ydim // Glass
		}
	state water_driplets
	}
ife CHAR 13
	{
	ifp pdead 
		{
		ife M60FLASH 0 displayrandvar M60FLASH 2048
		rotatespritea 160 100 45000 M60FLASH 22783 shade pal 0 -255 0 0 xdim ydim
		}
	
	ife GLASS_EFFECTS YES
	 ifl player_shade_diff -5
		{
		set WEAP_DISP_TEMP3 player_shade_diff
		mulvar WEAP_DISP_TEMP3 2
		sub y 35
		rotatespritea 160 100 NORMALSIZE 0 22782 player_shade_diff wall_pal 33 WEAP_DISP_TEMP3 0 0 xdim ydim // Glass
		}
	state water_driplets
	
	rotatesprite 53 100 NORMALSIZE 0 19967 shade pal 2 0 0 xdim ydim
	rotatesprite 267 100 NORMALSIZE 1024 19967 shade pal 6 0 0 xdim ydim
	
	ife WEAPON_GLOW YES
		{
		rotatespritea 22 100 NORMALSIZE 0 19966 0 0 0 -255 0 0 xdim ydim
		rotatespritea 298 100 NORMALSIZE 1024 19966 0 0 6 -255 0 0 xdim ydim
		
		state reverse_shade
		
		rotatespritea 22 100 NORMALSIZE 0 19965 WEAP_DISP_TEMP5 0 0 -255 0 0 xdim ydim
		rotatespritea 298 100 NORMALSIZE 1024 19965 WEAP_DISP_TEMP5 0 6 -255 0 0 xdim ydim
		
		rotatespritea 50 172 QUARTERSIZE 1280 18677 WEAP_DISP_TEMP5 2 256 -255 0 0 xdim ydim
		rotatespritea 270 172 QUARTERSIZE 1792 18677 WEAP_DISP_TEMP5 2 516 -255 0 0 xdim ydim
		}
	
				ifg player[].fta 0 
					{
					// getp[].ftq DISP_TEMP2
					gametext 2822 320 7 player[].ftq DISP_PULSE 0 0 0 0 xdim ydim
					}
	
	}
ife CHAR 14 ifn TIMEZONE 6 
	{
	ifp pdead 
		{
		ife M60FLASH 0 displayrandvar M60FLASH 2048
		rotatespritea 160 100 45000 M60FLASH 22783 shade pal 0 -255 0 0 xdim ydim
		}
	ifl player_shade_diff -5
	 ife GLASS_EFFECTS YES
		{
		set WEAP_DISP_TEMP3 player_shade_diff
		mulvar WEAP_DISP_TEMP3 2
		sub y 35
		rotatespritea 160 100 NORMALSIZE 0 22782 player_shade_diff wall_pal 33 WEAP_DISP_TEMP3 0 0 xdim ydim // Glass
		// rotatespritea 160 100 NORMALSIZE 0 2587 player_shade_diff wall_pal 33 WEAP_DISP_TEMP3 0 0 xdim ydim // Glass
		}
	state water_driplets
		
	ifn player[].holoduke_on -1 
		{
		getp[].holoduke_amount DISP_TEMP
		divvar DISP_TEMP 80
		set DISP_TEMP2 30
		sub DISP_TEMP2 DISP_TEMP
		rotatespritea 160 100 NORMALSIZE 0 20960 DISP_TEMP2 18 1024 -255 0 0 xdim ydim
		}
	rotatesprite 160 100 NORMALSIZE 0 20776 shade 0 0 0 0 xdim ydim
	
				ifg player[].fta 0 
					{
					// getp[].ftq DISP_TEMP2
					gametext 2822 320 7 player[].ftq DISP_PULSE 0 0 0 0 xdim ydim
					}
	
	}
}
ends

defstate player_huds

ife player[].over_shoulder_on 0 ifn userdef[].overhead_on 2 state helmet_huds
ifn SLO_MO_SHOWOFF 0 break

ifn CHAR 1
ifn CHAR 2
ifn CHAR 3
ifn CHAR 4
ifn CHAR 5
ifn CHAR 6
ifn CHAR 7
ifn CHAR 9
ifn CHAR 10
ifn CHAR 11
ifn CHAR 12
ifn CHAR 13
ifn CHAR 14
ifn CHAR 15
ifn CHAR 20
ifn CHAR -1
ife HUDON 0 // STANDARD DEFAULT HUD
{
	getuserdef[].color HUD_DISP_PCOLOUR
	ife HUD_DISP_PCOLOUR 0 ife CHAR 0 set HUD_DISP_PCOLOUR 21
	ife CHAR 0 set HUD_DISP_TEMP 5135 else ife CHAR 3 set HUD_DISP_TEMP 5891 else ife CHAR 12 set HUD_DISP_TEMP 12931 
	else set HUD_DISP_TEMP 172 // HEALTH BOX
	


	rotatesprite 19 185 NNORMALSIZE 0 HUD_DISP_TEMP 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // HEALTH BOX PIC
	ife CHAR 0 set HUD_DISP_FONT 5139 else set HUD_DISP_FONT DIGITALNUM
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	digitalnumber HUD_DISP_FONT 19 191 PHEALTH HUD_DISP_TEMP4 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // HEALTH BOX NUMBER

	ife CHAR 0 set HUD_DISP_TEMP 5136 else ife CHAR 12 set HUD_DISP_TEMP 12932 else 
	ife CHAR 3 set HUD_DISP_TEMP 5892 else set HUD_DISP_TEMP 173
	


	rotatesprite 51 185 NNORMALSIZE 0 HUD_DISP_TEMP 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO BOX
	ife currentweapon 10
		{
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		}
	else
	getp[].ammo_amount currentweapon HUD_DISP_PAMMO

	ife CHAR 0 set HUD_DISP_FONT 5139 else set HUD_DISP_FONT DIGITALNUM
	
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 19 185 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	ife GUN_AMMO_TYPES 32 // Grenade-launcher?
	{
	ife CHAR 0
		{
			rotatesprite 301 185 NNORMALSIZE 0 5134 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 32 digitalnumber HUD_DISP_FONT 301 191 fortymm_shells 0 2 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 128 digitalnumber HUD_DISP_FONT 301 191 fortymm_MIA_shells 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 256 digitalnumber HUD_DISP_FONT 301 191 fortymm_plasma 0 11 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_grenades 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		}
	ife CHAR 3
		{
			rotatesprite 301 185 NNORMALSIZE 0 5895 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 32 digitalnumber HUD_DISP_FONT 301 191 fortymm_shells 0 2 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 128 digitalnumber HUD_DISP_FONT 301 191 fortymm_MIA_shells 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 256 digitalnumber HUD_DISP_FONT 301 191 fortymm_plasma 0 11 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_grenades 0 0 512 0 0 xdim ydim // AMMO
		}
	}
	else
	ife GUN_AMMO_TYPES 2048 // Grenade-launcher?
	{
	ife CHAR 0
		{
			rotatesprite 301 185 NNORMALSIZE 0 5134 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 32 digitalnumber HUD_DISP_FONT 301 191 fortymm_shells 0 2 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 128 digitalnumber HUD_DISP_FONT 301 191 fortymm_MIA_shells 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 256 digitalnumber HUD_DISP_FONT 301 191 fortymm_plasma 0 11 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_grenades 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		}
	ife CHAR 3
		{
			rotatesprite 301 185 NNORMALSIZE 0 5895 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 32 digitalnumber HUD_DISP_FONT 301 191 fortymm_shells 0 2 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 128 digitalnumber HUD_DISP_FONT 301 191 fortymm_MIA_shells 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 256 digitalnumber HUD_DISP_FONT 301 191 fortymm_plasma 0 11 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_grenades 0 0 512 0 0 xdim ydim // AMMO
		}
	}
	else
	ife GUN_AMMO_TYPES 64 // caseless Grenade-launcher?
	{
	ife CHAR 0
		{
			rotatesprite 301 185 NNORMALSIZE 0 5134 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 512 digitalnumber HUD_DISP_FONT 301 191 fortymm_slug 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 2048 digitalnumber HUD_DISP_FONT 301 191 fortymm_electro 0 1 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 4096 digitalnumber HUD_DISP_FONT 301 191 fortymm_cryo 0 23 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_caseless 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		}
	ife CHAR 3
		{
			rotatesprite 301 185 NNORMALSIZE 0 5895 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 512 digitalnumber HUD_DISP_FONT 301 191 fortymm_slug 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 2048 digitalnumber HUD_DISP_FONT 301 191 fortymm_electro 0 1 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 4096 digitalnumber HUD_DISP_FONT 301 191 fortymm_cryo 0 23 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_caseless 0 0 512 0 0 xdim ydim // AMMO
		}
	}
	else
	ife GUN_AMMO_TYPES 4096 // caseless Grenade-launcher?
	{
	ife CHAR 0
		{
			rotatesprite 301 185 NNORMALSIZE 0 5134 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 512 digitalnumber HUD_DISP_FONT 301 191 fortymm_slug 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 2048 digitalnumber HUD_DISP_FONT 301 191 fortymm_electro 0 1 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 4096 digitalnumber HUD_DISP_FONT 301 191 fortymm_cryo 0 23 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_caseless 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		}
	ife CHAR 3
		{
			rotatesprite 301 185 NNORMALSIZE 0 5895 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
			ifand AMMO_TYPES[CURWEAP] 512 digitalnumber HUD_DISP_FONT 301 191 fortymm_slug 0 22 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 2048 digitalnumber HUD_DISP_FONT 301 191 fortymm_electro 0 1 512 0 0 xdim ydim // AMMO
			else ifand AMMO_TYPES[CURWEAP] 4096 digitalnumber HUD_DISP_FONT 301 191 fortymm_cryo 0 23 512 0 0 xdim ydim // AMMO
			else digitalnumber HUD_DISP_FONT 301 191 fortymm_caseless 0 0 512 0 0 xdim ydim // AMMO
		}
	}
		
		
ife CURWEAP 0
	{
	
	ife temp_weapon 30
		{
		rotatesprite 301 185 NNORMALSIZE 0 5134 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber HUD_DISP_FONT 301 191 micro_torpedo 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		}
	
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 digitalnumber 5139 51 191 explosive_shells 0 10 256 0 0 xdim ydim // EXPLOSIVE SHELLS
	else ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[CURWEAP] 2 digitalnumber 5139 51 191 silver_ammo 0 27 256 0 0 xdim ydim // SILVER AMMO
	else ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 digitalnumber 5139 51 191 flechete_shells 0 11 256 0 0 xdim ydim // FLECHETE SHELLS
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 digitalnumber 5139 51 191 magnum_shells 0 23 256 0 0 xdim ydim // MAGNUM SHELLS
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 digitalnumber 5139 51 191 dragon_shells 0 15 256 0 0 xdim ydim // MAGNUM SHELLS
	else ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 digitalnumber 5139 51 191 tesla_ammo 0 0 256 0 0 xdim ydim // TESLA AMMO
	else ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 digitalnumber 5139 51 191 silver_bolts 0 27 256 0 0 xdim ydim // SILVER BOLTS
	else digitalnumber HUD_DISP_FONT 51 191 HUD_DISP_PAMMO 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO
	}
else
ife CURWEAP 1
	{
	ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[CURWEAP] 2 digitalnumber 5139 51 191 silver_ammo 0 27 256 0 0 xdim ydim // Silver ammo
	else digitalnumber HUD_DISP_FONT 51 191 HUD_DISP_PAMMO 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO
	}
else
ife CURWEAP 2 // Shotgun
	{
	ife CHAR 0 ife JAMES_JACKH 1 digitalnumber HUD_DISP_FONT 51 191 HUD_DISP_PAMMO 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO
	else
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1
	digitalnumber 5139 51 191 explosive_shells 0 10 256 0 0 xdim ydim // EXPLOSIVE SHELLS
	else
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 
	digitalnumber 5139 51 191 flechete_shells 0 11 256 0 0 xdim ydim // FLECHETE SHELLS
	else
	ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 
	digitalnumber 5139 51 191 magnum_shells 0 23 256 0 0 xdim ydim // MAGNUM SHELLS
	else
	ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 
	digitalnumber 5139 51 191 dragon_shells 0 15 256 0 0 xdim ydim // MAGNUM SHELLS
	else
	digitalnumber HUD_DISP_FONT 51 191 HUD_DISP_PAMMO 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO
	}
else 
ife CURWEAP 3 
	{
	ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[CURWEAP] 2 digitalnumber 5139 51 191 silver_ammo 0 27 256 0 0 xdim ydim // Silver ammo
	else digitalnumber HUD_DISP_FONT 51 191 HUD_DISP_PAMMO 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO
	}
else
digitalnumber HUD_DISP_FONT 51 191 HUD_DISP_PAMMO 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // AMMO
	
	ife CHAR 0 nullop
	else
	{
	ifand player[].got_access 1 myospal 10 197 5346 0 256 0
	ifand player[].got_access 2 myospal 14 197 5346 0 256 21
	ifand player[].got_access 4 myospal 18 197 5346 0 256 23
	ifand ACCESSKEY2 1 myospal 22 197 5346 0 256 12
	ifand ACCESSKEY2 2 myospal 26 197 5346 0 256 11
	ifand ACCESSKEY2 4 myospal 30 197 5346 0 256 15
	ifand ACCESSKEY2 8 myospal 34 197 5346 0 256 18
	ifand ACCESSKEY2 16 myospal 38 197 5346 0 256 10
	ifand ACCESSKEY2 32 myospal 42 197 5346 0 256 22
	ifand ACCESSKEY2 64 myospal 46 197 5346 0 256 16
	}

	ife CHAR 0 set HUD_DISP_TEMP 5134

	switch CHAR
	case 0
	ifn GUNMAG -1
	ifl SKILL_LEVEL 4
	{
	rotatesprite 19 157 NNORMALSIZE 0 HUD_DISP_TEMP 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // MAGAZINE BOX

	ife CHAR 0 set HUD_DISP_FONT 5139 else set HUD_DISP_FONT DIGITALNUM
	ife CURWEAP 2
		{
		ifand AMMO_TYPES[CURWEAP] 1
		digitalnumber HUD_DISP_FONT 18 163 GUNMAG 0 10 256 0 0 xdim ydim // EXPLOSIVE SHELLS
		else
		ifand AMMO_TYPES[CURWEAP] 4 
		digitalnumber HUD_DISP_FONT 18 163 GUNMAG 0 11 256 0 0 xdim ydim // FLECHETE SHELLS
		else
		ifand AMMO_TYPES[CURWEAP] 64 
		digitalnumber HUD_DISP_FONT 18 163 GUNMAG 0 23 256 0 0 xdim ydim // MAGNUM SHELLS
		else
		ifand AMMO_TYPES[CURWEAP] 1024 
		digitalnumber HUD_DISP_FONT 18 163 GUNMAG 0 15 256 0 0 xdim ydim // MAGNUM SHELLS
		else
		digitalnumber HUD_DISP_FONT 18 163 GUNMAG 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // MAGAZINE NUMBER
		}
	else
	digitalnumber HUD_DISP_FONT 18 163 GUNMAG 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // MAGAZINE NUMBER
	}
	break
	default
	break
	endswitch

	ifn player[].inven_icon 0
	{
	ife CHAR 0 set HUD_DISP_TEMP2 5137 else ife CHAR 12 set HUD_DISP_TEMP2 12933 else 
	ife CHAR 3 set HUD_DISP_TEMP2 5893 else set HUD_DISP_TEMP2 174
	rotatesprite 89 184 NNORMALSIZE 0 HUD_DISP_TEMP2 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
	ife player[].inven_icon 1 // MEDKIT
		{
		rotatesprite 80 186 INVENSIZE 0 CMEDIKIT 0 0 256 0 0 xdim ydim
		digitalnumber THREEBYFIVE 97 193 player[].firstaid_amount 15 1 256 0 0 xdim ydim
		rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
		}
	ife player[].inven_icon 2 // STEROIDS
		{
		rotatesprite 80 186 INVENSIZE 0 CSTEROIDS 0 0 256 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		ifl HUD_DISP_TEMP2 400 
		gametextz 17158 188 183 500 0 11 256 0 0 xdim ydim 55536
		else gametextz 17158 183 183 501 0 10 256 0 0 xdim ydim 55536
		divvar HUD_DISP_TEMP2 4
		digitalnumber THREEBYFIVE 97 193 HUD_DISP_TEMP2 15 1 256 0 0 xdim ydim
		rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
		}
	ife player[].inven_icon 3 // HOLODUKE
		{
		rotatesprite 80 186 INVENSIZE 0 CHOLODUKE 0 0 256 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		ife CHAR 0 divvar HUD_DISP_TEMP2 9 else divvar HUD_DISP_TEMP2 24
		digitalnumber THREEBYFIVE 97 193 HUD_DISP_TEMP2 15 1 256 0 0 xdim ydim
		rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
		ifn player[].holoduke_on -1 
		gametextz 17158 188 183 500 0 11 256 0 0 xdim ydim 55536
		else gametextz 17158 183 183 501 0 10 256 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 4 // JETPACK
		{
		rotatesprite 80 186 INVENSIZE 0 CJETPACK 0 0 256 0 0 xdim ydim
		getuserdef[].god HUD_DISP_TEMP3
		ife HUD_DISP_TEMP3 0
			{
			getp[].jetpack_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 16
			digitalnumber THREEBYFIVE 97 193 HUD_DISP_TEMP2 15 1 256 0 0 xdim ydim
			rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
			}
		else
		ife HUD_DISP_TEMP3 1
			{
			rotatesprite 97 190 NNORMALSIZE 0 3812 15 1 256 0 0 xdim ydim
			}
		ifn player[].jetpack_on 0 
		gametextz 17158 188 183 500 0 11 256 0 0 xdim ydim 55536
		else gametextz 17158 183 183 501 0 10 256 0 0 xdim ydim 55536
		
		}
	ife player[].inven_icon 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 80 186 INVENSIZE 0 DISP_NVG 0 0 256 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumber THREEBYFIVE 97 193 HUD_DISP_TEMP2 15 1 256 0 0 xdim ydim
		rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
		ifn player[].heat_on 0 gametextz 17158 188 183 500 0 11 256 0 0 xdim ydim 55536
		else gametextz 17158 183 183 501 0 10 256 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 6 // SCUBA GEAR
		{
		rotatesprite 80 186 INVENSIZE 0 CSCUBA 0 0 256 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			rotatesprite 97 190 NNORMALSIZE 0 3812 15 1 256 0 0 xdim ydim
			rotatesprite 83 189 12384 0 3688 0 0 256 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			ife CHAR 0 divvar HUD_DISP_TEMP2 128 else divvar HUD_DISP_TEMP2 64
			digitalnumber THREEBYFIVE 97 193 HUD_DISP_TEMP2 15 1 256 0 0 xdim ydim
			rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
			}
		ife player[].scuba_on 1 gametextz 17158 188 183 500 0 11 256 0 0 xdim ydim 55536
		else gametextz 17158 174 183 502 0 21 256 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 7 // BOOTS
		{
		rotatesprite 80 186 INVENSIZE 0 CBOOTS 0 0 256 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumber THREEBYFIVE 97 193 HUD_DISP_TEMP2 15 1 256 0 0 xdim ydim
		rotatesprite 104 191 NNORMALSIZE 0 3076 15 1 256 0 0 xdim ydim
		gametextz 17158 174 183 502 0 21 256 0 0 xdim ydim 55536
		}

	ife player[].inven_icon 10 // TOOLBOX
		{
		rotatesprite 80 186 INVENSIZE 0 TOOLBOX_PICKUP 0 0 256 0 0 xdim ydim
		gametextz 17158 183 183 509 0 21 256 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 11 // ROPE
		{
		rotatesprite 80 186 20000 0 17916 0 0 256 0 0 xdim ydim
		gametextz 17158 183 183 509 0 21 256 0 0 xdim ydim 55536
		}
	}

ifn CHAR 0
	{
		ifg PARMOUR 0
			{
			ife CHAR 3 { ife ARMOURTYPE 1 set HUD_DISP_TEMP 5998 else set HUD_DISP_TEMP 5999 } else set HUD_DISP_TEMP 54
			ife CHAR 3 rotatesprite 15 15 14000 0 HUD_DISP_TEMP 0 0 256 0 0 xdim ydim
			else rotatesprite 15 15 INVENSIZE 0 HUD_DISP_TEMP 0 0 256 0 0 xdim ydim
			ife CHAR 3 set HUD_DISP_TEMP 5139 else set HUD_DISP_TEMP DIGITALNUM
			digitalnumber HUD_DISP_TEMP 15 15 PARMOUR 0 12 256 0 0 xdim ydim
			}
			
		ifg P_SPIRIT_ARMOUR 0
			{
			rotatesprite 15 50 INVENSIZE 0 SPIRIT_ARMOUR 0 0 256 0 0 xdim ydim
			ife CHAR 3 set HUD_DISP_TEMP 5139 else set HUD_DISP_TEMP DIGITALNUM
			digitalnumber HUD_DISP_TEMP 15 50 P_SPIRIT_ARMOUR 0 11 256 0 0 xdim ydim
			}
			
		ifg P_FIRE_ARMOUR 0
			{
			rotatesprite 15 85 HALFSIZE 0 FIRE_ARMOUR 0 0 256 0 0 xdim ydim
			ife CHAR 3 set HUD_DISP_TEMP 5139 else set HUD_DISP_TEMP DIGITALNUM
			digitalnumber HUD_DISP_TEMP 15 85 P_FIRE_ARMOUR 0 2 256 0 0 xdim ydim
			}
			
	}

}
else
ife CHAR 1
ife HUDON 0 // ZAXTOR'S HUD
	{
	rotatesprite 41 180 QUARTERSIZE 0 5509 0 0 256 0 0 xdim ydim // MAIN HUD PART 1
	rotatesprite 41 180 NNORMALSIZE 0 5506 0 0 257 0 0 xdim ydim // MAIN HUD PART 1
	rotatesprite 290 180 QUARTERSIZE 0 5510 0 0 512 0 0 xdim ydim // MAIN HUD PART 2
	rotatesprite 290 180 NNORMALSIZE 0 5508 0 0 513 0 0 xdim ydim // MAIN HUD PART 2
	digitalnumber DIGITALNUM 15 182 PARMOUR 0 27 256 0 0 xdim ydim // ARMOUR
	
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	digitalnumber DIGITALNUM 15 195 PHEALTH HUD_DISP_TEMP4 0 256 0 0 xdim ydim // HEALTH
	ifg P_FIRE_ARMOUR 0
		{
		ifg P_FIRE_ARMOUR 10 myospal 2 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 20 myospal 6 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 30 myospal 10 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 40 myospal 14 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 50 myospal 18 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 60 myospal 22 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 70 myospal 26 162 5400 0 256 2
		ifg P_FIRE_ARMOUR 80 myospal 30 162 5400 0 256 2
		}
	ifg P_SPIRIT_ARMOUR 0
		{
		ifg P_SPIRIT_ARMOUR 10 myospal 2 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 20 myospal 6 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 30 myospal 10 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 40 myospal 14 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 50 myospal 18 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 60 myospal 22 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 70 myospal 26 165 5400 0 256 11
		ifg P_SPIRIT_ARMOUR 80 myospal 30 165 5400 0 256 11
		}
		
	ifg P_HAS_SHIELD 0
		{
		ife P_ENERGYSHIELD P_MAX_SHIELD rotatesprite 41 180 NNORMALSIZE 0 5603 0 125 256 0 0 xdim ydim
		else ife P_ENERGYSHIELD 0 rotatesprite 41 180 NNORMALSIZE 0 5604 0 0 256 0 0 xdim ydim
		else rotatesprite 41 180 NNORMALSIZE 0 5603 0 32 256 0 0 xdim ydim
		ifg P_ENERGYSHIELD 0 myospal 47 174 5602 0 256 0
		ifg P_ENERGYSHIELD 10 myospal 50 174 5602 0 256 0
		ifg P_ENERGYSHIELD 20 myospal 53 174 5602 0 256 0
		ifg P_ENERGYSHIELD 30 myospal 56 174 5602 0 256 0
		ifg P_ENERGYSHIELD 40 myospal 59 174 5602 0 256 0
		ifg P_ENERGYSHIELD 50 myospal 62 174 5602 0 256 0
		ifg P_ENERGYSHIELD 60 myospal 65 174 5602 0 256 0
		ifg P_ENERGYSHIELD 70 myospal 68 174 5602 0 256 0
		ifg P_ENERGYSHIELD 80 myospal 71 174 5602 0 256 0
		ifg P_ENERGYSHIELD 90 myospal 74 174 5602 0 256 0
		ifg P_ENERGYSHIELD 100 myospal 77 174 5602 0 256 0
		}
		
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 15 195 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
		
	switch CURWEAP
	case 10
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		break
	case 2
		getp[].ammo_amount 2 HUD_DISP_PAMMO
		ife SPECIALIST_EQUIPMENT[5] 2 mulvar HUD_DISP_PAMMO 4 else
		ife SPECIALIST_EQUIPMENT[62] 2 nullop else
		mulvar HUD_DISP_PAMMO 2
		break
	default
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		break
	endswitch
	digitalnumber DIGITALNUM 60 193 HUD_DISP_PAMMO 0 1 256 0 0 xdim ydim // AMMO
	ifn GUNMAG -1 digitalnumberz DIGITALNUM 70 195 GUNMAG 0 27 256 0 0 xdim ydim HALFSIZE // AMMO
	ife CURWEAP 1 
	 ifand ZAXTOR_UPGRADE 1 
		{ getp[].ammo_amount 5 HUD_DISP_PAMMO digitalnumberz DIGITALNUM 50 195 HUD_DISP_PAMMO 0 8 256 0 0 xdim ydim HALFSIZE }
	ife CURWEAP 3
	 ifand SPECIALIST_EQUIPMENT[70] 2 
			{ 
			getp[].ammo_amount 5 HUD_DISP_PAMMO 
			digitalnumberz DIGITALNUM 50 195 HUD_DISP_PAMMO 0 8 256 0 0 xdim ydim HALFSIZE 
			}
	ife CURWEAP 0
		{
		ife temp_weapon 25
			{	
			ifand AMMO_TYPES[CURWEAP] 32 digitalnumberz DIGITALNUM 50 195 fortymm_shells 0 2 256 0 0 xdim ydim HALFSIZE // AMMO
			else ifand AMMO_TYPES[CURWEAP] 128 digitalnumberz DIGITALNUM 50 195 fortymm_MIA_shells 0 7 256 0 0 xdim ydim HALFSIZE // AMMO
			else ifand AMMO_TYPES[CURWEAP] 256 digitalnumberz DIGITALNUM 50 195 fortymm_plasma 0 8 256 0 0 xdim ydim HALFSIZE // AMMO
			else digitalnumberz DIGITALNUM 50 195 fortymm_grenades 0 27 256 0 0 xdim ydim HALFSIZE // AMMO
			}
		else
		ife temp_weapon 26
			{
			ifand AMMO_TYPES[CURWEAP] 512 digitalnumberz DIGITALNUM 50 195 fortymm_slug 0 7 256 0 0 xdim ydim HALFSIZE // AMMO
			else ifand AMMO_TYPES[CURWEAP] 2048 digitalnumberz DIGITALNUM 50 195 fortymm_electro 0 1 256 0 0 xdim ydim HALFSIZE // AMMO
			else ifand AMMO_TYPES[CURWEAP] 4096 digitalnumberz DIGITALNUM 50 195 fortymm_cryo 0 32 256 0 0 xdim ydim HALFSIZE // AMMO
			else digitalnumberz DIGITALNUM 50 195 fortymm_caseless 0 27 256 0 0 xdim ydim HALFSIZE // AMMO
			}
		else
		ife temp_weapon 11
	     ifg silver_ammo 0 
		  digitalnumberz DIGITALNUM 50 195 silver_ammo 0 27 256 0 0 xdim ydim HALFSIZE
		else
		ife temp_weapon 13
	     ifg silver_bolts 0 
		  digitalnumberz DIGITALNUM 50 195 silver_bolts 0 27 256 0 0 xdim ydim HALFSIZE
		else
		ife temp_weapon 12
	     ifg tesla_ammo 0 
		  digitalnumberz DIGITALNUM 50 195 tesla_ammo 0 27 256 0 0 xdim ydim HALFSIZE
		else
		ife temp_weapon 27
	     ifg tesla_ammo 0 
		  digitalnumberz DIGITALNUM 50 195 tesla_ammo 0 27 256 0 0 xdim ydim HALFSIZE
		else
		ife temp_weapon 6
			{
			 ifg explosive_shells 0 
			  {
			  ifand AMMO_TYPES[CURWEAP] 1 digitalnumberz DIGITALNUM 50 195 explosive_shells DISP_PULSE 2 256 0 0 xdim ydim HALFSIZE
			  else digitalnumberz DIGITALNUM 50 195 explosive_shells 10 2 256 0 0 xdim ydim HALFSIZE
			  }
			 ifg flechete_shells 0 
			  { 
			  ifand AMMO_TYPES[CURWEAP] 4 digitalnumberz DIGITALNUM 70 195 flechete_shells DISP_PULSE 8 256 0 0 xdim ydim HALFSIZE
			  else digitalnumberz DIGITALNUM 70 195 flechete_shells 10 8 256 0 0 xdim ydim HALFSIZE
			  }
			 ifg magnum_shells 0 
			  {
			  ifand AMMO_TYPES[CURWEAP] 64 digitalnumberz DIGITALNUM 50 189 magnum_shells DISP_PULSE 32 256 0 0 xdim ydim HALFSIZE
			  else digitalnumberz DIGITALNUM 50 189 magnum_shells 10 32 256 0 0 xdim ydim HALFSIZE
			  }
			ifg dragon_shells 0 
			 {
			 ifand AMMO_TYPES[CURWEAP] 1024 digitalnumberz DIGITALNUM 70 189 dragon_shells DISP_PULSE 28 256 0 0 xdim ydim HALFSIZE
			 else digitalnumberz DIGITALNUM 70 189 dragon_shells 10 28 256 0 0 xdim ydim HALFSIZE
			  }
			}
		else
		ife temp_weapon 10
			{
			 ifg explosive_shells 0 
			  {
			  ifand AMMO_TYPES[CURWEAP] 1 digitalnumberz DIGITALNUM 50 195 explosive_shells DISP_PULSE 2 256 0 0 xdim ydim HALFSIZE
			  else digitalnumberz DIGITALNUM 50 195 explosive_shells 10 2 256 0 0 xdim ydim HALFSIZE
			  }
			 ifg flechete_shells 0 
			  { 
			  ifand AMMO_TYPES[CURWEAP] 4 digitalnumberz DIGITALNUM 70 195 flechete_shells DISP_PULSE 8 256 0 0 xdim ydim HALFSIZE
			  else digitalnumberz DIGITALNUM 70 195 flechete_shells 10 8 256 0 0 xdim ydim HALFSIZE
			  }
			}
		
		}

		
	ifand player[].got_access 1 { rotatesprite 268 175 NNORMALSIZE 0 2471 0 0 512 0 0 xdim ydim }
	ifand player[].got_access 2 { rotatesprite 268 185 NNORMALSIZE 0 2471 0 21 512 0 0 xdim ydim }
	ifand player[].got_access 4 { rotatesprite 268 195 NNORMALSIZE 0 2471 0 23 512 0 0 xdim ydim }
	ifand ACCESSKEY2 1 { rotatesprite 272 175 NNORMALSIZE 0 2471 0 12 512 0 0 xdim ydim }
	ifand ACCESSKEY2 2 { rotatesprite 272 185 NNORMALSIZE 0 2471 0 11 512 0 0 xdim ydim }
	ifand ACCESSKEY2 4 { rotatesprite 272 195 NNORMALSIZE 0 2471 0 15 512 0 0 xdim ydim }
	ifand ACCESSKEY2 8 { rotatesprite 276 175 NNORMALSIZE 0 2471 0 18 512 0 0 xdim ydim }
	ifand ACCESSKEY2 16 { rotatesprite 276 185 NNORMALSIZE 0 2471 0 10 512 0 0 xdim ydim }
	ifand ACCESSKEY2 32 { rotatesprite 276 195 NNORMALSIZE 0 2471 0 22 512 0 0 xdim ydim }
	ifand ACCESSKEY2 64 { rotatesprite 280 175 NNORMALSIZE 0 2471 0 16 512 0 0 xdim ydim }

	ifn player[].inven_icon 0
	{
	ife player[].inven_icon 1 // MEDKIT
		{
		rotatesprite 303 184 INVENSIZE 0 CMEDIKIT 0 0 513 0 0 xdim ydim
		digitalnumber THREEBYFIVE 303 188 player[].firstaid_amount 0 2 512 0 0 xdim ydim
		}
	ife player[].inven_icon 2 // STEROIDS
		{
		rotatesprite 303 184 INVENSIZE 0 CSTEROIDS 0 0 513 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumber THREEBYFIVE 303 188 HUD_DISP_TEMP2 0 2 512 0 0 xdim ydim
		}
	ife player[].inven_icon 3 // HOLODUKE
		{
		rotatesprite 303 184 24000 0 CHOLODUKE 0 0 513 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 24
		digitalnumber THREEBYFIVE 305 188 HUD_DISP_TEMP2 0 2 512 0 0 xdim ydim
		ifn player[].holoduke_on -1 
		gametextz 17158 595 192 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 595 192 501 0 21 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 4 // JETPACK
		{
		rotatesprite 303 184 INVENSIZE 0 CJETPACK 0 0 513 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumber THREEBYFIVE 305 188 HUD_DISP_TEMP2 0 2 512 0 0 xdim ydim
		ifn player[].jetpack_on 0 gametextz 17158 595 192 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 595 192 501 0 21 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 303 184 INVENSIZE 0 DISP_NVG 0 0 513 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumber THREEBYFIVE 305 188 HUD_DISP_TEMP2 0 2 512 0 0 xdim ydim
		ifn player[].heat_on 0 gametextz 17158 595 192 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 595 192 501 0 21 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 6 // SCUBA GEAR
		{
		rotatesprite 303 184 INVENSIZE 0 CSCUBA 0 0 513 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			myospal 305 188 3812 0 0 514
			rotatesprite 306 187 12384 0 3688 0 0 512 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumber THREEBYFIVE 305 188 HUD_DISP_TEMP2 0 2 512 0 0 xdim ydim
			gametextz 17158 595 192 502 0 11 512 0 0 xdim ydim 55536
			}
		}
	ife player[].inven_icon 7 // BOOTS
		{
		rotatesprite 303 184 INVENSIZE 0 CBOOTS 0 0 513 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumber THREEBYFIVE 305 188 HUD_DISP_TEMP2 0 2 512 0 0 xdim ydim
		gametextz 17158 595 192 502 0 11 512 0 0 xdim ydim 55536
		}

	ife player[].inven_icon 10 // TOOLBOX
		{
		rotatesprite 303 184 INVENSIZE 0 TOOLBOX_PICKUP 0 0 513 0 0 xdim ydim
		gametextz 17158 595 192 509 0 11 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 11 // ROPE
		{
		rotatesprite 303 184 20000 0 17916 0 0 513 0 0 xdim ydim
		gametextz 17158 595 192 509 0 11 512 0 0 xdim ydim 55536
		}
	}

	}
else
ife CHAR 4
ife HUDON 0 // SANG'S HUD
	{
	rotatesprite 260 150 68000 0 6167 0 0 513 0 0 xdim ydim // BG TO HUD
	rotatesprite 315 129 NNORMALSIZE 0 6168 0 4 513 0 0 xdim ydim // BG TO ARMOUR	

	ife CURWEAP 10 
		{
		gmaxammo 5 HUD_DISP_TEMP
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		}
	else
		{
		gmaxammo CURWEAP HUD_DISP_TEMP
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		}

	sub HUD_DISP_TEMP HUD_DISP_PAMMO
	switch CURWEAP
	 case 0
	    ifand GUN_AMMO_TYPES 16
		ifand AMMO_TYPES[CURWEAP] 16
				{
				set HUD_DISP_PAMMO silver_bolts
				set HUD_DISP_PCOLOUR 27
				divvar HUD_DISP_TEMP 2
				}
		else		
	    ifand GUN_AMMO_TYPES 2
		ifand AMMO_TYPES[CURWEAP] 2
				{
				set HUD_DISP_PAMMO silver_ammo
				set HUD_DISP_PCOLOUR 27
				divvar HUD_DISP_TEMP 2
				}
		else		
	    ifand GUN_AMMO_TYPES 8
		ifand AMMO_TYPES[CURWEAP] 8
				{
				set HUD_DISP_PAMMO tesla_ammo
				set HUD_DISP_PCOLOUR 1
				divvar HUD_DISP_TEMP 2
				}
		else			
		ifand GUN_AMMO_TYPES 1			
		ifand AMMO_TYPES[CURWEAP] 1
			{
			set HUD_DISP_PAMMO explosive_shells
			set HUD_DISP_PCOLOUR 2
			divvar HUD_DISP_TEMP 2
			}
		else	
		ifand GUN_AMMO_TYPES 1	
		ifand AMMO_TYPES[CURWEAP] 4 
			{
			set HUD_DISP_PAMMO flechete_shells
			set HUD_DISP_PCOLOUR 8
			divvar HUD_DISP_TEMP 2
			}
		else	
		ifand GUN_AMMO_TYPES 4	
		ifand AMMO_TYPES[CURWEAP] 64 
			{
			set HUD_DISP_PAMMO magnum_shells
			set HUD_DISP_PCOLOUR 23
			divvar HUD_DISP_TEMP 2
			}
		else 
		ifand GUN_AMMO_TYPES 4	
		ifand AMMO_TYPES[CURWEAP] 1024 
			{
			set HUD_DISP_PAMMO dragon_shells
			set HUD_DISP_PCOLOUR 15
			divvar HUD_DISP_TEMP 2
			}
		else 
		ifand GUN_AMMO_TYPES 2048
			{
			ifand AMMO_TYPES[CURWEAP] 32 set HUD_DISP_PAMMO fortymm_shells
			else ifand AMMO_TYPES[CURWEAP] 128 set HUD_DISP_PAMMO fortymm_MIA_shells
			else ifand AMMO_TYPES[CURWEAP] 256 set HUD_DISP_PAMMO fortymm_plasma
			else set HUD_DISP_PAMMO fortymm_grenades
			set HUD_DISP_PCOLOUR 10
			divvar HUD_DISP_TEMP 2
			}
		else 
		ifand GUN_AMMO_TYPES 4096
			{
			ifand AMMO_TYPES[CURWEAP] 512 set HUD_DISP_PAMMO fortymm_slug
			else ifand AMMO_TYPES[CURWEAP] 2048 set HUD_DISP_PAMMO fortymm_electro
			else ifand AMMO_TYPES[CURWEAP] 4096 set HUD_DISP_PAMMO fortymm_cryo
			else set HUD_DISP_PAMMO fortymm_caseless
			set HUD_DISP_PCOLOUR 10
			divvar HUD_DISP_TEMP 2
			}
		else
			{
			set HUD_DISP_PCOLOUR 22
			divvar HUD_DISP_TEMP 2
			}
		break
	 case 1
		set HUD_DISP_PCOLOUR 16
		divvar HUD_DISP_TEMP 2
		break
	 case 3
		ifand GUN_AMMO_TYPES 2048
			{
			ifand AMMO_TYPES[CURWEAP] 32 set HUD_DISP_PAMMO fortymm_shells
			else ifand AMMO_TYPES[CURWEAP] 128 set HUD_DISP_PAMMO fortymm_MIA_shells
			else ifand AMMO_TYPES[CURWEAP] 256 set HUD_DISP_PAMMO fortymm_plasma
			else set HUD_DISP_PAMMO fortymm_grenades
			set HUD_DISP_PCOLOUR 10
			divvar HUD_DISP_TEMP 2
			}
		else 
		ifand GUN_AMMO_TYPES 4096
			{
			ifand AMMO_TYPES[CURWEAP] 512 set HUD_DISP_PAMMO fortymm_slug
			else ifand AMMO_TYPES[CURWEAP] 2048 set HUD_DISP_PAMMO fortymm_electro
			else ifand AMMO_TYPES[CURWEAP] 4096 set HUD_DISP_PAMMO fortymm_cryo
			else set HUD_DISP_PAMMO fortymm_caseless
			set HUD_DISP_PCOLOUR 10
			divvar HUD_DISP_TEMP 2
			}
		else
			{
			set HUD_DISP_PCOLOUR 11
			divvar HUD_DISP_TEMP 4
			}
		break
	 case 2
		set HUD_DISP_PCOLOUR 0
		mulvar HUD_DISP_TEMP 2
		break
       case 6
	 case 11
		set HUD_DISP_PCOLOUR 21
		mulvar HUD_DISP_TEMP 2
		break
	 case 4
		set HUD_DISP_PCOLOUR 10
		mulvar HUD_DISP_TEMP 2
		break
	 case 7
		set HUD_DISP_PCOLOUR 18
		divvar HUD_DISP_TEMP 2
		break
       case 9
		set HUD_DISP_PCOLOUR 13
		mulvar HUD_DISP_TEMP 5
		break
	 case 5
	 case 10
		set HUD_DISP_PCOLOUR 27
		mulvar HUD_DISP_TEMP 2
		break
	 case 8
		set HUD_DISP_PCOLOUR 27
		mulvar HUD_DISP_TEMP 10
		break
	endswitch
	set HUD_DISP_TEMP3 100
	sub HUD_DISP_TEMP3 HUD_DISP_TEMP

	ife CURWEAP 0 set HUD_DISP_TEMP4 225 else set HUD_DISP_TEMP4 205
	divvar HUD_DISP_TEMP3 4
	sub HUD_DISP_TEMP4 HUD_DISP_TEMP3
		
	ifl HUD_DISP_TEMP4 175 set HUD_DISP_TEMP4 175
	
	rotatesprite 293 HUD_DISP_TEMP4 85600 0 6169 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // LIQUID
	digitalnumber 6155 298 174 HUD_DISP_PAMMO 0 4 545 0 0 xdim ydim
	digitalnumber 6155 297 173 HUD_DISP_PAMMO 0 0 512 0 0 xdim ydim
	ifg GUNMAG -1
	 ifl SKILL_LEVEL 4
		{
		digitalnumberz 6155 297 185 GUNMAG 0 4 545 0 0 xdim ydim HALFSIZE
		digitalnumberz 6155 296 184 GUNMAG 10 0 512 0 0 xdim ydim HALFSIZE
		}
	getp[].shield_amount HUD_DISP_TEMP
	divvar HUD_DISP_TEMP 2
	ifg HUD_DISP_TEMP 50 set HUD_DISP_TEMP 50
	set HUD_DISP_TEMP2 179
	sub HUD_DISP_TEMP2 HUD_DISP_TEMP
	rotatesprite 315 HUD_DISP_TEMP2 NNORMALSIZE 0 6168 0 124 512 0 0 xdim ydim // ARMOUR
	ifg PARMOUR 100
		{
		getp[].shield_amount HUD_DISP_TEMP
		divvar HUD_DISP_TEMP 2
		set HUD_DISP_TEMP2 229
		sub HUD_DISP_TEMP2 HUD_DISP_TEMP
		rotatesprite 315 HUD_DISP_TEMP2 NNORMALSIZE 0 6168 0 125 512 0 0 xdim ydim // ARMOUR
		}
	ifg P_ENERGYSHIELD 0
		{
		set HUD_DISP_TEMP P_ENERGYSHIELD
		divvar HUD_DISP_TEMP 2
		set HUD_DISP_TEMP2 179
		sub HUD_DISP_TEMP2 HUD_DISP_TEMP
		rotatesprite 315 HUD_DISP_TEMP2 NNORMALSIZE 0 6168 0 32 512 0 0 xdim ydim // ENERGY SHIELD
		}
	
	rotatesprite 25 176 NNORMALSIZE 0 6185 0 0 257 0 0 xdim ydim
	ifand CHAR_APP 2
		{
		rotatesprite 25 176 11141 0 6389 0 0 256 0 0 xdim ydim // HUD PART 1 HEALTH BOX
		rotatesprite 260 150 11534 0 6390 0 0 512 0 0 xdim ydim // HUD PART 2 EVERYTHING ELSE
		}
	else
		{
		rotatesprite 25 176 11141 0 6165 0 0 256 0 0 xdim ydim // HUD PART 1 HEALTH BOX
		rotatesprite 260 150 11534 0 6166 0 0 512 0 0 xdim ydim // HUD PART 2 EVERYTHING ELSE
		}
	rotatespritea 260 150 HALFSIZE 0 6175 0 0 512 -255 0 0 xdim ydim // HUD PART 2 EVERYTHING ELSE
	
		ifg P_SPIRIT_ARMOUR 0
			{
			ifg P_SPIRIT_ARMOUR 10 myospal 309 150 6179 9 512 11
			ifg P_SPIRIT_ARMOUR 20 myospal 309 146 6179 8 512 11
			ifg P_SPIRIT_ARMOUR 30 myospal 309 142 6179 7 512 11
			ifg P_SPIRIT_ARMOUR 40 myospal 309 138 6179 6 512 11
			ifg P_SPIRIT_ARMOUR 50 myospal 309 134 6179 5 512 11
			ifg P_SPIRIT_ARMOUR 60 myospal 309 130 6179 4 512 11
			ifg P_SPIRIT_ARMOUR 70 myospal 309 126 6179 3 512 11
			ifg P_SPIRIT_ARMOUR 80 myospal 309 122 6179 2 512 11
			ifg P_SPIRIT_ARMOUR 90 myospal 309 118 6179 1 512 11
			ifg P_SPIRIT_ARMOUR 99 myospal 309 114 6179 0 512 11
			}
			
		ifg P_FIRE_ARMOUR 0
			{
			ifg P_FIRE_ARMOUR 10 myospal 320 150 6179 9 512 21
			ifg P_FIRE_ARMOUR 20 myospal 320 146 6179 8 512 21
			ifg P_FIRE_ARMOUR 30 myospal 320 142 6179 7 512 21
			ifg P_FIRE_ARMOUR 40 myospal 320 138 6179 6 512 21
			ifg P_FIRE_ARMOUR 50 myospal 320 134 6179 5 512 21
			ifg P_FIRE_ARMOUR 60 myospal 320 130 6179 4 512 21
			ifg P_FIRE_ARMOUR 70 myospal 320 126 6179 3 512 21
			ifg P_FIRE_ARMOUR 80 myospal 320 122 6179 2 512 21
			ifg P_FIRE_ARMOUR 90 myospal 320 118 6179 1 512 21
			ifg P_FIRE_ARMOUR 99 myospal 320 114 6179 0 512 21
			}
			
	ife ARTIFACTS_LOADOUT[4] 1 myospalx 30 176 10239 0 256 0  // Display the picture 1
	ife ARTIFACTS_LOADOUT[4] 2 rotatesprite 30 176 18000 0 10238 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 3 rotatesprite 30 176 18000 0 10237 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 4 rotatesprite 30 176 20000 0 10236 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 5 rotatesprite 30 176 18000 0 10235 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 6 rotatesprite 30 176 22000 0 10233 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 7 rotatesprite 30 176 25000 0 10232 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 8 rotatesprite 30 176 25000 0 13542 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 9 rotatesprite 30 176 25000 0 19199 0 0 256 0 0 xdim ydim 
	ife ARTIFACTS_LOADOUT[4] 10 rotatesprite 30 176 25000 0 19198 0 0 256 0 0 xdim ydim
	ife ARTIFACTS_LOADOUT[4] 11 rotatesprite 30 176 22000 0 22762 0 0 256 0 0 xdim ydim 

	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	digitalnumber 6155 30 176 PHEALTH HUD_DISP_TEMP4 0 256 0 0 xdim ydim
	
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 25 176 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}

	ifand player[].got_access 1 { rotatesprite 212 181 50000 0 2471 0 0 512 0 0 xdim ydim }
	ifand player[].got_access 2 { rotatesprite 212 187 50000 0 2471 0 21 512 0 0 xdim ydim }
	ifand player[].got_access 4 { rotatesprite 212 194 50000 0 2471 0 23 512 0 0 xdim ydim }
	
	ifand ACCESSKEY2 1 { rotatesprite 212 182 50000 0 2471 0 12 512 0 0 xdim ydim }
	ifand ACCESSKEY2 2 { rotatesprite 212 188 50000 0 2471 0 11 512 0 0 xdim ydim }
	ifand ACCESSKEY2 4 { rotatesprite 212 195 50000 0 2471 0 15 512 0 0 xdim ydim }
	
	ifand ACCESSKEY2 8 { rotatesprite 212 180 50000 0 2471 0 18 512 0 0 xdim ydim }
	ifand ACCESSKEY2 16 { rotatesprite 212 186 50000 0 2471 0 10 512 0 0 xdim ydim }
	ifand ACCESSKEY2 32 { rotatesprite 212 193 50000 0 2471 0 22 512 0 0 xdim ydim }
	
	ifand ACCESSKEY2 64 { rotatesprite 212 179 50000 0 2471 0 16 512 0 0 xdim ydim }

	ifn player[].inven_icon 0
	{
	ife player[].inven_icon 1 // MEDKIT
		{
		rotatesprite 255 181 INVENSIZE 0 CMEDIKIT 0 0 512 0 0 xdim ydim
		digitalnumberz 17173 248 185 player[].firstaid_amount 10 2 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 2 // STEROIDS
		{
		rotatesprite 255 181 INVENSIZE 0 CSTEROIDS 0 0 512 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		ifl HUD_DISP_TEMP2 400 gametextz 17158 485 178 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 485 178 501 0 21 512 0 0 xdim ydim 55536
		divvar HUD_DISP_TEMP2 4
		digitalnumberz 17173 248 185 HUD_DISP_TEMP2 10 2 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 3 // HOLODUKE
		{
		rotatesprite 255 181 INVENSIZE 0 CHOLODUKE 0 0 512 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 6
		digitalnumberz 17173 248 185 HUD_DISP_TEMP2 10 2 512 0 0 xdim ydim 55536
		ifn player[].holoduke_on -1 
		gametextz 17158 485 178 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 485 178 501 0 21 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 4 // JETPACK
		{
		rotatesprite 255 182 INVENSIZE 0 CJETPACK 0 0 512 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumberz 17173 248 185 HUD_DISP_TEMP2 10 2 512 0 0 xdim ydim 55536
		ifn player[].jetpack_on 0 gametextz 17158 485 178 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 485 178 501 0 21 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 255 181 INVENSIZE 0 DISP_NVG 0 0 512 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumberz 17173 248 185 HUD_DISP_TEMP2 10 2 512 0 0 xdim ydim 55536
		ifn player[].heat_on 0 gametextz 17158 485 178 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 485 178 501 0 21 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 6 // SCUBA GEAR
		{
		rotatesprite 255 181 INVENSIZE 0 CSCUBA 0 0 512 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			myospal 243 187 3812 20 0 2
			rotatesprite 253 184 12384 0 3688 0 0 512 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumberz 17173 248 185 HUD_DISP_TEMP2 10 2 512 0 0 xdim ydim 55536
			}
		gametextz 17158 485 178 502 0 11 512 0 0 xdim ydim 55536
		}
	ife player[].inven_icon 7 // BOOTS
		{
		rotatesprite 255 182 INVENSIZE 0 CBOOTS 0 0 512 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumberz 17173 248 185 HUD_DISP_TEMP2 10 2 512 0 0 xdim ydim 55536
		gametextz 17158 485 178 502 0 11 512 0 0 xdim ydim 55536
		}

		ife player[].inven_icon 10 // TOOLBOX
		{
		rotatesprite 255 182 INVENSIZE 0 TOOLBOX_PICKUP 0 0 512 0 0 xdim ydim
		}
		ife player[].inven_icon 11 // ROPE
		{
		rotatesprite 255 182 20000 0 17916 0 0 512 0 0 xdim ydim
		}
	}


	}
else
ife CHAR 5
ife HUDON 0 // RUSTY'S HUD
	{
	
    // display hat when looking up
    set HUD_DISP_TEMP -65
    getp[].horiz HUD_DISP_TEMP2
    divvar HUD_DISP_TEMP2 4 
    add HUD_DISP_TEMP HUD_DISP_TEMP2
    getsector[].floorpal HUD_DISP_TEMP3
	rotatesprite 158 HUD_DISP_TEMP NNORMALSIZE 0 6779 shade HUD_DISP_TEMP3 1024 0 0 xdim ydim
	
    // plus sign (health)
	myospalx 12 190 6757 0 256 0
	
    // pulsating health number if > MAX
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	
    // Color for health
	ifl PHEALTH 10 set HUD_DISP_PCOLOUR 10 else
	ifl PHEALTH 25 set HUD_DISP_PCOLOUR 21 else
	ifl PHEALTH 50 set HUD_DISP_PCOLOUR 23 else
	set HUD_DISP_PCOLOUR 27
	digitalnumberz 11894 30 193 PHEALTH HUD_DISP_TEMP4 HUD_DISP_PCOLOUR 257 0 0 xdim ydim 24768 // HEALTH
	
    ifg CURSED 0
		{
        // rotation
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
        
        // Curse icon gets less visible as the curse wears off	
        set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 30 193 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	
	ifand GUN_AMMO_TYPES 2048
		{
		ifand AMMO_TYPES[CURWEAP] 32
			{
			myospalx 310 173 FORTYMM_SHELLS 0 513 0
			digitalnumberz 11894 300 173 fortymm_shells 0 27 513 0 0 xdim ydim 16384 // AMMO 
			}
		else
		ifand AMMO_TYPES[CURWEAP] 128
			{
			myospalx 310 173 5463 0 513 0
			digitalnumberz 11894 300 173 fortymm_MIA_shells 0 27 513 0 0 xdim ydim 16384 // AMMO 
			}
		else
		ifand AMMO_TYPES[CURWEAP] 256
			{
			myospalx 310 173 5476 0 513 0
			digitalnumberz 11894 300 173 fortymm_plasma 0 27 513 0 0 xdim ydim 16384 // AMMO 
			}
		else
			{
			myospalx 310 173 FORTYMM_NADES 0 513 0
			digitalnumberz 11894 300 173 fortymm_grenades 0 27 513 0 0 xdim ydim 16384 // AMMO 
			}
		}
		
	ifand GUN_AMMO_TYPES 4096
		{
		ifand AMMO_TYPES[CURWEAP] 512
			{
			myospalx 310 173 FORTYMM_SLUGS 0 513 0
			digitalnumberz 11894 300 173 fortymm_slug 0 27 513 0 0 xdim ydim 16384 // AMMO 
			}
		else
		ifand AMMO_TYPES[CURWEAP] 2048
			{
			myospalx 310 173 FORTYMM_ELECTRO 0 513 0
			digitalnumberz 11894 300 173 fortymm_electro 0 1 513 0 0 xdim ydim 16384 // AMMO 
			}
		else
		ifand AMMO_TYPES[CURWEAP] 4096
			{
			myospalx 310 173 FORTYMM_CRYO 0 513 0
			digitalnumberz 11894 300 173 fortymm_cryo 0 1 513 0 0 xdim ydim 16384 // AMMO 
			}
		else
			{
			myospalx 310 173 FORTYMM_CASELESS 0 513 0
			digitalnumberz 11894 300 173 fortymm_caseless 0 27 513 0 0 xdim ydim 16384 // AMMO 
			}

		}

	switch CURWEAP
	case 0
		ifand GUN_AMMO_TYPES 1
		  ifand AMMO_TYPES[CURWEAP] 1
		   { myospal 280 193 9364 0 513 0 set HUD_DISP_PAMMO explosive_shells }
		 else
		ifand GUN_AMMO_TYPES 2
		 ifand AMMO_TYPES[CURWEAP] 2
		  { myospal 280 193 3734 0 513 27 set HUD_DISP_PAMMO silver_ammo }
		 else
		 ifand GUN_AMMO_TYPES 1
		  ifand AMMO_TYPES[CURWEAP] 4 
		  { myospal 280 193 7849 0 513 0 set HUD_DISP_PAMMO flechete_shells }
		 else
		 ifand GUN_AMMO_TYPES 4
		  ifand AMMO_TYPES[CURWEAP] 64 
		  { myospal 280 193 14572 0 513 0 set HUD_DISP_PAMMO magnum_shells }
		 else
		 ifand GUN_AMMO_TYPES 4
		  ifand AMMO_TYPES[CURWEAP] 1024 
		  { myospal 280 193 14572 0 513 0 set HUD_DISP_PAMMO dragon_shells }
		 else 
		ifand GUN_AMMO_TYPES 8
		 ifand AMMO_TYPES[CURWEAP] 8
		  { rotatesprite 280 193 HALFSIZE 512 4066 0 0 513 0 0 xdim ydim set HUD_DISP_PAMMO tesla_ammo }
		 else
		ifand GUN_AMMO_TYPES 16
		 ifand AMMO_TYPES[CURWEAP] 16
		  { myospal 280 193 3734 0 513 27 set HUD_DISP_PAMMO silver_bolts }
		 else
			{ myospal 280 187 6759 0 513 27 getp[].ammo_amount CURWEAP HUD_DISP_PAMMO }
		break
    case 2 // Is the player using the auto-shotgun?
		ifand GUN_AMMO_TYPES 1
		  ifand AMMO_TYPES[CURWEAP] 1
		   { myospal 280 193 9364 0 513 0 set HUD_DISP_PAMMO explosive_shells }
		 else
		 ifand GUN_AMMO_TYPES 1
		  ifand AMMO_TYPES[CURWEAP] 4 
		  { myospal 280 193 7849 0 513 0 set HUD_DISP_PAMMO flechete_shells }
		 else
		 ifand GUN_AMMO_TYPES 4
		  ifand AMMO_TYPES[CURWEAP] 64 
		  { myospal 280 193 7849 0 513 0 set HUD_DISP_PAMMO magnum_shells }
		 else
		 ifand GUN_AMMO_TYPES 4
		  ifand AMMO_TYPES[CURWEAP] 1024 
		  { myospal 280 193 7849 0 513 0 set HUD_DISP_PAMMO dragon_shells }
		 else 
		 { myospal 280 193 3763 0 513 0 getp[].ammo_amount 2 HUD_DISP_PAMMO }
		break
    case 3 
		ife SPECIALIST_EQUIPMENT[9] 2 // Is the player using the M41C?
		{
		getp[].ammo_amount 7 HUD_DISP_PAMMO
		myospalx 310 173 6852 0 513 0
		digitalnumberz 11894 300 173 HUD_DISP_PAMMO 0 27 513 0 0 xdim ydim 16384 // AMMO 
		}
		myospal 280 193 3734 0 513 0
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		break
	case 4
		myospalx 280 193 W4_AMMO_TILE 0 513 0
		getp[].ammo_amount 4 HUD_DISP_PAMMO
		break
	case 5
		myospalx 280 193 W5_AMMO_TILE 0 513 0
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		break
	case 6
		myospalx 280 193 W6_AMMO_TILE 0 513 0
		getp[].ammo_amount 6 HUD_DISP_PAMMO
		break
	case 7
		myospalx 280 193 W7_AMMO_TILE 0 513 0
		getp[].ammo_amount 7 HUD_DISP_PAMMO
		break
	case 8
		myospalx 280 193 WEAPON8_TILE 0 513 0
		getp[].ammo_amount 8 HUD_DISP_PAMMO
		break
	case 9
		myospalx 280 193 W9_AMMO_TILE 0 513 0
		getp[].ammo_amount 9 HUD_DISP_PAMMO
		break
	case 10
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		break
	case 11
		myospalx 280 193 W11_AMMO_TILE 0 513 0
		getp[].ammo_amount 11 HUD_DISP_PAMMO
		break
	default
		myospal 280 193 6758 0 513 0
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		break
	endswitch
	
	digitalnumberz 11894 300 193 HUD_DISP_PAMMO 0 27 513 0 0 xdim ydim 24768 // AMMO 
	ifn GUNMAG -1 ifl SKILL_LEVEL 4 { digitalnumberz 11894 290 180 GUNMAG 0 27 513 0 0 xdim ydim 16384 } // MAG

ifg PARMOUR 0  // physical armor
	{
	ife ARMOURTYPE 1 set HUD_DISP_TEMP 6867 else set HUD_DISP_TEMP 6868
	rotatesprite 10 160 14000 0 HUD_DISP_TEMP 0 0 257 0 0 xdim ydim
	
	digitalnumberz 11894 25 162 PARMOUR 0 27 256 0 0 xdim ydim 16384
	}
	
ifg P_SPIRIT_ARMOUR 0
	{
	rotatesprite 10 176 14000 0 SPIRIT_ARMOUR 0 0 257 0 0 xdim ydim
	digitalnumberz 11894 25 174 P_SPIRIT_ARMOUR 0 8 256 0 0 xdim ydim 16384
	}
	
ifg P_FIRE_ARMOUR 0
	{
	rotatesprite 40 176 20000 0 FIRE_ARMOUR 0 0 257 0 0 xdim ydim
	digitalnumberz 11894 55 174 P_FIRE_ARMOUR 0 2 256 0 0 xdim ydim 16384
	}

	ifn player[].inven_icon 0
	{
	ife player[].inven_icon 1 // MEDKIT
		{
		rotatesprite 10 144 24000 0 CMEDIKIT 0 27 257 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumberz 11894 25 144 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim 24768
		}
	else ife player[].inven_icon 2 // STEROIDS
		{
		rotatesprite 10 144 24000 0 CSTEROIDS 0 27 257 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumberz 11894 25 144 HUD_DISP_TEMP2 0 27 257 0 0 xdim ydim 24768
		}
	else ife player[].inven_icon 3 // HOLODUKE
		{
		rotatesprite 10 144 24000 0 CHOLODUKE 0 27 257 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		ife HUD_DISP_TEMP2 2400 set HUD_DISP_TEMP3 3
		ife HUD_DISP_TEMP2 1600 set HUD_DISP_TEMP3 2
		ife HUD_DISP_TEMP2 800 set HUD_DISP_TEMP3 1
		digitalnumberz 11894 25 144 HUD_DISP_TEMP3 0 27 256 0 0 xdim ydim 24768
		}
	else ife player[].inven_icon 4 // JETPACK
		{
		rotatesprite 10 144 24000 0 CJETPACK 0 27 257 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumberz 11894 25 144 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim 24768
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 
		gametextz 17158 47 152 500 0 0 256 0 0 xdim ydim 55536
		else gametextz 17158 47 152 501 0 12 256 0 0 xdim ydim 55536
		}
	else ife player[].inven_icon 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 10 144 INVENSIZE 0 DISP_NVG 0 27 257 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumberz 11894 25 144 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim 24768
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 		
		gametextz 17158 47 152 500 0 0 256 0 0 xdim ydim 55536
		else gametextz 17158 47 152 501 0 12 256 0 0 xdim ydim 55536
		}
	else ife player[].inven_icon 6 // SCUBA GEAR
		{
		rotatesprite 10 144 INVENSIZE 0 CSCUBA 0 27 257 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			myospal 10 144 3812 0 0 2
			rotatesprite 10 144 12384 0 3688 0 27 257 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumberz 11894 25 144 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim 24768
			}
		getp[].scuba_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 		
		gametextz 17158 47 152 500 0 0 256 0 0 xdim ydim 55536
		else gametextz 17158 47 152 502 0 12 256 0 0 xdim ydim 55536
		}
	else ife player[].inven_icon 7 // BOOTS
		{
		rotatesprite 10 144 INVENSIZE 0 CBOOTS 0 27 257 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumberz 11894 25 144 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim 24768
		gametextz 17158 47 152 502 0 12 256 0 0 xdim ydim 55536
		}

	else ife player[].inven_icon 10 // TOOLBOX
		{
		rotatesprite 10 144 INVENSIZE 0 TOOLBOX_PICKUP 0 27 256 0 0 xdim ydim
		gametextz 17158 47 152 509 0 12 256 0 0 xdim ydim 55536
		}
	else ife player[].inven_icon 11 // ROPE
		{
		rotatesprite 10 144 20000 0 17916 0 27 256 0 0 xdim ydim
		gametextz 17158 47 152 509 0 12 256 0 0 xdim ydim 55536
		}
	}

	}
else
ife CHAR 2
ife HUDON 0 // MERLIJN'S HUD
	{
	
	/*
	getuserdef[].color HUD_DISP_PCOLOUR
	ife HUD_DISP_PCOLOUR 0 set HUD_DISP_PCOLOUR 11
	
	switch CURWEAP
	case 0
		ifn temp_weapon 0
		{
		rotatesprite 35 145 NNORMALSIZE 0 5500 0 0 257 0 0 xdim ydim
		ife temp_weapon 11
		 ifand AMMO_TYPES[CURWEAP] 2
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 silver_ammo 0 27 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 13
		 ifand AMMO_TYPES[CURWEAP] 16
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 silver_bolts 0 27 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 12
		 ifand AMMO_TYPES[CURWEAP] 8
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 tesla_ammo 0 1 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 27
		 ifand AMMO_TYPES[CURWEAP] 8
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 tesla_ammo 0 1 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 1
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 explosive_shells 0 2 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 4 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 flechete_shells 0 8 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 64 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 magnum_shells 0 7 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 10
		 ifand AMMO_TYPES[CURWEAP] 1
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 explosive_shells 0 2 256 0 0 xdim ydim
			}
			else
		ife temp_weapon 10
		 ifand AMMO_TYPES[CURWEAP] 4 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			digitalnumber 6155 37 145 flechete_shells 0 8 256 0 0 xdim ydim
			}
			else
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim
			getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
			digitalnumber 6155 37 145 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim
			}
		}
	break
	case 2
	case 3
	case 9
	case 10
	break
	case 1
	case 4
	case 5
	case 7
	case 8
	case 6
	case 11
		rotatesprite 35 145 NNORMALSIZE 0 3823 0 0 256 0 0 xdim ydim
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		digitalnumber 6155 37 145 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim
	break
	endswitch
	*/
	
	rotatesprite 15 15 8192 0 11173 0 0 257 0 0 xdim ydim // artifact
	
		ife ARTIFACTS_LOADOUT[2] 1 myospalx 15 15 10239 0 0 256 // Display the picture 1
		ife ARTIFACTS_LOADOUT[2] 2 rotatesprite 15 15 18000 0 10238 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 3 rotatesprite 15 15 18000 0 10237 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 4 rotatesprite 15 15 20000 0 10236 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 5 rotatesprite 15 15 18000 0 10235 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 6 rotatesprite 15 15 22000 0 10233 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 7 rotatesprite 15 15 25000 0 10232 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 8 rotatesprite 15 15 25000 0 13542 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 9 rotatesprite 15 15 25000 0 19199 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 10 rotatesprite 15 15 25000 0 19198 0 0 256 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[2] 11 rotatesprite 15 15 22000 0 22762 0 0 256 0 0 xdim ydim 
		
	set DISP_TEMP 25
	rotatesprite DISP_TEMP 15 QUARTERSIZE 0 11169 0 0 256 0 0 xdim ydim // start of button
		
		add DISP_TEMP 4
		set DISP_TEMP6 0
		
		ifg PHEALTH PMAXHEALTH
		{
		whilevarvarn DISP_TEMP6 PHEALTH
			{
			add DISP_TEMP 1
			rotatesprite DISP_TEMP 15 QUARTERSIZE 0 11170 0 0 257 0 0 xdim ydim // button mid-section
			add DISP_TEMP6 1
			}
		}
		else
		{
		whilevarvarn DISP_TEMP6 PMAXHEALTH
			{
			add DISP_TEMP 1
			rotatesprite DISP_TEMP 15 QUARTERSIZE 0 11170 0 0 257 0 0 xdim ydim // button mid-section
			add DISP_TEMP6 1
			}
		}
			
		add DISP_TEMP 6
		rotatesprite DISP_TEMP 15 QUARTERSIZE 1024 11169 0 0 260 0 0 xdim ydim // End of button
			
		set DISP_TEMP6 0
		set DISP_TEMP 29
		
		ifg HUD_HEALTH_TEMP PHEALTH sub HUD_HEALTH_TEMP 1 else ifl HUD_HEALTH_TEMP PHEALTH add HUD_HEALTH_TEMP 2	

		whilevarvarn DISP_TEMP6 HUD_HEALTH_TEMP
			{
			add DISP_TEMP 1
			ifg DISP_TEMP6 PMAXHEALTH rotatesprite DISP_TEMP 15 QUARTERSIZE 0 11171 DISP_PULSE 125 257 0 0 xdim ydim // button mid-section
			else ifg DISP_TEMP6 PHEALTH rotatesprite DISP_TEMP 15 QUARTERSIZE 0 11171 0 23 257 0 0 xdim ydim // button mid-section
			else rotatesprite DISP_TEMP 15 QUARTERSIZE 0 11171 0 21 257 0 0 xdim ydim // button mid-section
			add DISP_TEMP6 1
			}
		
	ifg PARMOUR 0
	{
	set DISP_TEMP 25
	rotatesprite DISP_TEMP 22 8192 0 11169 0 0 256 0 0 xdim ydim // start of button
		
		add DISP_TEMP 2
		set DISP_TEMP6 0
		
		whilevarvarn DISP_TEMP6 PARMOUR
			{
			add DISP_TEMP 1
			rotatesprite DISP_TEMP 22 8192 0 11172 0 0 257 0 0 xdim ydim // button mid-section
			add DISP_TEMP6 1
			}
			
		add DISP_TEMP 4
		rotatesprite DISP_TEMP 22 8192 1024 11169 0 0 260 0 0 xdim ydim // End of button
	}
	
	ifg P_HAS_SHIELD 0
	{
	set DISP_TEMP 25
	rotatesprite DISP_TEMP 18 8192 0 11169 0 0 256 0 0 xdim ydim // start of button
		
		add DISP_TEMP 2
		set DISP_TEMP6 0
		
		whilevarvarn DISP_TEMP6 P_ENERGYSHIELD
			{
			add DISP_TEMP 1
			rotatesprite DISP_TEMP 18 8192 0 11172 0 32 256 0 0 xdim ydim // button mid-section
			add DISP_TEMP6 1
			}
			
		add DISP_TEMP 4
		rotatesprite DISP_TEMP 18 8192 1024 11169 0 0 260 0 0 xdim ydim // End of button
	}
	
		ifg P_SPIRIT_ARMOUR 0
		{
		rotatespritea 15 35 24000 0 SPIRIT_ARMOUR 10 0 256 -254 0 0 xdim ydim
		digitalnumberz 6155 30 35 P_SPIRIT_ARMOUR 0 8 256 0 0 xdim ydim HALFSIZE
		}
		
	ifg P_FIRE_ARMOUR 0
		{
		rotatespritea 50 35 24000 0 FIRE_ARMOUR 10 0 256 -254 0 0 xdim ydim
		digitalnumberz 6155 65 35 P_FIRE_ARMOUR 0 2 256 0 0 xdim ydim HALFSIZE
		}
		
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 20 20 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
		
	rotatesprite 50 135 10240 0 11167 0 0 256 0 0 xdim ydim // top slot
	rotatespritea 50 135 10240 0 11168 0 0 289 -90 0 0 xdim ydim
		
	rotatesprite 50 175 10240 0 11167 0 0 256 0 0 xdim ydim // bottom slot (inventory item)
	rotatespritea 50 175 10240 0 11168 0 0 289 -90 0 0 xdim ydim
	
	rotatesprite 80 155 10240 0 11167 0 0 256 0 0 xdim ydim // right slot (main weapon)
	rotatespritea 80 155 10240 0 11168 0 0 289 -90 0 0 xdim ydim
	
	ife CURWEAP 0
	{
	ifn temp_weapon 0
		{
		rotatesprite 80 155 INVENSIZE 640 WEAPON0_TILE 0 0 256 0 0 xdim ydim
		
		ifand AMMO_TYPES[CURWEAP] 1
			digitalnumberz 6155 80 165 explosive_shells 0 2 256 0 0 xdim ydim HALFSIZE
		else
			{
			getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
			digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
			}
		}
	}
	else
	ife CURWEAP 1
	{
	rotatesprite 80 155 INVENSIZE 640 WEAPON1_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	else
	ife CURWEAP 2
	{
	rotatesprite 80 155 INVENSIZE 640 WEAPON2_TILE 0 0 256 0 0 xdim ydim
	}
	else
	ife CURWEAP 3
	{
	rotatesprite 80 155 25000 600 WEAPON3_TILE 0 0 256 0 0 xdim ydim
	}
	else
	ife CURWEAP 4
	{
	rotatesprite 80 155 25000 64 WEAPON4_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	else
	ife CURWEAP 5
	{
	rotatesprite 80 155 28000 0 WEAPON5_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	else
	ife CURWEAP 6
	{
	rotatesprite 80 155 18000 600 WEAPON6_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	else
	ife CURWEAP 7
	{
	rotatesprite 80 155 25000 600 WEAPON7_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	else
	ife CURWEAP 8
	{
	rotatesprite 80 155 25000 600 WEAPON8_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	else
	ife CURWEAP 9
	{
	rotatesprite 80 155 22000 600 WEAPON9_TILE 0 0 256 0 0 xdim ydim
	}
	else
	ife CURWEAP 11
	{
	rotatesprite 80 155 18000 600 WEAPON6_TILE 0 0 256 0 0 xdim ydim
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	digitalnumberz 6155 80 165 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim HALFSIZE
	}
	
	rotatesprite 20 155 10240 0 11167 0 0 256 0 0 xdim ydim // left slot (shield/duel)
	rotatespritea 20 155 10240 0 11168 0 0 289 -90 0 0 xdim ydim
	
	ife CURWEAP 2
	ifand GUNFIREMODE_2 64
	{
	rotatesprite 20 155 INVENSIZE 640 WEAPON2_TILE 0 0 256 0 0 xdim ydim
	}
	else
	ifg SHIELDUP 0
		{
		rotatesprite 20 155 QUARTERSIZE 0 22757 0 0 256 0 0 xdim ydim
		digitalnumberz 6155 20 165 RIOTSHIELD 0 0 256 0 0 xdim ydim HALFSIZE
		}
	else
	ifg MSHIELDUP 0
		{
		ife MSHIELDTYPE 0 rotatesprite 20 155 QUARTERSIZE 0 5032 0 0 256 0 0 xdim ydim
		else ife MSHIELDTYPE 1 rotatesprite 20 155 QUARTERSIZE 0 4976 0 0 256 0 0 xdim ydim
		digitalnumberz 6155 20 165 MERLIJNSHIELD 0 0 256 0 0 xdim ydim HALFSIZE
		}
	
	/*
	
	rotatesprite 35 176 NNORMALSIZE 0 5513 0 HUD_DISP_PCOLOUR 256 0 0 xdim ydim // HUD
	rotatesprite 35 176 NNORMALSIZE 0 5498 0 0 257 0 0 xdim ydim // HUD
	rotatesprite 281 176 NNORMALSIZE 0 5514 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // HUD
	rotatesprite 281 176 NNORMALSIZE 0 5499 0 0 513 0 0 xdim ydim // HUD

	digitalnumber 6155 37 167 PHEALTH 0 0 256 0 0 xdim ydim
	digitalnumber 3087 50 185 PARMOUR 0 12 256 0 0 xdim ydim
	digitalnumber 3087 21 185 MERLIJNSHIELD 0 12 256 0 0 xdim ydim
	
	getp[].got_access HUD_DISP_TEMP
	ifand HUD_DISP_TEMP 1 { rotatesprite 268 185 NNORMALSIZE 0 2471 0 0 512 0 0 xdim ydim }
	ifand HUD_DISP_TEMP 2 { rotatesprite 286 185 NNORMALSIZE 0 2471 0 21 512 0 0 xdim ydim }
	ifand HUD_DISP_TEMP 4 { rotatesprite 304 185 NNORMALSIZE 0 2471 0 23 512 0 0 xdim ydim }
	ifand ACCESSKEY2 1 { rotatesprite 269 185 NNORMALSIZE 0 2471 0 12 512 0 0 xdim ydim }
	ifand ACCESSKEY2 2 { rotatesprite 287 185 NNORMALSIZE 0 2471 0 11 512 0 0 xdim ydim }
	ifand ACCESSKEY2 4 { rotatesprite 305 185 NNORMALSIZE 0 2471 0 15 512 0 0 xdim ydim }
	ifand ACCESSKEY2 8 { rotatesprite 267 185 NNORMALSIZE 0 2471 0 18 512 0 0 xdim ydim }
	ifand ACCESSKEY2 16 { rotatesprite 285 185 NNORMALSIZE 0 2471 0 10 512 0 0 xdim ydim }
	ifand ACCESSKEY2 32 { rotatesprite 303 185 NNORMALSIZE 0 2471 0 22 512 0 0 xdim ydim }
	ifand ACCESSKEY2 64 { rotatesprite 270 185 NNORMALSIZE 0 2471 0 16 512 0 0 xdim ydim }
	
	ifg P_SPIRIT_ARMOUR 0
		{
		rotatesprite 305 165 6384 0 SPIRIT_ARMOUR 20 0 512 0 0 xdim ydim
		digitalnumber THREEBYFIVE 305 168 P_SPIRIT_ARMOUR 0 8 512 0 0 xdim ydim
		}
		
	ifg P_FIRE_ARMOUR 0
		{
		rotatesprite 305 175 8384 0 FIRE_ARMOUR 20 0 512 0 0 xdim ydim
		digitalnumber THREEBYFIVE 305 178 P_FIRE_ARMOUR 0 2 512 0 0 xdim ydim
		}
		
	*/

getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
	{

	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatesprite 50 175 HALFSIZE 0 CMEDIKIT 0 0 256 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumberz 6155 52 185 HUD_DISP_TEMP2 0 0 256 0 0 xdim ydim HALFSIZE
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatesprite 50 175 HALFSIZE 0 CSTEROIDS 0 0 256 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumberz 6155 52 185 HUD_DISP_TEMP2 0 0 256 0 0 xdim ydim HALFSIZE
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatesprite 50 175 HALFSIZE 0 CHOLODUKE 0 0 256 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatesprite 50 175 HALFSIZE 0 CJETPACK 0 0 256 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumberz 6155 52 185 HUD_DISP_TEMP2 0 0 256 0 0 xdim ydim HALFSIZE
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametextz 17158 92 190 500 0 0 256 0 0 xdim ydim 40000
		else gametextz 17158 92 190 501 0 21 256 0 0 xdim ydim 40000
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 50 175 HALFSIZE 0 DISP_NVG 0 0 256 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumberz 6155 52 185 HUD_DISP_TEMP2 0 0 256 0 0 xdim ydim HALFSIZE
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametextz 17158 92 190 500 0 0 256 0 0 xdim ydim 40000
		else gametextz 17158 92 190 501 0 21 256 0 0 xdim ydim 40000
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatesprite 50 175 HALFSIZE 0 CSCUBA 0 0 256 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			myospal 50 175 3812 20 0 2
			rotatesprite 50 175 12384 0 3688 0 0 256 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumberz 6155 52 185 HUD_DISP_TEMP2 0 0 256 0 0 xdim ydim HALFSIZE
			}
		gametextz 17158 92 190 502 0 11 256 0 0 xdim ydim 40000
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatesprite 50 175 HALFSIZE 0 CBOOTS 0 0 256 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumberz 6155 52 185 HUD_DISP_TEMP2 0 0 256 0 0 xdim ydim HALFSIZE
		gametextz 17158 92 190 502 0 11 256 0 0 xdim ydim 40000
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatesprite 50 175 HALFSIZE 0 TOOLBOX_PICKUP 0 0 256 0 0 xdim ydim
		gametextz 17158 92 190 509 0 0 256 0 0 xdim ydim 40000
		}
	ife HUD_DISP_TEMP 11 // ROPE
		{
		rotatesprite 50 175 20000 0 17916 0 0 256 0 0 xdim ydim
		gametextz 17158 92 190 509 0 0 256 0 0 xdim ydim 40000
		}
	}

}
else
ife CHAR 6
ife HUDON 0 // GEOFFREY'S HUD
	{
	getuserdef[].color HUD_DISP_PCOLOUR
	ife HUD_DISP_PCOLOUR 0 set HUD_DISP_PCOLOUR 21
	myospalx 20 180 6545 0 256 HUD_DISP_PCOLOUR // Item box
	myospalx 300 180 6545 0 512 HUD_DISP_PCOLOUR // Ammo box

	set HUD_DISP_TEMP4 38 // set starting x coordinate
	ifg PHEALTH 0 
		{ // only proceed if the player has any health.
		geta[].extra HUD_DISP_TEMP // get the player's health.
		set HUD_DISP_TEMP2 10 // save a copy for later.
		divvar HUD_DISP_TEMP 5 // make each column worth 10 hp.
		modvar HUD_DISP_TEMP2 10 // gets the remainder of the division so that...
		ifg HUD_DISP_TEMP2 0 
			{
			add HUD_DISP_TEMP 1 // ...we can round up. each column will only disappear when all 5 hp are gone.
			}
		whilevarn HUD_DISP_TEMP 0 
			{ // repeat for each column
			rotatespritea HUD_DISP_TEMP4 187 NORMALSIZE 0 6546 0 HUD_DISP_PCOLOUR 256 -255 0 0 xdim ydim // draws one column at (xvar,182)
			add HUD_DISP_TEMP4 5 // move to the right
			sub HUD_DISP_TEMP 1 // next column
			}
		}
		
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP5 0 set HUD_DISP_TEMP5 10
	ifg HUD_DISP_TEMP5 0 sub HUD_DISP_TEMP5 1 ifg HUD_DISP_TEMP5 10 set HUD_DISP_TEMP5 10
	
	  add HUD_DISP_TEMP4 5 digitalnumberz DIGITALNUM HUD_DISP_TEMP4 187 PHEALTH HUD_DISP_TEMP5 2 256 0 0 xdim ydim HALFSIZE
		
	ifg P_HAS_SHIELD 0
	{
	set HUD_DISP_TEMP4 38 // set starting x coordinate
	ifg P_ENERGYSHIELD 0 
		{ // only proceed if the player has an energy shield
		set HUD_DISP_TEMP P_ENERGYSHIELD // get the player's shield.
		set HUD_DISP_TEMP2 10 // save a copy for later.
		divvar HUD_DISP_TEMP 5 // make each column worth 10 hp.
		modvar HUD_DISP_TEMP2 10 // gets the remainder of the division so that...
		ifg HUD_DISP_TEMP2 0 
			{
			add HUD_DISP_TEMP 1 // ...we can round up. each column will only disappear when all 5 hp are gone.
			}
		whilevarn HUD_DISP_TEMP 0 
			{ // repeat for each column
			rotatespritea HUD_DISP_TEMP4 172 NORMALSIZE 0 6546 0 7 256 -255 0 0 xdim ydim // draws one column at (xvar,182)
			add HUD_DISP_TEMP4 5 // move to the right
			sub HUD_DISP_TEMP 1 // next column
			}
		}
	
	  add HUD_DISP_TEMP4 5 digitalnumberz DIGITALNUM HUD_DISP_TEMP4 172 P_ENERGYSHIELD HUD_DISP_TEMP5 32 256 0 0 xdim ydim HALFSIZE
	}
	

	  
	  
set HUD_DISP_TEMP4 38 // set starting x coordinate
	ifg PARMOUR 0 
		{ // only proceed if the player has any armour.
		getp[].shield_amount HUD_DISP_TEMP // get the player's armour.
		set HUD_DISP_TEMP2 10 // save a copy for later.
		divvar HUD_DISP_TEMP 5 // make each column worth 5 shield.
		modvar HUD_DISP_TEMP2 10 // gets the remainder of the division so that...
		ifg HUD_DISP_TEMP2 0 
			{
			add HUD_DISP_TEMP 1 // ...we can round up. each column will only disappear when all 5 shield are gone.
			}
		whilevarn HUD_DISP_TEMP 0 
			{ // repeat for each column
			rotatespritea HUD_DISP_TEMP4 180 NORMALSIZE 0 6547 0 HUD_DISP_PCOLOUR 256 -255 0 0 xdim ydim // draws one column at (xvar,182)
			add HUD_DISP_TEMP4 5 // move to the right
			sub HUD_DISP_TEMP 1 // next column
			}
	}
	 add HUD_DISP_TEMP4 5 digitalnumberz DIGITALNUM HUD_DISP_TEMP4 180 PARMOUR 0 27 256 0 0 xdim ydim HALFSIZE
	 
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 25 176 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	
	set HUD_DISP_TEMP 38
	set HUD_DISP_TEMP2 194
	ifg P_SPIRIT_ARMOUR 0 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 0 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 10 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 10 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 20 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 9 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 30 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 8 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 40 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 7 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 50 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 6 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 60 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 5 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 70 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 4 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 80 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 3 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 90 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 2 256 8
	add HUD_DISP_TEMP 10 ifg P_SPIRIT_ARMOUR 99 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 1 256 8
	
	set HUD_DISP_TEMP 152
	set HUD_DISP_TEMP2 194
	ifg P_FIRE_ARMOUR 0 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 0 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 10 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 10 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 20 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 9 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 30 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 8 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 40 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 7 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 50 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 6 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 60 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 5 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 70 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 4 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 80 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 3 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 90 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 2 512 2
	add HUD_DISP_TEMP 10 ifg P_FIRE_ARMOUR 99 myospal HUD_DISP_TEMP HUD_DISP_TEMP2 6548 1 512 2

	switch CURWEAP
	case 0 
		ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 set tilenum EXPL_SHELLS else
		ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[CURWEAP] 2 set tilenum SILVERAMMO_DRUM else
		ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 set tilenum FLECHETE_SHELLS else
		ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 set tilenum MAGNUM_SHELLS else
		ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 set tilenum DRAGONS_SHELLS else
		ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 set tilenum TESLA_AMMO_SPRITE else
		ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 set tilenum SILVER_CROSSBOW_BOLTS else
	set tilenum 3833 
	break
	case 1 set tilenum W1_AMMO_TILE break
	case 2 
		ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 set tilenum EXPL_SHELLS else
		ifand GUN_AMMO_TYPES 2 ifand AMMO_TYPES[CURWEAP] 2 set tilenum SILVERAMMO_DRUM else
		ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 set tilenum FLECHETE_SHELLS else
		ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 set tilenum MAGNUM_SHELLS else
		ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 set tilenum DRAGONS_SHELLS else
		ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 set tilenum TESLA_AMMO_SPRITE else
		ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 set tilenum SILVER_CROSSBOW_BOLTS else
	set tilenum W2_AMMO_TILE 
	break
	case 3 set tilenum W3_AMMO_TILE break
	case 4 set tilenum W4_AMMO_TILE break
	case 5 set tilenum W5_AMMO_TILE break
	case 6 set tilenum W6_AMMO_TILE break
	case 7 set tilenum W7_AMMO_TILE break
	case 8 set tilenum WEAPON8_TILE break
	case 9 set tilenum W9_AMMO_TILE break
	case 10 set tilenum 6488 break
	case 11 set tilenum W11_AMMO_TILE break
	endswitch

	rotatesprite 300 178 INVENSIZE 0 tilenum 0 0 512 0 0 xdim ydim // Ammo pic

	ife CURWEAP 0 ife temp_weapon 11 ifand AMMO_TYPES[CURWEAP] 2 set HUD_DISP_TEMP silver_ammo else
	ife CURWEAP 0 ife temp_weapon 13 ifand AMMO_TYPES[CURWEAP] 16 set HUD_DISP_TEMP silver_bolts else
	ife CURWEAP 0 ife temp_weapon 12 ifand AMMO_TYPES[CURWEAP] 8 set HUD_DISP_TEMP tesla_ammo else
	ife CURWEAP 0 ife temp_weapon 27 ifand AMMO_TYPES[CURWEAP] 8 set HUD_DISP_TEMP tesla_ammo else
	getp[].ammo_amount CURWEAP HUD_DISP_TEMP
	ifand GUN_AMMO_TYPES 1
		{
		ifand AMMO_TYPES[CURWEAP] 1 set HUD_DISP_TEMP explosive_shells
		else ifand AMMO_TYPES[CURWEAP] 4 set HUD_DISP_TEMP flechete_shells
		}
	ifand GUN_AMMO_TYPES 4
		{
		ifand AMMO_TYPES[CURWEAP] 64 set HUD_DISP_TEMP magnum_shells else
		ifand AMMO_TYPES[CURWEAP] 1024 set HUD_DISP_TEMP dragon_shells
		}
	digitalnumber THREEBYFIVE 300 187 HUD_DISP_TEMP 0 27 512 0 0 xdim ydim
	
	
	switch CURWEAP
	case 0 
	ifand GUN_AMMO_TYPES 1
		{ 
		ifand AMMO_TYPES[CURWEAP] 1 set tilenum EXSHELLF else
		ifand AMMO_TYPES[CURWEAP] 4 set tilenum FL_SHELLF else
		set tilenum 3767 
		}
	ifand GUN_AMMO_TYPES 4
		{ 
		ifand AMMO_TYPES[CURWEAP] 64 set tilenum MAGNUM_SHELLS else
		ifand AMMO_TYPES[CURWEAP] 1024 set tilenum DRAGONS_SHELLS else
		set tilenum 3767 
		}
	ife temp_weapon 21 set tilenum RIFLESHELLF
	ife temp_weapon 22 set tilenum 3718
	ife temp_weapon 25 set tilenum RIFLESHELLF
	ife temp_weapon 26 set tilenum RIFLESHELLF
	break
	default set tilenum 3718 break
	endswitch
	
	ifand player[].got_access 1 rotatespritea 210 180 NNORMALSIZE 0 6959 0 0 0 -255 0 0 xdim ydim
	ifand player[].got_access 2 rotatespritea 218 180  NNORMALSIZE 0 6959 0 21 0 -255 0 0 xdim ydim
	ifand player[].got_access 4 rotatespritea 226 180  NNORMALSIZE 0 6959 0 23 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 1 rotatespritea 234 180 NNORMALSIZE 0 6959 0 12 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 2 rotatespritea 242 180 NNORMALSIZE 0 6959 0 14 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 4 rotatespritea 250 180 NNORMALSIZE 0 6959 0 15 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 8 rotatespritea 258 180 NNORMALSIZE 0 6959 0 49 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 16 rotatespritea 266 180 NNORMALSIZE 0 6959 0 10 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 32 rotatespritea 274 180 NNORMALSIZE 0 6959 0 36 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 64 rotatespritea 282 180 NNORMALSIZE 0 6959 0 16 0 -255 0 0 xdim ydim
	
	ife CURWEAP 2
	 {
	 ifand GEOFFREY_UPGRADE 16
	  ifn SPECIALIST_EQUIPMENT[20] 2
	   ifn SPECIALIST_EQUIPMENT[67] 2
		{
		myospalx 300 150 6545 0 512 HUD_DISP_PCOLOUR // Ammo box
		rotatesprite 300 150 QUARTERSIZE 0 TESLA_AMMO_SPRITE 0 0 512 0 0 xdim ydim
		digitalnumber THREEBYFIVE 300 157 tesla_ammo 0 27 512 0 0 xdim ydim
		}
	 }
	
	ifn GUNMAG -1
	 ifl SKILL_LEVEL 4
		{
		set HUD_DISP_TEMP5 160 // set starting y coordinate
			ifg GUNMAG -1 
				{ // only proceed if the weapon has a magazine.
				set HUD_DISP_TEMP GUNMAG // get the player's MAG.
				set HUD_DISP_TEMP2 GUNMAG // save a copy for later.
				modvar HUD_DISP_TEMP2 10 // gets the remainder of the division so that...
				ifg HUD_DISP_TEMP2 0 
					{
					add HUD_DISP_TEMP 1 
					}
				whilevarn HUD_DISP_TEMP 0 
					{ // repeat for each column
					set HUD_DISP_TEMP3 HUD_DISP_TEMP
					modvar HUD_DISP_TEMP3 2
					set HUD_DISP_TEMP4 300
					ifn HUD_DISP_TEMP3 0 sub HUD_DISP_TEMP4 4
					rotatesprite HUD_DISP_TEMP4 HUD_DISP_TEMP5 INVENSIZE 0 tilenum 0 0 512 0 0 xdim ydim // draws one column at (xvar,182)
					sub HUD_DISP_TEMP5 1 // move up
					sub HUD_DISP_TEMP 1 // next column
					}
			}
			 sub HUD_DISP_TEMP5 5 digitalnumberz DIGITALNUM 300 HUD_DISP_TEMP5 GUNMAG 0 27 512 0 0 xdim ydim HALFSIZE
		
		}
	
	ifn player[].inven_icon 0
	{
	ife player[].inven_icon 1 // MEDKIT
		{
		rotatesprite 20 178 QUARTERSIZE 0 CMEDIKIT 0 0 256 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
		}

	ife player[].inven_icon 2 // STEROIDS
		{
		ifp pboosted rotatesprite 20 178 QUARTERSIZE 0 CSTEROIDS DISP_PULSE 67 256 0 0 xdim ydim
		else rotatesprite 20 178 QUARTERSIZE 0 CSTEROIDS 0 0 256 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
		}
	ife player[].inven_icon 3 // HOLODUKE
		{
		ife PS_ITEM 2 rotatesprite 20 178 QUARTERSIZE 0 CHOLODUKE DISP_PULSE 67 256 0 0 xdim ydim
		else rotatesprite 20 178 QUARTERSIZE 0 CHOLODUKE 0 0 256 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 3
		digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
		}
	ife player[].inven_icon 4 // JETPACK
		{
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		ifn player[].jetpack_on 0 
			{
			rotatesprite 20 178 INVENSIZE 0 CJETPACK DISP_PULSE 67 256 0 0 xdim ydim
			digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
			}
		else 
			{
			rotatesprite 20 178 INVENSIZE 0 CJETPACK 0 0 256 0 0 xdim ydim
			digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 10 27 256 0 0 xdim ydim
			}		
		}
	ife player[].inven_icon 5 // NIGHT VISION GOGGLES
		{
		ife player[].heat_on 1 rotatesprite 20 178 INVENSIZE 0 DISP_NVG DISP_PULSE 67 256 0 0 xdim ydim
		else rotatesprite 20 178 INVENSIZE 0 DISP_NVG 0 0 256 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
		}
	ife player[].inven_icon 6 // SCUBA GEAR
		{
		rotatesprite 20 178 QUARTERSIZE 0 CSCUBA 0 0 256 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			rotatesprite 20 187 NORMALSIZE 0 3812 0 0 256 0 0 xdim ydim
			rotatesprite 23 181 12384 0 3688 0 0 256 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
			}
		}
	ife player[].inven_icon 7 // BOOTS
		{
		rotatesprite 20 178 INVENSIZE 0 CBOOTS 0 0 256 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumber THREEBYFIVE 20 187 HUD_DISP_TEMP2 0 27 256 0 0 xdim ydim
		}
		
	ife player[].inven_icon 10 // TOOLBOX
		{
		rotatesprite 20 178 INVENSIZE 0 TOOLBOX_PICKUP 0 0 256 0 0 xdim ydim
		}
	ife player[].inven_icon 11 // ROPE
		{
		rotatesprite 20 178 20000 0 17916 0 0 256 0 0 xdim ydim
		}
	ife player[].inven_icon 12 // FIREWALL CHIP
		{
		rotatesprite 20 178 20000 0 22353 0 0 256 0 0 xdim ydim
		}
	}

	} // END OF HUDTYPE 2
else
ife CHAR 7
ife HUDON 0 // MIKKO'S HUD
	{
	ife WEAPON_GLOW YES rotatespritea 45 172 24000 1024 6989 0 7 261 -255 0 0 xdim ydim // Gui element glow
	rotatesprite 45 172 24000 1024 6990 0 0 261 0 0 xdim ydim // Gui element
	
	ife WEAPON_GLOW YES rotatespritea 275 172 24000 0 6989 0 7 513 -255 0 0 xdim ydim // Gui element glow
	rotatesprite 275 172 24000 0 6990 0 0 513 0 0 xdim ydim // Gui element
		
	ifg P_ENERGYSHIELD 0 set HUD_DISP_TEMP 20
	else ifg PHEALTH PMAXHEALTH set HUD_DISP_TEMP DISP_PULSE
	else set HUD_DISP_TEMP 0
	qsprintf 1400 1401 PHEALTH
	rotatespritea 12 162 24000 0 6757 HUD_DISP_TEMP 7 257 -255 0 0 xdim ydim // health icon
	screentext 17347 40 162 INVENSIZE 0 0 1400 HUD_DISP_TEMP 7 256 -255 5 16 0 0 524290 0 0 xdim ydim 
	
	
	ifg P_ENERGYSHIELD 0 set HUD_DISP_TEMP 20
	else ifg PARMOUR 100 set HUD_DISP_TEMP DISP_PULSE
	else set HUD_DISP_TEMP 0
	qsprintf 1400 1401 PARMOUR
	rotatespritea 44 173 8192 0 7084 HUD_DISP_TEMP 32 257 -255 0 0 xdim ydim // armour icon
	screentext 17347 70 172 INVENSIZE 0 0 1400 HUD_DISP_TEMP 7 256 -255 5 16 0 0 524290 0 0 xdim ydim 	
	
	ifg P_SPIRIT_ARMOUR 0 
		{
		qsprintf 1400 1401 P_SPIRIT_ARMOUR
		screentext 17347 40 182 16384 0 0 1400 0 8 256 -255 5 16 0 0 524290 0 0 xdim ydim 	
		}
	ifg P_FIRE_ARMOUR 0 
		{
		qsprintf 1400 1401 P_FIRE_ARMOUR
		screentext 17347 70 182 16384 0 0 1400 0 2 256 -255 5 16 0 0 524290 0 0 xdim ydim 	
		}
	
	
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 qsprintf 1400 1401 explosive_shells
	else ifand GUN_AMMO_TYPES 2  ifand AMMO_TYPES[CURWEAP] 2 qsprintf 1400 1401 silver_ammo
	else ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 qsprintf 1400 1401 flechete_shells
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 qsprintf 1400 1401 magnum_shells
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 qsprintf 1400 1401 dragon_shells
	else ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 qsprintf 1400 1401 tesla_ammo
	else ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 qsprintf 1400 1401 silver_bolts
	else ifand GUN_AMMO_TYPES 2048 
		{
		ifand AMMO_TYPES[CURWEAP] 32 qsprintf 1400 1401 fortymm_shells
		else ifand AMMO_TYPES[CURWEAP] 128 qsprintf 1400 1401 fortymm_MIA_shells
		else ifand AMMO_TYPES[CURWEAP] 256 qsprintf 1400 1401 fortymm_plasma
		else qsprintf 1400 1401 fortymm_grenades
		}
	else ifand GUN_AMMO_TYPES 4096
		{
		ifand AMMO_TYPES[CURWEAP] 512 qsprintf 1400 1401 fortymm_slug
		else ifand AMMO_TYPES[CURWEAP] 2048 qsprintf 1400 1401 fortymm_electro
		else ifand AMMO_TYPES[CURWEAP] 4096 qsprintf 1400 1401 fortymm_cryo
		else qsprintf 1400 1401 fortymm_caseless
		}
	else qsprintf 1400 1401 HUD_DISP_PAMMO
	screentext 17347 295 162 INVENSIZE 0 0 1400 0 7 512 -255 5 16 0 0 524290 0 0 xdim ydim 
	
	ifn GUNMAG -1
		{
		qsprintf 1400 1401 GUNMAG
		rotatespritea 240 173 16384 0 7076 0 32 513 -255 0 0 xdim ydim // magazine icon
		screentext 17347 265 172 INVENSIZE 0 0 1400 0 7 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
		
	ife CURWEAP 2
	 ife SPECIALIST_EQUIPMENT[85] 2 // using msc-12?
		{
		qsprintf 1400 1401 SHOTGUNBOXMAG
		screentext 17347 285 172 INVENSIZE 0 0 1400 0 7 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
	
	ifg P_HAS_SHIELD 0
	ifg P_ENERGYSHIELD 0
		{
		set HUD_DISP_TEMP P_ENERGYSHIELD
		sub HUD_DISP_TEMP P_MAX_SHIELD
		mul HUD_DISP_TEMP -1

		set HUD_DISP_TEMP2 P_MAX_SHIELD
		sub HUD_DISP_TEMP2 1
		ife P_ENERGYSHIELD HUD_DISP_TEMP2 ife P_REC_DELAY 0 set HUD_DISP_TEMP3 32000
		ifg HUD_DISP_TEMP3 24000 sub HUD_DISP_TEMP3 256
		clamp HUD_DISP_TEMP3 24000 32000
		rotatespritea 52 167 HUD_DISP_TEMP3 1024 6990 HUD_DISP_TEMP 32 261 -255 0 0 xdim ydim // Gui element
		qsprintf 1400 1401 P_ENERGYSHIELD
		screentext 17347 60 162 HALFSIZE 0 0 1400 0 2 256 -255 5 16 0 0 524290 0 0 xdim ydim 	
		}
		
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 52 167 24000 1024 6990 HUD_DISP_TEMP6 30 261 -255 0 0 xdim ydim // Gui element
		rotatespritea 52 167 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	ifand player[].got_access 1 rotatespritea 10 190 HALFSIZE 0 6959 0 0 256 -255 0 0 xdim ydim
	ifand player[].got_access 2 rotatespritea 18 190 HALFSIZE 0 6959 0 21 256 -255 0 0 xdim ydim
	ifand player[].got_access 4 rotatespritea 26 190 HALFSIZE 0 6959 0 23 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 1 rotatespritea 34 190 HALFSIZE 0 6959 0 12 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 2 rotatespritea 42 190 HALFSIZE 0 6959 0 14 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 4 rotatespritea 10 196 HALFSIZE 0 6959 0 15 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 8 rotatespritea 18 196 HALFSIZE 0 6959 0 18 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 16 rotatespritea 26 196 HALFSIZE 0 6959 0 10 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 32 rotatespritea 34 196 HALFSIZE 0 6959 0 22 256 -255 0 0 xdim ydim
	ifand ACCESSKEY2 64 rotatespritea 42 196 HALFSIZE 0 6959 0 16 256 -255 0 0 xdim ydim
	
getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
		{
		ife WEAPON_GLOW YES rotatespritea 300 182 12000 0 6994 0 7 513 -255 0 0 xdim ydim // Gui element glow
		rotatesprite 300 182 12000 0 6995 0 0 513 0 0 xdim ydim // Gui element
		ife HUD_DISP_TEMP 1 // MEDKIT
			{
			ifn MEDIKIT_USING 0
				{
				set HUD_DISP_TEMP2 1000
				mul HUD_DISP_TEMP2 DISP_PULSE
				add HUD_DISP_TEMP2 40000
				}
				else set HUD_DISP_TEMP2 40000
			rotatesprite 300 182 HUD_DISP_TEMP2 0 CMEDIKIT 0 32 513 0 0 xdim ydim
			getp[].firstaid_amount HUD_DISP_TEMP2
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 17347 305 190 QUARTERSIZE 0 0 1400 0 7 513 -255 5 16 0 0 524290 0 0 xdim ydim 	
			}
		ife HUD_DISP_TEMP 2 // STEROIDS
			{
			ifp pboosted
				{
				set HUD_DISP_TEMP2 1000
				mul HUD_DISP_TEMP2 DISP_PULSE
				add HUD_DISP_TEMP2 40000
				}
			else set HUD_DISP_TEMP2 40000
			rotatesprite 300 182 HUD_DISP_TEMP2 0 CSTEROIDS 0 32 513 0 0 xdim ydim
			getp[].steroids_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 4
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 17347 305 190 QUARTERSIZE 0 0 1400 0 7 513 -255 5 16 0 0 524290 0 0 xdim ydim 	
			}
		ife HUD_DISP_TEMP 3 // HOLODUKE
			{
			rotatesprite 300 182 40000 0 CHOLODUKE 0 32 513 0 0 xdim ydim
			}
		ife HUD_DISP_TEMP 4 // JETPACK
			{
			ifn player[].jetpack_on 0
				{
				set HUD_DISP_TEMP2 1000
				mul HUD_DISP_TEMP2 DISP_PULSE
				add HUD_DISP_TEMP2 40000
				}
			else set HUD_DISP_TEMP2 40000
			rotatesprite 300 182 HUD_DISP_TEMP2 0 CJETPACK 0 32 513 0 0 xdim ydim
			
			getp[].jetpack_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 16
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 17347 305 190 QUARTERSIZE 0 0 1400 0 7 513 -255 5 16 0 0 524290 0 0 xdim ydim 
			}
		ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
			{
			ifn player[].heat_on 0
				{
				set HUD_DISP_TEMP2 1000
				mul HUD_DISP_TEMP2 DISP_PULSE
				add HUD_DISP_TEMP2 40000
				}
			else set HUD_DISP_TEMP2 40000
			rotatesprite 300 182 HUD_DISP_TEMP2 0 DISP_NVG 0 32 513 0 0 xdim ydim
			getp[].heat_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 48
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 17347 305 190 QUARTERSIZE 0 0 1400 0 7 513 -255 5 16 0 0 524290 0 0 xdim ydim 
			}
		ife HUD_DISP_TEMP 6 // SCUBA GEAR
			{
			ifn player[].scuba_on 0
				{
				set HUD_DISP_TEMP2 1000
				mul HUD_DISP_TEMP2 DISP_PULSE
				add HUD_DISP_TEMP2 40000
				}
			else set HUD_DISP_TEMP2 40000
			rotatesprite 300 182 HUD_DISP_TEMP2 0 CSCUBA 0 32 513 0 0 xdim ydim
			ife AIR_FILTER 1 
				{
				rotatesprite 300 186 12384 0 3688 0 32 512 0 0 xdim ydim
				}
				else
				{
				getp[].scuba_amount HUD_DISP_TEMP2
				divvar HUD_DISP_TEMP2 64
				qsprintf 1400 1401 HUD_DISP_TEMP2
				screentext 17347 305 190 QUARTERSIZE 0 0 1400 0 7 513 -255 5 16 0 0 524290 0 0 xdim ydim 
				}
			}
		ife HUD_DISP_TEMP 7 // BOOTS
			{
			rotatesprite 300 182 40000 0 CBOOTS 0 32 513 0 0 xdim ydim
			getp[].boot_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 6
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 17347 305 190 QUARTERSIZE 0 0 1400 0 7 513 -255 5 16 0 0 524290 0 0 xdim ydim 
			}
		ife HUD_DISP_TEMP 10 // Toolbox
			{
			rotatesprite 300 182 40000 0 TOOLBOX_PICKUP 0 32 513 0 0 xdim ydim
			}
		ife HUD_DISP_TEMP 11 // Rope
			{
			rotatesprite 300 182 30000 0 17916 0 32 513 0 0 xdim ydim
			}
		}
	
	}
else
ife CHAR 9 // Cultist's hud
ife HUDON 0
{
rotatesprite 34 187 NNORMALSIZE 0 7929 0 0 256 0 0 xdim ydim // HEALTH AND AMMO BOX
ifg GUNMAG -1 
	{
	rotatesprite 85 187 NNORMALSIZE 0 7932 0 0 256 0 0 xdim ydim // MAGAZINE BOX
	
	ifg GUNMAG 99 digitalnumber 3139 89 183 GUNMAG 0 11 256 0 0 xdim ydim else
	ifg GUNMAG 9 digitalnumber 3139 93 183 GUNMAG 0 11 256 0 0 xdim ydim else
     digitalnumber 3139 97 183 GUNMAG 0 11 256 0 0 xdim ydim // Display the ammo amount
	
	}

      ifg PHEALTH 99 digitalnumber 3139 21 183 PHEALTH 0 10 256 0 0 xdim ydim else
      ifg PHEALTH 9 digitalnumber 3139 26 183 PHEALTH 0 10 256 0 0 xdim ydim else 
	digitalnumber 3139 29 183 PHEALTH 0 10 256 0 0 xdim ydim // HEALTH NUMBER
	ife currentweapon 10 // If the player has the Pipebomb trigger selected than get the amount of pipebomb ammo into TEMP
		{
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		}
	else
	getp[].ammo_amount currentweapon HUD_DISP_PAMMO // otherwise get the current weapon's ammo into TEMP
	ifg HUD_DISP_PAMMO 99 digitalnumber 3139 55 183 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim else
	ifg HUD_DISP_PAMMO 9 digitalnumber 3139 59 183 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim else
      digitalnumber 3139 63 183 HUD_DISP_PAMMO 0 0 256 0 0 xdim ydim // Display the ammo amount
      rotatesprite 284 187 NNORMALSIZE 0 7930 0 0 512 0 0 xdim ydim // INVENTORY BOX
	  
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 29 183 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	ifg P_FIRE_ARMOUR 0
		{
		rotatesprite 260 178 NORMALSIZE 0 7931 0 21 512 0 0 xdim ydim // Bar
		set HUD_DISP_TEMP P_FIRE_ARMOUR
		divvar HUD_DISP_TEMP 10
		add HUD_DISP_TEMP 260
		rotatesprite HUD_DISP_TEMP 178 NORMALSIZE 0 7931 0 4 512 0 0 xdim ydim // Black Bar
		digitalnumber 3087 262 178 P_FIRE_ARMOUR 0 12 512 0 0 xdim ydim // Number
		}
	
	ifg PARMOUR 0 
		{
		rotatesprite 260 186 NORMALSIZE 0 7931 0 0 512 0 0 xdim ydim // Bar
		set HUD_DISP_TEMP PARMOUR
		divvar HUD_DISP_TEMP 10
		add HUD_DISP_TEMP 260
		rotatesprite HUD_DISP_TEMP 186 NORMALSIZE 0 7931 0 4 512 0 0 xdim ydim // Black Bar
		digitalnumber 3087 262 186 PARMOUR 0 12 512 0 0 xdim ydim // Number
		}
	
	ifg P_SPIRIT_ARMOUR 0 
		{
		rotatesprite 260 194 NORMALSIZE 0 7931 0 11 512 0 0 xdim ydim // Bar
		set HUD_DISP_TEMP P_SPIRIT_ARMOUR
		divvar HUD_DISP_TEMP 10
		add HUD_DISP_TEMP 260
		rotatesprite HUD_DISP_TEMP 194 NORMALSIZE 0 7931 0 4 512 0 0 xdim ydim // Black bar
		digitalnumber 3087 262 194 P_SPIRIT_ARMOUR 0 12 512 0 0 xdim ydim // Number
		}
		
	rotatesprite 284 187 NNORMALSIZE 0 7925 0 0 512 0 0 xdim ydim // INVENTORY BOX PART 2

	getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0 // If the player's inventory is 'active'
	{
	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatesprite 285 186 INVENSIZE 0 CMEDIKIT 0 0 512 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatesprite 285 186 INVENSIZE 0 CSTEROIDS 0 0 512 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatesprite 285 186 INVENSIZE 0 CHOLODUKE 0 0 512 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 6
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatesprite 285 186 INVENSIZE 0 CJETPACK 0 0 512 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 285 186 INVENSIZE 0 DISP_NVG 0 0 512 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatesprite 285 186 INVENSIZE 0 CSCUBA 0 0 512 0 0 xdim ydim
		getp[].scuba_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 64
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatesprite 285 186 INVENSIZE 0 CBOOTS 0 0 512 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumber 3087 309 182 HUD_DISP_TEMP2 0 10 512 0 0 xdim ydim
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatesprite 285 186 INVENSIZE 0 TOOLBOX_PICKUP 0 0 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 11 // ROPE
		{
		rotatesprite 285 186 20000 0 17916 0 0 512 0 0 xdim ydim
		}
	}
}
else
ife CHAR 10 // Bombshell's HUD
ife HUDON 0

	{
	ifvarl PHEALTH 30 setvar TEMP2 2 else setvar TEMP2 32 
	rotatesprite 26 175 HALFSIZE 0 14585 0 TEMP2 257 0 0 xdim ydim // HEALTH ICON
	ifg PHEALTH PMAXHEALTH digitalnumberz DIGITALNUM 64 186 PHEALTH DISP_PULSE 30 257 0 0 xdim ydim 98304
	else digitalnumberz DIGITALNUM 64 186 PHEALTH 0 TEMP2 257 0 0 xdim ydim 98304
	
	ifvarg PARMOUR 0
		{
		ifvarl PARMOUR 30 setvar TEMP2 2 else setvar TEMP2 32
		rotatesprite 26 20 NORMALSIZE 0 14590 0 TEMP2 257 0 0 xdim ydim
		digitalnumberz DIGITALNUM 64 27 PARMOUR 0 TEMP2 257 0 0 xdim ydim 98304 // ARMOUR ICON
		}
	
	ifvare CURWEAP 10
		{
		getplayer[THISACTOR].ammo_amount 5 TEMP
		}
	  else
	  { // This state tells the HUD when to change the colour to red for low ammo
		getplayer[THISACTOR].ammo_amount CURWEAP TEMP
		switch CURWEAP
		case 0:
			setvar TEMP2 32
			break
		case 1:
			ifvarl TEMP 25 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 2:
			ifvarl TEMP 10 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 3:
			ifvarl TEMP 30 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 4:
			ifvarl TEMP 5 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 5:
		case 6:
		case 10:
			ifvarl TEMP 5 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 8:
			ifvarl TEMP 3 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 7:
		case 9:
			ifvarl TEMP 15 setvar TEMP2 2 else setvar TEMP2 32
			break
		case 11:
			ifvarl TEMP 10 setvar TEMP2 2 else setvar TEMP2 32
			break
		endswitch
	}
	
	digitalnumberz DIGITALNUM 282 186 TEMP 0 TEMP2 513 0 0 xdim ydim 98304 // AMMO NUMBER
		rotatesprite 250 176 HALFSIZE 0 14586 0 TEMP2 513 0 0 xdim ydim // AMMO ICON
	

		switch CURWEAP
		case 1
				ifvarl GUNMAG 3 setvar TEMP2 2 else setvar TEMP2 32
				rotatesprite 272 155 HALFSIZE 0 14581 0 TEMP2 513 0 0 xdim ydim
				digitalnumberz DIGITALNUM 292 160 GUNMAG 10 TEMP2 513 0 0 xdim ydim 98304 // MAG
				break
		case 2
				ifvarl AUTOSHOTMAG 5 setvar TEMP2 2 else setvar TEMP2 32
				rotatesprite 272 155 HALFSIZE 0 13321 0 TEMP2 513 0 0 xdim ydim
				digitalnumberz DIGITALNUM 292 160 GUNMAG 10 TEMP2 513 0 0 xdim ydim 98304 // MAG
				break
		case 3
			ifand GUNFIREMODE 32768
				{
				rotatesprite 272 155 HALFSIZE 0 FORTYMM_NADES 0 TEMP2 513 0 0 xdim ydim // AMMO BOX
				ifand AMMO_TYPES[CURWEAP] 32 digitalnumberz DIGITALNUM 292 160 fortymm_shells 10 2 513 0 0 xdim ydim 98304 // AMMO
				else ifand AMMO_TYPES[CURWEAP] 128 digitalnumberz DIGITALNUM 292 160 fortymm_MIA_shells 10 7 513 0 0 xdim ydim 98304 // AMMO
				else ifand AMMO_TYPES[CURWEAP] 256 digitalnumberz DIGITALNUM 292 160 fortymm_plasma 10 8 513 0 0 xdim ydim 98304 // AMMO
				else digitalnumberz DIGITALNUM 292 160 fortymm_grenades 10 TEMP2 513 0 0 xdim ydim 98304 // AMMO
				}
				else
					{
					ifvarl MGUNMAG 25 setvar TEMP2 2 else setvar TEMP2 32
					rotatesprite 272 155 HALFSIZE 0 10474 0 TEMP2 513 0 0 xdim ydim
					digitalnumberz DIGITALNUM 292 160 GUNMAG 10 TEMP2 513 0 0 xdim ydim 98304 // MAG
					}
				break
		case 4
				ifvarl ROCKETMAG 3 setvar TEMP2 2 else setvar TEMP2 32
				rotatesprite 272 155 HALFSIZE 0 13321 0 TEMP2 513 0 0 xdim ydim
				digitalnumberz DIGITALNUM 292 160 GUNMAG 10 TEMP2 513 0 0 xdim ydim 98304 // MAG
				break
		default
				ifn GUNMAG -1
				rotatesprite 272 155 HALFSIZE 0 40 0 TEMP2 513 0 0 xdim ydim
				break
		endswitch
		

	ifvarand player[THISACTOR].got_access 1 rotatesprite 26 176 HALFSIZE 0 14587 0 0 256 0 0 xdim ydim
	ifvarand player[THISACTOR].got_access 2 rotatesprite 26 176 HALFSIZE 0 14588 0 21 256 0 0 xdim ydim
	ifvarand player[THISACTOR].got_access 4 rotatesprite 26 176 HALFSIZE 0 14589 0 23 256 0 0 xdim ydim   

	ifvarand ACCESSKEY2 1 rotatesprite 26 176 HALFSIZE 0 14587 0 12 256 0 0 xdim ydim
	ifvarand ACCESSKEY2 2 rotatesprite 26 176 HALFSIZE 0 14588 0 11 256 0 0 xdim ydim
	ifvarand ACCESSKEY2 4 rotatesprite 26 176 HALFSIZE 0 14589 0 15 256 0 0 xdim ydim  
	
	getplayer[THISACTOR].inven_icon TEMP
	ifvarn TEMP 0
	{
	ifvare TEMP 1 // MEDKIT
		{
		getplayer[THISACTOR].firstaid_amount TEMP2
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32
		rotatesprite 250 20 HALFSIZE 0 CMEDIKIT 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}
	ifvare TEMP 2 // STEROIDS
		{
		getplayer[THISACTOR].steroids_amount TEMP2
		divvar TEMP2 4
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32 
		rotatesprite 250 20 HALFSIZE 0 55 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}
	ifvare TEMP 3 // HOLODUKE
		{
		getplayer[THISACTOR].holoduke_amount TEMP2
		divvar TEMP2 24
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32
		rotatesprite 250 20 HALFSIZE 0 CHOLODUKE 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}
	ifvare TEMP 4 // JETPACK
		{
		getplayer[THISACTOR].jetpack_amount TEMP2
		divvar TEMP2 16
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32 
		rotatesprite 250 20 HALFSIZE 0 57 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}
	ifvare TEMP 5 // NIGHT VISION GOGGLES
		{
		getplayer[THISACTOR].heat_amount TEMP2
		divvar TEMP2 48
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32 
		rotatesprite 250 20 NORMALSIZE 0 59 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}
	ifvare TEMP 6 // SCUBA GEAR
		{
		getplayer[THISACTOR].scuba_amount TEMP2
		divvar TEMP2 64
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32 
		rotatesprite 250 20 HALFSIZE 0 56 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}
	ifvare TEMP 7 // BOOTS
		{
		getplayer[THISACTOR].boot_amount TEMP2
		divvar TEMP2 2
		ifvarl TEMP2 30 setvar TEMP3 2 else setvar TEMP3 32 
		rotatesprite 250 20 NORMALSIZE 0 61 0 TEMP3 513 0 0 xdim ydim
		digitalnumberz DIGITALNUM 282 27 TEMP2 0 TEMP3 513 0 0 xdim ydim 98304
		}

	}
} 
else
ife CHAR 12
ife HUDON 0 // JANE'S HUD
	{
	rotatesprite 34 184 HALFSIZE 1024 12936 0 0 256 0 0 xdim ydim // HUD
	rotatesprite 288 184 HALFSIZE 0 12936 0 0 512 0 0 xdim ydim // HUD PART 2
	getuserdef[].color HUD_DISP_PCOLOUR
	ife HUD_DISP_PCOLOUR 0 set HUD_DISP_PCOLOUR 0
	rotatesprite 34 184 HALFSIZE 1024 12935 0 HUD_DISP_PCOLOUR 257 0 0 xdim ydim // TRANSPARENT HUD PARTS
	rotatesprite 288 184 HALFSIZE 0 12935 0 HUD_DISP_PCOLOUR 513 0 0 xdim ydim // TRANSPARENT HUD PARTS 2

	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	digitalnumberz 17347 60 178 PHEALTH HUD_DISP_TEMP4 1 256 0 0 xdim ydim INVENSIZE
	digitalnumberz 17347 60 188 PARMOUR 0 27 256 0 0 xdim ydim INVENSIZE
	
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 60 178 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}

	ife currentweapon 10
		{
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		}
	else
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 digitalnumber 17347 27 178 explosive_shells 0 27 256 0 0 xdim ydim
	else ifand GUN_AMMO_TYPES 2  ifand AMMO_TYPES[CURWEAP] 2 digitalnumber 17347 27 178 silver_ammo 0 27 256 0 0 xdim ydim
	else ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 digitalnumber 17347 27 178 flechete_shells 0 8 256 0 0 xdim ydim
	else ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 digitalnumber 17347 27 178 tesla_ammo 0 1 256 0 0 xdim ydim
	else ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 digitalnumber 17347 27 178 silver_bolts 0 27 256 0 0 xdim ydim
	else ifand GUN_AMMO_TYPES 64 ifand AMMO_TYPES[CURWEAP] 4 digitalnumber 17347 27 178 magnum_shells 0 7 256 0 0 xdim ydim
	else digitalnumberz 17347 27 178 HUD_DISP_PAMMO 0 1 256 0 0 xdim ydim INVENSIZE
	ifn GUNMAG -1 ifl SKILL_LEVEL 4 digitalnumberz 17347 32 181 GUNMAG 0 27 256 0 0 xdim ydim HALFSIZE

	// digitalnumberz 17347 60 188 PARMOUR 0 27 512 0 0 xdim ydim
	
	// ifg P_SPIRIT_ARMOUR 0 digitalnumberz 17347 190 182 P_SPIRIT_ARMOUR 0 1 512 0 0 xdim ydim HALFSIZE
	// ifg P_FIRE_ARMOUR 0 digitalnumberz 17347 225 182 P_FIRE_ARMOUR 10 2 512 0 0 xdim ydim HALFSIZE

	getp[].got_access HUD_DISP_TEMP
	ifand HUD_DISP_TEMP 1 { rotatesprite 242 174 NNORMALSIZE 0 6959 0 0 512 0 0 xdim ydim }
	ifand HUD_DISP_TEMP 2 { rotatesprite 242 184 NNORMALSIZE 0 6959 0 21 512 0 0 xdim ydim }
	ifand HUD_DISP_TEMP 4 { rotatesprite 242 194 NNORMALSIZE 0 6959 0 23 512 0 0 xdim ydim }
	ifand ACCESSKEY2 1 { rotatesprite 242 174 NNORMALSIZE 0 6959 0 12 512 0 0 xdim ydim }
	ifand ACCESSKEY2 2 { rotatesprite 242 184 NNORMALSIZE 0 6959 0 14 512 0 0 xdim ydim }
	ifand ACCESSKEY2 4 { rotatesprite 242 194 NNORMALSIZE 0 6959 0 15 512 0 0 xdim ydim }
	ifand ACCESSKEY2 8 { rotatesprite 242 174 NNORMALSIZE 0 6959 0 49 512 0 0 xdim ydim }
	ifand ACCESSKEY2 16 { rotatesprite 242 184 NNORMALSIZE 0 6959 0 10 512 0 0 xdim ydim }
	ifand ACCESSKEY2 32 { rotatesprite 242 194 NNORMALSIZE 0 6959 0 22 512 0 0 xdim ydim }
	ifand ACCESSKEY2 64 { rotatesprite 242 174 NNORMALSIZE 0 6959 0 16 512 0 0 xdim ydim }

getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
	{
	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatesprite 295 183 INVENSIZE 0 CMEDIKIT 0 0 512 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatesprite 295 183 INVENSIZE 0 CSTEROIDS 0 0 512 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		ifl HUD_DISP_TEMP2 400
		gametext 17158 520 186 500 0 11 528 0 0 xdim ydim
		else 
		gametext 17158 520 186 501 0 10 528 0 0 xdim ydim
		divvar HUD_DISP_TEMP2 4
		digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatesprite 295 183 INVENSIZE 0 CHOLODUKE 0 0 512 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 24
		digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
		getp[].holoduke_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 -1 
			gametext 17158 520 186 500 0 10 528 0 0 xdim ydim
			else 
			gametext 17158 520 186 501 0 10 528 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatesprite 295 183 INVENSIZE 0 CJETPACK 0 0 512 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 
		gametext 17158 520 186 500 0 11 528 0 0 xdim ydim
		else gametext 17158 520 186 501 0 10 528 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 295 183 INVENSIZE 0 DISP_NVG 0 0 512 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametext 17158 520 186 500 0 11 528 0 0 xdim ydim
		else gametext 17158 520 186 501 0 10 528 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatesprite 295 183 INVENSIZE 0 CSCUBA 0 0 512 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			rotatesprite 288 186 12384 0 3688 0 0 512 0 0 xdim ydim
			rotatesprite 270 180 NORMALSIZE 0 3812 2 20 512 0 0 xdim ydim
			}
			else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
			}
		gametext 17158 520 186 502 0 21 528 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatesprite 295 183 INVENSIZE 0 CBOOTS 0 0 512 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 6
		digitalnumberz 17347 270 180 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim HALFSIZE
		gametext 17158 520 186 502 0 21 528 0 0 xdim ydim
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatesprite 295 183 INVENSIZE 0 TOOLBOX_PICKUP 0 0 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 10 // ROPE
		{
		rotatesprite 295 183 20000 0 17916 0 0 512 0 0 xdim ydim
		}
	}
}
else
ife CHAR 3
ife HUDON 0 // Highwire's HUD
	{
	rotatesprite 34 184 HALFSIZE 0 16448 0 0 257 0 0 xdim ydim // HUD
	rotatesprite 288 184 HALFSIZE 1024 16448 0 0 517 0 0 xdim ydim // HUD PART 2

	rotatesprite 10 172 HALFSIZE 0 16460 0 0 256 0 0 xdim ydim // Health icon
	
	rotatesprite 15 190 HALFSIZE 0 16463 0 0 256 0 0 xdim ydim // Armour icon
	ifg P_ENERGYSHIELD 0 rotatesprite 15 190 HALFSIZE 0 16463 0 32 256 0 0 xdim ydim 
	
	
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	
	digitalnumberz 16450 40 172 PHEALTH HUD_DISP_TEMP4 2 256 0 0 xdim ydim HALFSIZE
	
	
	digitalnumberz 16450 45 190 PARMOUR 0 8 256 0 0 xdim ydim HALFSIZE
	ifg P_ENERGYSHIELD 0 digitalnumberz 16450 45 190 P_ENERGYSHIELD 0 32 256 0 0 xdim ydim HALFSIZE
	
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 40 172 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}

	ife currentweapon 10
		{
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		}
	else
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 digitalnumberz 16450 305 172 explosive_shells 0 2 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 2  ifand AMMO_TYPES[CURWEAP] 2 digitalnumberz 16450 305 172 silver_ammo 10 26 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 digitalnumberz 16450 305 172 flechete_shells 0 8 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 digitalnumberz 16450 305 172 tesla_ammo 0 1 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 digitalnumberz 16450 305 172 silver_bolts 10 26 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 digitalnumberz 16450 305 172 magnum_shells 0 7 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 digitalnumberz 16450 305 172 dragon_shells 0 28 512 0 0 xdim ydim HALFSIZE
	else ifand GUN_AMMO_TYPES 2048
				{
				ifand AMMO_TYPES[CURWEAP] 32 digitalnumberz 16450 305 172 fortymm_shells 0 2 512 0 0 xdim ydim HALFSIZE
				else ifand AMMO_TYPES[CURWEAP] 128 digitalnumberz 16450 305 172 fortymm_MIA_shells 0 7 512 0 0 xdim ydim HALFSIZE
				else ifand AMMO_TYPES[CURWEAP] 256 digitalnumberz 16450 305 172 fortymm_plasma 0 11 512 0 0 xdim ydim HALFSIZE
				else digitalnumberz 16450 305 172 fortymm_grenades 0 0 512 0 0 xdim ydim HALFSIZE
				}
	else ifand GUN_AMMO_TYPES 4096
				{
				ifand AMMO_TYPES[CURWEAP] 512 digitalnumberz 16450 305 172 fortymm_slug 0 7 512 0 0 xdim ydim HALFSIZE
				else ifand AMMO_TYPES[CURWEAP] 2048 digitalnumberz 16450 305 172 fortymm_electro 0 1 512 0 0 xdim ydim HALFSIZE
				else ifand AMMO_TYPES[CURWEAP] 4096 digitalnumberz 16450 305 172 fortymm_cryo 10 1 512 0 0 xdim ydim HALFSIZE
				else digitalnumberz 16450 305 172 fortymm_caseless 0 0 512 0 0 xdim ydim HALFSIZE
				}
	else digitalnumberz 16450 305 172 HUD_DISP_PAMMO 0 0 512 0 0 xdim ydim HALFSIZE
	rotatesprite 275 172 HALFSIZE 0 16462 0 0 512 0 0 xdim ydim // Ammo icon
	
	ifn GUNMAG -1 ifl SKILL_LEVEL 4 
		{
		digitalnumberz 16450 300 190 GUNMAG 0 0 512 0 0 xdim ydim HALFSIZE
		rotatesprite 270 190 HALFSIZE 0 16461 0 0 512 0 0 xdim ydim // Ammo icon
		}

	ifg P_SPIRIT_ARMOUR 0 rotatesprite 17 148 QUARTERSIZE 0 16448 0 0 257 0 0 xdim ydim // HUD PART 3
	else ifg P_FIRE_ARMOUR 0 rotatesprite 17 148 QUARTERSIZE 0 16448 0 0 257 0 0 xdim ydim // HUD PART 3

	ifg P_SPIRIT_ARMOUR 0 
		{ 
		rotatesprite 5 142 HALFSIZE 0 16465 0 8 256 0 0 xdim ydim
		digitalnumberz 16450 20 142 P_SPIRIT_ARMOUR 0 8 256 0 0 xdim ydim QUARTERSIZE
		}
	ifg P_FIRE_ARMOUR 0 
		{
		rotatesprite 7 154 HALFSIZE 0 16466 0 0 256 0 0 xdim ydim
		digitalnumberz 16450 22 154 P_FIRE_ARMOUR 10 2 256 0 0 xdim ydim QUARTERSIZE
		}

	ifand player[].got_access 1 rotatespritea 65 190 HALFSIZE 0 16464 0 0 0 -255 0 0 xdim ydim
	ifand player[].got_access 2 rotatespritea 85 190 HALFSIZE 0 16464 0 21 0 -255 0 0 xdim ydim
	ifand player[].got_access 4 rotatespritea 105 190 HALFSIZE 0 16464 0 23 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 1 rotatespritea 125 190 HALFSIZE 0 16464 0 12 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 2 rotatespritea 145 190 HALFSIZE 0 16464 0 14 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 4 rotatespritea 165 190 HALFSIZE 0 16464 0 15 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 8 rotatespritea 185 190 HALFSIZE 0 16464 0 49 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 16 rotatespritea 205 190 HALFSIZE 0 16464 0 10 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 32 rotatespritea 225 190 HALFSIZE 0 16464 0 36 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 64 rotatespritea 245 190 HALFSIZE 0 16464 0 16 0 -255 0 0 xdim ydim
	
	
getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
	{
	rotatesprite 305 148 QUARTERSIZE 1024 16448 0 0 517 0 0 xdim ydim // HUD PART 4
	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatesprite 305 147 INVENSIZE 0 CMEDIKIT 0 0 513 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatesprite 305 147 INVENSIZE 0 CSTEROIDS 0 0 513 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatesprite 305 147 INVENSIZE 0 CHOLODUKE 0 0 513 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 24
		digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
		getp[].holoduke_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 -1 minitext 317 152 500 0 10 else minitext 317 152 501 0 21
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatesprite 305 147 INVENSIZE 0 CJETPACK 0 0 513 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 minitext 317 152 500 0 10 else minitext 317 152 501 0 21
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 305 147 INVENSIZE 0 DISP_NVG 0 0 513 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 minitext 317 152 500 0 10 else minitext 317 152 501 0 21
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatesprite 305 147 INVENSIZE 0 CSCUBA 0 0 513 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			rotatesprite 288 186 12384 0 3688 0 0 512 0 0 xdim ydim
			myospal 305 148 3812 20 0 2
			}
			else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
			}
		minitext 317 152 502 0 21
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatesprite 305 147 INVENSIZE 0 CBOOTS 0 0 513 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		digitalnumberz 16450 305 148 HUD_DISP_TEMP2 0 0 512 0 0 xdim ydim QUARTERSIZE
		minitext 317 152 502 0 21
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatesprite 305 147 INVENSIZE 0 TOOLBOX_PICKUP 0 0 513 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 11 // ROPE
		{
		rotatesprite 305 147 20000 0 17916 0 0 513 0 0 xdim ydim
		}
	}

}
else
ife CHAR 13
ife HUDON 0 // Micky'S HUD
	{
	qsprintf 1400 1401 PHEALTH
	
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	
	add HUD_DISP_TEMP5 1
	ifg HUD_DISP_TEMP5 2047 set HUD_DISP_TEMP5 0
	rotatespritea 35 160 HALFSIZE HUD_DISP_TEMP5 16495 0 0 289 -255 0 0 xdim ydim
	screentext 19955 40 152 INVENSIZE 0 2 1400 HUD_DISP_TEMP4 2 256 -255 5 16 0 0 524290 0 0 xdim ydim 
	qsprintf 1400 1401 PARMOUR
	screentext 19955 40 172 INVENSIZE 0 0 1400 0 12 256 -255 5 16 0 0 524290 0 0 xdim ydim 
	
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 40 152 13000 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	
	ife inspace 1
		{
		set HUD_DISP_TEMP LIFE_SUPPORT
		divvar HUD_DISP_TEMP 60
		qsprintf 1400 1401 HUD_DISP_TEMP
		screentext 19955 40 42 INVENSIZE 0 0 1400 0 12 256 -255 5 16 0 0 524290 0 0 xdim ydim 		
		rotatespritea 40 46 HALFSIZE 0 22448 0 0 0 -255 0 0 xdim ydim 
		}

	// digitalnumberz 19955 40 172 PHEALTH 0 2 256 0 0 xdim ydim HALFSIZE
	// digitalnumberz 19955 45 190 PARMOUR 0 8 256 0 0 xdim ydim HALFSIZE
	
	rotatespritea 280 160 HALFSIZE HUD_DISP_TEMP5 16495 0 0 545 -255 0 0 xdim ydim

	ife currentweapon 10
		{
		getp[].ammo_amount 5 HUD_DISP_PAMMO
		}
	else
	getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
	
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 set HUD_DISP_PAMMO explosive_shells
	else ifand GUN_AMMO_TYPES 2  ifand AMMO_TYPES[CURWEAP] 2 set HUD_DISP_PAMMO silver_ammo
	else ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 set HUD_DISP_PAMMO flechete_shells
	else ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 set HUD_DISP_PAMMO tesla_ammo
	else ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 set HUD_DISP_PAMMO silver_bolts
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 set HUD_DISP_PAMMO magnum_shells
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 set HUD_DISP_PAMMO dragon_shells
	else ifand GUN_AMMO_TYPES 2048
				{
				ifand AMMO_TYPES[CURWEAP] 32 set HUD_DISP_PAMMO fortymm_shells
				else ifand AMMO_TYPES[CURWEAP] 128 set HUD_DISP_PAMMO fortymm_MIA_shells
				else ifand AMMO_TYPES[CURWEAP] 256 set HUD_DISP_PAMMO fortymm_plasma
				else set HUD_DISP_PAMMO fortymm_grenades
				}
	else ifand GUN_AMMO_TYPES 4096
				{
				ifand AMMO_TYPES[CURWEAP] 512 set HUD_DISP_PAMMO fortymm_slug
				else ifand AMMO_TYPES[CURWEAP] 2048 set HUD_DISP_PAMMO fortymm_electro
				else ifand AMMO_TYPES[CURWEAP] 4096 set HUD_DISP_PAMMO fortymm_cryo
				else set HUD_DISP_PAMMO fortymm_caseless
				}
	
		qsprintf 1400 1401 HUD_DISP_PAMMO
		screentext 19955 285 172 INVENSIZE 0 2 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim
		
	 ifand WEAPON_SPECIAL[CURWEAP] 128
	  ifg HEAT_SINKS 0
		{
		qsprintf 1400 1401 HEAT_SINKS
		rotatespritea 295 160 QUARTERSIZE 0 6542 0 2 512 -255 0 0 xdim ydim 
		screentext 19955 295 160 QUARTERSIZE 0 2 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim
		}

	ifn GUNMAG -1 ifl SKILL_LEVEL 4 
		{
		qsprintf 1400 1401 GUNMAG
		screentext 19955 285 152 INVENSIZE 0 2 1400 0 12 512 -255 5 16 0 0 524290 0 0 xdim ydim
		}
		
	ifg P_HAS_SHIELD 0
	ifg P_ENERGYSHIELD 0 
		{
		qsprintf 1400 1401 P_ENERGYSHIELD
		screentext 19955 92 122 QUARTERSIZE 0 0 1400 0 32 256 -255 5 16 0 0 524290 0 0 xdim ydim 
		}

	ifg P_SPIRIT_ARMOUR 0 
		{ 		
		qsprintf 1400 1401 P_SPIRIT_ARMOUR
		screentext 19955 82 172 QUARTERSIZE 0 0 1400 0 8 256 -255 5 16 0 0 524290 0 0 xdim ydim 			
		}
	ifg P_FIRE_ARMOUR 0 
		{
		qsprintf 1400 1401 P_FIRE_ARMOUR
		screentext 19955 92 182 QUARTERSIZE 0 0 1400 0 2 256 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
		
		ife ARTIFACTS_LOADOUT[13] 1 rotatespritea 208 182 24000 0 10239 0 0 512 -255 0 0 xdim ydim // Display the picture 1
		ife ARTIFACTS_LOADOUT[13] 2 rotatespritea 208 182 18000 0 10238 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 3 rotatespritea 208 182 18000 0 10237 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 4 rotatespritea 208 182 20000 0 10236 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 5 rotatespritea 208 182 18000 0 10235 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 6 rotatespritea 208 182 22000 0 10233 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 7 rotatespritea 208 182 25000 0 10232 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 8 rotatespritea 208 182 25000 0 13542 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 9 rotatespritea 208 182 25000 0 19199 0 0 512 -255 0 0 xdim ydim 
		ife ARTIFACTS_LOADOUT[13] 10 rotatespritea 208 182 25000 0 19198 0 0 512 -255 0 0 xdim ydim
		ife ARTIFACTS_LOADOUT[13] 11 rotatespritea 208 182 22000 0 22762 0 0 512 -255 0 0 xdim ydim 		

	ifand player[].got_access 1 rotatespritea 65 190 HALFSIZE 0 16464 0 0 0 -255 0 0 xdim ydim
	ifand player[].got_access 2 rotatespritea 85 190 HALFSIZE 0 16464 0 21 0 -255 0 0 xdim ydim
	ifand player[].got_access 4 rotatespritea 105 190 HALFSIZE 0 16464 0 23 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 1 rotatespritea 125 190 HALFSIZE 0 16464 0 12 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 2 rotatespritea 145 190 HALFSIZE 0 16464 0 14 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 4 rotatespritea 165 190 HALFSIZE 0 16464 0 15 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 8 rotatespritea 185 190 HALFSIZE 0 16464 0 49 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 16 rotatespritea 205 190 HALFSIZE 0 16464 0 10 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 32 rotatespritea 225 190 HALFSIZE 0 16464 0 36 0 -255 0 0 xdim ydim
	ifand ACCESSKEY2 64 rotatespritea 245 190 HALFSIZE 0 16464 0 16 0 -255 0 0 xdim ydim
	
	ifand SWIPECARDS 1 rotatespritea 65 190 HALFSIZE 0 16464 0 0 0 -255 0 0 xdim ydim
	ifand SWIPECARDS 2 rotatespritea 85 190 HALFSIZE 0 16464 0 21 0 -255 0 0 xdim ydim
	ifand SWIPECARDS 4 rotatespritea 105 190 HALFSIZE 0 16464 0 23 0 -255 0 0 xdim ydim
	ifand SWIPE_MASTER 1 rotatespritea 145 190 HALFSIZE 0 16464 DISP_PULSE 21 0 -255 0 0 xdim ydim
	ifand SWIPECARDS 8 rotatespritea 185 190 HALFSIZE 0 16464 0 12 0 -255 0 0 xdim ydim
	ifand SWIPECARDS 16 rotatespritea 205 190 HALFSIZE 0 16464 0 11 0 -255 0 0 xdim ydim
	ifand SWIPECARDS 32 rotatespritea 225 190 HALFSIZE 0 16464 0 49 0 -255 0 0 xdim ydim
	ifand SWIPECARDS 128 rotatespritea 245 190 HALFSIZE 0 16464 0 15 0 -255 0 0 xdim ydim
	
	
	
getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
	{
	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatespritea 238 172 INVENSIZE 0 CMEDIKIT 0 0 513 -255 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatespritea 238 172 INVENSIZE 0 CSTEROIDS 0 0 513 -255 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatespritea 238 172 INVENSIZE 0 CHOLODUKE 0 0 513 -255 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 24
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		getp[].holoduke_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 -1 minitext 317 152 500 0 10 else minitext 317 152 501 0 21
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatespritea 238 172 INVENSIZE 0 CJETPACK 0 0 513 -255 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 minitext 317 152 500 0 10 else minitext 317 152 501 0 21
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatespritea 238 172 INVENSIZE 0 DISP_NVG 0 0 513 -255 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 minitext 317 152 500 0 10 else minitext 317 152 501 0 21
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatespritea 238 172 INVENSIZE 0 CSCUBA 0 0 513 -255 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			rotatesprite 288 186 12384 0 3688 0 0 512 0 0 xdim ydim
			myospal 305 148 3812 20 0 2
			}
			else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
			}
		minitext 317 152 502 0 21
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatespritea 238 172 INVENSIZE 0 CBOOTS 0 0 513 -255 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 2
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 19955 238 182 QUARTERSIZE 0 0 1400 0 2 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		minitext 317 152 502 0 21
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatespritea 238 172 INVENSIZE 0 TOOLBOX_PICKUP 0 0 513 -255 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 11 // ROPE
		{
		rotatespritea 238 172 INVENSIZE 0 17916 0 0 513 -255 0 0 xdim ydim
		}
	}

}

/*
getp[].invdisptime HUD_DISP_TEMP
getp[].inven_icon HUD_DISP_TEMP2
ifn HUD_DISP_TEMP 0
	{
	getuserdef[].color HUD_DISP_PCOLOUR
	ife CHAR 0 ife HUD_DISP_PCOLOUR 0 set HUD_DISP_PCOLOUR 21
	ife CHAR 6 ife HUD_DISP_PCOLOUR 0 set HUD_DISP_PCOLOUR 21
	getp[].firstaid_amount HUD_DISP_TEMP 
	ife HUD_DISP_TEMP 0 rotatesprite 110 150 INVENSIZE 0 CMEDIKIT 0 4 33 0 0 xdim ydim else // MEDIKIT
	rotatesprite 110 150 INVENSIZE 0 CMEDIKIT 0 0 0 0 0 xdim ydim  // MEDIKIT
	ife HUD_DISP_TEMP2 1 rotatesprite 110 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[1] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[1]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[1] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[1]
		rotatespritea 110 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}
	

	getp[].steroids_amount HUD_DISP_TEMP
	ife HUD_DISP_TEMP 0 rotatesprite 130 150 INVENSIZE 0 CSTEROIDS 0 4 33 0 0 xdim ydim else // STEROIDS
	rotatesprite 130 150 INVENSIZE 0 CSTEROIDS 0 0 0 0 0 xdim ydim // STEROIDS
	ife HUD_DISP_TEMP2 2 rotatesprite 130 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[2] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[2]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[2] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[2]
		rotatespritea 130 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}

	getp[].holoduke_amount HUD_DISP_TEMP
	ifl HUD_DISP_TEMP 1 rotatesprite 150 150 INVENSIZE 0 CHOLODUKE 0 4 33 0 0 xdim ydim else // HOLODUKE
	rotatesprite 150 150 INVENSIZE 0 CHOLODUKE 0 0 0 0 0 xdim ydim // HOLODUKE
	ife HUD_DISP_TEMP2 3 rotatesprite 150 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[3] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[3]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[3] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[3]
		rotatespritea 150 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}

	getp[].jetpack_amount HUD_DISP_TEMP
	ife HUD_DISP_TEMP 0 rotatesprite 170 150 INVENSIZE 0 CJETPACK 0 4 33 0 0 xdim ydim else // JETPACK
	rotatesprite 170 150 INVENSIZE 0 CJETPACK 0 0 0 0 0 xdim ydim // JETPACK
	ife HUD_DISP_TEMP2 4 rotatesprite 170 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[4] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[4]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[4] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[4]
		rotatespritea 170 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}

	getp[].heat_amount HUD_DISP_TEMP
	ife HUD_DISP_TEMP 0 rotatesprite 190 150 INVENSIZE 0 CNVG 0 4 33 0 0 xdim ydim else // NVG
	rotatesprite 190 150 INVENSIZE 0 CNVG 0 0 0 0 0 xdim ydim // NVG
	ife HUD_DISP_TEMP2 5 rotatesprite 190 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[5] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[5]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[5] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[5]
		rotatespritea 190 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}

	getp[].scuba_amount HUD_DISP_TEMP
	ife HUD_DISP_TEMP 0 rotatesprite 210 150 INVENSIZE 0 CSCUBA 0 4 33 0 0 xdim ydim else // SCUBA
	rotatesprite 210 150 INVENSIZE 0 CSCUBA 0 0 0 0 0 xdim ydim // SCUBA
	ife AIR_FILTER 1
					{
					rotatesprite 213 153 12384 0 3688 0 0 0 0 0 xdim ydim
					}
	ife HUD_DISP_TEMP2 6 rotatesprite 210 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[6] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[6]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[6] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[6]
		rotatespritea 210 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}

	getp[].boot_amount HUD_DISP_TEMP
	ife HUD_DISP_TEMP 0 rotatesprite 230 150 INVENSIZE 0 CBOOTS 0 4 33 0 0 xdim ydim else // BOOTS
	rotatesprite 230 150 INVENSIZE 0 CBOOTS 0 0 0 0 0 xdim ydim // BOOTS
	ife HUD_DISP_TEMP2 7 rotatesprite 230 150 NNORMALSIZE 0 CIICON 0 HUD_DISP_PCOLOUR 0 0 0 xdim ydim
	
		ifg PICKED_UP_INVEN[7] 0
		{
		set DISP_TEMP4 PICKED_UP_INVEN[7]
		sub DISP_TEMP4 1
		setarray PICKED_UP_INVEN[7] DISP_TEMP4
		set DISP_TEMP3 400
		mulvarvar DISP_TEMP3 PICKED_UP_INVEN[7]
		rotatespritea 230 150 DISP_TEMP3 0 8433 0 0 33 -255 0 0 xdim ydim
		}

	}
*/
	
ifinwater
{
	getp[].airleft HUD_DISP_TEMP2 
	ife player[].scuba_on 0 
		{
		ifg HUD_DISP_TEMP2 351 set HUD_DISP_TEMP3 5196
		else ifg HUD_DISP_TEMP2 312 set HUD_DISP_TEMP3 5197
		else ifg HUD_DISP_TEMP2 273 set HUD_DISP_TEMP3 5198
		else ifg HUD_DISP_TEMP2 234 set HUD_DISP_TEMP3 5199
		else ifg HUD_DISP_TEMP2 195 set HUD_DISP_TEMP3 5200
		else ifg HUD_DISP_TEMP2 156 set HUD_DISP_TEMP3 5201
		else ifg HUD_DISP_TEMP2 117 set HUD_DISP_TEMP3 5202
		else ifg HUD_DISP_TEMP2 78 set HUD_DISP_TEMP3 5203
		else ifg HUD_DISP_TEMP2 39 set HUD_DISP_TEMP3 5204
		else ifg HUD_DISP_TEMP2 0 set HUD_DISP_TEMP3 5205
		else ife HUD_DISP_TEMP2 0 set HUD_DISP_TEMP3 5206
		ife PERSONEL_RESEARCH[17] 2 ifg player[].scuba_amount 0
		rotatesprite 300 10 HALFSIZE 0 HUD_DISP_TEMP3 0 24 512 0 0 xdim ydim
		else rotatesprite 300 10 HALFSIZE 0 HUD_DISP_TEMP3 0 0 512 0 0 xdim ydim
		}	
ifand EGYPT_ARTIFACTS 2 rotatespritea 300 10 INVENSIZE 0 16836 0 0 512 -255 0 0 xdim ydim
}
else ifg OXYGEN_HIT 0 rotatesprite 300 10 HALFSIZE 0 5206 0 8 512 0 0 xdim ydim

ife CHAR 0 // James' HUD stuff
ife HUDON 0
{
ife CURWEAP 9
ifn SPECIALIST_EQUIPMENT[22] 2
ifn SPECIALIST_EQUIPMENT[72] 2
	{
	ifand AMMO_TYPES[CURWEAP] 1
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 explosive_shells 0 10 512 0 0 xdim ydim // AMMO
		rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
		digitalnumber 5139 301 163 ALTMAG 0 10 512 0 0 xdim ydim // AMMO
		}
	else
	ifand AMMO_TYPES[CURWEAP] 4 
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 flechete_shells 0 11 512 0 0 xdim ydim // AMMO
		rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
		digitalnumber 5139 301 163 ALTMAG 0 11 512 0 0 xdim ydim // AMMO
		}
	else
	ifand AMMO_TYPES[CURWEAP] 64 
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 magnum_shells 0 23 512 0 0 xdim ydim // AMMO
		rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
		digitalnumber 5139 301 163 ALTMAG 0 23 512 0 0 xdim ydim // AMMO
		}
	else
	ifand AMMO_TYPES[CURWEAP] 1024 
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 dragon_shells 0 15 512 0 0 xdim ydim // AMMO
		rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
		digitalnumber 5139 301 163 ALTMAG 0 15 512 0 0 xdim ydim // AMMO
		}
	else
		{
		getp[].ammo_amount 2 HUD_DISP_TEMP
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 HUD_DISP_TEMP 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
		digitalnumber 5139 301 163 ALTMAG 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		}
	}
	
ife CURWEAP 2
ife SPECIALIST_EQUIPMENT[53] 2 // using KSG-12
	{
	ifand AMMO_TYPES[15] 1
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 explosive_shells 0 10 512 0 0 xdim ydim // AMMO
		ifl SKILL_LEVEL 4
			{
			rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
			digitalnumber 5139 301 163 SHOTGUNBOXMAG 0 10 512 0 0 xdim ydim // AMMO
			}
		}
	else
	ifand AMMO_TYPES[15] 4 
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 flechete_shells 0 11 512 0 0 xdim ydim // AMMO
		ifl SKILL_LEVEL 4
			{
			rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
			digitalnumber 5139 301 163 SHOTGUNBOXMAG 0 11 512 0 0 xdim ydim // AMMO
			}
		}
	else
	ifand AMMO_TYPES[15] 64 
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 magnum_shells 0 23 512 0 0 xdim ydim // AMMO
		ifl SKILL_LEVEL 4
			{
			rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
			digitalnumber 5139 301 163 SHOTGUNBOXMAG 0 23 512 0 0 xdim ydim // AMMO
			}
		}
	else
	ifand AMMO_TYPES[15] 1024 
		{
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 dragon_shells 0 15 512 0 0 xdim ydim // AMMO
		ifl SKILL_LEVEL 4
			{
			rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
			digitalnumber 5139 301 163 SHOTGUNBOXMAG 0 15 512 0 0 xdim ydim // AMMO
			}
		}
	else
		{
		getp[].ammo_amount 2 HUD_DISP_TEMP
		rotatesprite 301 185 NNORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO BOX
		digitalnumber 5139 301 191 HUD_DISP_TEMP 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
		ifl SKILL_LEVEL 4
			{
			rotatesprite 301 157 NORMALSIZE 0 5359 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // Magazine
			digitalnumber 5139 301 163 SHOTGUNBOXMAG 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim // AMMO
			}
		}
	}

getp[].got_access HUD_DISP_TEMP
ifand HUD_DISP_TEMP 1 myospal 10 197 5346 0 256 0
ifand HUD_DISP_TEMP 2 myospal 14 197 5346 0 256 21
ifand HUD_DISP_TEMP 4 myospal 18 197 5346 0 256 23
ifand ACCESSKEY2 1 myospal 22 197 5346 0 256 12
ifand ACCESSKEY2 2 myospal 26 197 5346 0 256 11
ifand ACCESSKEY2 4 myospal 30 197 5346 0 256 15
ifand ACCESSKEY2 8 myospal 34 197 5346 0 256 49
ifand ACCESSKEY2 16 myospal 38 197 5346 0 256 10
ifand ACCESSKEY2 32 myospal 42 197 5346 0 256 36
ifand ACCESSKEY2 64 myospal 46 197 5346 0 256 16


ifg PARMOUR 0
	{
	ifg PARMOUR 99 myospal 300 83 5371 2 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 95 myospal 300 83 3259 2 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 90 myospal 300 87 5371 4 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 85 myospal 300 87 3259 4 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 80 myospal 300 91 5371 6 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 75 myospal 300 91 3259 6 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 70 myospal 300 95 5371 8 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 65 myospal 300 95 3259 8 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 60 myospal 300 99 5371 10 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 55 myospal 300 99 3259 10 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 50 myospal 300 103 5371 12 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 45 myospal 300 103 3259 12 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 40 myospal 300 107 5371 14 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 35 myospal 300 107 3259 14 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 30 myospal 300 111 5371 16 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 25 myospal 300 111 3259 16 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 20 myospal 300 115 5371 18 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 15 myospal 300 115 3259 18 512 HUD_DISP_PCOLOUR
	
	ifg PARMOUR 10 myospal 300 119 5371 20 512 HUD_DISP_PCOLOUR
	else ifg PARMOUR 5 myospal 300 119 3259 20 512 HUD_DISP_PCOLOUR
	
	rotatesprite 300 100 NNORMALSIZE 0 5370 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim
	}
ifg PARMOUR 100
	{
	ife HUD_DISP_PCOLOUR 21 set HUD_DISP_TEMP 3 
	else ife HUD_DISP_PCOLOUR 10 set HUD_DISP_TEMP 16 
	else set HUD_DISP_TEMP 21
	ifg PARMOUR 199 myospal 300 83 5371 2 512 HUD_DISP_TEMP
	ifg PARMOUR 190 myospal 300 87 5371 4 512 HUD_DISP_TEMP
	ifg PARMOUR 180 myospal 300 91 5371 6 512 HUD_DISP_TEMP
	ifg PARMOUR 170 myospal 300 95 5371 8 512 HUD_DISP_TEMP
	ifg PARMOUR 160 myospal 300 99 5371 10 512 HUD_DISP_TEMP
	ifg PARMOUR 150 myospal 300 103 5371 12 512 HUD_DISP_TEMP
	ifg PARMOUR 140 myospal 300 107 5371 14 512 HUD_DISP_TEMP
	ifg PARMOUR 130 myospal 300 111 5371 16 512 HUD_DISP_TEMP
	ifg PARMOUR 120 myospal 300 115 5371 18 512 HUD_DISP_TEMP
	ifg PARMOUR 110 myospal 300 119 5371 20 512 HUD_DISP_TEMP
	}
ifg P_SPIRIT_ARMOUR 0
	{
	ife PARMOUR 0 ife P_FIRE_ARMOUR 0 rotatesprite 300 100 NNORMALSIZE 0 5370 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim
	ifg P_SPIRIT_ARMOUR 10 myospal 291 119 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 20 myospal 291 115 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 30 myospal 291 111 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 40 myospal 291 107 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 50 myospal 291 103 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 60 myospal 291 99 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 70 myospal 291 95 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 80 myospal 291 91 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 90 myospal 291 87 5369 0 512 11
	ifg P_SPIRIT_ARMOUR 99 myospal 291 83 5369 0 512 11
	
	ifg P_SPIRIT_ARMOUR 110 myospal 291 119 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 120 myospal 291 115 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 130 myospal 291 111 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 140 myospal 291 107 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 150 myospal 291 103 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 160 myospal 291 99 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 170 myospal 291 95 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 180 myospal 291 91 5369 0 512 112
	ifg P_SPIRIT_ARMOUR 190 myospal 291 87 5369 0 512 112
	}
ifg P_FIRE_ARMOUR 0
	{
	ife PARMOUR 0 ife P_SPIRIT_ARMOUR 0 rotatesprite 300 100 NNORMALSIZE 0 5370 0 HUD_DISP_PCOLOUR 512 0 0 xdim ydim
	ifg P_FIRE_ARMOUR 10 myospal 309 119 5369 0 516 10
	ifg P_FIRE_ARMOUR 20 myospal 309 115 5369 0 516 10
	ifg P_FIRE_ARMOUR 30 myospal 309 111 5369 0 516 10
	ifg P_FIRE_ARMOUR 40 myospal 309 107 5369 0 516 10
	ifg P_FIRE_ARMOUR 50 myospal 309 103 5369 0 516 10
	ifg P_FIRE_ARMOUR 60 myospal 309 99 5369 0 516 10
	ifg P_FIRE_ARMOUR 70 myospal 309 95 5369 0 516 10
	ifg P_FIRE_ARMOUR 80 myospal 309 91 5369 0 516 10
	ifg P_FIRE_ARMOUR 90 myospal 309 87 5369 0 516 10
	ifg P_FIRE_ARMOUR 99 myospal 309 83 5369 0 516 10
	
	ifg P_FIRE_ARMOUR 110 myospal 309 119 5369 0 516 38
	ifg P_FIRE_ARMOUR 120 myospal 309 115 5369 0 516 38
	ifg P_FIRE_ARMOUR 130 myospal 309 111 5369 0 516 38
	ifg P_FIRE_ARMOUR 140 myospal 309 107 5369 0 516 38
	ifg P_FIRE_ARMOUR 150 myospal 309 103 5369 0 516 38
	ifg P_FIRE_ARMOUR 160 myospal 309 99 5369 0 516 38
	ifg P_FIRE_ARMOUR 170 myospal 309 95 5369 0 516 38
	ifg P_FIRE_ARMOUR 180 myospal 309 91 5369 0 516 38
	ifg P_FIRE_ARMOUR 190 myospal 309 87 5369 0 516 38
	}
	
ifg P_HAS_SHIELD 0
ifg P_ENERGYSHIELD 0
	{
	
	ifg P_ENERGYSHIELD 99 myospal 295 83 5195 0 512 0
	else ifg P_ENERGYSHIELD 95 myospal 297 83 5195 10 512 0
	
	ifg P_ENERGYSHIELD 90 myospal 295 87 5195 0 512 0
	else ifg P_ENERGYSHIELD 85 myospal 297 87 5195 10 512 0
	
	ifg P_ENERGYSHIELD 80 myospal 295 91 5195 0 512 0
	else ifg P_ENERGYSHIELD 75 myospal 297 91 5195 10 512 0
	
	ifg P_ENERGYSHIELD 70 myospal 295 95 5195 0 512 0
	else ifg P_ENERGYSHIELD 65 myospal 297 95 5195 10 512 0
	
	ifg P_ENERGYSHIELD 60 myospal 295 99 5195 0 512 0
	else ifg P_ENERGYSHIELD 55 myospal 297 99 5195 10 512 0
	
	ifg P_ENERGYSHIELD 50 myospal 295 103 5195 0 512 0
	else ifg P_ENERGYSHIELD 45 myospal 297 103 5195 10 512 0
	
	ifg P_ENERGYSHIELD 40 myospal 295 107 5195 0 512 0
	else ifg P_ENERGYSHIELD 35 myospal 297 107 5195 10 512 0
	
	ifg P_ENERGYSHIELD 30 myospal 295 111 5195 0 512 0
	else ifg P_ENERGYSHIELD 25 myospal 297 111 5195 10 512 0
	
	ifg P_ENERGYSHIELD 20 myospal 295 115 5195 0 512 0
	else ifg P_ENERGYSHIELD 15 myospal 297 115 5195 10 512 0
	
	ifg P_ENERGYSHIELD 10 myospal 295 119 5195 0 512 0
	else ifg P_ENERGYSHIELD 5 myospal 297 119 5195 10 512 0
	
	}
	
}
else
ife CHAR 11
ife HUDON 0 // MAARTEN'S HUD
	{
	switch CURWEAP
	case 0
		ifn temp_weapon 0
		{
		ife temp_weapon 11
		 ifand AMMO_TYPES[CURWEAP] 2
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 27 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 silver_ammo 0 27 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 13
		 ifand AMMO_TYPES[CURWEAP] 16
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 27 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 silver_bolts 0 27 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 12
		 ifand AMMO_TYPES[CURWEAP] 8
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 1 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 tesla_ammo 0 1 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 1
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 2 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 explosive_shells 0 2 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 10
		 ifand AMMO_TYPES[CURWEAP] 1
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 2 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 explosive_shells 0 2 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 4 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 8 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 flechete_shells 0 8 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 64 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 8 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 magnum_shells 0 7 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 6
		 ifand AMMO_TYPES[CURWEAP] 1024 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 8 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 dragon_shells 0 19 1024 0 0 xdim ydim
			}
			else
		ife temp_weapon 10
		 ifand AMMO_TYPES[CURWEAP] 4 
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 8 1024 0 0 xdim ydim
			digitalnumber 6155 37 145 flechete_shells 0 8 1024 0 0 xdim ydim
			}
			else
			{
			rotatesprite 35 145 NNORMALSIZE 0 3823 0 0 1024 0 0 xdim ydim
			getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
			digitalnumber 6155 37 145 HUD_DISP_PAMMO 0 0 1024 0 0 xdim ydim
			}
		}
	break
	case 1
	case 9
	case 10
	break
	case 2
		rotatesprite 35 145 NNORMALSIZE 0 3823 0 0 1024 0 0 xdim ydim
		ifand AMMO_TYPES[CURWEAP] 16 set HUD_DISP_PAMMO silver_bolts else
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		digitalnumber 6155 37 145 HUD_DISP_PAMMO 0 0 1024 0 0 xdim ydim
	break
	case 3
	case 4
	case 5
	case 7
	case 8
	case 6
	case 11
		rotatesprite 35 145 NNORMALSIZE 0 3823 0 0 1024 0 0 xdim ydim
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		digitalnumber 6155 37 145 HUD_DISP_PAMMO 0 0 1024 0 0 xdim ydim
	break
	endswitch
	rotatesprite 160 176 NNORMALSIZE 0 12005 0 0 1024 0 0 xdim ydim // HUD

	
	ifg PHEALTH PMAXHEALTH ife HUD_DISP_TEMP4 0 set HUD_DISP_TEMP4 10
	ifg HUD_DISP_TEMP4 0 sub HUD_DISP_TEMP4 1 ifg HUD_DISP_TEMP4 10 set HUD_DISP_TEMP4 10
	
	digitalnumber 6155 37 167 PHEALTH HUD_DISP_TEMP4 0 1024 0 0 xdim ydim
	digitalnumber 3087 50 185 PARMOUR 0 12 1024 0 0 xdim ydim
	
	ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 37 167 8192 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	
	
	getp[].got_access HUD_DISP_TEMP
	ifand HUD_DISP_TEMP 1 rotatesprite 268 185 NNORMALSIZE 0 2471 0 0 1024 0 0 xdim ydim
	ifand HUD_DISP_TEMP 2 rotatesprite 286 185 NNORMALSIZE 0 2471 0 21 1024 0 0 xdim ydim
	ifand HUD_DISP_TEMP 4 rotatesprite 304 185 NNORMALSIZE 0 2471 0 23 1024 0 0 xdim ydim
	ifand ACCESSKEY2 1 rotatesprite 269 185 NNORMALSIZE 0 2471 0 12 1024 0 0 xdim ydim
	ifand ACCESSKEY2 2 rotatesprite 287 185 NNORMALSIZE 0 2471 0 11 1024 0 0 xdim ydim
	ifand ACCESSKEY2 4 rotatesprite 305 185 NNORMALSIZE 0 2471 0 15 1024 0 0 xdim ydim
	ifand ACCESSKEY2 8 rotatesprite 267 185 NNORMALSIZE 0 2471 0 49 1024 0 0 xdim ydim
	ifand ACCESSKEY2 16 rotatesprite 285 185 NNORMALSIZE 0 2471 0 10 1024 0 0 xdim ydim
	ifand ACCESSKEY2 32 rotatesprite 303 185 NNORMALSIZE 0 2471 0 22 1024 0 0 xdim ydim
	ifand ACCESSKEY2 64 rotatesprite 270 185 NNORMALSIZE 0 2471 0 16 1024 0 0 xdim ydim
	
	ifg P_SPIRIT_ARMOUR 0
		{
		rotatesprite 305 165 6384 0 SPIRIT_ARMOUR 0 0 1024 0 0 xdim ydim
		digitalnumber THREEBYFIVE 305 168 P_SPIRIT_ARMOUR 20 1 1024 0 0 xdim ydim
		}
		
	ifg P_FIRE_ARMOUR 0
		{
		rotatesprite 305 175 8384 0 FIRE_ARMOUR 0 0 1024 0 0 xdim ydim
		digitalnumber THREEBYFIVE 305 178 P_FIRE_ARMOUR 20 2 1024 0 0 xdim ydim
		}

getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
	{
	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatesprite 285 170 INVENSIZE 0 CMEDIKIT 0 0 512 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatesprite 285 170 INVENSIZE 0 CSTEROIDS 0 0 512 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatesprite 285 170 INVENSIZE 0 CHOLODUKE 0 0 512 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 24
		digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
		getp[].holoduke_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 -1 
		gametextz 17158 535 164 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 535 164 501 0 21 512 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatesprite 285 170 INVENSIZE 0 CJETPACK 0 0 512 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 16
		digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametextz 17158 535 164 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 535 164 501 0 21 512 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatesprite 285 170 INVENSIZE 0 DISP_NVG 0 0 512 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametextz 17158 535 164 500 0 0 512 0 0 xdim ydim 55536
		else gametextz 17158 535 164 501 0 21 512 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatesprite 285 170 INVENSIZE 0 CSCUBA 0 0 512 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			myospal 270 175 3812 20 0 2
			rotatesprite 288 173 12384 0 3688 0 0 512 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
			}
		gametextz 17158 535 164 502 0 11 512 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatesprite 285 170 INVENSIZE 0 CBOOTS 0 0 512 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		digitalnumber THREEBYFIVE 270 175 HUD_DISP_TEMP2 20 2 512 0 0 xdim ydim
		gametextz 17158 535 164 502 0 11 512 0 0 xdim ydim 55536
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatesprite 285 170 INVENSIZE 0 TOOLBOX_PICKUP 0 0 512 0 0 xdim ydim
		gametextz 17158 535 164 509 0 0 512 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 11 // ROPE
		{
		rotatesprite 285 170 20000 0 17916 0 0 512 0 0 xdim ydim
		gametextz 17158 535 164 509 0 0 512 0 0 xdim ydim 55536
		}
	}
}
else 
ife CHAR 14
ife HUDON 0 // Snowfall's hud
ifn TIMEZONE 6
{
qsprintf 1400 1401 PHEALTH

ifg PHEALTH PMAXHEALTH set HUD_DISP_TEMP4 DISP_PULSE else set HUD_DISP_TEMP4 0

screentext 20777 40 172 NORMALSIZE 0 0 1400 HUD_DISP_TEMP4 0 256 -255 5 16 0 0 524290 0 0 xdim ydim 
screentext 20787 40 172 NORMALSIZE 0 0 1400 HUD_DISP_TEMP4 0 256 0 5 16 0 0 524290 0 0 xdim ydim 

		ifg CURSED 0
		{
		add HUD_DISP_TEMP5 1
		ifg HUD_DISP_TEMP5 2048 set HUD_DISP_TEMP5 0
		set HUD_DISP_TEMP6 CURSED
		mulvar HUD_DISP_TEMP6 -1
		add HUD_DISP_TEMP6 30
		rotatespritea 40 172 13000 HUD_DISP_TEMP5 22772 HUD_DISP_TEMP6 18 256 -255 0 0 xdim ydim
		}
	

ifg PARMOUR 0
	{
	qsprintf 1400 1401 PARMOUR
	screentext 20777 40 152 NORMALSIZE 0 0 1400 0 12 256 -255 5 16 0 0 524290 0 0 xdim ydim 
	screentext 20787 40 152 NORMALSIZE 0 0 1400 0 12 256 0 5 16 0 0 524290 0 0 xdim ydim 
	}
	
ifg P_HAS_SHIELD 0
	{
	qsprintf 1400 1401 P_ENERGYSHIELD
	screentext 20777 35 132 NORMALSIZE 0 0 1400 0 23 256 -255 5 16 0 0 524290 0 0 xdim ydim 
	screentext 20787 35 132 NORMALSIZE 0 0 1400 0 12 256 0 5 16 0 0 524290 0 0 xdim ydim 
	}


	ife inspace 1
		{
		set HUD_DISP_TEMP LIFE_SUPPORT
		divvar HUD_DISP_TEMP 30
		qsprintf 1400 1401 HUD_DISP_TEMP
		screentext 20777 40 42 NORMALSIZE 0 0 1400 0 12 256 -255 5 16 0 0 524290 0 0 xdim ydim 		
		screentext 20787 40 42 NORMALSIZE 0 0 1400 0 12 256 0 5 16 0 0 524290 0 0 xdim ydim 
		rotatespritea 40 46 HALFSIZE 0 22448 0 0 0 -255 0 0 xdim ydim 
		}

	
	ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 1 
		{
		set HUD_DISP_TEMP 2
		qsprintf 1400 1401 explosive_shells
		}
	else ifand GUN_AMMO_TYPES 2  ifand AMMO_TYPES[CURWEAP] 2 
		{
		set HUD_DISP_TEMP 12
		qsprintf 1400 1401 silver_ammo
		}
	else ifand GUN_AMMO_TYPES 1 ifand AMMO_TYPES[CURWEAP] 4 
		{
		set HUD_DISP_TEMP 11
		qsprintf 1400 1401 flechete_shells
		}
	else ifand GUN_AMMO_TYPES 8 ifand AMMO_TYPES[CURWEAP] 8 
		{
		set HUD_DISP_TEMP 1
		qsprintf 1400 1401 tesla_ammo
		}
	else ifand GUN_AMMO_TYPES 16 ifand AMMO_TYPES[CURWEAP] 16 
		{
		set HUD_DISP_TEMP 12
		qsprintf 1400 1401 silver_bolts 
		}
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 64 
		{
		set HUD_DISP_TEMP 23
		qsprintf 1400 1401 magnum_shells
		}
	else ifand GUN_AMMO_TYPES 4 ifand AMMO_TYPES[CURWEAP] 1024 
		{
		set HUD_DISP_TEMP 15
		qsprintf 1400 1401 dragon_shells
		}
	else ifand GUN_AMMO_TYPES 2048
			{
			ifand AMMO_TYPES[CURWEAP] 32 { set HUD_DISP_TEMP 2 qsprintf 1400 1401 fortymm_shells }
			else ifand AMMO_TYPES[CURWEAP] 128 { set HUD_DISP_TEMP 7 qsprintf 1400 1401 fortymm_MIA_shells }
			else ifand AMMO_TYPES[CURWEAP] 256 { set HUD_DISP_TEMP 8 qsprintf 1400 1401 fortymm_plasma }
			else { set HUD_DISP_TEMP 0 qsprintf 1400 1401 fortymm_grenades }
			}
	else ifand GUN_AMMO_TYPES 4096
			{
			ifand AMMO_TYPES[CURWEAP] 512 { set HUD_DISP_TEMP 15 qsprintf 1400 1401 fortymm_slug }
			else ifand AMMO_TYPES[CURWEAP] 2048 { set HUD_DISP_TEMP 16 qsprintf 1400 1401 fortymm_electro }
			else ifand AMMO_TYPES[CURWEAP] 4096 { set HUD_DISP_TEMP 23 qsprintf 1400 1401 fortymm_cryo }
			else { set HUD_DISP_TEMP 0 qsprintf 1400 1401 fortymm_caseless }	
			}
	else 
		{
		ife currentweapon 10
			{
			getp[].ammo_amount 5 HUD_DISP_PAMMO
			}
		else
		getp[].ammo_amount CURWEAP HUD_DISP_PAMMO
		set HUD_DISP_TEMP 0
		qsprintf 1400 1401 HUD_DISP_PAMMO
		}
		
		screentext 20777 280 172 NORMALSIZE 0 0 1400 0 HUD_DISP_TEMP 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 280 172 NORMALSIZE 0 0 1400 0 0 512 0 5 16 0 0 524290 0 0 xdim ydim 

	
	ifn GUNMAG -1 ifl SKILL_LEVEL 4 
		{
		qsprintf 1400 1401 GUNMAG
		screentext 20777 280 152 NORMALSIZE 0 0 1400 0 12 512 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 280 152 NORMALSIZE 0 0 1400 0 12 512 0 5 16 0 0 524290 0 0 xdim ydim 
		}

	ifg P_SPIRIT_ARMOUR 0 
		{ 
		qsprintf 1400 1401 P_SPIRIT_ARMOUR
		screentext 20777 22 122 HALFSIZE 0 0 1400 0 8 256 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
	ifg P_FIRE_ARMOUR 0 
		{
		qsprintf 1400 1401 P_FIRE_ARMOUR
		screentext 20777 22 134 HALFSIZE 0 0 1400 0 2 256 -255 5 16 0 0 524290 0 0 xdim ydim 
		}
		
	ifand player[].got_access 1 { rotatesprite 134 8 NNORMALSIZE 0 2471 0 0 0 0 0 xdim ydim }
	ifand player[].got_access 2 { rotatesprite 137 8 NNORMALSIZE 0 2471 0 21 0 0 0 xdim ydim }
	ifand player[].got_access 4 { rotatesprite 140 8 NNORMALSIZE 0 2471 0 23 0 0 0 xdim ydim }
	ifand ACCESSKEY2 1 { rotatesprite 143 8 NNORMALSIZE 0 2471 0 12 0 0 0 xdim ydim }
	ifand ACCESSKEY2 2 { rotatesprite 146 8 NNORMALSIZE 0 2471 0 11 0 0 0 xdim ydim }
	ifand ACCESSKEY2 4 { rotatesprite 149 8 NNORMALSIZE 0 2471 0 15 0 0 0 xdim ydim }
	ifand ACCESSKEY2 8 { rotatesprite 152 8 NNORMALSIZE 0 2471 0 49 0 0 0 xdim ydim }
	ifand ACCESSKEY2 16 { rotatesprite 155 8 NNORMALSIZE 0 2471 0 10 0 0 0 xdim ydim }
	ifand ACCESSKEY2 32 { rotatesprite 158 8 NNORMALSIZE 0 2471 0 36 0 0 0 xdim ydim }
	ifand ACCESSKEY2 64 { rotatesprite 161 8 NNORMALSIZE 0 2471 0 16 0 0 0 xdim ydim }
	
getp[].inven_icon HUD_DISP_TEMP
	ifn HUD_DISP_TEMP 0
	{
	ife HUD_DISP_TEMP 1 // MEDKIT
		{
		rotatespritea 227 170 INVENSIZE 0 CMEDIKIT 0 0 0 -255 0 0 xdim ydim
		getp[].firstaid_amount HUD_DISP_TEMP2
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
		}
	ife HUD_DISP_TEMP 2 // STEROIDS
		{
		rotatespritea 227 170 INVENSIZE 0 CSTEROIDS 0 0 0 -255 0 0 xdim ydim
		getp[].steroids_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
		}
	ife HUD_DISP_TEMP 3 // HOLODUKE
		{
		rotatespritea 227 170 INVENSIZE 0 CHOLODUKE 0 0 0 -255 0 0 xdim ydim
		getp[].holoduke_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 24
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
		getp[].holoduke_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 -1 
		gametextz 17158 487 175 500 0 0 0 0 0 xdim ydim 55536
		else gametextz 17158 487 175 501 0 21 0 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 4 // JETPACK
		{
		rotatespritea 227 170 INVENSIZE 0 CJETPACK 0 0 0 -255 0 0 xdim ydim
		getp[].jetpack_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 32
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
		getp[].jetpack_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametextz 17158 487 175 500 0 0 0 0 0 xdim ydim 55536
		else gametextz 17158 487 175 501 0 21 0 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 5 // NIGHT VISION GOGGLES
		{
		rotatespritea 227 170 INVENSIZE 0 DISP_NVG 0 0 0 -255 0 0 xdim ydim
		getp[].heat_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 48
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
		getp[].heat_on HUD_DISP_TEMP2
		ifn HUD_DISP_TEMP2 0 gametextz 17158 487 175 500 0 0 0 0 0 xdim ydim 55536
		else gametextz 17158 487 175 501 0 21 0 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 6 // SCUBA GEAR
		{
		rotatespritea 227 170 INVENSIZE 0 CSCUBA 0 0 0 -255 0 0 xdim ydim
		ife AIR_FILTER 1 
			{
			myospal 270 175 3812 20 0 2
			rotatesprite 288 173 12384 0 3688 0 0 512 0 0 xdim ydim
			}
		else
			{
			getp[].scuba_amount HUD_DISP_TEMP2
			divvar HUD_DISP_TEMP2 64
			qsprintf 1400 1401 HUD_DISP_TEMP2
			screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
			screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
			}
		gametextz 17158 487 175 502 0 11 0 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 7 // BOOTS
		{
		rotatespritea 227 170 INVENSIZE 0 CBOOTS 0 0 0 -255 0 0 xdim ydim
		getp[].boot_amount HUD_DISP_TEMP2
		divvar HUD_DISP_TEMP2 4
		qsprintf 1400 1401 HUD_DISP_TEMP2
		screentext 20777 227 175 HALFSIZE 0 0 1400 0 12 0 -255 5 16 0 0 524290 0 0 xdim ydim 
		screentext 20787 227 175 HALFSIZE 0 0 1400 0 12 0 0 5 16 0 0 524290 0 0 xdim ydim 
		gametextz 17158 487 175 502 0 11 0 0 0 xdim ydim 55536
		}

	ife HUD_DISP_TEMP 10 // TOOLBOX
		{
		rotatespritea 227 170 INVENSIZE 0 TOOLBOX_PICKUP 0 0 0 -255 0 0 xdim ydim
		gametextz 17158 487 175 509 0 0 0 0 0 xdim ydim 55536
		}
	ife HUD_DISP_TEMP 11 // ROPE
		{
		rotatespritea 227 170 INVENSIZE 0 17916 0 0 0 -255 0 0 xdim ydim
		gametextz 17158 487 175 509 0 0 0 0 0 xdim ydim 55536
		}
	}
		

}

ends


